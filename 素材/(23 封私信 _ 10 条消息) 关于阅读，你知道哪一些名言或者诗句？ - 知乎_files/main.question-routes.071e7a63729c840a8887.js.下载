(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1019:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n(21),r=n.n(i),o=n(25),a=n.n(o),c=n(23),s=n.n(c),l=n(27),u=n.n(l),d=n(14),b=n.n(d),h=n(53),f=n.n(h),p=n(0),m=n(13),v=n.n(m),O=n(36),j=n(7);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=b()(e);if(t){var r=b()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var y=function(e){s()(n,e);var t=g(n);function n(){var e;r()(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(){var t=e.props;(0,t.onSelect)(t.page)},e}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.isCurrent,i=e.className;return Object(j.g)(O.c,{preset:O.b.Plain,className:v()("PaginationButton",{"PaginationButton--current":n},i),onClick:this.handleClick,disabled:n},t)}}]),n}(p.Component);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=b()(e);if(t){var r=b()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:t},(function(t,n){return n+e}))},k=function(e){s()(n,e);var t=w(n);function n(){return r()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){var e,t=this.props,n=t.onSelect,i=t.className,r=t.clickCallback,o=this.props.current,a=this.props.total,c=r&&(e=r,function(){e.apply(void 0,arguments)})||n,s=function(e,t){var n="...";return t<=5?C(1,t):e>t-3?[1,n].concat(f()(C(t-3,3)),[t]):e<=3?[1].concat(f()(C(2,3)),[n,t]):[1,n].concat(f()(C(e-Math.floor(1.5),3)),[n,t])}(o,a);return Object(j.g)("div",{className:v()("Pagination",i)},o>1&&o<=a&&Object(j.g)(y,{className:"PaginationButton-prev",onSelect:c,text:"上一页",page:o-1}),s.map((function(e,t){return"number"==typeof e?Object(j.g)(y,{onSelect:c,text:e,page:e,key:t,isCurrent:o===e}):Object(j.g)("button",{disabled:!0,key:t,className:"PaginationButton PaginationButton--ellipsis"},e)})),o>0&&o<a&&Object(j.g)(y,{className:"PaginationButton-next",onSelect:c,text:"下一页",page:o+1}))}}]),n}(p.Component);k.defaultProps={current:1,total:1,onSelect:function(){}}},1033:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(15),r=n(16),o=n(17),a=n(18),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),b=n(1019),h=n(12),f=n(5);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=p(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.page,i=e.prePage,r=e.onLoad,o=e.isNextLoaded;t||r(Object(f.c)(n),i),o||r(Object(f.c)(n+1),i)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isFetching,n=e.isDrained,i=e.isNextLoaded,r=e.page,o=e.prePage,a=e.onLoad,c=e.total;n||t||a(Object(f.c)(r),o),!i&&r<c&&r!==this.props.page&&a(Object(f.c)(r+1),o)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.total,i=e.page,r=e.onPaginationClick,o=e.isFetching,a=e.placeholder;return Object(s.c)("div",{children:[t,o&&a,n>1&&Object(s.b)(b.a,{current:i,total:n,clickCallback:r})]})}}]),n}(d.Component);m.propTypes={isFetching:u.a.bool.isRequired,isDrained:u.a.bool.isRequired,onLoad:u.a.func.isRequired,total:u.a.number,page:u.a.number,prePage:u.a.number,placeholder:u.a.node,onPaginationClick:u.a.func.isRequired,isNextLoaded:u.a.bool},m.defaultProps={prePage:h.b,page:1}},1063:function(e,t,n){"use strict";var i=n(15),r=n(16),o=n(17),a=n(18),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),b=n(24),h=n(13),f=n.n(h),p=n(1360),m=n(36),v=n(908),O=n(288),j=n(77),g=n(884),y=n(35),w=n(29),C=n(983),k=n(30);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var A=function(e){Object(o.a)(n,e);var t=x(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={modalShown:!1},e.handleSendMessage=function(){var t=e.props,n=t.onModalOpen,i=t.user.allowMessage,r=t.dispatch,o=t.doNotCheckAllowMessageSetting;i||void 0===i&&o?(e.setState({modalShown:!0}),n&&n()):r(Object(w.h)(k.V.blocked,"red")),y.a.trackEvent(Object(j.a)(e),{action:"Message",element:"Button",is_intent:!0})},e.handleCloseModal=function(){var t=e.props.onModalClose;e.setState({modalShown:!1}),t&&t()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.preset,i=e.color,r=e.icon,o=e.label,a=e.className,c=e.tooltip,l=e.tooltipPreset,u=this.state.modalShown,d="3d198a56310c02c4a83efb9f4a4c027e"===t.id;return Object(s.c)(s.a,{children:[Object(s.b)(m.c,{preset:n,color:i,className:a,icon:r,label:o,onClick:this.context.authRequired(this.handleSendMessage,d?k.X.serviceAccountMessage:k.X.message),"data-tooltip":c,"aria-label":c,"data-tooltip-preset":l}),Object(s.b)(C.a,{memberHashId:t.id,handleCloseModal:this.handleCloseModal,isModalShow:u})]})}}]),n}(d.Component);A.propTypes={onModalOpen:u.a.func,onModalClose:u.a.func},A.defaultProps={preset:"outline",color:"grey",icon:g.a,label:"发私信",doNotCheckAllowMessageSetting:!1},A.contextTypes={authRequired:u.a.func};var R=Object(b.connect)()(A),S=n(140);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var T=function(e){Object(o.a)(n,e);var t=N(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={reportModalShown:!1},e.handleShieldUser=function(){var t=e.props,n=t.user.urlToken,i=t.updateUserBlocking,r=t.showNotification;i(n,!1).then((function(){return r("屏蔽已取消")}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,i=t.user,r=i.urlToken,o=i.isBlocking,a=i.isOrg,c=t.canShowMutualFollowStatus,l=t.className,u=t.buttonClassName,d=t.onModalOpen,b=t.onModalClose,h=this.context.authRequired,j=this.state.reportModalShown,g=f()("MemberButtonGroup",l);return o?Object(s.c)("div",{className:g,children:[Object(s.c)(m.c,{className:u,preset:"primary",color:"red",onClick:this.handleShieldUser,children:[Object(s.b)(p.a,{center:!0,text:!0})," 已屏蔽"]}),!a&&Object(s.c)(m.c,{className:u,onClick:h((function(){e.setState({reportModalShown:!0}),d&&d()}),k.X.report),children:["举报用户",Object(s.b)(O.a,{shown:j,onClose:function(){e.setState({reportModalShown:!1}),b&&b()},type:"member",urlToken:r,zaEnabled:!0})]})]}):Object(s.c)("div",{className:g,children:[Object(s.b)(v.a,{id:r,type:n.type,gender:n.gender,isFollowing:n.isFollowing,isFollowed:n.isFollowed,canShowMutualFollowStatus:c,className:u,preset:v.a.PRESETS.primary}),Object(s.b)(R,{user:n,className:u,onModalOpen:d,onModalClose:b})]})}}]),n}(d.Component);T.contextTypes={authRequired:u.a.func},T.propTypes={user:u.a.object.isRequired,buttonClassName:u.a.string,onModalOpen:u.a.func,onModalClose:u.a.func};t.a=Object(b.connect)(null,{updateUserBlocking:S.o,showNotification:w.h})(T)},1102:function(e,t,n){"use strict";var i=n(0),r=n(41),o=Object(i.createContext)({}),a=n(116);t.a=Object(r.withRouter)((function(e){var t=e.to,n=e.router,r=Object(i.useContext)(o);return r.url||(r.url=t),Object(i.useEffect)((function(){Object(a.isAbsoluteUrl)(t)?window.location.replace(t):n.replace(t)}),[n,t]),null}))},1141:function(e,t,n){"use strict";var i=n(33),r=n(15),o=n(16),a=n(17),c=n(18),s=n(9),l=n(1),u=n(0),d=n(13),b=n.n(d),h=n(41),f=n(36),p=["to","className","children"];function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(e){Object(a.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.className,r=e.children,o=Object(i.default)(e,p),a=b()("QuestionMainAction",n);return t?Object(l.b)(h.Link,Object.assign(Object.assign({to:t,className:a},o),{},{children:r})):Object(l.b)(f.c,Object.assign(Object.assign({className:a},o),{},{children:r}))}}]),n}(u.Component);t.a=v},1176:function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var i=n(49),r=n(1),o=n(0),a=n(64),c=n.n(a),s=Object(o.createContext)([!0,c.a,c.a]);s.displayName="DisplayPriorityContext";var l=function(){return Object(o.useContext)(s)},u=function(e){var t=e.children,n=e.readyStatus,i=e.shownStatus,a=e.index,c=e.setReadyStatusList,l=Object(o.useRef)(n);Object(o.useEffect)((function(){l.current=n}),[n]);var u=Object(o.useCallback)((function(){"pending"===l.current&&c((function(e){return e.map((function(e,t){return t===a?"resolved":e}))}))}),[c,a]),d=Object(o.useCallback)((function(){"pending"===l.current&&c((function(e){return e.map((function(e,t){return t===a?"rejected":e}))}))}),[c,a]),b=Object(o.useMemo)((function(){return[i,u,d]}),[i,u,d]);return Object(r.b)(s.Provider,{value:b,children:t})};t.a=function(e){var t=e.children,n=Object(o.useState)((function(){return o.Children.map(t,(function(){return"pending"}))})),a=Object(i.a)(n,2),c=a[0],s=a[1],l=Object(o.useMemo)((function(){var e=!1;return c.map((function(t){return!e&&("rejected"!==t&&(e=!0,"pending"!==t))}))}),[c]);return Object(r.b)(r.a,{children:o.Children.map(t,(function(e,t){return Object(r.b)(u,{readyStatus:c[t],shownStatus:l[t],index:t,setReadyStatusList:s,children:e},t)}))})}},1185:function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return j}));var i=n(33),r=n(1),o=n(55),a=n(74),c=n(2148),s=n(1154),l=n(178),u=n(1466),d=n(83),b=n(205),h=n(895),f=["item","className","renderTimeTopic"],p=["item"],m={"火爆":"GRD01A","飙升":"GRD03A","热议":"GRD10A","上升":"GYL01A","新题":"GBL08A"},v=function(e){var t=e.item,n=e.className,a=e.renderTimeTopic,c=void 0!==a&&a,s=Object(i.default)(e,f),b=t.question,p=b.url,v=b.title,O=b.topics,j=b.label,g=b.created,y=b.highlightTitle,w=t.reaction;return Object(r.c)(o.Box,Object.assign(Object.assign({flexBasis:"353px",className:n,pr:"43px"},s),{},{children:[Object(r.b)(h.a,{href:p,zaType:"Card",target:"_blank",children:Object(r.c)(o.Box,{css:function(e){return Object.assign(Object.assign({},Object(d.d)(2)),{},{fontSize:"15px",color:e.colors.GBK03A,fontWeight:500,lineHeight:"21px"})},children:[Boolean(j)&&Object(r.b)(o.Box,{p:"2px 4px",css:function(e){return{background:e.colorMod(e.colors[m[j]]).alpha(.14),border:"1px solid ".concat(e.colorMod(e.colors[m[j]]).alpha(.1)),borderRadius:"2px",fontSize:"12px",color:e.colors[m[j]],display:"inline-block",lineHeight:"12px",marginRight:"2px",fontWeight:"500",position:"relative",top:"-2px"}},children:j}),c?Object(r.b)("span",{css:function(e){return{"& em":{color:e.colors.GRD03A,fontStyle:"normal"}}},dangerouslySetInnerHTML:{__html:y}}):v]})}),Object(r.c)(o.Box,{mt:"10px",css:{height:null!=O&&O.length||c?"23px":"0px",overflow:"hidden"},children:[null==O?void 0:O.map((function(e){var t=e.name,n=e.urlToken;return Object(r.c)(h.a,{href:"https://www.zhihu.com/topic/".concat(n),zaType:"Tag",target:"_blank",css:function(e){return{display:"inline-block",padding:"3px 6px",background:e.colors.GBK10A,fontSize:"12px",lineHeight:"17px",fontWeight:"400",color:e.colors.GBK04A,whiteSpace:"nowrap","&:nth-of-type(n + 2)":{marginLeft:8}}},children:["#",t]},n)})),c&&Object(r.b)(o.Text,{color:"GBK06A",fontSize:"13px",mt:O?"10px":"0px",children:O?"提问时间：".concat(u.a(1e3*g,"yyyy-MM-dd")):"".concat(Object(l.cnNiceNumber)((null==w?void 0:w.answerNum)||0)," 回答 · ").concat(Object(l.cnNiceNumber)((null==w?void 0:w.followNum)||0)," 关注")})]})]}))},O=function(e){var t=e.item,n=Object(i.default)(e,p),l=t.question,u=l.token,d=l.haveAnswer,h=l.questionAnswerUrl,f="https://www.zhihu.com/question/".concat(u,"?write");return Object(r.b)(o.Flex,Object.assign(Object.assign({justifyContent:"center",flexBasis:"131px"},n),{},{children:Object(r.b)(a.a,{zaType:"Button",zaText:!0,zaAction:"OpenUrl",extra:{link:{get url(){return d?h:f}}},children:d?Object(r.b)(b.a,{icon:c.a,label:"查看回答",href:h,target:"_blank",css:{padding:"0 9px"}}):Object(r.b)(b.a,{className:"QuestionItem-footer--writeAnswerButton",label:"写回答",icon:s.a,href:f,target:"_blank"})})}))},j=function(e){var t=e.score,n=e.level,i=e.Icon,a=e.color;return Object(r.c)(o.Box,{children:[Object(r.c)(o.Text,{color:"GBK03A",fontSize:"14px",lineHeight:"18px",fontWeight:"400",children:[t.toFixed(1)," 分"]}),Object(r.b)(o.Flex,{mt:"8px",alignItems:"center",children:new Array(5).fill().map((function(e,t){return Object(r.c)(o.Box,{css:{position:"relative"},children:[Object(r.b)(i,{size:12,css:function(e){return Object.assign({color:e.colors[a]},t+1>n&&{opacity:"0.2"})}}),t+1===Math.ceil(n)&&Object(r.b)(i,{size:12,css:function(e){return{color:e.colors[a],position:"absolute",left:"0",top:"3px",clip:"rect(0, ".concat(n%1*12,"px, 12px, 0px)")}}})]},t)}))})]})}},1187:function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=s(n(1428)),o=s(n(0)),a=s(n(3)),c=(s(n(1429)),n(1430));function s(e){return e&&e.__esModule?e:{default:e}}a.default.any,a.default.func,a.default.node;var l=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o.performAppear=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e,t)):o._handleDoneAppearing(e,t)},o._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete o.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performEnter=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e,t)):o._handleDoneEntering(e,t)},o._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete o.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performLeave=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e,t)):o._handleDoneLeaving(e,t)},o._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete o.currentlyTransitioningKeys[e];var n=(0,c.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)?o.keysToEnter.push(e):o.setState((function(t){var n=i({},t.children);return delete n[e],{children:n}}))},o.childRefs=Object.create(null),o.state={children:(0,c.getChildMapping)(n.children)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,c.getChildMapping)(e.children),n=this.state.children;for(var i in this.setState({children:(0,c.mergeChildMappings)(n,t)}),t){var r=n&&n.hasOwnProperty(i);!t[i]||r||this.currentlyTransitioningKeys[i]||this.keysToEnter.push(i)}for(var o in n){var a=t&&t.hasOwnProperty(o);!n[o]||a||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],n=function(n){var i=e.state.children[n];if(i){var a="string"!=typeof i.ref,c=e.props.childFactory(i),s=function(t){e.childRefs[n]=t};c===i&&a&&(s=(0,r.default)(i.ref,s)),t.push(o.default.cloneElement(c,{key:n,ref:s}))}};for(var a in this.state.children)n(a);var c=i({},this.props);return delete c.transitionLeave,delete c.transitionName,delete c.transitionAppear,delete c.transitionEnter,delete c.childFactory,delete c.transitionLeaveTimeout,delete c.transitionEnterTimeout,delete c.transitionAppearTimeout,delete c.component,o.default.createElement(this.props.component,c,t)},t}(o.default.Component);l.displayName="TransitionGroup",l.propTypes={},l.defaultProps={component:"span",childFactory:function(e){return e}},t.default=l,e.exports=t.default},1188:function(e,t,n){"use strict";var i=n(143);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var r=i(n(1189));e.exports=t.default},1189:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},1190:function(e,t,n){"use strict";function i(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=i(e.className,t):e.setAttribute("class",i(e.className&&e.className.baseVal||"",t))}},1191:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=i,e.exports=t.default},1192:function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};r(n(0));var i=r(n(3));function r(e){return e&&e.__esModule?e:{default:e}}t.nameShape=i.default.oneOfType([i.default.string,i.default.shape({enter:i.default.string,leave:i.default.string,active:i.default.string}),i.default.shape({enter:i.default.string,enterActive:i.default.string,leave:i.default.string,leaveActive:i.default.string,appear:i.default.string,appearActive:i.default.string})])},1202:function(e,t,n){"use strict";var i=n(15),r=n(16),o=n(17),a=n(18),c=n(9),s=n(1),l=n(0),u=n(24),d=n(49),b=n(77),h=n(3),f=n.n(h),p=n(13),m=n.n(p),v=n(106),O=n.n(v),j=n(35),g=n(208),y=n(36),w=n(157),C=n(876),k=n(893),x=n(926),A=n(160),R=n(425),S=n(415),N=n(906),T=n(1141),B=n(41),q=n(74),E=n(178),I=n(421),Q=n(982),z=n(976);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var P=function(e,t){return e&&e.replace(new RegExp(null==t?void 0:t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),(function(e){return"<em>".concat(e,"</em>")}))},L=function(e){Object(o.a)(n,e);var t=M(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={mounted:!1},e.handleInvite=function(){var t=e.props,n=t.user.urlToken,i=t.onInvite;j.a.trackEvent(Object(b.a)(e),{id:3314}),i(n)},e.getContainer=function(){return document.querySelector(".Modal-content .QuestionInvitation-content")},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({mounted:!0})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contributionsCount,i=e.topic,r=e.isInvited,o=e.keyword,a=e.reason,c=t.name,l=Object.assign(Object.assign({},t),{},{name:Object(s.b)(I.a,{inline:!0,html:P(c,o)})}),u=Object(s.b)(z.a,{user:l,status:a||(n?Object(s.c)("div",{children:["在话题 ",Object(s.b)(Q.a,{topic:i})," 下有 ",Object(s.c)(B.Link,{to:"/people/".concat(t.urlToken,"/answers/topic/").concat(i.id),children:[Object(E.formatNumber)(n)," 个回答"]})]}):Object(s.b)(I.a,{html:t.headline})),action:Object(s.b)(q.a,{as:y.c,zaText:!0,zaType:"Button",zaAction:"Invite",color:r?void 0:"blue",disabled:r,onClick:this.handleInvite,children:r?"已邀请":"邀请回答"}),meta:null}),d={module:"UserItem",index:this.props.index,content:{member_hash_id:t.id},view:{id:o?4436:4437},extra:{search:{raw_query:o||""}},trackCardShow:!0};return this.state.mounted?Object(s.b)(S.a,Object.assign(Object.assign({getContainer:this.getContainer},d),{},{children:u})):u}}]),n}(l.Component),D=n(900),F=n(38);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var _=function(e){Object(o.a)(n,e);var t=H(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleClick=function(){var t=e.props,n=t.questionId,i=t.closeAutoInvite,r=t.openAutoInvite;return"close"===t.item.status?(j.a.trackEvent(null,{id:3313}),r(n)):i(n)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.item,t=void 0===e?{}:e,n=t.avatar,i=t.description,r=t.status,o=t.title,a="close"===r;return Object(s.b)(D.e,{data:t,image:Object(s.b)(g.a,{size:38,url:n}),title:o,meta:Object(s.b)(D.d,{children:i}),className:"AutoInviteItem-wrapper--desktop",extra:Object(s.b)(y.c,{preset:"link",className:a?"AutoInviteItem-button--closed":"AutoInviteItem-button--open",onClick:this.handleClick,children:a?"开启邀请":"已开启"})})}}]),n}(l.Component);_.propTypes={questionId:f.a.number.isRequired,item:f.a.object};var U=Object(u.connect)(null,{openAutoInvite:F.V,closeAutoInvite:F.d})(_),V=n(1103);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var G=function(e){var t=e.user;return Object(s.b)("div",{className:"InviteeItem",children:Object(s.c)("div",{className:"InviteeItem-content",children:[Object(s.b)(g.a,{url:t.avatarUrl,size:32,className:"InviteeItem-image"}),Object(s.b)("h4",{className:"InviteeItem-title",children:t.name})]})})},K=function(e){Object(o.a)(n,e);var t=W(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={expanded:!1,keyword:null},e.onChange=O()((function(t){e.props.onChange(t)}),300),e.handleChange=function(t){var n=t.target.value;e.setState({keyword:n}),n&&e.onChange(n)},e.handleExpand=function(){j.a.trackEvent(Object(b.a)(e),{action:"LoadMore",element:"Button"}),e.setState({expanded:!0})},e.handleInvite=function(t){var n=e.state.keyword;return(0,e.props.onInvite)(t,n)},e}return Object(r.a)(n,[{key:"renderHeader",value:function(){var e=this.props,t=e.invitees,n=(e.expandCount,Object(s.b)(w.a,{className:"QuestionInvitation-input",placeholder:"搜索你想邀请的人",onChange:this.handleChange,after:Object(s.b)(C.a,{size:18,fill:"grey"}),"data-tooltip":"也可以搜索职业、公司等资料","aria-label":"也可以搜索职业、公司等资料","data-tooltip-position":"bottom"})),i=[t.length?Object(s.c)("span",{children:["你已邀请 ",Object(s.b)(A.a,{toggler:Object(s.c)(y.c,{className:"Invitees-toggler",preset:"plain",children:[Object(s.b)("span",{className:"Invitees-togglerUsers",children:t.slice(0,2).map((function(e,t){return Object(s.c)("span",{children:[0===t?"":"、",Object(s.b)("span",{children:e.name})]},t)}))}),t.length>2&&" 等 ".concat(t.length," 人")]}),toggleEvent:"hover",targetClassName:"Invitees-popover",arrowed:!0,children:Object(s.b)("div",{className:"Invitees",children:t.map((function(e){return Object(s.b)(G,{user:e},e.urlToken)}))})})]}):Object(s.b)("h2",{className:"QuestionInvitation-title",children:"你可以邀请下面用户，快速获得回答"}),n],r=Object(d.a)(i,2),o=r[0],a=r[1];return Object(s.b)(V.a,{header:o,options:a})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,i=t.isDrained,r=t.items,o=t.searchItems,a=t.expandCount,c=t.autoInvitationItem,l=t.question,u=(l=void 0===l?{}:l).id,d=this.state,b=d.expanded,h=d.keyword,f=h?o:r,p=Boolean((void 0===a||a>0)&&!h&&f.length&&c&&c.status),v=p?a-1:a,O=!v||b,j=a?k.d:"div";return Object(s.c)(j,{className:"QuestionInvitation",children:[this.renderHeader(),n?Object(s.b)("div",{className:m()("QuestionInvitation-content","QuestionInvitation-content--centered"),children:Object(s.b)(R.a,{})}):Object(s.c)("div",{className:m()("QuestionInvitation-content",{"QuestionInvitation-content--centered":!f.length}),children:[f.length?Object(s.b)(S.a,{module:"UserList",children:Object(s.c)(x.b,{children:[p&&Object(s.b)(U,{questionId:u,item:c}),(O?f:f.slice(0,v)).map((function(t){return Object(s.b)(x.a,{className:m()({"List-item--mobile":!1}),children:Object(s.b)(L,Object.assign(Object.assign({},t),{},{keyword:h,onInvite:e.handleInvite}))},t.user.urlToken)}))]})}):Object(s.c)(N.k,{children:[Object(s.b)(N.f,{}),Object(s.b)("div",{children:i?"没有可以邀请的人":"没有找到你想邀请的人"})]}),f.length>v&&!O&&Object(s.b)(T.a,{onClick:this.handleExpand,children:"更多推荐结果"})]})]})}}]),n}(l.Component);K.propTypes={expandCount:f.a.number,items:f.a.array,searchItems:f.a.array,onInvite:f.a.func.isRequired};var J=Object(S.b)({module:"InvitationFrame"})(K),Y=n(121);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var $=function(e){Object(o.a)(n,e);var t=Z(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t){var n=e.props,i=n.question.id;(0,n.loadItems)(i,"invitationCandidates",{keyword:t})},e.handleInvite=function(t,n){e.props.updateInvitation(e.props.question.id,t,n?"search":"normal")},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,i=t.status,r=(i=void 0===i?{}:i).isLocked,o=i.isClose,a=i.isEvaluate,c=i.isSuggest,s=e.loadItems,l=e.loadAutoInvitation;e.isDrained||r||o||a||c||(s(n,"invitationCandidates"),s(n,"invitees"),l(n))}},{key:"render",value:function(){var e=this.props.question.status,t=e.isLocked,n=e.isClose,i=e.isEvaluate,r=e.isSuggest;return t||n||i||r?null:Object(s.b)(J,Object.assign({onChange:this.handleChange,onInvite:this.handleInvite},this.props))}}]),n}(l.Component);t.a=Object(u.connect)((function(e,t){var n=t.question.id,i=e.entities,r=i.users,o=i.topics,a=e.question,c=a.invitationCandidates,s=a.invitees,l=a.autoInvitation,u=function(e){var t=e.member,n=e.isInvited,i=e.topicContributions,a=e.reason,c=i&&i.sort((function(e,t){return t.contributionsCount-e.contributionsCount}))[0]||{},s=c.topic,l=c.contributionsCount;return{user:r[t],topic:o[s],isInvited:n,contributionsCount:l,reason:a}},d=c[n]||{isFetching:!1,isDrained:!1,items:[],searchItems:[]},b=d.isFetching,h=d.isDrained,f=d.items,p=d.searchItems,m=(s[n]||{items:[]}).items;return{isFetching:b,isDrained:h,items:f.map(u),searchItems:p.map(u),invitees:m.map((function(e){return r[e]})),autoInvitationItem:l[n]}}),{loadItems:Y.R,updateInvitation:Y.mb,loadAutoInvitation:Y.G})($)},1238:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(26),a=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M9.676 11.252c-.243.433-.542.85-.494 1.237.189 1.509 2.938 1.807 3.746 2.816.59.736.835 1.852.892 3.725.01.303 0 .97-.867.97H1.933c-.915 0-.925-.643-.915-.936.062-1.877.292-3.02.895-3.76.812-.994 3.743-1.267 3.872-2.872.03-.361-.246-.74-.493-1.18C3.917 8.802 3.39 4 7.466 4s3.506 4.941 2.21 7.252zm8.073.79l.002.641c1.57 1.766 4.47 1.307 4.851 3.166.125.61.328 1.538.384 3.232.009.284.014.919-.905.919-.92 0-5.523-.021-6.875-.019 0-2.806-.144-5.987-2.707-6.285.537-.331 1.725-.504 2.178-1.013l.002-.64c-.881.118-2.679-.541-2.679-.541.61-.64.747-1.387 1.192-4.317.355-2.93 2.835-2.903 3.022-2.903.187 0 2.667-.027 3.028 2.903.439 2.93.577 3.677 1.186 4.317 0 0-1.797.659-2.68.54z",fillRule:"evenodd"}))};a.defaultProps={name:"Users"},t.a=a},1291:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n(4),r=n(1003),o=n(178),a=function(e){return{name:"description",property:"og:description",content:e}},c=function(e,t){var n=[];if(e&&e.content){var i=Object(r.c)(e.content,100);i&&n.push(a(i))}if(t){var o=t.map((function(e){return e.name})).join(",");o&&n.push({name:"keywords",content:o})}return n},s=function(e,t){var n=[];if(e&&e.detail){var o=Object(r.c)(e.detail,100);o&&n.push(a(o))}else t&&t.content&&n.push.apply(n,Object(i.a)(c(t)));if(e.topics){var s=e.topics.map((function(e){return e.name})).join(",");if(s){var l={name:"keywords",content:s};n.push(l)}}return n},l=function(e){if(e){var t=e.headline,n=void 0===t?"":t,i=e.answerCount,r=void 0===i?0:i,c=e.voteupCount,s=void 0===c?0:c,l="".concat(n," 回答数 ").concat(Object(o.formatNumber)(r),"，获得 ").concat(Object(o.formatNumber)(s)," 次赞同");return[a(l)]}return[]}},1292:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(0),r=n.n(i),o=n(86),a=Object.assign;var c=function(e){return r.a.createElement(o.a,a({width:"52",height:"60",fill:"none",viewBox:"0 0 52 60"},e),r.a.createElement("path",{fill:"#121212",d:"M28.052 54.284c-1.881 0-3.76.015-5.638 0a2.041 2.041 0 00-1.36.464 607.935 607.935 0 01-5.391 4.22 4.752 4.752 0 01-.834.539 1.566 1.566 0 01-2.15-1.844c.287-.885.573-1.764.893-2.631.19-.504.184-.716-.46-.816-2.357-.361-4.407-1.312-5.856-3.307a9.136 9.136 0 01-1.526-3.58c-.117-.572-.286-.546-.781-.38-.75.255-.94.681-.722 1.391.05.187.07.38.057.573a1.186 1.186 0 01-.967 1.237 1.146 1.146 0 01-1.395-.707c-.137-.31-.226-.501-.632-.49a1.21 1.21 0 01-1.203-.842c-.226-.555.017-.993.404-1.334.286-.263.286-.427.08-.75a1.229 1.229 0 01.286-1.718 1.175 1.175 0 011.652.243c.352.419.65.413 1.16.272 1.577-.438 2.368-1.305 2.388-3.04.017-1.486.415-2.96.592-4.447.19-1.577-.12-3.132-.309-4.687-.246-2.004-.572-4.008-.89-5.99-.163-1.067.527-1.755 1.589-1.574 1.343.223 1.325.22 1.506-1.146.269-2.027.54-4.051.859-6.07a1.323 1.323 0 00-.627-1.491c-2.374-1.638-3.568-4.052-4.06-6.835-.556-3.083.779-5.463 3.035-7.41C10.008.188 12.73-.199 15.592.082c1.612.138 3.19.556 4.66 1.234a6.373 6.373 0 012.577 2.072c.364.525.773.65 1.366.648 5.234-.02 10.465 0 15.696 0 2.13 0 4.097.495 5.775 1.875 2.448 2.004 3.341 4.644 3.07 7.73a2.295 2.295 0 01-.05.287c-.211 1.145-.252 1.987.86 2.975a5.4 5.4 0 01.463 7.381 16.1 16.1 0 01-2.64 2.694 1.59 1.59 0 00-.658 1.114c-.724 5.225-1.52 10.44-2.176 15.673-.647 5.191-4.089 9.18-9.08 10.307a13.87 13.87 0 01-3.192.238h-4.208l-.003-.026z"}),r.a.createElement("path",{fill:"#FEFEFE",d:"M14.872 57.128c.53-1.552.971-2.9 1.452-4.232.163-.453 0-.53-.4-.533-.86 0-1.719-.023-2.578-.083-1.614-.114-2.949-.839-4.094-1.95a1.63 1.63 0 01-.51-1.325c.055-1.117.075-2.236.075-3.353a.736.736 0 01.59-.83c.615-.178 1.216-.407 1.82-.622.53-.186.77-.572.61-1.114-.171-.572-.644-.638-1.145-.492-.386.109-.767.252-1.145.372-.484.155-.722 0-.71-.535.023-1.068 0-2.139.029-3.21.06-3.533-.396-7.02-.931-10.502-.023-.14-.052-.286-.066-.42-.054-.642.103-.791.727-.636 1.315.32 2.64.604 3.934.999 2.005.613 3.995.438 5.97-.12 2.365-.67 4.558-1.767 6.769-2.812a1.245 1.245 0 00.724-1.145c.086-1.257.192-2.514.286-3.768.058-.733.22-.86.897-.573 1.95.753 3.902 1.5 5.838 2.29.838.349 1.774.38 2.634.09 2.075-.67 4.017-1.695 6.02-2.537.894-.367.923-.367 1.29.55.638 1.586 1.245 3.183 1.923 4.755.23.533.095.833-.317 1.145a45.216 45.216 0 01-5.492 3.57c-1 .556-1.06.682-.859 1.822 1.005 5.483 1.46 11.026 1.867 16.575a1.45 1.45 0 01-.527 1.302c-1.958 1.793-4.263 2.577-6.903 2.577-3.722-.034-7.421 0-11.132 0a1.72 1.72 0 00-1.2.45c-1.723 1.414-3.516 2.78-5.446 4.295z"}),r.a.createElement("path",{fill:"#06F",d:"M38.851 18.987a3.811 3.811 0 00-.048-.438c-.34-1.406.043-2.505 1.23-3.401.702-.53.734-1.111.353-1.684-.38-.573-.936-.687-1.74-.286-.287.146-.359.086-.427-.19a1.897 1.897 0 00-.255-.572 1.123 1.123 0 00-1.369-.49 1.194 1.194 0 00-.83 1.275c.028.253.073.505.135.753-.439-.06-.828-.287-1.26-.104a1.189 1.189 0 00-.81.911 1.042 1.042 0 00.498 1.168c.47.286.962.513 1.457.745a.658.658 0 01.472.624c.03.784.092 1.569.16 2.348a.552.552 0 01-.392.65 3.398 3.398 0 01-2.811.06c-2.274-.96-4.581-1.821-6.892-2.712-1.165-.452-1.844-.034-1.955 1.206-.138 1.514-.287 3.029-.375 4.55a.97.97 0 01-.613.936c-2.156.996-4.312 2.004-6.671 2.436a7.73 7.73 0 01-3.25-.071c-.902-.212-1.792-.479-2.697-.668-.432-.088-.527-.286-.47-.681.338-2.306.664-4.612.977-6.918.051-.386.22-.5.572-.403a2.817 2.817 0 001.55-.029c.59-.157.981.055 1.394.438a9.752 9.752 0 003.85 2.22c.994.285 1.492-.133 1.298-1.146-.172-.885-.315-1.778-.533-2.654a1.199 1.199 0 01.4-1.312 21.19 21.19 0 003.31-4.008c.986-1.526 1.518-3.17 1.146-5.005-.1-.5.074-.607.541-.607 5.016.014 10.036 0 15.052.014 2.05 0 3.89.573 5.322 2.14 1.55 1.703 1.781 3.721 1.604 5.926-.115 1.412-.627 2.15-2.079 2.577-1.786.521-3.453 1.451-5.17 2.204a1.43 1.43 0 01-.674.198z"}),r.a.createElement("path",{fill:"#FEFEFE",d:"M17.928 18.369c-1.045-.361-1.773-1.045-2.506-1.718-.38-.35-.821-.573-1.354-.47-2.256.484-3.862-.704-5.28-2.167-1.775-1.835-2.64-4.112-2.27-6.646.395-2.7 3.238-5.193 5.987-5.471 2.206-.249 4.44.04 6.51.842 3.396 1.328 4.53 4.612 2.65 7.73a18.546 18.546 0 01-3.723 4.387 1.19 1.19 0 00-.441 1.371c.183.673.278 1.377.427 2.142z"}),r.a.createElement("path",{fill:"#06F",d:"M42.013 45.892a154.544 154.544 0 00-.917-9.388 72.47 72.47 0 00-.632-4.157.701.701 0 01.389-.86c1.01-.623 2.004-1.273 3.012-1.906.175-.109.355-.355.555-.238.2.118.106.433.078.653a1194.67 1194.67 0 01-.825 5.927c-.435 3.008-.877 6.017-1.326 9.027a1.65 1.65 0 01-.334.942z"}),r.a.createElement("path",{fill:"#B7B7B6",d:"M45.351 20.628c-.286-.287-.424-.47-.364-.719 0-.037.155-.089.166-.074.159.232.229.513.198.793z"}),r.a.createElement("path",{fill:"#121212",d:"M25.105 32.77c.029 1.146-.587 1.776-1.718 1.801-1.13.026-1.958-.738-1.966-1.872-.01-1.134.835-1.835 2.164-1.855 1.08-.015 1.477.503 1.52 1.926z"}),r.a.createElement("path",{fill:"#444",d:"M14.326 6.69c.206-.165.42-.318.644-.458a.965.965 0 011.414.352c.454.783.784 1.63.98 2.514.12.455-.212.518-.516.59-.303.071-.627.134-.722-.318-.111-.533-.206-1.074-.369-1.595-.094-.306-.157-.787-.676-.621-.475.149-.572.498-.372.962.22.527.375 1.076.59 1.603.26.641-.24.747-.621.873s-.9.407-1.117-.286a39.818 39.818 0 01-1.076-4.28c-.118-.573.312-.665.701-.782.39-.117.69-.054.807.418.086.346.09.719.333 1.028zm-3.207 4.217l1.145-.426c.23-.08.427-.058.53.197a.384.384 0 01-.057.452.385.385 0 01-.132.092c-.83.41-1.704.722-2.606.93-.535.113-.81-.285-.63-.858.264-.836.573-1.655.88-2.508-.398-.092-.74.114-1.094.2-.223.054-.43.089-.544-.172a.425.425 0 01.215-.601 5.775 5.775 0 012.56-.504c.497.023.66.407.506.885-.235.71-.478 1.426-.773 2.313zm7.753-1.852c-.346.051-.55-.115-.658-.467-.18-.573-.287-1.145-.427-1.718-.183-.716.25-.887.75-1.034.553-.163.684.255.822.645.137.39.303.859.452 1.271.301.845-.003 1.277-.939 1.303z"}),r.a.createElement("path",{fill:"#4A4B4A",d:"M18.045 3.666a.925.925 0 01.899.925.873.873 0 01-.934.893.86.86 0 01-.89-.901c.034-.582.39-.848.925-.917z"}))}},1366:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(26),a=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M12 2a10 10 0 1 0 0 20c5.523 0 10-4.477 10-10S17.523 2 12 2zm2.081 15.497c-.407.163-.818.318-1.231.464a3.224 3.224 0 0 1-1.069.161c-.624 0-1.107-.15-1.452-.457a1.471 1.471 0 0 1-.518-1.156c0-.183.013-.369.038-.559.026-.187.068-.402.125-.642l.644-2.276c.054-.205.102-.412.145-.618.037-.177.056-.356.057-.536 0-.29-.06-.493-.179-.607-.121-.115-.35-.171-.687-.171a1.814 1.814 0 0 0-.513.076 7.067 7.067 0 0 0-.45.15l.171-.702c.398-.163.8-.31 1.21-.441.387-.123.75-.184 1.093-.184.619 0 1.096.15 1.432.45.334.297.503.686.503 1.163 0 .1-.012.274-.035.523-.02.232-.062.462-.13.686l-.64 2.268a7.016 7.016 0 0 0-.143.622 3.374 3.374 0 0 0-.06.53c0 .303.068.508.202.617.135.108.369.164.701.164.156 0 .331-.027.53-.08.198-.056.337-.103.427-.144l-.17.7zM13.97 8.29c-.292.275-.68.424-1.08.416a1.55 1.55 0 0 1-1.085-.416 1.331 1.331 0 0 1-.45-1.011c0-.393.15-.733.45-1.013.302-.281.665-.42 1.085-.42.421 0 .781.139 1.08.42.298.28.447.62.447 1.013 0 .396-.15.732-.447 1.011z",fillRule:"evenodd"}))};a.defaultProps={name:"Info"},t.a=a},1426:function(e,t,n){"use strict";var i=o(n(1427)),r=o(n(1187));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:r.default,CSSTransitionGroup:i.default}},1427:function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=l(n(0)),o=l(n(3)),a=l(n(1187)),c=l(n(1431)),s=n(1192);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}s.nameShape.isRequired,o.default.bool,o.default.bool,o.default.bool,(0,s.transitionTimeout)("Appear"),(0,s.transitionTimeout)("Enter"),(0,s.transitionTimeout)("Leave");var b=function(e){function t(){var n,i;u(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=i=d(this,e.call.apply(e,[this].concat(a))),i._wrapChild=function(e){return r.default.createElement(c.default,{name:i.props.transitionName,appear:i.props.transitionAppear,enter:i.props.transitionEnter,leave:i.props.transitionLeave,appearTimeout:i.props.transitionAppearTimeout,enterTimeout:i.props.transitionEnterTimeout,leaveTimeout:i.props.transitionLeaveTimeout},e)},d(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return r.default.createElement(a.default,i({},this.props,{childFactory:this._wrapChild}))},t}(r.default.Component);b.displayName="CSSTransitionGroup",b.propTypes={},b.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=b,e.exports=t.default},1428:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},1429:function(e,t,n){e.exports=n(67)(28)},1430:function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return i.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var i={},r=[];for(var o in e)t.hasOwnProperty(o)?r.length&&(i[o]=r,r=[]):r.push(o);var a=void 0,c={};for(var s in t){if(i.hasOwnProperty(s))for(a=0;a<i[s].length;a++){var l=i[s][a];c[i[s][a]]=n(l)}c[s]=n(s)}for(a=0;a<r.length;a++)c[r[a]]=n(r[a]);return c};var i=n(0)},1431:function(e,t,n){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=b(n(1188)),o=b(n(1190)),a=b(n(1432)),c=n(1433),s=b(n(0)),l=b(n(3)),u=n(47),d=n(1192);function b(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=[];c.transitionEnd&&p.push(c.transitionEnd),c.animationEnd&&p.push(c.animationEnd);l.default.node,d.nameShape.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.number,l.default.number;var m=function(e){function t(){var n,i;h(this,t);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=i=f(this,e.call.apply(e,[this].concat(o))),i.componentWillAppear=function(e){i.props.appear?i.transition("appear",e,i.props.appearTimeout):e()},i.componentWillEnter=function(e){i.props.enter?i.transition("enter",e,i.props.enterTimeout):e()},i.componentWillLeave=function(e){i.props.leave?i.transition("leave",e,i.props.leaveTimeout):e()},f(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var i=(0,u.findDOMNode)(this);if(i){var a=this.props.name[e]||this.props.name+"-"+e,s=this.props.name[e+"Active"]||a+"-active",l=null,d=void 0;(0,r.default)(i,a),this.queueClassAndNode(s,i);var b=function(e){e&&e.target!==i||(clearTimeout(l),d&&d(),(0,o.default)(i,a),(0,o.default)(i,s),d&&d(),t&&t())};n?(l=setTimeout(b,n),this.transitionTimeouts.push(l)):c.transitionEnd&&(d=function(e,t){return p.length?p.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){p.length&&p.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}(i,b))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,a.default)((function(){return n.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,r.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=i({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,s.default.cloneElement(s.default.Children.only(this.props.children),e)},t}(s.default.Component);m.displayName="CSSTransitionGroupChild",m.propTypes={},t.default=m,e.exports=t.default},1432:function(e,t,n){"use strict";var i=n(143);t.__esModule=!0,t.default=void 0;var r,o=i(n(1191)),a="clearTimeout",c=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),i=setTimeout(e,n);return l=t,i},s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&["","webkit","moz","o","ms"].some((function(e){var t=s(e,"request");if(t in window)return a=s(e,"cancel"),c=function(e){return window[t](e)}}));var l=(new Date).getTime();(r=function(e){return c(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)};var u=r;t.default=u,e.exports=t.default},1433:function(e,t,n){"use strict";var i=n(143);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r,o,a,c,s,l,u,d,b,h,f,p=i(n(1191)),m="transform";if(t.transform=m,t.animationEnd=a,t.transitionEnd=o,t.transitionDelay=u,t.transitionTiming=l,t.transitionDuration=s,t.transitionProperty=c,t.animationDelay=f,t.animationTiming=h,t.animationDuration=b,t.animationName=d,p.default){var v=function(){for(var e,t,n=document.createElement("div").style,i={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},r=Object.keys(i),o="",a=0;a<r.length;a++){var c=r[a];if(c+"TransitionProperty"in n){o="-"+c.toLowerCase(),e=i[c]("TransitionEnd"),t=i[c]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:o}}();r=v.prefix,t.transitionEnd=o=v.transitionEnd,t.animationEnd=a=v.animationEnd,t.transform=m=r+"-"+m,t.transitionProperty=c=r+"-transition-property",t.transitionDuration=s=r+"-transition-duration",t.transitionDelay=u=r+"-transition-delay",t.transitionTiming=l=r+"-transition-timing-function",t.animationName=d=r+"-animation-name",t.animationDuration=b=r+"-animation-duration",t.animationTiming=h=r+"-animation-delay",t.animationDelay=f=r+"-animation-timing-function"}var O={transform:m,end:o,property:c,timing:l,delay:u,duration:s};t.default=O},1434:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(1),r=n(74),o=n(1292),a=function(e){var t=e.title,n=void 0===t?"快速登录，查看完整内容":t,a=e.zaBlock,c=void 0===a?"LoginPopupWithHeader":a;return Object(i.b)(r.e,{zaType:"Popup",zaText:n,zaBlock:c,children:Object(i.b)("div",{css:{background:"#EDF4FF",height:"50px"},children:Object(i.c)("div",{css:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:"50%",transform:"translateX(-50%)",height:"50px"},children:[Object(i.b)(o.a,{css:{marginRight:"16px",width:"51px",position:"relative",top:"-11px"}}),Object(i.b)("div",{css:{fontSize:"16px",fontWeight:"bold",textAlign:"center"},children:n})]})})})}},1468:function(e,t,n){"use strict";n.d(t,"a",(function(){return xe}));var i=n(1),r=n(180),o=n(455),a=n(2),c=n(49),s=n(0),l=n(3),u=n.n(l),d=n(24),b=n(36),h=n(87),f=n(46),p=n(121),m=n(29),v=n(441),O=[{value:"标点或格式错误",text:"标点或格式错误"},{value:"不构成提问",text:"不构成提问"},{value:"包含主观判断",text:"包含主观判断"},{value:"缺乏可信来源",text:"缺乏可信来源"},{value:"other",text:"其他"}],j=[{title:"为什么修改问题？",subtitle:"请选择修改理由"},{title:"修改问题",subtitle:"描述精确的问题更易得到解答"},{title:"其他",subtitle:"请对你的举报补充说明"}],g=u.a.shape({level:u.a.oneOf(["error","warning"]),text:u.a.string}),y=n(437),w=n.n(y),C="form.setInput",k="form.setState",x="form.setErrors",A="ui.setState",R="reset",S={step:0,title:"",detail:{toHTML:function(){return""}},topics:[],reason:O[0].value,otherReason:"",onceChanged:!1,videoQuestionConfirmShown:!1,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"",videoQuestionConfirmText:"",uploadModalShown:!1,errors:{title:null,detail:null,reason:null,topics:null}};function N(e,t){var n=t.type,i=t.payload;switch(n){case C:var r,o=Object(c.a)(i,2),s=o[0],l=o[1];return Object.assign(Object.assign({},e),{},(r={},Object(a.a)(r,s,l),Object(a.a)(r,"onceChanged",function(e,t){var n=Object(c.a)(t,2),i=n[0],r=n[1];if(e.onceChanged)return!0;var o=e[i];return"reason"===i?1===e.step&&e.reason===r:"topics"===i?!w()(r,o):o!==r}(e,i)),r));case k:return Object.assign(Object.assign({},e),i);case x:return Object.assign(Object.assign({},e),{},{errors:Object.assign(Object.assign({},e.errors),i)});case A:var u=Object(c.a)(i,2),d=u[0],b=u[1];return Object.assign(Object.assign({},e),{},Object(a.a)({},d,b));case R:return Object.assign({},S);default:return e}}var T=function(e,t){var n=Object(s.useRef)();Object(s.useEffect)((function(){n.current=t}));var i=Object(s.useState)(e),r=Object(c.a)(i,2),o=r[0],a=r[1];return Object(s.useEffect)((function(){e!==o&&(n.current([e,o]),a(e))}),[e,o]),null},B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.errors;if(!t||"title"===t){var r=e.title,o=null;0!==r.length||n?r.length>51?o={level:"error",text:"问题标题超出 ".concat(r.length-51," 个字")}:r.length>0&&r.length<3?o={level:"error",text:"问题字数太少了吧"}:r.length>0&&-1===r.indexOf("?")&&-1===r.indexOf("？")?o={level:"error",text:"你还没有给问题添加问号"}:(r.match(/(\?|？)/g)||[]).length>1&&(o={level:"warning",text:"多个问题建议拆分"}):o={level:"error",text:"问题标题不能为空"},i=Object.assign(Object.assign({},i),{},{title:o})}if(!t||"reason"===t){var a=e.reason,c=e.otherReason,s=null;a&&("other"!==a||c)||(s={level:"error",text:a?"必填":"必选"}),i=Object.assign(Object.assign({},i),{},{reason:s})}if((!t||"topics"===t)&&e.topics){var l=e.topics,u=null;0!==l.length||n||(u={level:"error",text:"至少添加一个话题"}),i=Object.assign(Object.assign({},i),{},{topics:u})}return i},q=n(892),E=n(83),I=function(e){var t=e.onSelect,n=Object(E.f)();return Object(i.b)("div",{children:O.map((function(e){return Object(i.c)("div",{css:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",lineHeight:"48px",boxShadow:"inset 0 -1px 0 0 ".concat(n.colors.GBK10A),"&:last-child":{marginBottom:"16px"}},role:"button",tabIndex:0,onClick:function(){return t(e.value)},children:[e.text,Object(i.b)(q.a,{css:{fill:n.colors.GBL05A}})]},e.value)}))})};I.propTypes={onSelect:u.a.func.isRequired};var Q=I,z=function(e){var t=e.title,n=e.text,r=e.shown,o=e.allowConfirm,a=void 0===o||o,c=e.onSubmit,s=e.onClose,l=e.buttonText,u=void 0===l?{}:l;return Object(i.b)(h.b,{title:t,onClose:s,children:r&&Object(i.c)("div",{color:"GBK03A",css:{margin:"50px 16px 0",fontSize:"20px",textAlign:"center"},children:[n,Object(i.c)(h.a,{children:[a&&Object(i.b)(b.c,{preset:"primary",color:"blue",onClick:c,children:u.ok||"确认"}),Object(i.b)(b.c,{onClick:s,children:u.cancel||"取消"})]})]})})};z.propTypes={title:u.a.string,text:u.a.string,shown:u.a.bool,allowConfirm:u.a.bool,onSubmit:u.a.func.isRequired,onClose:u.a.func.isRequired,buttonText:u.a.shape({ok:u.a.string,cancel:u.a.string})};var M=z,P=n(55),L=n(157),D=n(33),F=["children","css"],H=["children","css"],_=["children","css"],U=["before","after","headerLabel","headerRight","children"],V=function(e){var t=e.children,n=e.css,r=Object(D.default)(e,F);return Object(i.b)(P.Flex,Object.assign(Object.assign({alignItems:"center",mb:"8px",color:"GBL05A",css:n},r),{},{children:t}))},W=function(e){var t=e.children,n=e.css,r=Object(D.default)(e,H);return Object(i.b)(P.Box,Object.assign(Object.assign({ml:"auto",css:n},r),{},{children:t}))},G=function(e){var t=e.children,n=e.css,r=Object(D.default)(e,_);return Object(i.b)(P.Text,Object.assign(Object.assign({as:"span",color:"GBK03A",css:n},r),{},{children:t}))},K=function(e){var t=e.before,n=e.after,r=e.headerLabel,o=e.headerRight,a=e.children,c=Object(D.default)(e,U),s=r||o;return Object(i.c)(P.Box,Object.assign(Object.assign({mb:"12px",css:{"& .Popover":{display:"block"},"& .TagInput":{lineHeight:0}}},c),{},{children:[t,s&&Object(i.c)(V,{children:[r&&Object(i.b)(G,{children:r}),o&&Object(i.b)(W,{children:o})]}),a,n]}))};K.Header=V,K.HeaderLabel=G,K.HeaderRight=W;var J=K,Y=["children","level"],Z={warning:"GYL01A",error:"GRD03A"},$=function(e){var t=e.children,n=e.level,r=Object(D.default)(e,Y);return Object(i.b)(P.Text,Object.assign(Object.assign({as:"span",color:Z[n]},r),{},{children:t}))},X=function(e){return Object(i.b)(o.a,{message:"一个未知的错误信息 ".concat(typeof e.children),children:Object(i.b)($,Object.assign({},e))})},ee=$,te=function(e){var t=e.onInputRef,n=e.title,r=e.onChange,o=e.onBlur,a=e.titleError,l=e.before,u=e.after,d=Object(s.useState)(!1),b=Object(c.a)(d,2),h=b[0],f=b[1],p=null;if(h){var m=51-n.length;m>=0?m<10&&(p="还可以输入 ".concat(m," 个字")):p=Object(i.c)(ee,{level:"error",children:["问题标题超出 ",-m," 个字"]})}else a&&(p=Object(i.b)(ee,{level:a.level,children:a.text}));var v=Object(s.useCallback)((function(e){f(!0),r&&r(e)}),[r]),O=Object(s.useCallback)((function(e){f(!1),o&&o(e)}),[o]),j=Object(s.useRef)();return Object(s.useEffect)((function(){setTimeout((function(){var e;return null===(e=j.current)||void 0===e?void 0:e.focus()}),60)}),[]),Object(i.c)(i.a,{children:[Object(i.b)(J,{children:Object(i.c)(P.Flex,{children:[l,Object(i.b)(L.a,{css:{border:"0 none",fontSize:"15px"},onRef:function(e){j.current=e,t(e)},required:!0,multiline:!0,spread:!0,large:!0,rows:2,placeholder:"问题标题",value:n,onChange:v,onBlur:O}),u]})}),p&&Object(i.b)(J,{headerRight:p})]})};te.propTypes={onInputRef:u.a.func,title:u.a.string,titleError:g,onChange:u.a.func,onBlur:u.a.func};var ne=te,ie=n(888),re=n(889),oe=n(890),ae=n(291),ce=n(448),se=n(463),le=function(e){var t=e.onEditableRef,n=e.defaultValue,r=e.onChange,o=e.detailError,a=e.isAnonymous,l=Object(d.useDispatch)(),u=Object(s.useCallback)((function(){return l(m.h.apply(void 0,arguments))}),[l]),b=Object(s.useRef)(),h=Object(s.useState)(!1),f=Object(c.a)(h,2),p=f[0],v=f[1],O=Object(s.useCallback)((function(){b.current&&b.current.handleKeyCommand("insert-image")}),[]),j=Object(s.useCallback)((function(){b.current&&b.current.handleKeyCommand("insert-video")}),[]),g=Object(s.useCallback)((function(e,t){Object(ce.b)(e,t,u,m.c)}),[u]),y=Object(s.useCallback)((function(e,t){switch(t){case"video":g("video-upload-error");break;case"image":g("image-upload-error",e)}}),[g]);return Object(i.c)(i.a,{children:[Object(i.b)(J,{mb:"16px",headerLabel:"问题描述（可选）：",headerRight:Object(i.c)(i.a,{children:[Object(i.b)(ae.a,{label:"".concat(p?"收起":"展开","工具栏"),isActive:p,icon:ie.a,onClick:function(){return v(!p)}}),Object(i.b)(ae.a,{label:"插入图片",icon:re.a,onClick:O}),Object(i.b)(ae.a,{label:"上传视频",icon:oe.a,onClick:j})]}),marginTop:"24px",children:Object(i.b)(se.a,{ref:function(e){b.current=e,t&&t(e)},allowDragAndDrop:!0,allowLinkCard:!0,minRows:2,allowToolbar:p,allowVideoTitleChange:!0,allowHeaderThree:!1,placeholder:"问题背景、条件等详细信息",defaultValue:n,onError:g,onUploadError:y,onChange:r,onBeforeVideoUpload:function(){return!a},editingContentType:"question"})}),o&&Object(i.b)(J,{headerRight:Object(i.b)(ee,{level:o.level,children:o.text})})]})};le.propTypes={onEditableRef:u.a.func,defaultValue:u.a.string,detailError:g,onChange:u.a.func.isRequired,isAnonymous:u.a.bool};var ue=le,de=n(466),be=n(473),he=function(e){var t=e.topic;return Object(i.b)(de.a,{css:{marginRight:"8px"},children:Object(i.b)("a",{target:"_blank",rel:"noopener noreferrer",href:"//www.zhihu.com/topic/".concat(t.id||t.urlToken),children:t.name})})};function fe(e){var t=e.topics,n=void 0===t?[]:t,r=e.onChange,o=e.permitEditTopics,a=Object(s.useState)(null),l=Object(c.a)(a,2),u=l[0],d=l[1],b=Object(s.useState)(n),h=Object(c.a)(b,2),f=h[0],p=h[1],m=Object(s.useState)(!1),v=Object(c.a)(m,2),O=v[0],j=v[1],g=Object(s.useCallback)((function(e){var t;p(e);var n=null===(t=B({topics:e},"topics"))||void 0===t?void 0:t.topics;d(n),r&&r(e,n)}),[r]);return Object(i.c)(J,{mb:"24px",children:[u&&Object(i.b)(ee,{as:"div",level:u.level,children:u.text}),o?Object(i.b)(be.a,{actived:O,value:f,onChange:g,onToggleActived:function(){return j(!O)}}):f.map((function(e){return Object(i.b)(he,{topic:e},e.name)}))]})}fe.propTypes={topics:u.a.arrayOf(u.a.object),onChange:u.a.func,permitEditTopics:u.a.bool};var pe=fe,me=n(41),ve=n(210),Oe=function(e){var t=e.onInputRef,n=e.questionType,r=e.reason,o=e.otherReason,a=e.onReasonChange,c=e.onInputChange,s=e.reasonError,l=Object(E.f)(),u=Boolean(!r&&s),d=Boolean("other"===r&&!o&&s);return Object(i.b)("div",{className:"EditQuestionReasonInput",children:Object(i.b)(J,{mb:"0",before:Object(i.c)(J.Header,{mb:"0",children:[Object(i.b)(ve.b,{css:{marginRight:"8px"},needsReposition:!0,plain:!0,text:r?null:"请选择一个修改理由",value:r,onChange:a,children:O.map((function(e){return Object(i.b)(ve.a,{value:e.value,text:e.text},e.value)}))}),u&&Object(i.b)(ee,{level:s.level,children:s.text}),!["org","commercial"].includes(n)&&Object(i.b)(J.HeaderRight,{children:Object(i.b)(me.Link,{className:"EditQuestion-whyEdit",target:"blank",to:"/question/19550238/answer/95068125",children:"为什么问题可以被公共编辑？"})})]}),children:"other"===r&&Object(i.b)(P.Box,{css:d&&{"& input::placeholder":{color:l.colors.GRD03A}},children:Object(i.b)(L.a,{onRef:t,spread:!0,large:!0,value:o,placeholder:"请输入修改理由（必填）",onChange:c})})})})};Oe.propTypes={onInputRef:u.a.func,questionType:u.a.string.isRequired,reason:u.a.string,otherReason:u.a.string,reasonError:g,onReasonChange:u.a.func,onInputChange:u.a.func};var je=Oe;function ge(e){if(!e)return"提交修改时发生未知错误";if("string"==typeof e)return e;var t=e.status,n=e.message,i=e.name;return n?Object(ce.c)(n)?"提交修改时发生网络请求错误":n.startsWith("request http")?"提交修改时发生错误".concat(t?"："+t:""):"提交修改时发生错误：".concat(n):"提交修改时发生错误：".concat(i||"Unknown")}function ye(e){var t=e.onSuccess,n=e.onFailure,i=Object(d.useSelector)((function(e){var t=e.notification;return t[m.c]||t.updateQuestion}));return Object(s.useEffect)((function(){if(i){var e=i.id,r=i.code,o=i.text;e?t(e):n(function(e,t){switch(e){case 103003:return["title",{level:"error",text:"已经存在的问题"}];case 103001:return["detail",{level:"error",text:"过长的补充说明"}];default:return["overall",{text:ge(t)}]}}(r,o))}}),[i]),null}ye.propTypes={onSuccess:u.a.func.isRequired,onFailure:u.a.func.isRequired};var we=function(e){return["title","reason","topics"].find((function(t){var n;return"error"===(null===(n=e[t])||void 0===n?void 0:n.level)}))};function Ce(e){var t=e.onClose,n=e.show,r=e.id,o=e.title,l=e.detail,u=e.topics,O=e.questionType,g=e.isAnonymous,y=e.brand,w=e.permitEditTopics,q=Object(d.useSelector)(f.b),E=Object(d.useDispatch)(),I=Object(s.useCallback)((function(){return E(m.h.apply(void 0,arguments))}),[E]),z=Object(s.useRef)({titleInput:null,editable:null,reasonInput:null}),P=function(e){var t;if("title"===e)null===(t=z.current.titleInput)||void 0===t||t.focus();else if("reason"===e){var n;null===(n=z.current.reasonInput)||void 0===n||n.focus()}},L=Object(s.useReducer)(N,Object.assign(Object.assign({},S),{},{title:o,detail:l,topics:u})),D=Object(c.a)(L,2),F=D[0],H=D[1],_=F.step,U=F.title,V=F.reason,W=F.otherReason,G=F.onceChanged,K=F.uploadModalShown,J=F.videoQuestionConfirmShown,Y=F.videoQuestionConfirmAllowContinue,Z=F.videoQuestionConfirmTitle,$=F.videoQuestionConfirmText,ee=F.errors,te=ee.title,ie=ee.detail,re=ee.reason,oe=ee.overall;T(n,(function(e){Object(c.a)(e,1)[0]&&H({type:k,payload:{title:o,detail:{toHTML:function(){return l}},topics:u,onceChanged:!1}})}));var ae=Object(s.useCallback)((function(){H({type:R}),I("问题修改成功！"),t()}),[I,t]),ce=Object(s.useCallback)((function(e){var t=Object(c.a)(e,2),n=t[0],i=t[1];H({type:x,payload:Object(a.a)({},n,i)}),P(n)}),[]),se=Object(s.useMemo)((function(){return we(ee)}),[ee]),le=Object(s.useCallback)((function(e){var t=e.target.value;H({type:C,payload:["title",t]})}),[]),de=Object(s.useCallback)((function(){H({type:x,payload:B({title:U},"title")})}),[U]),be=Object(s.useCallback)((function(e){H({type:C,payload:["detail",e]})}),[]),he=Object(s.useCallback)((function(e,t){H({type:C,payload:["topics",e]}),H({type:x,payload:{topics:t}})}),[]),fe=Object(s.useCallback)((function(e){H({type:k,payload:{reason:e,step:1}}),"other"===e&&setTimeout((function(){return P("reason")}))}),[]),me=Object(s.useCallback)((function(e){var t=e.target.value;H({type:C,payload:["otherReason",t]}),"reason"===se&&t&&H({type:x,payload:{reason:null}})}),[se]),ve=Object(s.useCallback)((function(){var e;null!==(e=z.current.editable)&&void 0!==e&&e.hasVideo("upload")?H({type:A,payload:["uploadModalShown",!0]}):t()}),[t]),Oe=function(){var e=F.title,t=F.detail,n=F.topics,i=F.reason,o=F.otherReason,a={question:{title:e},meta:{reason:"other"===i?o:i}},c=t.toHTML();c!==l&&(a.question.detail=c),n!==u&&(a.question.topicUrlTokens=n.map((function(e){return e.urlToken||e.id}))),Object.keys(a.question).length>0&&E(Object(p.ob)(r,a))},ge=function(){H({type:A,payload:["videoQuestionConfirmShown",!1]})},Ce=function(){H({type:A,payload:["uploadModalShown",!1]})},ke=Object(s.useCallback)((function(){Ce(),t()}),[t]),xe=Boolean(!G||se),Ae=0===_,Re=Ae?j[0]:{css:{width:"595px","& .Modal-content":{paddingBottom:oe?0:"32px"}}};return Object(i.c)(i.a,{children:[Object(i.b)(ye,{onSuccess:ae,onFailure:ce}),Object(i.b)(h.b,Object.assign(Object.assign({footer:oe&&Object(i.b)(X,{level:"error",children:oe.text}),onClose:ve,hotKeyClosable:!1,maskClosable:!1},Re),{},{children:n&&(Ae?Object(i.b)(Q,{onSelect:fe}):Object(i.c)("div",{className:"QuestionAsk",children:[Object(i.b)(M,{title:Z,text:$,shown:J,allowConfirm:Y,onSubmit:function(){ge(),Oe()},onClose:ge,buttonText:{ok:"发布",cancel:"继续编辑"}}),Object(i.b)(M,{text:"关闭弹窗将丢失上传中的视频内容",shown:K,onSubmit:ke,onClose:Ce}),Object(i.c)("form",{onSubmit:function(e){return e.preventDefault()},noValidate:!0,children:[Object(i.b)(ne,{onInputRef:function(e){return z.current.titleInput=e},title:U,onChange:le,onBlur:de,titleError:te,before:Object(i.b)(v.a,{isAnonymous:g,questionType:O,brand:y,css:{flexShrink:0,marginTop:"3px",marginRight:"16px"}})}),Object(i.b)(ue,{onEditableRef:function(e){return z.current.editable=e},defaultValue:l,onChange:be,detailError:ie,isAnonymous:g}),Object(i.b)(pe,{topics:u,onChange:he,permitEditTopics:w}),Object(i.b)(je,{onInputRef:function(e){return z.current.reasonInput=e},questionType:O,reason:V,otherReason:W,reasonError:re,onReasonChange:fe,onInputChange:me}),Object(i.b)(h.a,{css:{marginTop:oe?"16px":"25px"},children:Object(i.b)(b.c,{preset:"primary",color:"blue",disabled:xe,onClick:function(){var e=B(F);H({type:x,payload:e});var t=we(e);if(t)P(t);else{var n=z.current.editable;if(!function(e,t){return e.hasVideo("upload")?(t("请等待视频上传完成后发布","red",m.c),!0):!!e.hasImage("upload")&&(t("请等待图片上传完成后发布","red",m.c),!0)}(n,I)){var i=function(e,t){return e.hasVideo()&&!t.isOrg?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!0,videoQuestionConfirmText:"包含视频的编辑将在审核完成后生效，是否继续？"}:e.hasImage("error")||e.hasVideo("error")&&!e.hasVideo("error-review")?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"上传失败",videoQuestionConfirmText:"草稿中含有上传失败的内容，请更改后重新提交"}:e.hasVideo("error-review")||e.hasVideo("censor")?{videoQuestionConfirmShown:!0,videoQuestionConfirmAllowContinue:!1,videoQuestionConfirmTitle:"视频未通过审核",videoQuestionConfirmText:"视频中包含未通过审核的信息，请更改后重新提交"}:null}(n,q);i?H({type:k,payload:i}):Oe()}}},children:"提交修改"})})]})]}))}))]})}Ce.propTypes={id:u.a.number,title:u.a.string,detail:u.a.string,topics:u.a.arrayOf(u.a.object),show:u.a.bool,onClose:u.a.func,isAnonymous:u.a.bool,brand:u.a.object,permitEditTopics:u.a.bool},Ce.defaultProps={onClose:function(){}};var ke=Ce;function xe(e){return Object(i.b)(r.a,{children:Object(i.b)(o.a,{children:Object(i.b)(ke,Object.assign({},e))})})}},1490:function(e,t,n){"use strict";var i=n(15),r=n(16),o=n(17),a=n(18),c=n(9),s=n(1),l=n(0),u=n(24),d=n(876),b=n(215),h=n(299),f=n(121);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=p(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={value:"",items:[]},e.handleChange=function(t){var n=e.props.dispatch;e.setState({value:t});var i=t.match(/^https:\/\/www.zhihu.com\/question\/(\d+)/);i?n(Object(f.Y)(i[1])).then((function(t){var n=t.payload;e.setState({items:[{name:n.title,urlToken:n.id}]})})):Object(h.b)(t).then((function(t){e.setState({items:t})}))},e.handleSelect=function(t,n){var i=e.props,r=i.dispatch,o=i.question.id,a=i.onSubmitted,c=n.urlToken,s=r(Object(f.g)(o,c));a&&a({id:c},s)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.items;return Object(s.b)("div",{className:"QuestionRedirectionCreator",children:Object(s.b)("div",{className:"QuestionRedirectionCreator-content",children:Object(s.b)(b.b,{value:t,items:n,inputProps:{spread:!0,large:!0,after:Object(s.b)(d.a,{fill:"grey",size:20})},menuProps:{targetClassName:"QuestionRedirectionCreator-menu"},onChange:this.handleChange,onSelect:this.handleSelect})})})}}]),n}(l.Component);t.a=Object(u.connect)()(m)},1497:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(933),r=n.n(i),o=n(1013),a=n.n(o),c=n(6),s=n(905),l=n(1371);function u(e){var t=e.id,n=e.adZoneId,i=e.template,r=void 0===i?"":i,o=e.style,a=void 0===o?"":o,c=e.impressionTracks,s=e.viewTracks,l=e.clickTracks,u=e.closeTracks,d=e.effectTracks,b=void 0===d?[]:d,h=e.debugTracks,f=void 0===h?[]:h,p=e.conversionTracks,m=e.videoTracks,v=void 0===m?[]:m,O=e.extraConversionTracks,j=void 0===O?[]:O,g=e.conversionTrackJs,y=void 0===g?[]:g,w=e.zaAdInfo,C=e.zaAdInfoJson,k=void 0===C?"":C,x=e.creatives,A=e.prefetch,R=void 0===A?{}:A,S=e.expand,N=void 0===S?{}:S,T=e.canvas,B=void 0===T?{}:T,q=e.experimentInfo,E=void 0===q?"":q;return{id:t,adZoneId:n,template:r,style:a,impressionTracks:c,viewTracks:s,clickTracks:l,closeTracks:u,effectTracks:b,debugTracks:f,conversionTracks:p,videoTracks:v,extraConversionTracks:j,conversionTrackJs:y,zaAdInfo:w,zaAdInfoJson:k,creatives:function(e){return e.map((function(e){return function(e){var t=e.id,n=void 0===t?"":t,i=e.asset,r=e.videoInfo,o=void 0===r?{playlis:{hd:{},ld:{},sd:{}}}:r,a=e.protoInfo,c=void 0===a?{}:a,s=e.thirdSdkInfo,l=void 0===s?"":s,u=e.videoWatchNum,d=void 0===u?"":u;return{id:n,asset:function(e){var t=e.brandName,n=e.brandLogo,i=e.title,r=e.desc,o=void 0===r?"":r,a=e.imgs,c=void 0===a?[]:a,s=e.gif,l=void 0===s?"":s,u=e.landingUrl,d=e.nativeUrl,b=void 0===d?"":d,h=e.appPromotionUrl,f=void 0===h?"":h,p=e.deepUrl,m=void 0===p?"":p,v=e.imgSize,O=e.recommends,j=void 0===O?[{}]:O,g=e.footer,y=e.cta,w=e.resource,C=void 0===w?{}:w,k=e.activity,x=void 0===k?{}:k,A=e.sponsor,R=void 0===A?{}:A,S=e.window,N=void 0===S?{}:S,T=e.appInfo,B=void 0===T?{}:T,q=e.recommend,E=void 0===q?{}:q,I=e.videoSpec,Q=void 0===I?{}:I,z=e.imageRatioExtra,M=void 0===z?{}:z,P=e.packageName,L=e.icon,D=e.galleries;return{brandName:t,brandLogo:n,title:i,desc:o,imgs:c,gif:l,landingUrl:u,nativeUrl:b,appPromotionUrl:f,deepUrl:m,imgSize:v,recommends:j,footer:g,cta:y,resource:C,activity:x,sponsor:R,window:N,appInfo:B,recommend:E,videoSpec:Q,imageRatioExtra:M,packageName:P,icon:L,galleries:void 0===D?[{}]:D}}(i),videoInfo:o,protoInfo:c,thirdSdkInfo:l,videoWatchNum:d}}(e)}))}(x),prefetch:R,expand:N,canvas:B,experimentInfo:E}}var d={PROMOTE_ARTICLE:"发表了一篇文章",PROMOTE_QUESTION:"提了一个问题"};function b(e){var t=e.ad,n=(t.partyId,t.creatives),i=t.downloadSilent,o=void 0!==i&&i,c=t.isNewWebview,l=void 0!==c&&c,u=t.isSpeeding,b=t.cdnMap,h=t.displayAdvertisingTag,f=t.adVerb,p=t.loadTracks,m=t.closeTrack,v=a()(t,["partyId","creatives","downloadSilent","isNewWebview","isSpeeding","cdnMap","displayAdvertisingTag","adVerb","loadTracks","closeTrack"]),O=Object(s.e)(t,"creatives[0].impressionTracks",[]),j=Object(s.e)(t,"creatives[0].clickTracks",[]),g={displayAdvertisingTag:h,downloadSilent:o,isNewWebview:l,isCdnSpeeding:u,cdnMap:b},y=d[f],w=n.map((function(e){return function(e,t){var n=Object(s.e)(e,"target",{}),i=n.voteupCount,o=n.commentCount,c=n.followerCount,l=n.answerCount,u=a()(n,["voteupCount","commentCount","followerCount","answerCount"]),d=e.landingUrl,b=e.appPromotionUrl,h=e.deepUrl,f=e.packageName,p=e.title,m=e.nativeUrl,v=void 0===m?"":m,O=e.window,j=e.imageRatioExtra,g=e.brand,y=void 0===g?{}:g,w=e.thumbnailExtraInfo,C=e.cta,k=(C=void 0===C?{}:C).value,x=void 0===k?"":k,A=e.button,R=e.description,S=(e.protoInfo,e.image),N=e.gallery,T=void 0===N?[]:N,B=e.thirdSdkInfo,q=(e.showNum,e.recommend),E=e.contentType,I=a()(e,["landingUrl","appPromotionUrl","deepUrl","packageName","title","nativeUrl","window","imageRatioExtra","brand","thumbnailExtraInfo","cta","button","description","protoInfo","image","gallery","thirdSdkInfo","showNum","recommend","contentType"]),Q=y.name,z=y.logo,M=Object(s.e)(T,"length")>=2?T.map((function(e){return e.url})):[S],P=T&&T.map((function(e){return{image:e.url,desc:e.description}}));return{asset:r()({landingUrl:d,appPromotionUrl:b,deepUrl:h,packageName:f,title:p,nativeUrl:v,window:O,imageRatioExtra:j,desc:R,cta:A||x,imgs:M,brandName:Q,brandLogo:z,recommend:q,gallery:T,galleries:P,icon:t},I),protoInfo:r()({voteupNum:i,commentNum:o,contentType:E,answerNum:l,followNum:c,target:JSON.stringify(n)},u),videoInfo:w,thirdSdkInfo:B}}(e,y)}));return r()({viewTracks:O,impressionTracks:p,closeTracks:[m],clickTracks:j,creatives:w,expand:g},v)}function h(e){if(!e||!e.ad&&!e.adjson)return null;var t=Object(c.camelizeKeys)(e),n=Object(s.e)(e,"adjson"),i=Object(c.camelizeKeys)(Object(s.x)(n)),o=Object(l.a)({oldData:t,adjson:i});return{data:t,adjson:n?function(e,t){if(!e.ads)return null;var n=e.ads;return{ads:(void 0===n?[]:n).map((function(e){return r()({adjsonStr:t},u(e))}))}}(i,n):function(e,t){return{ads:[{ad:e.ad}].map((function(e){var n=e.ad;return r()({adjsonStr:t},b({ad:n}))}))}}(t,n),experimentInfo:o}}},1655:function(e,t,n){"use strict";(function(e){var i=n(15),r=n(16),o=n(17),a=n(18),c=n(9),s=n(1),l=n(0),u=n(24),d=n(2692),b=n(121),h=n(190);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var p=function(t){Object(o.a)(a,t);var n=f(a);function a(){var t;Object(i.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=n.call.apply(n,[this].concat(o))).getTrackUrls=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.props,o=r.pageType,a=r.advancedStyle,c=a.viewTracks,s=a.clickTracks,l="view"===n?c:s,u=Object.assign({},{eru:encodeURIComponent(e.location.href),ct:1,pt:"question"===o?1:2,rt:1},i),d=Object.keys(u).map((function(e){return"&".concat(e,"=").concat(u[e])})).join("");return l.map((function(e){return"".concat(e).concat(d)}))},t.handleViewTrack=function(e){t.getTrackUrls("view",e).forEach(h.c)},t.handleClickTrack=function(e){t.getTrackUrls("click",e).forEach(h.c)},t}return Object(r.a)(a,[{key:"componentWillMount",value:function(){var e=this.props,t=e.questionId;(0,e.loadBrandQuestionAdvancedStyle)(t)}},{key:"componentDidUpdate",value:function(e){var t=e.advancedStyle,n=(t=void 0===t?{}:t).cardType,i=this.props,r=i.advancedStyle,o=(r=void 0===r?{}:r).cardType,a=i.onLoad;!n&&o&&"function"==typeof a&&a()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.advancedStyle;return n&&n.id?Object(s.b)(d.a,{brand:t,advancedStyle:n,handleViewTrack:this.handleViewTrack,handleClickTrack:this.handleClickTrack,isMobileView:!1}):null}}]),a}(l.Component);t.a=Object(u.connect)((function(e){var t=e.question;return{brand:t.brand,advancedStyle:t.advancedStyle}}),{loadBrandQuestionAdvancedStyle:b.J})(p)}).call(this,n(110))},2003:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(26),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(e){return r.a.createElement(o.a,a({fill:"currentColor"},e),r.a.createElement("path",{d:"M6.824 2.934l-3.36 3.359a1 1 0 0 0 0 1.414l3.36 3.359a.25.25 0 0 0 .353 0l1.06-1.06a.25.25 0 0 0 0-.354L6.587 8H13a5 5 0 0 1 0 10H4.25a.25.25 0 0 0-.25.25v1.5c0 .138.112.25.25.25H13a7 7 0 1 0 0-14H6.586l1.652-1.652a.25.25 0 0 0 0-.353l-1.06-1.06a.25.25 0 0 0-.354 0z"}))};c.defaultProps={name:"Undo"},t.a=c},2134:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(1076),r=n(65);function o(e){return Object(r.a)(1,arguments),Object(i.a)(e,Date.now())}},2135:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(1076),r=n(1028),o=n(65);function a(e){return Object(o.a)(1,arguments),Object(i.a)(e,Object(r.a)(Date.now(),1))}},2148:function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(26),a=function(e){return r.a.createElement(o.a,e,r.a.createElement("path",{d:"M19.49 14.362l-2.03-1.83 1.116-1.137a1.352 1.352 0 0 1 1.921-.009c.535.535.54 1.4.01 1.94l-1.016 1.036zm-4.883 4.935a2.3 2.3 0 0 1-1.12.63l-1.136.264c-.29.058-.668-.105-.56-.56l.27-1.158a2.3 2.3 0 0 1 .599-1.09l3.809-3.84 2.03 1.829-3.892 3.925zM4.06 5H19.94C20.526 5 21 5.448 21 6s-.474 1-1.059 1H4.06C3.474 7 3 6.552 3 6s.474-1 1.059-1zM4 11h9a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h4a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z",fillRule:"evenodd"}))};a.defaultProps={name:"Preview"},t.a=a},2244:function(e,t,n){e.exports=n.p+"assets/placeholder.765f50e5.svg"},2245:function(e,t,n){e.exports=n.p+"assets/liukanshan_desert.547bd049.svg"},2246:function(e,t,n){e.exports=n.p+"assets/empty.2df52de0.png"},2692:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n(1),r=n(13),o=n.n(r),a=n(433),c=n(893),s=n(205),l=n(951),u=n(30),d={question:"提问",answer:"回答",post:"文章",live:"Live",ebook:"电子书"},b=function(e){var t=e.src,n=e.style;return Object(i.b)("div",{className:"AdvancedViewer-imgField",style:Object.assign(Object.assign({},n),t?{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"center"}:{})})};function h(e){var t=e.isMobileView,n=e.advancedStyle,r=(n=void 0===n?{}:n).cardType,o=n.url,c=n.material,s=e.handleViewTrack,h=e.handleClickTrack;if(null==c||!c.length)return null;var f=function(e){return"function"==typeof h?{onClick:function(){h(e)}}:{}},p=function(e,t){return Object(i.c)("a",Object.assign(Object.assign({className:"AdvancedViewer-commodityItem",target:"_blank",rel:"noopener noreferrer",href:o},f({etu:o,pi:t+1})),{},{children:[Object(i.b)("img",{src:e.image,alt:""}),e.mainTitle&&Object(i.c)("div",{className:"AdvancedViewer-commodityIntro",children:[Object(i.b)("span",{className:"AdvancedViewer-mainTitle",children:e.mainTitle}),Object(i.b)("span",{className:"AdvancedViewer-subTitle",children:e.subTitle})]})]}),"AdvancedViewer-commodity-".concat(t))};if("image"===r)return Object(i.b)("a",Object.assign(Object.assign({className:"AdvancedViewer-material AdvancedViewer-image",target:"_blank",rel:"noopener noreferrer",href:o},f({etu:o})),{},{children:Object(i.b)(b,{src:c[0].image,style:t?{width:375,height:156.25}:{}})}));if("image_text"===r)return Object(i.c)("a",Object.assign(Object.assign({className:"AdvancedViewer-material AdvancedViewer-imageText",target:"_blank",rel:"noopener noreferrer",href:o},f({etu:o})),{},{children:[t&&Object(i.b)("div",{className:"AdvancedViewer-intro",children:c[0].intro}),Object(i.b)(b,{src:c[0].image}),!t&&Object(i.b)("div",{className:"AdvancedViewer-intro",children:c[0].intro})]}));if("commodity"===r)return c.length&&Object(i.b)("div",{className:"AdvancedViewer-material AdvancedViewer-commodity",children:t?c.map(p):Object(i.b)(l.a,{items:c,renderItem:p})});if("recommended"===r){var m=function(e,t){return Object(i.c)("a",Object.assign(Object.assign({className:"AdvancedViewer-recommendedItem",href:e.url,target:"_blank",rel:"noopener noreferrer"},f({etu:e.url,pi:t+1})),{},{children:[Object(i.c)("div",{className:"AdvancedViewer-summary",children:[Object(i.c)("div",{className:"AdvancedViewer-wrap",children:[Object(i.b)("div",{className:"AdvancedViewer-title",children:e.title}),e.intro&&Object(i.b)("div",{className:"AdvancedViewer-desc",children:e.intro.replace(/<[\s\S]*?>/g,"")})]}),Object(i.c)("span",{className:"AdvancedViewer-data",children:[d[e.type]," · ",e.statisticText]})]}),Object(i.b)(b,{src:e.image||u.o})]}))};return Object(i.b)("div",{className:"AdvancedViewer-material AdvancedViewer-recommended",children:c.map((function(e,t){return s?Object(i.b)(a.a,Object.assign(Object.assign({},(n={pi:t+1},"function"==typeof s?{onChange:function(e,t){e.isIntersecting&&(t.disconnect(),s(n))}}:{})),{},{children:m(e,t)}),t):m(e,t);var n}))})}return null}function f(e){var t,n=e.isMobileView,r=e.brand,l=r.name,u=r.logo,d=e.advancedStyle,b=(d=void 0===d?{}:d).brandRecommendText,f=d.buttonText,p=d.url,m=d.cardType,v=e.handleViewTrack,O=e.handleClickTrack,j=function(e){return"function"==typeof O?{onClick:function(){O(e)}}:{}},g=l&&l.charCodeAt(l.length-1),y=g>=0&&g<=128?"".concat(l," "):l,w=n&&"recommended"!==m,C=b||"".concat(y,"的品牌推荐"),k=Object(i.c)(c.d,{className:o()("AdvancedViewer",{"is-mobile":n}),children:[!w&&Object(i.b)(c.b,{className:"AdvancedViewer-header",children:Object(i.b)("span",{className:"AdvancedViewer-headerText",children:C})}),Object(i.b)("div",{className:"AdvancedViewer-content",children:Object(i.b)(h,Object.assign({},e))}),!n&&m&&"recommended"!==m&&Object(i.b)("div",{className:"AdvancedViewer-footer",children:Object(i.b)(s.a,Object.assign(Object.assign({className:"AdvancedViewer-button",target:"_blank",to:p},j({etu:p})),{},{children:f||"了解更多"}))}),w&&Object(i.c)("div",{className:"AdvancedViewer-footer",children:[Object(i.c)("div",{className:"AdvancedViewer-brand",children:[Object(i.b)("img",{className:"AdvancedViewer-logo",src:u,alt:""}),Object(i.b)("span",{className:"AdvancedViewer-brandName",children:C})]}),Object(i.b)(s.a,Object.assign(Object.assign({className:"AdvancedViewer-button",target:"_blank",to:p},j({etu:p})),{},{children:f||"查看详情"}))]})]});return v?Object(i.b)(a.a,Object.assign(Object.assign({},"function"==typeof v?{onViewed:function(){v(t)}}:{}),{},{children:k})):k}},2829:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(41),o=n(49),a=n(40),c=n.n(a),s=n(60),l=n(15),u=n(16),d=n(17),b=n(18),h=n(9),f=n(0),p=n.n(f),m=n(3),v=n.n(m),O=n(24),j=n(74),g=n(130),y=n.n(g),w=n(55),C=n(141),k=n.n(C),x=n(415),A=n(139),R=n(89),S=n.n(R),N=n(90),T=n(2244),B=n.n(T);var q=function(){return Object(i.b)(N.a,{title:"该内容仅作者可见",subtitle:"",errorImage:B.a})},E=n(19),I=n(121),Q=n(419),z=Object(i.b)(y.a,{meta:[{name:"robots",content:"noindex"}]}),M=Object(E.compose)(Object(Q.a)(null))((function(e){var t=e.entity,n=t.type,r=t.id,o=t.isVisible,a=t.isCollapsed,c=t.suggestEdit,s=void 0===c?{}:c,l=t.adminClosedComment,u="";"question"===n?u=r:"answer"===n&&(u=t.question.id);var d=Object(O.useSelector)((function(e){return Object(I.eb)(e,{id:u})}));if(d){var b=d.status,h=d.adminClosedComment,f=d.isMuted,p=d.visibleOnlyToAuthor,m=d.reviewInfo,v=void 0===m?{}:m;if(null!=b&&b.isClose||null!=b&&b.isSuggest||null!=b&&b.isEvaluate||h||f||p||v.editIsReviewing)return z}return"question"===n&&d.redirection?Object(i.b)("link",{rel:"canonical",href:"https://www.zhihu.com/question/".concat(d.redirection.to.id)}):"answer"===n&&(null!=s&&s.status||a||l||!o)||"article"===n&&(null!=s&&s.status||l||!o)?z:""})),P=n(424),L=n(1291),D=n(114),F=n(56),H=n(46),_=n(581),U=n(79),V=n(29),W=n(115),G=n(1734),K=function(e){var t=e.isQAPage,n=void 0!==t&&t,r=e.children,o=Object(O.useSelector)((function(e){return e.env.userAgent.GoogleBot}));return n&&o?Object(i.b)("div",{itemScope:!0,itemType:"https://schema.org/QAPage",children:r}):Object(i.b)(i.a,{children:r})},J=n(181),Y=n(2245),Z=n.n(Y);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var X=function(e){Object(d.a)(n,e);var t=$(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={time:e.props.seconds},e.handleClearInterval=function(){e.interval&&clearInterval(e.interval)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){e.setState({time:e.state.time-1},(function(){if(0===e.state.time){e.handleClearInterval();var t=e.props.id;location.href="/question/".concat(t)}}))}),1e3)}},{key:"componentWillUnmount",value:function(){this.handleClearInterval()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.destination,r=this.state.time;return Object(i.b)(J.b,{title:t,subtitle:"".concat(r," 秒后自动跳转至").concat(n),errorImage:Z.a})}}]),n}(f.Component);X.defaultProps={seconds:5,destination:"回答所在的问题页",title:"该回答已被删除"};var ee=n(206),te=n(209),ne=n.n(te),ie=n(36),re=n(1338),oe=n(279),ae=n(249),ce=n(35),se=n(13),le=n.n(se),ue=n(1119),de=n(962),be=n(180),he=n(1214),fe=n(1737),pe=n(2),me=n(208),ve=n(417),Oe="SpecialQuestionAuthor";function je(e){var t=e.author,n=e.className,o=e.isMobile,a=t.avatarUrl,c=t.name,s=t.badge,l=t.badgeV2;return Object(i.b)("div",{className:le()("".concat(Oe,"-Wrapper"),n),children:Object(i.c)(r.Link,{className:le()("".concat(Oe),Object(pe.a)({},"ROOT_CLASS--mobile",o)),to:"/".concat(t.isOrg?"org":"people","/").concat(t.urlToken||t.id),children:[Object(i.b)(me.a,{size:o?22:28,url:a,alt:c,round:!0}),Object(i.b)("span",{className:"".concat(Oe,"-Author"),children:t.name}),Object(i.b)(ve.c,{className:"".concat(Oe,"-Badge"),badge:l||s,size:o?16:18}),Object(i.b)("span",{className:"".concat(Oe,"-Suffix"),children:"的提问"})]})})}je.propTypes={author:v.a.object.isRequired,isMobile:v.a.bool};var ge=n(1176),ye=(n(1366),n(294)),we=n(897),Ce=n(45),ke=n.n(Ce),xe=n(924);function Ae(e){var t=e.question,n=e.isAuthorCurrentUser,r=e.hasExtraContent,a=t.author,c=Object(f.useState)(!1),s=Object(o.a)(c,2),l=(s[0],s[1],Object(f.useRef)(),Object(f.useRef)());return Object(f.useEffect)((function(){;""}),[n]),Object(f.useEffect)((function(){Object(we.onViewedOnce)(l.current,(function(){ce.a.trackCardShow(l.current,{id:7064})}))}),[]),Object(i.c)("div",{className:le()("QuestionAuthor",{"QuestionAuthor--hasExtraContent":r}),ref:l,children:[Object(i.b)(xe.a,{preset:"plain",author:a,zaId:7063,zaExtra:{link:{url:"//www.zhihu.com/people/".concat(a.urlToken)}},noHeadline:!0}),""]})}var Re=n(33),Se=n(178),Ne=n(138),Te=n(903),Be=n(895),qe=n(86),Ee=Object.assign;var Ie,Qe=function(e){return p.a.createElement(qe.a,Ee({width:"99",height:"99",viewBox:"0 0 99 99"},e),p.a.createElement("path",{fill:"currentColor",d:"M118.269 98.6a4.063 4.063 0 01-2.54-.893L69.501 60.79l-44.83 36.055a4.06 4.06 0 01-4.972.1 4.2 4.2 0 01-1.419-4.834L29.43 61.626c.801-2.153 3.175-3.234 5.29-2.423 2.12.812 3.191 3.216 2.39 5.366l-5.897 16.387 35.73-28.735a4.053 4.053 0 015.09-.008l38.454 30.708-13.8-45.548a4.2 4.2 0 011.421-4.524L129.74 8.185H97.734L51.044 41.93A4.068 4.068 0 0145.31 41c-1.33-1.863-.918-4.466.917-5.815L93.995.648a4.067 4.067 0 012.408-.79h45.412a4.11 4.11 0 013.887 2.823 4.2 4.2 0 01-1.385 4.64L105.371 37.69l16.82 55.522a4.193 4.193 0 01-1.6 4.658 4.066 4.066 0 01-2.322.73M16.219 18.143a3.63 3.63 0 01-2.935-1.468c-1.16-1.577-.784-3.772.834-4.9L30.328.514c1.62-1.13 3.869-.765 5.028.812 1.16 1.577.785 3.772-.834 4.9L18.314 17.488a3.669 3.669 0 01-2.095.655M32.28 29.114a3.46 3.46 0 01-2.005-6.277L84.62-15.959a3.45 3.45 0 014.815.814 3.46 3.46 0 01-.812 4.822L34.28 28.474a3.435 3.435 0 01-2 .64M3.407 7.171c-1.053 0-2.092-.53-2.757-1.53-1.104-1.655-.764-3.97.757-5.17l2.202-1.737c1.52-1.2 3.648-.831 4.751.823 1.104 1.656.764 3.971-.757 5.171L5.4 6.466a3.204 3.204 0 01-1.994.705",fillRule:"evenodd"}))},ze=["questionId","isInAnswerPage"],Me=function(e){var t,n=e.items,r=null==n||null===(t=n[0])||void 0===t?void 0:t.image;return Object(i.b)(w.Box,{css:function(e){return{flex:"0 0 44px",borderRadius:"4px",position:"relative","::after":{content:'""',position:"absolute",top:4,bottom:4,borderRadius:"inherit",right:"-4px",background:"".concat(e.colorMod(e.colors.GBK09A).alpha(.8)),width:"10px",zIndex:0}}},children:Object(i.b)(Te.a,{bg:"GBK09C",ratio:1,css:{zIndex:1},children:r&&Object(i.b)(w.Image,{size:"100%",src:Object(Ne.imgUrl)(r,"100w"),css:{borderRadius:"inherit",objectFit:"cover"}})})})},Pe=function(e){return[{width:"33px",right:"10px",zIndex:3},{width:"29px",right:"5px",zIndex:2},{width:"24px",right:0,zIndex:1}][e]},Le=function(e){var t=e.items,n=null==t?void 0:t.map((function(e){return e.image}));return Object(i.b)(w.Box,{css:{flex:"0 0 44px",borderRadius:"4px"},children:Object(i.b)(Te.a,{ratio:1,children:(null==n?void 0:n.length)>0&&n.map((function(e,t){return Object(i.b)(w.Box,{css:Object.assign({borderRadius:"inherit",position:"absolute",bottom:0},Pe(t)),children:Object(i.b)(Te.a,{bg:"GBK09C",ratio:3/4,css:{zIndex:1},children:e&&Object(i.b)(w.Image,{size:"100%",src:Object(Ne.imgUrl)(e,"100w"),css:{borderRadius:"inherit",objectFit:"cover",boxShadow:"0.5px 0 2px 0 rgba(0, 0, 0, 0.1)"}})})},t)}))})})},De=function(e){var t=e.questionId,n=e.isInAnswerPage,r=Object(Re.default)(e,ze),a=Object(O.useSelector)((function(e){return Object(I.fb)(e,t)})),c=Object(O.useDispatch)(),s=Object(ge.b)(),l=Object(o.a)(s,3),u=l[0],d=l[1],b=l[2];if(Object(f.useEffect)((function(){a||c(Object(I.Z)(t)).catch(b)}),[a,t,b,c]),Object(f.useEffect)((function(){a&&("not found"!==a.message?d():b())}),[a,b,d]),!a||"not found"===a.message||!u)return null;var h=a.name,p=a.num,m=a.upvoteNum,v=a.rankFieldType,g=a.items,y=a.urlToken,C=2===v,k=C?Le:Me;return Object(i.b)(x.a,{module:"Content",view:{id:8766,name:n?"answer":"question"},content:{token:y,parent_token:String(t)},trackCardShow:!0,children:Object(i.b)(j.b,{content:{type:"Topic",token:String(y)},children:Object(i.b)(j.e,{zaText:!0,shouldTrackClick:!0,as:"div","data-za-extra":JSON.stringify({button:{text:h}}),css:{position:"relative",zIndex:0},zaType:"Card",zaAction:"OpenUrl",zaBlock:"blueStar_questionPage_detailCard",zaEventType:"Click",extra:{link:{url:"https://www.zhihu.com/blue-star/ranking/".concat(y,"?origin_from=").concat(n?"answer":"question")}},children:Object(i.c)(w.Flex,Object.assign(Object.assign({as:Be.a,my:"14px",py:"8px",px:"12px",alignItems:"center",css:function(e){return{backgroundImage:"linear-gradient(to left, ".concat(e.colorMod(e.colors.GBL01A).alpha(.1),", ").concat(e.colorMod(e.colors.GBL01A).alpha(.04),")"),backgroundColor:e.colors.GBK99C,borderRadius:"5px",position:"relative",overflow:"hidden"}},"data-za-detail-view-id":"8767","data-za-detail-view-name":n?"answer":"question","data-za-extra":JSON.stringify({button:{text:h}}),href:"https://www.zhihu.com/blue-star/ranking/".concat(y,"?origin_from=").concat(n?"answer":"question")},r),{},{children:[Object(i.b)(Qe,{css:function(e){return{position:"absolute",width:"40.5px",height:"49.5px",top:-5,right:-1,color:e.colors.GBK99A}}}),Object(i.b)(k,{items:g}),Object(i.c)(w.Flex,{ml:"14px",alignItems:"center",children:[Object(i.b)(w.Text,{color:"GBK02A",fontWeight:"bold",css:{fontSize:"17px",lineHeight:"18px"},children:"小蓝星 · ".concat(h)}),Object(i.b)(w.Text,{color:"GBK05A",css:{fontSize:"14px",lineHeight:"16px",marginLeft:"10px"},children:C?ne()(Ie||(Ie=Object(ee.a)(["收录",""," · ","知友推荐"])),Object(Se.cnNiceNumber)(p),C?"部影视":"个商品",Object(Se.cnNiceNumber)(m)):"来自知友的真实反馈"})]})]}))})})})},Fe=n(466),He=n(982);function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Ue=function(e){Object(d.a)(n,e);var t=_e(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.item;return Object(i.b)(Fe.a,{className:"QuestionTopic",children:Object(i.b)(He.a,{noHoverCard:!1,topic:e})})}}]),n}(f.Component),Ve=Object(x.b)((function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}}))(Ue),We=n(1468),Ge=n(1571),Ke=n(963),Je=n(1056),Ye=n(1003),Ze=n(1154),$e=["text"],Xe=function(e){var t=e.text,n=Object(Re.default)(e,$e);return Object(i.b)(ie.c,Object.assign(Object.assign({preset:"plain"},n),{},{icon:Ze.a,label:t||"修改"}))};function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var tt=function(e){Object(d.a)(n,e);var t=et(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.tips;return Object(i.b)("div",{className:"QuestionReviewInfo",children:Object(i.b)("p",{children:e})})}}]),n}(f.PureComponent);tt.propsTypes={tips:v.a.string};function nt(e){var t,n,r=e.html,a=e.excerpt,c=e.thumbnailInfo,s=e.collapsed,l=e.onExpand,u=e.editable,d=e.onEdit,b=e.isVisible,h=e.isAuthor,p=a.length<r.length,m=(p||a.length>=75)&&s,v=!h&&!b,O=Object(f.useMemo)((function(){var e;return null==c||null===(e=c.thumbnails)||void 0===e?void 0:e.find((function(e){return"video"===e.type}))}),[c]),j=null==c||null===(t=c.thumbnails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url,g=Object(f.useState)(null),y=Object(o.a)(g,2),w=y[0],C=y[1];return Object(i.b)("div",{css:{minHeight:"10px"},children:Object(i.c)("div",{className:le()("QuestionRichText",{"QuestionRichText--expandable":p,"QuestionRichText--collapsed":s,"QuestionRichText--video":O&&s}),onClick:function(e){m&&"function"==typeof l&&l(e);var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&C(t)},children:[O&&s&&Object(i.b)("div",{className:"QuestionRichText--wrapImgae",children:Object(i.b)("img",{src:j,alt:"video",className:"QuestionRichText--image"})}),!v&&Object(i.c)("div",{children:[m?Object(i.b)("span",{itemProp:"text",children:Object(Ye.b)(a,75)}):Object(i.b)(Je.a,{itemProp:"text",tag:"span",html:r}),m&&Object(i.c)(ie.c,{preset:"plain",className:"QuestionRichText-more",children:["显示全部 ",Object(i.b)(Ge.a,{center:!0})]})]}),u&&!m&&Object(i.b)(Xe,{onClick:d}),w&&Object(i.b)(Ke.a,{img:w,onClose:function(){return C(null)}})]})})}function it(e){var t=e.reviewInfo,n=e.thumbnailInfo,r=e.html,o=e.excerpt,a=(t||{}).tips,c=Object(f.useMemo)((function(){var e;return null==n||null===(e=n.thumbnails)||void 0===e?void 0:e.find((function(e){return"video"===e.type}))}),[n]),s=Boolean(r&&o);return Object(i.c)("div",{children:[a&&c&&Object(i.b)(tt,{tips:a}),s?Object(i.b)(nt,Object.assign({},e)):null]})}var rt=n(422),ot=n(77),at=n(158),ct=n(2003),st=n(2148),lt=n(520),ut=n(205),dt=n(1183);function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var ht=function(e){Object(d.a)(n,e);var t=bt(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).getRenderProps=function(){var t=e.props,n=t.draft,r=t.question,o=r.id,a=r.relationship,c=(a=void 0===a?{}:a).myAnswer,s=t.params.answerId,l=t.isMobile;return c?c.isDeleted?{icon:Object(i.b)(ct.a,{size:17,className:"QuestionButton-icon"}),text:"撤销删除",props:{onClick:e.handleRestoreAnswer}}:!l&&s&&s===String(c.answerId)?{icon:Object(i.b)(st.a,{size:17,className:"QuestionButton-icon"}),text:"编辑回答",props:{onClick:e.handleEditAnswer}}:{icon:Object(i.b)(st.a,{size:17,className:"QuestionButton-icon"}),text:"查看我的回答",props:{to:"/question/".concat(o,"/answer/").concat(c.answerId),onClick:e.handleFocusAnswer},Wrapper:ut.a}:{icon:Object(i.b)(Ze.a,{size:16,center:!0,className:"QuestionButton-icon"}),text:n?"编辑回答":"写回答",props:{onClick:e.handleAddAnswer}}},e.handleFocusAnswer=function(){var t=document.querySelector(".AnswerCard");t&&(t.classList.add("is-focus"),e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout((function(){return t.classList.remove("is-focus")}),300))},e.handleRestoreAnswer=function(){var t=e.props,n=t.question,i=n.relationship.myAnswer,r=n.id,o=t.restoreAnswer,a=t.showNotification;i.isDeleted&&o(r,i.answerId).then((function(){return a("已撤销删除回答")}))},e.handleAddAnswer=e.context.authRequired((function(t){var n=e.props,i=n.draft,r=n.question,o=r.id,a=r.reviewInfo,c=(a=void 0===a?{}:a).tips,s=n.zaId,l=n.cancelScheduledPublish,u=n.isMobile,d=n.useNewPageFullScreenEditor,b=n.useMediumEditor;if(u)window.location.href="/question/".concat(o,"/answers/editor");else if(d)Object(dt.f)(o);else if(b&&Object(dt.b)())Object(dt.f)(o);else{var h=t.currentTarget,f=function(){c?e.props.showNotification(c,"red"):(s&&ce.a.trackEvent(null,{id:s}),ce.a.trackEvent(Object(ot.a)(e),{action:i&&i.editableContent?"Edit":"Answer",is_intent:!0,name:h.textContent}),e.context.startAddAnswer())};i&&i.schedule?at.a.confirm("如果继续编辑该回答，原定时发送设置将会失效，需重新设置定时发送时间，是否继续编辑？",{title:"编辑回答",text:{ok:"继续编辑",cancel:"我再想想"}}).then((function(){l(e.props.question.id).then(f)}),(function(){})):f()}})),e.handleEditAnswer=e.context.authRequired((function(){var e=document.querySelector(".AnswerItem-editButton");e&&e.click()})),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){Object(lt.b)()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.size,o=e.preset,a=e.color,c=void 0===a?"blue":a,s=e.onClick,l=this.getRenderProps(),u=l.icon,d=l.text,b=l.props,h=l.Wrapper,p=void 0===h?ie.c:h,m=Object(i.c)(f.Fragment,{children:[u,d]});return Object(i.b)(j.e,{zaType:"Button",zaText:d,as:"a",children:Object(i.b)(j.a,Object.assign(Object.assign(Object.assign({as:p,zaType:"Button",zaText:d},b),s&&{onClick:s}),{},{color:c,size:r,preset:o,className:n,children:t||m}))})}}]),n}(f.Component);ht.contextTypes={authRequired:v.a.func,startAddAnswer:v.a.func};var ft=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){return{draft:Object(I.n)(e,{id:t.params.id}),question:Object(I.eb)(e,{id:t.params.id}),isMobile:Object(F.isMobileSelector)(e),currentUser:Object(H.b)(e),useNewPageFullScreenEditor:-1!==["3","4"].indexOf(Object(F.abParamSelector)(e,"pc_fullsize")),useMediumEditor:-1!==["1","2"].indexOf(Object(F.abParamSelector)(e,"pc_fullsize"))}}),{restoreAnswer:U.B,cancelScheduledPublish:U.e,showNotification:V.h}))(ht),pt=n(908),mt=n(935),vt=n(1088);function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var jt={follow_question:vt.b.follow,write_answer:vt.b.write_answer},gt=function(e){Object(d.a)(n,e);var t=Ot(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).createOpenInAppHandler=function(t){var n=e.props,i=n.question.id,r=n.isSpecialQuestionOrAnswer;return function(){r?location.href="zhihu://question/".concat(i,"?utm_app_name=zhihu_check&utm_content=").concat(t):Object(rt.e)(Object(mt.a)({type:"question",id:i},{launch_button:jt[t]}))}},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.question,r=n.relationship,o=n.relationship.isAuthor,a=n.isNormal,c=n.status,s=(c=void 0===c?{}:c).isLocked,l=n.questionType,u=n.isMuted,d=n.id,b=e.shouldOia,h=e.inTopBar,f="commercial"===l&&u;return Object(i.c)("div",{className:"QuestionButtonGroup",children:[o&&f?Object(i.b)(ut.a,{preset:"primary",a:!0,to:"https://e.zhihu.com",color:"green",children:"推广问题"}):Object(i.b)(pt.a,Object.assign({id:d,zaId:h?3408:3309,type:"question",preset:"primary",isFollowing:(r&&{}.hasOwnProperty.call(r,"isFollowing")?r:t).isFollowing,disabled:f},b&&{onClick:this.createOpenInAppHandler("follow_question")})),a&&!s&&Object(i.b)(ft,{color:"blue",zaId:h?3409:3311})]})}}]),n}(f.Component),yt=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){var n;return{shouldOia:Object(F.shouldOiaSelector)(e),isSpecialQuestionOrAnswer:Object(F.specialQuestionOrAnswerSelector)(e,{type:"question",id:null===(n=t.question)||void 0===n?void 0:n.id})}})))(gt),wt=n(21),Ct=n.n(wt),kt=n(25),xt=n.n(kt),At=n(23),Rt=n.n(At),St=n(27),Nt=n.n(St),Tt=n(14),Bt=n.n(Tt),qt=n(7);function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Bt()(e);if(t){var r=Bt()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Nt()(this,n)}}var It=function(e){Rt()(n,e);var t=Et(n);function n(){var e;Ct()(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={count:Math.round(e.props.count)},e.next=function(){var t=e.props.onEnd,n=e.state.count-1;e.setState({count:n}),0===n&&(clearInterval(e.handle),t&&t())},e}return xt()(n,[{key:"componentDidMount",value:function(){this.state.count<=0||(this.handle=setInterval(this.next,this.props.interval))}},{key:"componentWillUnmount",value:function(){clearInterval(this.handle)}},{key:"render",value:function(){var e=this.state.count;return Object(qt.g)("span",null,e)}}]),n}(f.Component);It.propTypes={count:v.a.number.isRequired,interval:v.a.number,onEnd:v.a.func},It.defaultProps={interval:1e3};var Qt=It,zt=n(414),Mt=n(184),Pt=n(57),Lt=n(161),Dt=n(421),Ft=n(902),Ht=n(1202);function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Ut=function(e){Object(d.a)(n,e);var t=_t(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1,invitationModalShown:!1},e.redirect=function(){var t=e.props,n=t.router,i=t.location.query,r=t.question,o=r.id,a=r.redirection;a&&a.to&&a.to.id&&"1"!==i.nr&&n.push("/question/".concat(a.to.id,"?rf=").concat(o))},e.handleRedirectionClose=function(){e.setState({redirectionHidden:!0,invitersHidden:!0}),e.timeout=setTimeout((function(){e.setState({invitersHidden:!1})}),1e3)},e.handleCloseInviters=function(){e.setState({invitersHidden:!0})},e.handleDeleteInviters=function(t){var n=e.props,i=n.question.id;(0,n.deleteInviters)(i),e.handleCloseInviters(),ce.a.trackEvent(t.target,{action:"Ignore"})},e.handleCancelAnonymous=function(){(0,e.props.onInvitationTipClose)(),e.context.toggleAnonymous(!1)},e.handleInvite=function(t){e.setState({invitersHidden:!0,invitationModalShown:!0}),ce.a.trackEvent(t.target,{action:"Invite",is_intent:!0})},e.handleInvitationModalHide=function(){e.setState({invitationModalShown:!1})},e}return Object(u.a)(n,[{key:"componentWillMount",value:function(){Object(Pt.isBrowser)()&&this.nextQuestion(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.nextQuestion(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"nextQuestion",value:function(e){var t=this,n=this.context.currentUser,i=e.location.query,r=e.question.id,o=e.fromQuestion,a=e.loadItems,c=e.loadQuestion;clearTimeout(this.timeout),this.setState({redirectionLoading:!1,redirectionHidden:!1,invitersHidden:!1}),n&&"guest"!==n.userType&&a(r,"inviters"),i.rf&&/^\d+$/.test(i.rf)&&!o&&(this.setState({redirectionLoading:!0}),c(Number(i.rf)).catch((function(){})).then((function(){t.setState({redirectionLoading:!1})})))}},{key:"revokeRedirection",value:function(e){var t=this.props,n=t.router,i=t.question.id;(0,t.revokeQuestionRedirection)(e).then((function(){n[e===i?"replace":"push"]("/question/".concat(e))})),this.handleRedirectionClose()}},{key:"renderCommercialMuteStatus",value:function(){var e=this.props.question,t=e.questionType,n=e.isMuted;return e.relationship.isAuthor&&"commercial"===t&&n?Object(i.b)("div",{className:"QuestionStatus-bar",children:Object(i.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(i.c)("div",{className:"QuestionStatus-bar-commercialMuted",children:["该品牌提问尚未激活，无法在社区内流通。请"," ",Object(i.b)("a",{href:"https://e.zhihu.com",target:"_blank",rel:"noopener noreferrer",children:"前往广告平台"})," ","进行设置。"]}),Object(i.b)("p",{children:"未激活的品牌提问页可以添加回答，但相关动态不在社区内流通，包括不会出现在知乎首页、用户主页，也不会被搜索到。当与该品牌提问关联的广告开始投放时，提问被激活，并开始流通。"})]})}):null}},{key:"renderMute",value:function(){var e=this.props,t=e.isMuteSpecial,n=e.isMuteFreeze;return t?Object(i.b)("div",{className:"QuestionStatus-bar",children:Object(i.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(i.b)("strong",{children:"问题已解散"}),Object(i.b)("p",{children:"当前问题下的回答暂时无法查看。"})]})}):n?Object(i.b)("div",{className:"QuestionStatus-bar",style:{display:"none"},children:Object(i.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(i.b)("strong",{children:"问题已冻结"}),Object(i.b)("p",{children:"除浏览外不开放其他用户互动功能。"})]})}):null}},{key:"renderBar",value:function(){var e=this.props.question.status.unnormalDetails;return e&&Object(i.b)("div",{className:"QuestionStatus-bar",children:Object(i.c)("div",{className:"QuestionStatus-bar-inner",children:[Object(i.c)("strong",{children:[e.description,"。"]}),Object(i.c)("em",{children:["原因：",e.reason,"。"]}),1033!==e.reasonId&&Object(i.b)(Dt.a,{html:e.note})]})})}},{key:"renderNotification",value:function(){var e=this,t=this.props,n=t.location.query,r=t.question,o=r.id,a=r.redirection,c=r.relationship,s=(c=void 0===c?{}:c).myAnswer,l=t.inviters,u=t.fromQuestion,d=t.isAnswerPage,b=this.state,h=b.redirectionLoading,f=b.redirectionHidden,p=b.invitersHidden,m=null,v=null;if(!h)if(a&&a.to&&a.to.id&&!f){var O=a.to,j=O.id,g=O.title,y="1"!==n.nr&&!d;m=y?"redirect-countdown":"redirect",v=Object(i.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(i.c)("div",{className:"QuestionStatus-notification-content",children:[y?Object(i.c)("span",{children:["此问题将在 ",Object(i.b)(Qt,{count:5,onEnd:this.redirect})," ","秒后跳转至"]}):Object(i.b)("span",{children:"此问题已重定向至"})," ",Object(i.b)(ut.a,{preset:"plain",to:"/question/".concat(j,"?rf=").concat(o),children:g})]}),Object(i.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(i.b)(ie.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(o)},children:"撤销重定向"}),Object(i.b)("div",{className:"QuestionStatus-notification-divider"}),Object(i.b)(ie.c,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else if(u&&u.redirection&&u.redirection.to&&u.redirection.to.id&&u.redirection.to.id===o&&!f){var w=u.id,C=u.title;m="redirect-from",v=Object(i.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(i.c)("div",{className:"QuestionStatus-notification-content",children:["从问题"," ",Object(i.b)(ut.a,{preset:"plain",to:"/question/".concat(w,"?nr=1"),children:C})," ","跳转而来"]}),Object(i.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(i.b)(ie.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:function(){return e.revokeRedirection(w)},children:"撤销重定向"}),Object(i.b)("div",{className:"QuestionStatus-notification-divider"}),Object(i.b)(ie.c,{preset:"plain",onClick:this.handleRedirectionClose,children:"关闭"})]})]})}else l&&l.length&&!p&&!s&&(v=Object(i.b)(x.a,{module:"InvitationCard",trackCardShow:!0,children:Object(i.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(i.c)("div",{className:"QuestionStatus-notification-content",children:[l.map((function(e,t){return Object(i.c)("span",{children:[0!==t&&"、",Object(i.b)(Ft.a,{user:e,noBadge:!0,noHoverCard:!0,"data-za-detail-view-element_name":"User"})]},e.urlToken)}))," ","邀请你回答此问题"]}),Object(i.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(i.b)(ie.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleInvite,children:"邀请别人"}),Object(i.b)("div",{className:"QuestionStatus-notification-divider"}),Object(i.b)(ie.c,{preset:"plain",onClick:this.handleDeleteInviters,children:"忽略邀请"})]}),Object(i.b)("div",{children:Object(i.b)(ie.c,{className:"QuestionStatus-notification-closeButton",preset:"plain",onClick:this.handleCloseInviters,icon:zt.a})})]})}));return Object(i.b)(Mt.a,{className:"QuestionStatus-notification",notification:v?{key:m,text:v}:null})}},{key:"renderInvitationTip",value:function(){var e=this.props,t=e.invitationTipShown,n=e.onInvitationTipClose;return Object(i.b)(Mt.a,{className:"QuestionStatus-notification",notification:t?{text:Object(i.c)("div",{className:"QuestionStatus-notification-inner",children:[Object(i.b)("div",{className:"QuestionStatus-notification-content",children:"在匿名状态下无法邀请他人回答"}),Object(i.c)("div",{className:"QuestionStatus-notification-actions",children:[Object(i.b)(ie.c,{preset:"plain",className:"QuestionStatus-notification-primary",onClick:this.handleCancelAnonymous,children:"取消匿名"}),Object(i.b)("div",{className:"QuestionStatus-notification-divider"}),Object(i.b)(ie.c,{preset:"plain",onClick:n,children:"关闭"})]})]})}:null})}},{key:"render",value:function(){var e=this.props.question,t=this.state.invitationModalShown;return Object(i.c)("div",{className:"QuestionStatus",children:[this.renderCommercialMuteStatus(),this.renderMute(),this.renderBar(),this.renderNotification(),this.renderInvitationTip(),Object(i.b)(Lt.b,{size:"fullPage",onClose:this.handleInvitationModalHide,children:t&&Object(i.b)(Ht.a,{question:e})})]})}}]),n}(f.Component);Ut.contextTypes={currentUser:v.a.object,toggleAnonymous:v.a.func};var Vt=Object(E.compose)(Object(Q.a)({replacement:null}),r.withRouter,Object(O.connect)((function(e,t){var n=e.entities.questions,i=e.question.inviters,r=t.location.query,o=t.question.id,a={isMuteSpecial:Object(I.E)(t.question),isMuteFreeze:Object(I.D)(t.question),inviters:i[o]};if(r.rf&&/^\d+$/.test(r.rf)){var c=n[Number(r.rf)];c&&(a.fromQuestion=c)}return a}),{loadItems:I.R,loadQuestion:I.T,revokeQuestionRedirection:I.hb,deleteInviters:I.k}))(Ut),Wt=n(87),Gt=n(993),Kt=n(4),Jt=n(1322);function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Zt,$t=function(e){Object(d.a)(n,e);var t=Yt(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.parent.id;(0,t.loadQuestionFollowers)(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.parent.followerCount,n=e.isFetching,r=e.isDrained,o=e.items,a=e.currentUser;return Object(i.b)(Jt.a,{currentUser:a,isFetching:n,isDrained:r,items:o,voteupCount:t,onLoad:this.load,text:"关注了"})}}]),n}(f.Component),Xt=Object(O.connect)((function(e,t){var n=t.parent.id,i=e.entities.users,r=e.question,o=r.followers,a=r.concernedFollowers,c=o[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},s=c.isFetching,l=c.isDrained,u=c.order,d=c.ids,b=(a[n]||{ids:[]}).ids;return{isFetching:s,isDrained:l,order:u,items:[].concat(Object(Kt.a)(b),Object(Kt.a)(d.filter((function(e){return!b.includes(e)})))).map((function(e){return i[e]})),currentUser:Object(H.b)(e)}}),{loadQuestionFollowers:I.W})($t),en=n(310);function tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var nn=function(e){Object(d.a)(n,e);var t=tn(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={followersShown:!1},e.showFollowers=function(){e.setState({followersShown:!0})},e.closeFollowers=function(){e.setState({followersShown:!1})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.question,n=e.currentUser,r=e.concernedFollowers,o=t.followerCount,a=t.visitCount,c=this.state.followersShown;return Object(i.c)("div",{className:"QuestionFollowStatus",children:[Object(i.c)(Gt.a,{divider:!0,className:"QuestionFollowStatus-counts",children:[n?Object(i.b)(Gt.a.Item,{tag:ie.c,preset:"plain",onClick:this.showFollowers,name:"关注者",value:o}):Object(i.b)(Gt.a.Item,{name:"关注者",value:o}),Object(i.b)(Gt.a.Item,{name:"被浏览",value:a})]}),Boolean(r&&r.length)&&Object(i.c)(ie.c,{preset:"plain",className:"QuestionFollowStatus-people",onClick:this.showFollowers,children:[Object(i.b)("span",{className:"QuestionFollowStatus-people-tip",children:ne()(Zt||(Zt=Object(ee.a)(["","也关注了该问题"])),1===r.length?r[0].name:"他们")}),r.map((function(e){return Object(i.b)(Ft.a,{user:e,avatar:!0,avatarProps:{size:26,round:!0},noLink:!0,noBadge:!0,noHoverCard:!0},e.id)}))]}),Object(i.b)(Wt.b,{size:"fullPage",onClose:this.closeFollowers,children:c&&Object(i.b)(Xt,{parent:t})})]})}}]),n}(f.Component),rn=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){var n=t.params;return{currentUser:Object(H.b)(e),concernedFollowers:Object(I.f)(e,{id:n.id})}}),{loadQuestionConcernedFollowers:I.V}),Object(en.a)({shouldLoad:function(e){return e.currentUser&&!e.concernedFollowers},load:function(e){return e.loadQuestionConcernedFollowers(e.params.id)}}))(nn),on=n(852),an=n(885),cn=n(2004),sn=n(1110),ln=n(122),un=n(30),dn=n(946),bn=n(944),hn=n(288),fn=n(1490),pn=n(52),mn=n(2213),vn=n(1006),On=n(62);function jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var gn=function(e){Object(d.a)(n,e);var t=jn(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={commentsShown:!1},e.handleCommentsShow=function(){var t=e.props,n=t.question.reviewInfo.tips,i=t.handleReviewingNotification;n?i():(ce.a.trackEvent(Object(ot.a)(e),{action:"Comment",element:"Button",is_intent:!0}),e.setState({commentsShown:!0}))},e.handleCommentsClose=function(){e.setState({commentsShown:!1})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.router,n=e.router.location,i=n.pathname,r=n.search,o=Boolean(/^\/question\/(\d*)$/.test(i)),a=Object(pn.parse)(location.search.slice(1)).answer_deleted_redirect;if(o&&"true"!==a){var c=Object(On.a)(location.hash);this.setState({byComment:c}),c&&(t.replace("".concat(i).concat(r)),this.handleCommentsShow())}}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState({commentsShown:!1})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.textStyle,r=e.isMuteSpecial,o=t.commentCount,a=t.adminClosedComment,c=this.state.commentsShown,s="",l=o&&!a;return s="textNumber"===n?l?"评论 ".concat(Object(Se.formatNumber)(o)):"":l?"".concat(Object(Se.formatNumber)(o)," 条评论"):"添加评论",Object(i.c)("div",{className:"QuestionHeader-Comment",children:[Object(i.b)(ie.c,{preset:"plain",onClick:this.handleCommentsShow,icon:mn.a,label:s,disabled:r}),Object(i.b)(Lt.b,{size:"fullPage",onClose:this.handleCommentsClose,children:c&&Object(i.b)(vn.a,{type:"question",parent:t,byComment:this.state.byComment,commentNeedsReview:"censor"===t.commentPermission})})]})}}]),n}(f.Component);gn.propTypes={question:v.a.object.isRequired,handleReviewingNotification:v.a.func.isRequired};var yn=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){return{isMuteSpecial:Object(I.E)(t.question)}})))(gn),wn=n(2214);var Cn=function(e){var t=Object(f.useRef)(null),n=e.authRequired,r=e.questionId,o=Object(O.useDispatch)(),a=Object(O.useSelector)((function(e){return Object(I.eb)(e,{id:r})})),l=a.relationship,u=l.voting,d=l.isFollowing,b=a.voteupCount,h=a.canVote,p="0"===String(u);Object(f.useEffect)((function(){ce.a.trackCardShow(t.current,{name:String(b),id:7228})}),[]);var m=function(){if(!d){var e=p;return o(Object(I.qb)(r,e))}},v=le()("GoodQuestionAction-commonBtn",{"GoodQuestionAction-highLightBtn":"1"===String(u)}),g=n(Object(s.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(Object(I.tb)(r,u));case 2:return e.next=4,m();case 4:n=p?"Upvote":"UnUpvote",ce.a.trackEvent(t.current,{action:n,name:String(b),id:7229});case 6:case"end":return e.stop()}}),e)}))));return Object(i.b)("div",{className:"GoodQuestionAction",children:h&&Object(i.b)(j.a,{as:ie.c,zaText:p?"好问题":"取消好问题",zaType:"Button",zaAction:p?"Upvote":"UnUpvote",onRef:function(e){return t.current=e},className:v,preset:"plain",onClick:g,icon:wn.a,label:b>0?"好问题 ".concat(b):"好问题"})})},kn=n(1397),xn=n(1148),An={true:{title:"确定解锁问题编辑？",subtitle:"该问题编辑已锁定，解锁后可被其他用户编辑，要解锁编辑吗？",confirmText:"解锁问题编辑"},false:{title:"确定锁定问题编辑？",subtitle:"锁定后，其他用户将不可编辑你提出的问题",confirmText:"锁定问题编辑"}};function Rn(e){var t=e.showModal,n=e.showEncourageAuthorEditLock,r=e.handleConfirmEditLock,a=e.handleEditLockShown,c=n?"编辑已锁定":"锁定编辑",s=Object(f.useRef)(),l=Object(f.useState)(!1),u=Object(o.a)(l,2),d=u[0],b=u[1];Object(f.useEffect)((function(){ke.a.get("question::hasSeenShowEditLockHint")||Object(xn.b)([Object(xn.a)(3e3).then((function(){ke.a.set("question::hasSeenShowEditLockHint",!0),b(!0)})),Object(xn.a)(3e3).then((function(){b(!1)}))])}),[]),Object(f.useEffect)((function(){Object(we.onViewedOnce)(s.current,(function(){ce.a.trackCardShow(s.current,{id:7666},{button:{text:c}})}))}),[c]);var h=Object(f.useCallback)((function(){ce.a.trackEvent(s.current,{id:7669,action:"Click"},{button:{text:c}}),a()}),[a,c]),p=function(e){var t=e?An[n].confirmText:"取消";ce.a.trackEvent(null,{id:7678,action:"Select",name:t},{button:{text:c}}),e?r():a()};return Object(i.c)(i.a,{children:[Object(i.b)(ie.c,{preset:"plain",onClick:h,label:c,icon:kn.a,onRef:s}),Object(i.b)(ye.a,{className:"QuestionEditLockMenu-Hint",isOpen:d,target:s.current,placement:"top",children:"锁定后问题不可被其他用户编辑"}),Object(i.b)(dn.a,Object.assign({needCancel:!1,showButtonHorizontal:!0,showConfirmButtonRight:!0,onCancel:function(){return p(!1)},onSubmit:function(){return p(!0)},shown:t},An[n]))]})}function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Nn={invitationShown:!1,reportShown:!1,editLockShown:!1,lockTipsShown:!1,deleteShown:!1,redirectionCreatorShown:!1},Tn=[{key:"all",name:"开放评论"},{key:"censor",name:"预审评论"},{key:"nobody",name:"关闭评论"}],Bn=[{key:"open",name:"开放回答"},{key:"censor",name:"预审回答"}],qn=function(e){Object(d.a)(n,e);var t=Sn(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state=Nn,e.handleReviewingNotification=function(){var t=e.props.question.reviewInfo.tips;e.props.showNotification(t,"red")},e.handleInvite=e.context.authRequired((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventId,i=void 0===n?3312:n;ce.a.trackEvent(null,{id:i});var r,o=e.props,a=o.question,c=a.relationship.isAnonymous,s=a.status,l=(s=void 0===s?{}:s).isLocked,u=s.isClose,d=s.isEvaluate,b=s.isSuggest,h=a.reviewInfo,f=(h=void 0===h?{}:h).tips,p=o.onInvitationTipShow;f?e.handleReviewingNotification():c?p():(l?r="锁定":u?r="关闭":(d||b)&&(r="建议修改"),r?e.props.showNotification("该问题已被".concat(r,"，不能邀请人回答此问题"),"red"):e.handleInvitationShow())}),un.X.invite),e.handleInvitationShow=function(){return e.setState({invitationShown:!0})},e.handleInvitationHide=function(){return e.setState({invitationShown:!1})},e.handleReport=function(){e.setState({reportShown:!e.state.reportShown})},e.handleEditLockShown=function(){e.setState({editLockShown:!e.state.editLockShown})},e.handleLockClick=function(){return e.props.question.status.isLocked?e.handleUpdateQuestionLocked():e.handleLockTipsShow()},e.handleOpenStatusChange=function(t){var n=e.props;(0,n.updateBrandQuestionOpenStatus)(n.question.id,t)},e.handleUpdateQuestionLocked=function(){var t=e.props,n=t.question.id;(0,t.updateQuestionLocked)(n)},e.handleLockTipsShow=function(){return e.setState({lockTipsShown:!0})},e.handleLockTipsHide=function(){return e.setState({lockTipsShown:!1})},e.handleDelete=function(){return e.setState({deleteShown:!0})},e.handleDeleteModalClose=function(){return e.setState({deleteShown:!1})},e.handleConfirmDelete=function(){e.handleDeleteModalClose();var t=e.props,n=t.question,i=n.id,r=n.questionType,o=t.deleteQuestion,a=t.deleteBrandQuestion;return("commercial"===r?a:o)(i).then((function(){location.href="/"}))},e.handleConfirmEditLock=function(){e.handleEditLockShown();var t=e.props;(0,t.toggleQuestionEditLock)(t.question.id)},e.handleRedirectionCreatorShow=function(){e.props.question.reviewInfo.tips?e.handleReviewingNotification():e.setState({redirectionCreatorShown:!0})},e.handleRedirectionCreatorClose=function(){e.setState({redirectionCreatorShown:!1})},e.handleRedirectionCreated=function(t,n){var i=e.props,r=i.router,o=i.question.id,a=t.id;e.handleRedirectionCreatorClose(),n.then((function(){r.push("/question/".concat(a,"?rf=").concat(o))}))},e.handleCommentPermissionChange=function(t){var n=e.props;(0,n.updateQuestionPermission)(n.question.id,t)},e.handleShareMenuTogglerClick=function(){var t=e.props.question.reviewInfo;return!(t=void 0===t?{}:t).tips||(e.handleReviewingNotification(),!1)},e.toggleAnonymous=function(){var t=e.props,n=t.question.reviewInfo,i=n.tips,r=n.editTips,o=t.isCurrentAnswerCommercialReported;i?e.handleReviewingNotification():r?e.props.showNotification(r,"red"):o?e.props.showNotification("已经进行商业声明的内容不能启用匿名","red"):e.context.toggleAnonymous()},e.getQuestionStatus=function(){return Object(vt.c)(e.props.question.status)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.getHandleInvite;e&&e(this.handleInvite)}},{key:"componentWillReceiveProps",value:function(e){this.props.question.id!==e.question.id&&this.setState(Nn)}},{key:"shouldShowAnonymousMenuItem",get:function(){var e=this.context.currentUser;if(e&&!e.isOrg){var t=this.props,n=t.question,i=n.questionType,r=n.relationship.isAnonymous,o=t.allowCommercialAnonymousAnswer;if(r)return!0;if("normal"===i)return!0;if("commercial"===i&&o)return!0}return!1}},{key:"shouldShowMenu",get:function(){var e=this.props,t=e.question.questionType,n=e.permission.canBrandAdminEdit,i="commercial"===t;return!i||!(!i||!n)}},{key:"renderCommercialMenuItems",value:function(e){var t=this,n=this.props,r=n.permission.canBrandAdminEdit,o=n.question,a=o.status,c=(a=void 0===a?{}:a).isLocked,s=o.commentPermission,l=o.brandOpenStatus,u=o.brand,d=(u=void 0===u?{}:u).isPuQuestion;if(!r)return null;var b=Tn,h=Bn;return Object(i.c)(f.Fragment,{children:[b.map((function(n){var r=n.key,o=n.name,a=!s&&"all"===r||s===r;return Object(i.c)(ln.b,{className:e,onClick:function(){return t.handleCommentPermissionChange(r)},children:[a&&Object(i.b)(on.a,{className:"MenuItem-icon",text:!0,center:!0})," ",o]},r)})),Object(i.b)("li",{className:"Menu-divider"}),(d&&(h=[{key:"open",name:"开放回答"}]),Object(i.c)(i.a,{children:[!c&&h.map((function(n){var r=n.key,o=n.name,a=l===r;return Object(i.c)(ln.b,{className:e,onClick:function(){return!a&&t.handleOpenStatusChange(r)},children:[a&&Object(i.b)(on.a,{className:"MenuItem-icon",text:!0,center:!0})," ",o]},r)})),!d&&Object(i.b)(ln.b,{className:e,onClick:t.handleLockClick,children:c?"开放回答":"关闭回答"}),Object(i.b)("li",{className:"Menu-divider"})]}))]})}},{key:"renderMobileMenuItems",value:function(e){var t=this.props,n=t.question.id,r=t.shouldOia;return e.map((function(e){var t=e.text,o=e.handler;return Object(i.b)(ln.b,{onClick:r?function(){return Object(rt.e)(Object(mt.a)({type:"question",id:n},{utm_content:"invite"}))}:o,children:t},t)}))}},{key:"renderLogMenuItem",value:function(){var e=this.props,t=e.question.id;return e.shouldOia?Object(i.b)(ln.b,{onClick:function(){return Object(rt.e)(Object(mt.a)({type:"question",id:t}))},children:"查看问题日志"}):Object(i.b)(ln.b,{tag:ut.a,a:!0,to:"/question/".concat(t,"/log"),children:"查看问题日志"})}},{key:"render",value:function(){var e=this.state,t=e.invitationShown,n=e.reportShown,r=e.editLockShown,o=e.lockTipsShown,a=e.deleteShown,c=e.redirectionCreatorShown,s=this.props,l=s.question,u=s.question,d=u.id,b=u.title,h=u.answerCount,f=u.collapsedAnswerCount,p=u.relationship,m=p.isAuthor,v=p.isAnonymous,O=u.questionType,g=u.isEditable,y=u.author.urlToken,w=u.showEncourageAuthorEditLock,C=s.isMuteSpecial,k=s.isMuteFreeze,x=s.publicEditPermission,A=(x=void 0===x?{}:x).isQuestionRedirectEditable,R=s.currentUserUrlToken,S=s.permission.canBrandAdminEdit,N=s.editQuestionButton,T=this.context.currentUser,B="commercial"===O,q=T&&!m,E=T&&m&&"boolean"==typeof w,I=B?S:Boolean(m&&0===h&&0===f),Q=[q&&{text:"举报",icon:an.a,handler:this.handleReport}].filter(Boolean),z=y===R,M=Object(vt.e)(g,z,A),P=this.shouldShowAnonymousMenuItem,L=P||this.shouldShowMenu,D=le()("QuestionHeader-menu-item",{"QuestionHeader-menu-item--com":B});return Object(i.c)("div",{className:"QuestionHeaderActions",children:[Object(i.b)(j.a,{as:ie.c,zaText:!0,zaType:"Button",color:"grey",style:{marginRight:16},onClick:this.handleInvite,label:"邀请回答",icon:cn.a,disabled:C||k}),Object(i.b)(Cn,{questionId:d,authRequired:this.context.authRequired}),Object(i.b)(yn,{question:l,handleReviewingNotification:this.handleReviewingNotification}),Object(i.b)(bn.a,{id:d,title:b,href:"/question/".concat(d),onTogglerClick:this.handleShareMenuTogglerClick,type:"question",disabled:C||k}),N,E&&Object(i.b)(Rn,{showModal:r,showEncourageAuthorEditLock:w,handleEditLockShown:this.handleEditLockShown,handleConfirmEditLock:this.handleConfirmEditLock}),L&&Object(i.c)(ln.c,{toggler:Object(i.b)(ie.c,{preset:"plain","aria-label":"更多",icon:sn.a}),menuClassName:"QuestionHeader-menu",itemClassName:D,children:[!1,P&&Object(i.b)(ln.b,{onClick:this.toggleAnonymous,children:v?"取消匿名身份":"使用匿名身份"}),B&&this.renderCommercialMenuItems(D),I&&Object(i.b)(ln.b,{onClick:this.handleDelete,children:"删除问题"}),M&&!T.isOrg&&"normal"===O&&Object(i.b)(ln.b,{onClick:this.handleRedirectionCreatorShow,children:"问题重定向"}),!B&&this.renderLogMenuItem(),Q.map((function(e){var t=e.text,n=e.handler,r=e.disabled;return Object(i.b)(ln.b,{onClick:n,disabled:r,children:"举报问题"},t)}))]}),Object(i.b)(hn.a,{type:"question",urlToken:d,shown:n,status:this.getQuestionStatus(),onClose:this.handleReport,zaEnabled:!0}),Object(i.b)(Lt.b,{size:"fullPage",onClose:this.handleInvitationHide,children:t&&Object(i.b)(Ht.a,{question:l})}),Object(i.b)(dn.a,{title:B?"关闭回答":"锁定问题",subtitle:"".concat(B?"关闭":"锁定","后该问题将无法添加新回答，你确定要").concat(B?"关闭":"锁定","吗？"),shown:o,onCancel:this.handleLockTipsHide,onSubmit:this.handleUpdateQuestionLocked}),Object(i.b)(Lt.b,{size:"large",title:"问题重定向",onClose:this.handleRedirectionCreatorClose,children:c&&Object(i.b)(fn.a,{question:l,onSubmitted:this.handleRedirectionCreated})}),Object(i.b)(dn.a,{title:"删除问题",subtitle:"你确定要删除这个问题吗？相关的评论也将被删除。",onCancel:this.handleDeleteModalClose,onSubmit:this.handleConfirmDelete,shown:a})]})}}]),n}(f.PureComponent);qn.contextTypes={currentUser:v.a.object,authRequired:v.a.func,toggleAnonymous:v.a.func};var En=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){return{shouldOia:Object(F.shouldOiaSelector)(e),isMuteSpecial:Object(I.E)(t.question),isMuteFreeze:Object(I.D)(t.question),publicEditPermission:e.publicEditPermission,currentUserUrlToken:e.currentUser,permission:Object(I.cb)(e),allowCommercialAnonymousAnswer:"show"===Object(F.abParamSelector)(e,"gue_anonymous"),isCurrentAnswerCommercialReported:Object(I.C)(e,t.question)}}),{deleteQuestion:I.l,deleteBrandQuestion:I.i,updateQuestionLocked:I.rb,toggleQuestionEditLock:I.jb,showNotification:V.h,updateQuestionPermission:I.sb,updateBrandQuestionOpenStatus:I.kb}))(qn);function In(e){var t=e.brand,n=e.noDivider,r=t.name,o=t.logo,a=t.target,c=t.description,s=t.typeDescription,l=a?"a":"div";return Object(i.c)("div",{className:le()("BrandQuestionSymbol",{"is-mobile":!1}),children:[Object(i.c)(l,Object.assign(Object.assign({className:"BrandQuestionSymbol-brandLink"},a&&{href:"/".concat("organization"===a.userType?"org":"people","/").concat(a.urlToken)}),{},{children:[Object(i.b)("img",{role:"presentation",src:o,className:"BrandQuestionSymbol-logo",alt:""}),Object(i.b)("span",{className:"BrandQuestionSymbol-name",children:r}),a&&Object(i.b)(ve.c,{badge:a.badge})]})),Object(i.b)("span",{css:{marginLeft:5},children:c}),Boolean(s)&&Object(i.b)("span",{className:"BrandQuestionSymbol-typeDesc",children:s}),!n&&Object(i.b)("div",{className:"BrandQuestionSymbol-divider"})]})}var Qn=n(1466);function zn(e,t){var n=new Date(e),i=new Date(t),r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),o=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate());return Math.floor((o-r)/864e5)}var Mn=Object.assign;var Pn=function(e){return p.a.createElement(qe.a,Mn({viewBox:"0 0 72 18"},e),p.a.createElement("g",{fillRule:"evenodd"},p.a.createElement("rect",{width:"72",height:"18",rx:"2"}),p.a.createElement("text",{fill:"#FFF",fontSize:"12",fontWeight:"500"},p.a.createElement("tspan",{x:"19",y:"13"},"有奖问答")),p.a.createElement("path",{fill:"#FFF",d:"M13.4 5.8H11a.4.4 0 01-.4-.3l.1-.4 1.6-1.7c.4-.4 1-.5 1.6-.2.5.3.8 1 .7 1.5-.2.6-.7 1-1.3 1zm0-1.9L13 4l-.7.8h1c.3 0 .5-.2.5-.4 0-.3-.2-.5-.5-.5zM10 6.4v1.5H5.8a.8.8 0 110-1.5H10zm.8 0h4.3a.8.8 0 010 1.5H11V6.4zM10 8.7v6H8.4c-.8 0-1.1-.2-1.5-.4-.3-.1-.5-.4-.7-.7-.2-.3-.3-.7-.3-1.5v-.9c0-.8.1-1.1.3-1.5l.7-.7c.4-.2.7-.3 1.5-.3h1.7zm.8 0h1.7c.8 0 1.1.1 1.5.3l.7.7c.2.4.3.7.3 1.5v1c0 .7-.1 1-.3 1.4-.2.3-.4.6-.7.7-.4.2-.7.3-1.5.3h-1.7V8.7zm-3.3-3c-.6 0-1.1-.4-1.3-1-.1-.5.2-1.2.7-1.5.5-.3 1.2-.2 1.6.2l1.6 1.7s.1.3 0 .4c0 .2-.2.2-.3.3H7.6zM8 4a.4.4 0 00-.5 0c-.2 0-.4.3-.3.5 0 .2.2.3.4.3h1L8 4z",fillRule:"nonzero"})))};function Ln(e){var t=["一","二","三"],n=function(){var t=e.question,n=t.id,o=t.prize,a=o.endTime,c=o.rule,s=o.status;return Object(i.c)("div",{className:"BrandQuestionPrizes-tips",children:[Object(i.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(i.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动时间","："]}),Qn.a(new Date(1e3*a),"yyyy-MM-dd HH:mm")," 截止"]}),Object(i.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(i.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["活动规则","："]}),c]}),Object(i.c)("div",{className:"BrandQuestionPrizes-tip",children:[Object(i.c)("span",{className:"BrandQuestionPrizes-tipTitle",children:["获奖公示","："]}),"ongoing"===s&&"获奖名单将在活动结束后公布","finished"===s&&"品牌开奖中，即将公布获奖名单","awarded"===s&&Object(i.b)(r.Link,{target:"_blank",to:"/organization/question/".concat(n,"/winners"),children:"查看获奖名单"}),!1]}),Object(i.c)("div",{className:"BrandQuestionPrizes-rule",children:["品牌方为本问题设置了有奖问答，添加回答即视为参与活动，并同意遵守",Object(i.b)("a",{className:"BrandQuestionPrizes-ruleLink",href:"https://www.zhihu.com/organization/ophelp/norm/53",target:"_blank",rel:"noopener noreferrer",children:"《有奖问答活动管理办法》"})]})]})},o=e.handleToggle,a=e.expanded,c=e.question,s=c.id,l=c.prize,u=c.relationship,d=(u=void 0===u?{}:u).isAuthor,b=c.permission,h=(b=void 0===b?{}:b).isSuperUser;if(!l||!l.status)return null;var f=l.endTime,p=l.prizes,m=l.status,v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=new Date(t),i=Math.floor(n.getTime()/1e3),r=e-i;if(r<0)return null;var o,a=0,c=1,s=60*c,l=60*s,u=24*l;if(r>u){var d=new Date(1e3*e);a=zn(n,d),o="天"}else r>l?(a=Math.floor(r/l),o="小时"):r>s?(a=Math.floor(r/s),o="分钟"):(a=r,o="秒");return{quantity:a,unit:o}}(f);return Object(i.c)("div",{className:le()("BrandQuestionPrizes",{"is-mobile":!1}),children:[Object(i.c)("div",{className:"BrandQuestionPrizes-info",children:[Object(i.c)("div",{className:"BrandQuestionPrizes-bar",onClick:o,children:[Object(i.c)("div",{className:"BrandQuestionPrizes-desc",children:[Object(i.c)("div",{className:"BrandQuestionPrizes-symbol",children:[Object(i.b)(Pn,{alt:"logo",width:72,height:18,fill:"ongoing"===m?"#ff9607":"#999999"}),"ongoing"===m&&Object(i.c)("span",{children:["距离结束还有",Object(i.b)("em",{children:v.quantity}),v.unit]}),"finished"===m&&"待开奖","awarded"===m&&"已开奖"]}),Object(i.c)("div",{className:"BrandQuestionPrizes-name",children:["奖品：",p[0].name,p.length>1&&"等"]})]}),Object(i.c)("div",{className:"BrandQuestionPrizes-images",children:[p.map((function(e,t){var n=e.imageUrl;return n&&Object(i.b)("img",{src:n,alt:""},"BrandQuestionPrizes-images".concat(t))})),Object(i.b)(Ge.a,{text:!0,center:!0,fill:"#9fadc7"})]})]}),a&&Object(i.b)("div",{className:"BrandQuestionPrizes-detail",children:p.map((function(e,n){var r=e.imageUrl,o=e.name,a=e.value,c=e.quantity;return Object(i.c)("div",{className:"BrandQuestionPrizes-prize",children:[Object(i.c)("div",{className:"BrandQuestionPrizes-intro",children:[r&&Object(i.b)("img",{className:"BrandQuestionPrizes-prizeImage",src:r,alt:""}),Object(i.c)("div",{className:"BrandQuestionPrizes-prizeInfo",children:[Object(i.c)("div",{className:"BrandQuestionPrizes-prizeName",children:[p.length>1&&"".concat(t[n],"等奖："),o]}),Object(i.c)("div",{className:"BrandQuestionPrizes-prizeValue",children:["价值 ¥ ",a]})]})]}),Object(i.c)("div",{className:"BrandQuestionPrizes-prizeQuantity",children:[c," 份"]})]},"BrandQuestionPrizes-prize".concat(n))}))}),a&&!1]}),a&&n(),a&&Object(i.b)("hr",{className:"BrandQuestionPrizes-split"}),(h||d)&&Object(i.c)(ut.a,{className:"BrandQuestionPrizes-edit",to:"/organization/question/".concat(s,"/setting/").concat("finished"===m?"winners":"prize"),children:["ongoing"===m&&"编辑有奖回答","finished"===m&&"填写获奖名单"]})]})}var Dn=n(435);function Fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Hn=function(e){Object(d.a)(n,e);var t=Fn(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.question,n=t.id,r=t.permission,o=void 0===r?{}:r,a=o.isSuperUser,c=o.canBrandAdminEdit,s=o.haveCard;return c||a?Object(i.b)(ln.c,{className:"BrandQuestionSettingMenu",toggler:Object(i.b)(ie.c,{children:"设置样式"}),children:Object(i.c)(f.Fragment,{children:[Object(i.b)(ln.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/topbanner"))},children:"设置提问头图"}),Object(i.b)(ln.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/prize"))},children:"编辑有奖问答"}),s&&Object(i.b)(ln.b,{className:"BrandQuestionSettingMenu-item",onClick:function(){e.context.router.push("/organization/question/".concat(n,"/setting/advanced"))},children:"编辑品牌推荐"})]})}):null}}]),n}(f.Component);Hn.contextTypes={currentUser:v.a.object,router:v.a.object};var _n=Object(E.compose)(Object(O.connect)((function(e,t){return{question:e.entities.questions[t.question.id]}})),Dn.a)(Hn),Un=n(854),Vn=n(1068),Wn=n(465);function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Kn=function(e){Object(d.a)(n,e);var t=Gn(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleFollow=function(){var t=e.props.pin,n=(t=void 0===t?{}:t).author.isFollowing?1977:1976;e.handleTrack(n)},e.handleTrack=function(t){var n=e.props.pin,i=(n=void 0===n?{}:n).author;ce.a.trackEvent(Object(ot.a)(e),{id:t},{button:{text:i.name}})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,i=n.type,r=n.id,o=t.getPinContents;"pin"===i&&o(r,{failsafe:!0}).then((function(t){var n=t.payload,i=(void 0===n?{}:n).author,r=(i=void 0===i?{}:i).name;ce.a.trackCardShow(e,{id:1969},{button:{text:r}})}))}},{key:"render",value:function(){var e=this,t=this.props.pin;if(!t||!t.content)return null;var n=t.author,r=t.id,o=t.content[0].content.replace(/<a.*class="hash_tag".*?<\/a>/g,""),a=n||{},c=a.type,s=a.urlToken,l=a.isFollowing,u="https://www.zhihu.com/pin/".concat(r);return Object(i.c)("div",{className:"QuestionRelatedCard",children:[Object(i.b)("div",{className:"QuestionRelatedCard-title",children:"相关报道"}),Object(i.c)("div",{className:"QuestionRelatedCard-content",children:[Object(i.b)("span",{dangerouslySetInnerHTML:{__html:Object(Vn.truncateHTML)(o,110).content}}),u&&Object(i.b)("a",{className:"QuestionRelated-jump",href:u,onClick:function(){e.handleTrack(1975)},children:"查看详情"})]}),s&&Object(i.c)("div",{className:"QuestionRelatedCard-footer",children:[Object(i.c)("div",{children:["来自",Object(i.b)("a",{className:"QuestionRelatedCard-from",href:"https://www.zhihu.com/people/".concat(s),target:"_blank",rel:"noopener noreferrer",onClick:function(){e.handleTrack(1971)},children:n.name})]}),Object(i.b)("div",{role:"button",tabIndex:0,onClick:this.handleFollow,children:Object(i.c)(pt.a,{className:"QuestionRelatedCard-follow",type:c,id:s,isFollowing:l,children:[Object(i.b)(Un.a,{text:!0,center:!0},"icon"),"关注机构"]})})]})]})}}]),n}(f.Component);Kn.propTypes={target:v.a.shape({type:v.a.string,id:v.a.string}).isRequired};var Jn=Object(E.compose)(Object(O.connect)((function(e,t){return{pin:Object(Wn.g)(e,t.target.id)}}),{getPinContents:Wn.e}),Object(x.b)((function(e){return{module:"PinItem",card:{content:{type:"Pin",id:e.target.id}}}})))(Kn);function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Zn,$n,Xn,ei,ti=function(e){Object(d.a)(n,e);var t=Yn(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.question.author;return Object(i.b)("div",{className:"OrgQuestionSymbol",children:Object(i.c)("div",{className:le()("OrgQuestionSymbol-inner",{"OrgQuestionSymbol-inner--mobile":!1}),children:[Object(i.c)("div",{className:"OrgQuestionSymbol-main QuestionHeader-main",children:[Object(i.b)("div",{className:"OrgQuestionSymbol-avatar",children:Object(i.b)(Ft.a,{user:e,avatar:!0,avatarProps:{size:38}})}),Object(i.c)("div",{className:"OrgQuestionSymbol-name",children:[Object(i.b)(Ft.a,{user:e})," 的提问"]})]}),Object(i.b)("div",{className:"OrgQuestionSymbol-tip",children:Object(i.b)(ut.a,{preset:"plain",a:!0,to:"/org-intro#org-question",target:"_blank",children:"了解机构提问"})})]})})}}]),n}(f.Component),ni=n(31),ii=n.n(ni),ri=n(436),oi=n.n(ri),ai=n(28),ci=n.n(ai),si=n(207),li=n.n(si),ui=n(43),di=n(204),bi=n(64),hi=n.n(bi),fi=n(66),pi=n(493),mi=n(83),vi=n(892),Oi=["data"],ji=["data","onVote","onVoteError"],gi=function(e,t){return Object(ui.d)(li()(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),t(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])}))))},yi=p.a.createContext({}),wi=function(){return Object(f.useContext)(yi)},Ci=function(e){var t=e.data,n=e.onVote,r=void 0===n?hi.a:n,o=e.onVoteError,a=void 0===o?hi.a:o,s=e.children,l=Object(f.useState)(t),u=ci()(l,2),d=u[0],b=u[1],h=Object(f.useState)(!0),p=ci()(h,2),m=p[0],v=p[1],O=d.urlToken,j=d.vote,g=function(e){var t=Object(pi.b)();return function(n,i){return t("https://www.zhihu.com/api/v4/topics/".concat(e,"/vote/").concat(n),{method:i})}}(O);Object(f.useEffect)((function(){return b(t)}),[t]);var y=function(){var e=li()(c.a.mark((function e(t,n){var i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null==j?void 0:j.totalVotes)||0,((null==j?void 0:j.liked)||(null==j?void 0:j.disliked))&&i--,r=Object.assign(Object.assign({},d),{},{vote:Object.assign(Object.assign({},j),{},{liked:t,disliked:n,totalVotes:i+(t||n?1:0)})}),e.next=5,fi.a.supportsAction("iOS/hapticFeedback");case 5:if(!e.sent){e.next=7;break}fi.a.dispatch("iOS/hapticFeedback");case 7:return b(r),v(!1),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=gi(li()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("like","POST");case 2:r(y(!0,!1));case 3:case"end":return e.stop()}}),e)}))),a),C=gi(li()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("like","DELETE");case 2:r(y(!1,!1));case 3:case"end":return e.stop()}}),e)}))),a),k=gi(li()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("dislike","POST");case 2:r(y(!1,!0));case 3:case"end":return e.stop()}}),e)}))),a),x=gi(li()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("dislike","DELETE");case 2:r(y(!1,!1));case 3:case"end":return e.stop()}}),e)}))),a),A=Object(f.useMemo)((function(){return{data:d,noAnimation:m,recommendVote:w,recommendUnVote:C,againstVote:k,againstUnVote:x}}),[x,k,C,w,d,m]);return Object(i.b)(yi.Provider,Object.assign({value:A},{children:s}),void 0)},ki=function(e,t,n){return function(t){var i=t.colors;return Object.assign({textDecoration:"none",border:e?"":"1px solid ".concat(i.GBK09A),borderRadius:e?"8px":"2px",fontSize:e?"13px":"15px",color:e?i.GBK06A:i.GBK02A},n&&{"*, *::before, *::after":{animation:"none !important"}})}},xi=function(e,t){var n=null;if(e){var i="answer"===t;n={width:i?"30px":"48px",height:i?"40px":"66px"}}else n={width:"36px",height:"54px"};return Object.assign(Object.assign({},n),{},{flex:"0 0 auto",borderRadius:"3px",overflow:"hidden",objectFit:"cover",marginRight:"10px",filter:"brightness(.95)"})},Ai=Object(qt.h)(Zn||(Zn=oi()(["\n50% { opacity: 1; transform: scale(2.5); }\nto { transform: scale(0.6); top: -5px; }\n"]))),Ri=Object(qt.h)($n||($n=oi()(["\n50% { opacity: 1; transform: scale(2.5); }\nto { transform: scale(0.6); bottom: -5px; }\n"]))),Si=Object(qt.h)(Xn||(Xn=oi()(["\nfrom, 70%, to { transform: scale(1); }\n40% { transform: scale(1.2); }\n90% { transform: scale(1.05); }\n"]))),Ni=Object(qt.h)(ei||(ei=oi()(["to { transform: scale(1); }"]))),Ti=function(e){var t=e.colors;return{position:"relative",boxSizing:"content-box",borderRadius:"50%",border:"0.5px solid ".concat(t.GBK09A),cursor:"pointer",transition:"background-color .5s","::before":{content:'""',width:"40px",height:"40px",margin:"-20px",position:"absolute",top:"50%",left:"50%",borderRadius:"50%",background:t.GBK99A,opacity:"0.2",zIndex:0,transform:"scale(0)"},'&[aria-pressed="true"]':{"::before":{animation:"".concat(Ni," .5s ease-in-out")},".Icon":{animation:"".concat(Si," .5s ease-in-out"),animationDelay:".5s"},".Sparkle":{"::before":{animation:"".concat(Ai," .6s ease-in-out"),animationDelay:".2s"},"::after":{animation:"".concat(Ri," .6s ease-in-out"),animationDelay:".2s"}}}}},Bi=function(e){return{position:"absolute",top:0,left:0,width:"40px",height:"40px","::before, ::after":{content:'""',position:"absolute",marginLeft:"-1px",left:"50%",width:"2px",height:"2px",backgroundColor:e.colors.GBL01A,borderRadius:"50%",opacity:"0"},"::before":{top:"0"},"::after":{bottom:"0"},":nth-of-type(3)":{transform:"rotate(45deg)"},":nth-of-type(4)":{transform:"rotate(90deg)"},":nth-of-type(5)":{transform:"rotate(135deg)"}}},qi={normal:"知友推荐",less:"评分积累中",close:"暂无评分"},Ei=function(e){var t=e.vote,n=Object(di.b)().Mobile;return!t||t.disable?null:Object(i.c)(w.Text,{children:["normal"===t.ratioStatus&&Object(i.c)(w.Text,Object.assign({as:"span",color:"GBL01A",fontSize:n?"inherit":"17px",fontWeight:"bold"},{children:[(100*t.score).toFixed(),"% "]}),void 0),qi[t.ratioStatus]]},void 0)},Ii=function(e){var t=e.vote,n=e.isTitle;return!t||t.disable||"close"===t.ratioStatus?null:Object(i.c)(w.Text,{children:[n&&Object(i.b)(i.a,{children:" · "},void 0),"".concat(Object(Se.cnNiceNumber)(t.totalVotes),"人评价")]},void 0)},Qi=function(e){var t,n=e.topic,r=n.title,o=n.vote,a=Object(di.b)().Mobile;return Object(i.c)(w.Flex,Object.assign({alignItems:"baseline",css:(t=a,function(e){return{color:e.colors.GBK02A,".topicMetaTitle":{display:"inline-block",marginRight:t?0:"11px",fontWeight:"bold",fontSize:t?"15px":"17px"}}})},{children:[Object(i.b)(w.Text,Object.assign({className:"topicMetaTitle"},{children:r}),void 0),!a&&Object(i.b)(Ei,{vote:o},void 0),!a&&Object(i.b)(Ii,{isTitle:!0,vote:o},void 0)]}),void 0)},zi=function(e){var t=e.topic,n=e.lines,r=void 0===n?1:n;return Object(i.b)(w.Text,Object.assign({color:"GBK06A",css:Object(mi.d)(r)},{children:t.excerpt}),void 0)},Mi=function(e){var t=e.topic,n=e.position,r=t.vote,o=Object(di.b)().Mobile,a=!r||r.disable;if(!o)return Object(i.b)(zi,{topic:t},void 0);var c="question"===n;return a?Object(i.b)(zi,{topic:t,lines:c?2:1},void 0):Object(i.c)(i.a,{children:[Object(i.b)(Ei,{vote:r},void 0),c&&Object(i.b)(Ii,{vote:r},void 0)]},void 0)},Pi={recommend:{tip:"推荐",icon:wn.a,color:"GBL01A"},against:{tip:"不推荐",icon:function(e){return Object(i.b)(wn.a,Object.assign({css:{transform:"rotate(180deg)"}},e),void 0)},color:"GBK04A"}},Li=[0,1,2,3].map((function(e){return Object(i.b)("div",{css:Bi,className:"Sparkle"},e)})),Di=function(e){var t=e.className,n=e.checked,r=e.type,o=e.onClick,a=Pi[r],c=a.tip,s=a.icon,l=a.color,u=Object(ui.d)((function(e){e.preventDefault(),e.stopPropagation(),o("".concat(r).concat(n?"UnVote":"Vote"))}));return Object(i.c)(w.Flex,Object.assign({as:"button",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",p:0,bg:n?l:"GBK99A",color:n?"GBK99A":"GBL05A",css:Ti,className:t,"data-tooltip":c,"aria-pressed":n,"aria-label":c,onClick:u},{children:[Object(i.b)("div",Object.assign({className:"Icon"},{children:Object(i.b)(s,{size:20,center:!0},void 0)}),void 0),"recommend"===r&&Li]}),void 0)},Fi=function(){var e,t,n=wi(),r=n.data,o=ii()(n,Oi),a=Object(ui.d)((function(e){var t;null===(t=o[e])||void 0===t||t.call(o)}));return Object(i.c)(w.Flex,Object.assign({flex:"0 0 auto",css:{margin:"0 12px"}},{children:[Object(i.b)(Di,{css:{marginRight:"9px"},type:"recommend",checked:null===(e=null==r?void 0:r.vote)||void 0===e?void 0:e.liked,onClick:a},void 0),Object(i.b)(Di,{type:"against",checked:null===(t=null==r?void 0:r.vote)||void 0===t?void 0:t.disliked,onClick:a},void 0)]}),void 0)},Hi=function(e){var t=e.className,n=e.position,r=e.onClick,o=wi(),a=o.data,c=o.noAnimation,s=a.urlToken,l=a.avatar,u=a.title,d=void 0===u?"":u,b=a.vote,h=Object(ui.d)((function(){null==r||r()})),f=Object(di.b)().Mobile,p=b&&"close"!==b.ratioStatus;return Object(i.c)(w.Flex,Object.assign({as:"a",alignItems:"center",bg:"GBK10A",p:"12px",className:t,css:ki(f,0,c),"aria-label":"话题 ".concat(d),target:"_blank",href:"https://www.zhihu.com/topic/".concat(s),onClick:h},{children:[l&&Object(i.b)("img",{alt:"",src:l,css:xi(f,n)},void 0),Object(i.c)(w.Flex,Object.assign({flexDirection:"column",flex:"1 1 auto",justifyContent:"space-around"},{children:[Object(i.b)(Qi,{topic:a},void 0),Object(i.b)(Mi,{topic:a,position:n},void 0)]}),void 0),p&&Object(i.b)(Fi,{},void 0)]}),void 0)},_i=function(e){var t=e.data,n=e.onVote,r=e.onVoteError,o=ii()(e,ji);return(null==t?void 0:t.title)?Object(i.b)(Ci,Object.assign({data:t,onVote:n,onVoteError:r},{children:Object(i.b)(Hi,Object.assign({},o),void 0)}),void 0):null},Ui=function(e){var t=e.className,n=e.data,r=n.avatar,o=n.urlToken,a=n.title,c=n.excerpt;return Object(i.c)(w.Box,Object.assign({as:"a",display:"block",p:"20px 20px 12px",className:t,css:{textDecoration:"none",outlineOffset:"-1px"},"aria-label":"话题 ".concat(a),target:"_blank",href:"https://www.zhihu.com/topic/".concat(o)},{children:[Object(i.c)(w.Flex,Object.assign({mb:"12px"},{children:[r&&Object(i.b)(w.Image,{flex:"0 0 auto",width:"50px",height:"70px",overflow:"hidden",mr:"12px",css:{objectFit:"cover",borderRadius:"3px",filter:"brightness(.95)"},alt:"",src:r},void 0),Object(i.c)("div",{children:[Object(i.b)(w.Text,Object.assign({color:"GBK02A",mb:"7px",fontSize:"15px",fontWeight:"bold",css:Object(mi.d)(1)},{children:a}),void 0),Object(i.b)(w.Text,Object.assign({color:"GBK04A",fontSize:"14px",css:Object(mi.d)(2)},{children:c}),void 0)]},void 0)]}),void 0),Object(i.c)(w.Text,Object.assign({color:"GBL07A",fontSize:"14px"},{children:["查看更多",Object(i.b)(vi.a,{center:!0,size:22},void 0)]}),void 0)]}),void 0)},Vi=function(e){var t=e.data,n=Object(ge.b)(),r=Object(o.a)(n,2),a=r[0],c=r[1];return Object(f.useEffect)((function(){c()}),[]),a?!t.vote||t.vote.disable?null:Object(i.b)(_i,{css:{margin:"14px 0"},data:t,position:"question"}):null},Wi=Object.assign;var Gi=function(e){return p.a.createElement(qe.a,Wi({viewBox:"0 0 24 24"},e),p.a.createElement("path",{d:"M17.248 6.5H13.11a.71.71 0 01-.657-.446.731.731 0 01.154-.787l2.812-3.045a2.395 2.395 0 012.926-.392c.95.558 1.527 1.767 1.243 2.844A2.431 2.431 0 0117.248 6.5zm-.114-3.357a.798.798 0 00-.572.24l-1.265 1.474h1.95c.447 0 .695-.44.695-.893a.815.815 0 00-.808-.821zM11.286 7.61v2.857H3.429a1.429 1.429 0 010-2.857h7.857zm1.428 0h7.857a1.429 1.429 0 010 2.857h-7.857V7.611zm-1.428 4.286V22.61H6.23c-.892 0-1.215-.093-1.541-.267a1.817 1.817 0 01-.756-.756c-.175-.326-.267-.65-.267-1.54V14.46c0-.892.092-1.215.267-1.541.174-.326.43-.582.756-.756.326-.174.649-.267 1.54-.267h5.056zm1.428 0h5.055c.892 0 1.215.093 1.541.267.326.174.582.43.756.756.175.326.267.65.267 1.54v5.587c0 .892-.092 1.215-.267 1.541-.174.326-.43.582-.756.756-.326.174-.649.267-1.54.267h-5.056V11.897zM6.752 6.5a2.431 2.431 0 01-2.341-1.826c-.284-1.077.293-2.286 1.243-2.844a2.395 2.395 0 012.926.392l2.812 3.045a.731.731 0 01.153.787.711.711 0 01-.656.446H6.752zm.686-3.117a.798.798 0 00-.976-.13c-.317.185-.585.637-.49.996a.81.81 0 00.78.608h1.951L7.438 3.383z"}))};function Ki(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Ji=function(e){Object(d.a)(n,e);var t=Ki(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={remainedTime:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.totalCountdownTime,i=t.onFinish;"number"==typeof n?(this.setState({remainedTime:n}),this.timer=setInterval((function(){e.setState({remainedTime:e.state.remainedTime-5})}),5e3)):"function"==typeof i&&i()}},{key:"componentDidUpdate",value:function(){var e=this.props.onFinish;this.state.remainedTime<=0&&(clearInterval(this.timer),"function"==typeof e&&e())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"renderCountdownTime",value:function(){var e=this.state.remainedTime;if(e<60)return Object(i.c)(f.Fragment,{children:["距结束不足 ",Object(i.b)("span",{children:"1"})," 分钟"]});var t,n,r=(t=e,n=Math.floor(t/60),{hours:Math.floor(n/60),minutes:n%60}),o=r.hours,a=r.minutes;return 0===o?Object(i.c)(f.Fragment,{children:["距结束还有 ",Object(i.b)("span",{children:a})," 分钟"]}):Object(i.c)(f.Fragment,{children:["距结束还有 ",Object(i.b)("span",{children:o})," 小时"," ",a>0&&Object(i.c)(f.Fragment,{children:[Object(i.b)("span",{children:a})," 分钟"]})]})}},{key:"render",value:function(){var e=this.props.className;return null===this.state.remainedTime?Object(i.b)("div",{className:e,children:"距结束还有"}):Object(i.b)("div",{className:e,children:this.renderCountdownTime()})}}]),n}(f.Component);function Yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}Ji.propTypes={totalCountdownTime:v.a.number.isRequired,onFinish:v.a.func};var Zi,$i=function(e){Object(d.a)(n,e);var t=Yi(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={expanded:!1,bodyHeight:0},e.contentRef=Object(f.createRef)(),e.handleExpand=function(){var t=e.contentRef.current;e.setState({expanded:!0,bodyHeight:"".concat(t.offsetHeight+1,"px")}),ce.a.trackEvent(Object(ot.a)(e),{id:5036,action:"Expand"})},e.handleCollapse=function(){e.setState({expanded:!1,bodyHeight:0}),ce.a.trackEvent(Object(ot.a)(e),{id:5037,action:"Fold"})},e.handleClickHeader=function(){e.state.expanded?e.handleCollapse():e.handleExpand()},e.handleCountdownFinish=function(){var t=e.props;(0,t.removeBrandQuestionRedPacket)(t.questionId)},e}return Object(u.a)(n,[{key:"renderCountdown",value:function(){var e=this.props.redPacket,t=e.countDownType,n=e.countDownValue,r="".concat("CommercialAnswerRedPacket","-countdown");return 2===t?Object(i.b)(Ji,{className:r,totalCountdownTime:n,onFinish:this.handleCountdownFinish}):Object(i.c)("div",{className:r,children:["还剩 ",Object(i.b)("span",{children:Object(Se.cnNiceNumber)(n)}),"个红包"]})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.redPacket,r=n.title,o=n.image,a=n.iconText,c=n.content,s=this.state,l=s.expanded,u=s.bodyHeight;return Object(i.b)(x.a,{view:{id:5035},trackCardShow:!0,children:Object(i.c)("div",{className:le()("CommercialAnswerRedPacket",t,Object(pe.a)({},"".concat("CommercialAnswerRedPacket","--expanded"),l)),children:[Object(i.c)("div",{className:"".concat("CommercialAnswerRedPacket","-header"),role:"button",tabIndex:0,onClick:this.handleClickHeader,children:[Object(i.c)("div",{className:"".concat("CommercialAnswerRedPacket","-main"),children:[Object(i.c)("div",{className:"".concat("CommercialAnswerRedPacket","-subtitle"),children:[Object(i.c)("div",{className:"".concat("CommercialAnswerRedPacket","-badge"),children:[Object(i.b)("span",{children:Object(i.b)(Gi,{size:11})}),Object(i.b)("span",{children:a})]}),this.renderCountdown()]}),Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-title"),children:r})]}),Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-image"),children:Object(i.b)("img",{src:Object(Ne.imgUrl)(o,"xl"),alt:""})}),Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-icon"),children:l?Object(i.b)(re.a,{size:20}):Object(i.b)(Ge.a,{size:20})})]}),Object(i.b)("div",{className:"".concat("CommercialAnswerRedPacket","-body"),style:{height:u},children:Object(i.b)("div",{ref:this.contentRef,className:"".concat("CommercialAnswerRedPacket","-content"),dangerouslySetInnerHTML:{__html:c}})})]})})}}]),n}(f.Component),Xi=Object(O.connect)(null,{removeBrandQuestionRedPacket:I.gb})($i),er=Object(Q.a)(null)((function(e){var t,n,r,o=e.id,a=e.question,c=e.position,s=void 0===c?"top":c,l=function(e,t,n){var i=Object(O.useSelector)((function(t){var n,i;return null==t||null===(n=t.question)||void 0===n||null===(i=n.questionBanners)||void 0===i?void 0:i[e]})),r=Object(O.useDispatch)();return Object(f.useEffect)((function(){t&&r(Object(I.v)(e))}),[t,r,e]),null==i?void 0:i.filter((function(e){return e.position===n}))}(o,null==a?void 0:a.isBannered,s),u="normal"===a.questionType&&(null==l||null===(t=l[0])||void 0===t||null===(n=t.imagePc)||void 0===n?void 0:n[0]),d=null==l||null===(r=l[0])||void 0===r?void 0:r.verbPc;if(Object(f.useEffect)((function(){u&&ce.a.trackCardShow(null,{id:7707},{button:{text:d}})}),[u,d]),!u)return null;var b=l[0],h=b.targetLinkPc,p=b.entryVerbPc,m=b.imagePc[0].url;return h&&d&&p&&m?Object(i.b)(w.Link,{className:"Card",css:Object.assign({display:"block",fontSize:0,marginBottom:16},"top"===s?{width:654,height:54,borderRadius:4}:{width:296,height:90,borderRadius:"2px 2px 0 0"}),href:h,onClick:function(e){ce.a.trackEvent(e.target,{id:7708,action:"OpenUrl"},{link:{url:h},button:{text:d}})},target:"_blank",children:Object(i.b)(w.Image,{alt:p,src:m,css:{height:"100%",width:"100%",objectFit:"cover"}})}):null})),tr=n(502);function nr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var ir=function(e){Object(d.a)(n,e);var t=nr(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!0,editShown:!1,invitationTipShown:!1,brandQuestionPrizesExpanded:!1},e.getHandleInvite=function(t){t&&(e.handleInvite=t)},e.handleExpand=function(){e.setState({collapsed:!1}),ce.a.trackEvent(null,{id:6783,action:"Click"})},e.handleCollapse=function(){e.setState({collapsed:!0,shareMenuPositionStatus:"normal"})},e.handleEditShow=e.context.authRequired((function(){var t=(e.props.question.reviewInfo||{}).editTips;t?e.props.showNotification(t,"red"):e.setState({editShown:!0})})),e.handleEditClose=function(){e.setState({editShown:!1})},e.handleInvitationShow=function(){e.setState({invitationModalShown:!0})},e.handleInvitationHide=function(){e.setState({invitationModalShown:!1})},e.handleInvitationTipShow=function(){e.setState({invitationTipShown:!0})},e.handleInvitationTipClose=function(){e.setState({invitationTipShown:!1})},e.handleRedirectionCreatorShow=function(){e.setState({redirectionCreatorShown:!0})},e.handleRedirectionCreatorClose=function(){e.setState({redirectionCreatorShown:!1})},e.handleRedirectionCreated=function(t,n){var i=e.props,r=i.router,o=i.question.id,a=t.id;e.handleRedirectionCreatorClose(),n.then((function(){r.push("/question/".concat(a,"?rf=").concat(o))}))},e.handleDelete=function(){var t=e.props,n=t.question.id,i=t.isCommercialQuestion,r=t.deleteQuestion,o=t.deleteBrandQuestion;return i?o(n).then((function(){location.href="/"})):r(n).then((function(){location.href="/"}))},e.handleConfirmDelete=function(){e.handleDeleteModalClose(),e.handleDelete()},e.handleDeleteModalShow=function(){e.setState({deleteModalShown:!0})},e.handleDeleteModalClose=function(){e.setState({deleteModalShown:!1})},e.handlePositionStatusChange=function(t){e.setState({shareMenuPositionStatus:t})},e.handleUpdateQuestionLocked=function(){var t=e.props,n=t.question.id;(0,t.updateQuestionLocked)(n)},e.handleLockTipsShow=function(){return e.setState({lockTipsShown:!0})},e.handleLockTipsHide=function(){return e.setState({lockTipsShown:!1})},e.handleBrandQuestionPrizesToggle=function(){e.setState({brandQuestionPrizesExpanded:!e.state.brandQuestionPrizesExpanded})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=(e.isAnswerPage,e.question.id),n=e.isCommercialQuestion,i=e.loadBrand,r=e.loadQuestionCommercialBanner,o=e.loadBrandQuestionRedPacket,a=e.loadBrandQuestionPermission,c=e.loadBrandQuestionOpenStatus,s=e.loadBrandQuestionAdvancedStyle,l=e.loadBrandQuestionPrize,u=this.context.currentUser;this.context.currentUser&&Object(ue.c)("question",t,ue.a),n&&(i(t),r(t),s(t),o(t).then((function(e){e&&e.payload||l(t)})),u&&"guest"!==u.userType&&(a(t),c(t)))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,i=t.isAnswerPage,r=e.question,o=r.id,a=r.relationship.isAnonymous,c=e.isAnswerPage;!this.state.collapsed&&e.question&&this.props.question&&e.question.detail.length!==this.props.question.detail.length&&this.setState({collapsed:!0,editShown:!1}),n===o&&i===c||this.setState({collapsed:!0,invitationTipShown:!1}),a||this.setState({invitationTipShown:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.collapsed,i=t.collapsed;if(n&&!i){var r=this.container.getBoundingClientRect().top;window.scrollTo(0,window.pageYOffset+r-document.documentElement.clientHeight)}}},{key:"hasExtraContentUnderAuthor",get:function(){var e=this.props,t=e.question,n=e.isCommercialQuestion,i=e.topicMeta,r=t.relatedCards,o=void 0===r?[]:r,a=t.annotationDetail,c=t.redPacket,s=t.prize;return a||o[0]||c||(null==s?void 0:s.status)||i.urlToken&&!n}},{key:"renderEditModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.permitEditTopics,n=this.props,r=n.question,o=n.brand,a=r.id,c=r.title,s=r.editableDetail,l=r.topics,u=r.questionType,d=r.relationship.isAnonymous,b=this.state.editShown;return Object(i.b)(We.a,{id:a,title:c,detail:s,topics:l,questionType:u,isAnonymous:d,show:b,onClose:this.handleEditClose,brand:o,permitEditTopics:t})}},{key:"renderFooter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.permitEditQuestion,n=e.permitEditTopics,r=this.props,o=r.question,a=r.isCommercialQuestion,c=this.state.collapsed,s=this.context.currentUser,l=a&&!0;return Object(i.c)("div",{className:"QuestionHeader-footer",children:[Object(i.b)("div",{className:"QuestionHeader-footer-inner",children:Object(i.c)("div",{className:"QuestionHeader-main QuestionHeader-footer-main",children:[Object(i.b)(yt,{question:o}),l&&Object(i.b)(_n,{question:o}),Object(i.b)(En,{question:o,onInvitationTipShow:this.handleInvitationTipShow,getHandleInvite:this.getHandleInvite,editQuestionButton:t&&Object(i.b)(Xe,{onClick:this.handleEditShow,text:"修改问题"})}),Object(i.b)("div",{className:"QuestionHeader-actions",children:!c&&Object(i.c)(ie.c,{preset:"plain",onClick:this.handleCollapse,children:["收起 ",Object(i.b)(re.a,{center:!0})]})})]})}),s&&this.renderEditModal({permitEditTopics:n})]})}},{key:"renderSpecialQuestionAuthor",value:function(){var e=this.props.question.author;return Object(i.c)(f.Fragment,{children:[Object(i.b)(je,{className:"QuestionHeader-specialQuestionAuthor",author:e}),Object(i.b)("div",{className:"QuestionHeader-topicDivider"})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.location,r=t.question,o=t.isAnswerPage,a=t.isCommercialQuestion,c=t.isOrgQuestion,s=t.isAuthorCurrentUser,l=t.brand,u=t.publicEditPermission,d=t.topicMeta,b=t.permission.canBrandAdminEdit,h=r.title,f=r.detail,p=r.topics,m=void 0===p?[]:p,v=r.author,O=r.showAuthor,g=r.showEncourageAuthor,y=r.excerpt,w=r.thumbnailInfo,C=r.isEditable,k=r.id,A=r.reviewInfo,R=r.relatedCards,S=void 0===R?[]:R,N=r.annotationDetail,T=r.redPacket,B=r.isVisible,q=r.relationship.isAuthor,E=this.state,I=E.collapsed,Q=E.invitationTipShown,z=E.brandQuestionPrizesExpanded,M=this.context.currentUser,P=m.map((function(e){return{name:e.name,id:e.id}})),L=u||{},D=L.isQuestionEditable,F=L.isQuestionTopicEditable,H=Object(vt.e)(C,s,D)||b,_=Object(vt.e)(C,s,F)||b,U=this.renderFooter({permitEditQuestion:H,permitEditTopics:_}),V=M&&"guest"!==M.userType;return Object(i.c)("div",{"data-zop-question":JSON.stringify({title:h,topics:P,id:k,isEditable:C}),children:[Object(i.b)(be.a,{children:Object(i.b)(Vt,{question:r,location:n,invitationTipShown:Q,onInvitationTipClose:this.handleInvitationTipClose,isAnswerPage:o})}),a&&(!I||!o)&&Object(i.b)(fe.a,{type:r.type,id:r.id}),Object(i.b)(x.a,{module:"QuestionDescription",card:{content:{type:"Question",token:String(k)}},children:Object(i.c)("div",{children:[!1===B&&q&&Object(i.c)("div",{className:"QuestionReviewing",children:[Object(i.b)("div",{className:"QuestionReviewing-title",children:"内容审核中"}),Object(i.b)("div",{className:"QuestionReviewing-text",children:"内容将在审核通过后自动发布"})]}),Object(i.c)("div",{className:"QuestionHeader",ref:function(t){e.container=t},children:[Object(i.c)("div",{className:"QuestionHeader-content",children:[Object(i.c)("div",{className:"QuestionHeader-main",children:[Object(i.b)(er,{id:k,question:r}),Object(i.c)("div",{className:"QuestionHeader-tags",children:[a&&Object(i.b)(In,{brand:l}),Object(i.c)("div",{className:"QuestionHeader-topics",children:[Boolean(O&&!(a&&null!=l&&l.name))&&this.renderSpecialQuestionAuthor(),m.map((function(e){return Object(i.b)(Ve,{item:e},e.id)}))]})]}),Object(i.c)("h1",{className:"QuestionHeader-title",children:[c&&ne()(Zi||(Zi=Object(ee.a)(["","提问："])),v.name),h]}),Boolean(!O&&!c&&!a&&g)&&Object(i.b)(Ae,{question:r,isAuthorCurrentUser:s,hasExtraContent:this.hasExtraContentUnderAuthor}),Object(i.b)(he.a,{item:r,annotationProps:N&&{annotationDetail:N}}),S[0]&&Object(i.b)(Jn,{target:S[0]}),T&&Object(i.b)(Xi,{questionId:k,redPacket:T}),Object(i.b)(Ln,{question:r,expanded:z,handleToggle:this.handleBrandQuestionPrizesToggle}),Object(i.c)(ge.a,{children:[!a&&Object(i.b)(Vi,{data:d}),Object(i.b)(De,{questionId:k,isInAnswerPage:o})]}),Object(i.b)(it,{html:f,reviewInfo:A,excerpt:y,thumbnailInfo:w,collapsed:I,onExpand:this.handleExpand,onEdit:this.handleEditShow,isVisible:B,isAuthor:q})]}),Object(i.b)("div",{className:"QuestionHeader-side",children:Object(i.b)("div",{className:"QuestionHeader-follow-status",children:Object(i.b)(rn,{question:r})})})]}),I?U:Object(i.b)(oe.a,{bottom:!0,container:function(){return e.container},onPositionStatusChange:this.handlePositionStatusChange,children:U}),c&&Object(i.b)(ti,{question:r})]})]})}),Object(i.b)(de.a,{children:Object(i.c)("div",{className:le()("QuestionHeader-content",{isLogin:V}),children:[Object(i.b)("div",{className:"QuestionHeader-main",children:Object(i.b)("h1",{className:"QuestionHeader-title",onClick:function(){Object(ae.scrollTo)(window,{top:0,behavior:"smooth"})},children:h})}),Object(i.b)(j.b,{block:"Toolbar",children:Object(i.b)(x.a,{module:"ToolBar",card:{content:{type:"Question",token:String(k)}},children:Object(i.b)("div",{className:"QuestionHeader-side",children:Object(i.b)(yt,{question:r,inTopBar:!0})})})}),Object(i.b)("div",{className:"QuestionHeader-profile",children:Object(i.b)(tr.a,{currentUser:M})})]})})]})}}]),n}(f.PureComponent);ir.contextTypes={authRequired:v.a.func,currentUser:v.a.object},ir.propTypes={question:v.a.object,location:v.a.object,isAnswerPage:v.a.bool};var rr=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){var n=e.question.brand,i=e.publicEditPermission,r=e.currentUser,o=t.question,a=o.questionType,c=o.author;return{brand:n,publicEditPermission:i,currentUserUrlToken:r,permission:Object(I.cb)(e),isCommercialQuestion:"commercial"===a,isOrgQuestion:"org"===a,isAuthorCurrentUser:Object(H.i)(e,c)}}),{loadBrand:I.I,updateQuestionLocked:I.rb,deleteQuestion:I.l,deleteBrandQuestion:I.i,showNotification:V.h,loadQuestionCommercialBanner:I.U,loadBrandQuestionRedPacket:I.O,loadBrandQuestionPermission:I.M,loadBrandQuestionOpenStatus:I.L,loadBrandQuestionAdvancedStyle:I.J,loadBrandQuestionPrize:I.N}))(ir),or=n(1182),ar=n(1434);function cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}function sr(e){var t=e.toString();return 1===t.length?"0".concat(t):t}var lr=function(e){var t=Object(A.parseInputTime)(e);return t?"".concat(t.getFullYear(),"-").concat(sr(t.getMonth()+1),"-").concat(sr(t.getDate()),"T").concat(sr(t.getHours()),":").concat(sr(t.getMinutes()),":").concat(sr(t.getSeconds())):""};function ur(e){var t=document.querySelector(e?"#js-answerAddCard .Editable-content":"#js-answerAddCard");t?t.scrollIntoView({block:"end"}):window.scrollTo(0,0)}var dr=function(e){Object(d.a)(n,e);var t=cr(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anonymousConfirmShown:!1,answering:!1,hideIsMutedCover:!1,signFlowModalShown:!1},e.editableStatscReporter=Object(or.c)("AnswerPage"),e.getPublicEditPermission=function(){var t=e.props,n=t.question,i=t.currentUserUrlToken,r=t.getPublicEditPermission,o=k()(n,"author.urlToken","");k()(n,"isEditable",!1)&&i&&o!==i&&r()},e.handleToggleAnonymous=function(){var t=e.props,n=t.showNotification,i=t.reward.question,r=void 0===i?{}:i,o=t.id;o&&r[o]&&r[o].isRewardable?n("已开启赞赏的回答无法设为匿名，请先关闭赞赏","red"):e.setState({anonymousConfirmShown:!e.state.anonymousConfirmShown})},e.startAddAnswer=function(){var t=e.props,n=t.params.answerId,i=t.location.query.group_id;n||i?(e.context.router.push("/question/".concat(e.props.id)),setTimeout(e.focusAddAnswer)):e.focusAddAnswer()},e.endAddAnswer=function(){e.setState({answering:!1})},e.focusAddAnswer=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ur(e.props.useMediumEditor),e.setState({answering:Date.now()},(function(){t&&setTimeout((function(){ur(e.props.useMediumEditor)}))}))},e}return Object(u.a)(n,[{key:"getChildContext",value:function(){return{toggleAnonymous:this.handleToggleAnonymous,startAddAnswer:this.startAddAnswer,endAddAnswer:this.endAddAnswer}}},{key:"componentDidMount",value:function(){var e=this;Object(or.d)();var t,n=this.props,i=n.question,r=n.answer,o=n.draft,a=n.currentUser,l=n.params,u=n.attachedArticleId,d=n.loadAttachedArticleToDraft,b=n.location;(!(t=null==r?void 0:r.updatedTime)||Date.now()-1e3*t>6e4)&&Object(D.loadScript)("https://zz.bdstatic.com/linksubmit/push.js",{crossOrigin:void 0}),function(){var t=Object(s.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(vt.f)(b),t.prev=1,!i){t.next=7;break}return t.next=5,e.fetchDraft();case 5:t.next=9;break;case 7:return t.next=9,e.fetchQuestionAndDraft();case 9:if(!e.props.params.answerId){t.next=11;break}return t.abrupt("return");case 11:if(!u){t.next=14;break}return t.next=14,d(l.id,u);case 14:(o&&!o.schedule||!o&&n||u)&&e.focusAddAnswer(n||u),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(){return t.apply(this,arguments)}}()(),this.getPublicEditPermission(),a&&"guest"!==a.userType||this.setState({signFlowModalShown:!0})}},{key:"componentDidUpdate",value:function(e){this.props.params.id!==e.params.id&&this.fetchQuestionAndDraft()}},{key:"componentWillUnmount",value:function(){this.subscription&&this.subscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe()}},{key:"fetchQuestionAndDraft",value:function(){var e=this.props,t=e.id,n=e.loadQuestion;return Promise.all([n(t),this.fetchDraft()])}},{key:"fetchDraft",value:function(){var e,t=this.props.loadDraft;return this.context.currentUser&&(e=t(this.props.params.id)),this.setState({anonymousConfirmShown:!1}),e}},{key:"renderMeta",value:function(){var e=this.props.question,t=Object(vt.d)(e);return Object.keys(t).map((function(e){return Object(i.b)("meta",{itemProp:e,content:t[e]},e)}))}},{key:"renderJSONLD",value:function(){var e=this.props,t=e.location,n=e.question,r=e.answer,a=e.params.answerId,c=e.ua;if(!/baiduspider/i.test(c.origin))return null;var s=Boolean(a),l=s?r:n;if(l){var u=s?[l.createdTime,l.updatedTime]:[l.created,l.updatedTime],d=Object(o.a)(u,2),b=d[0],h=d[1],f=lr(b),p=lr(h);return Object(i.b)("script",{type:"application/ld+json",children:'\n        {\n          "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",\n          "@id": "https://www.zhihu.com'.concat(t.pathname,'",\n          "appid": "否",\n          "pubDate": "').concat(f,'",\n          "upDate": "').concat(p,'"\n        }')})}}},{key:"handleSignFlowModalClose",value:function(){this.setState({signFlowModalShown:!1})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.location,o=n.params,a=n.children,c=n.question,s=n.router.location.query,l=n.topicMeta,u=n.answer,d=n.firstAnswer,b=Boolean(o.answerId);if(!c)return Object(i.b)("div",{});if("true"===s.answer_deleted_redirect)return Object(i.b)(X,{id:c.id});var h=c.questionType,p=c.isMuted,m=c.title,v=c.relationship,O=v.isAuthor,g=v.myAnswer,C=c.visibleOnlyToAuthor;if(!b&&!O&&C||b&&null!=u&&u.visibleOnlyToAuthor&&(null==u||null===(e=u.relationship)||void 0===e||!e.isAuthor))return Object(i.b)(q,{});var k=this.state,A=k.anonymousConfirmShown,R=k.answering,S=k.hideIsMutedCover,N=k.signFlowModalShown,T=b?u:c;return Object(i.b)(j.b,{content:{type:"Question",token:String(null==c?void 0:c.id)},children:Object(i.b)(x.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(c.id)}},children:Object(i.b)(K,{isQAPage:!b,children:Object(i.c)("div",{className:"QuestionPage",itemScope:!0,itemProp:"mainEntity",itemType:"http://schema.org/Question",children:[T&&Object(i.b)(M,{entity:T}),N&&Object(i.b)(W.b,{showQrcodeFirst:!0,titlePart:Object(i.b)(ar.a,{title:"登录知乎，问答干货一键收藏"}),maskClosable:!1,defaultType:"login",onClose:function(){t.handleSignFlowModalClose()}}),Object(i.b)(y.a,Object.assign({title:m},!b&&{meta:Object(L.c)(c,d)})),this.renderMeta(),this.renderJSONLD(),"commercial"===h&&p&&!S&&O&&Object(i.b)("div",{className:"QuestionPage-commercialIsMutedCover",onClick:function(){t.setState({hideIsMutedCover:!0})}}),C&&O&&!b&&Object(i.b)("div",{className:"QuestionPage-visibleYourself",children:"仅自己可见"}),Object(i.b)(rr,{topicMeta:l,question:c,location:r,isAnswerPage:b}),Object(i.b)(w.Box,{id:"AnswerFormPortalContainer",bg:"GBK10C",mt:"10px",mx:"auto",css:{width:"1000px"}}),Object(i.b)(or.b.Provider,{value:this.editableStatscReporter,children:Object(f.cloneElement)(f.Children.only(a),{question:c,answering:R})}),Object(i.b)(G.a,{question:c,myAnswer:g,shown:A,onClose:this.handleToggleAnonymous})]})})})})}}]),n}(f.PureComponent);dr.fetchData=function(e){var t=e.dispatch,n=e.getState,i=e.params,r=i.id,o=i.answerId,a=e.location,c=e.location,s=c.query,l=c.pathname;if(-1!==["3","4"].indexOf(Object(F.abParamSelector)(n(),"pc_fullsize"))&&Object(vt.f)(a)){var u=S()(s,["write"]),d=new Error;throw d.status=302,d.redirect=Object(P.a)(o?l+"/edit":l+"/write",u),d}return n().env.userAgent.isBot?Promise.all([t(Object(I.ab)(r,o)),t(Object(I.bb)(r)),t(Object(I.T)(r))]):t(Object(I.T)(r))},dr.contextTypes={router:v.a.object,currentUser:v.a.object,authRequired:v.a.func},dr.childContextTypes={toggleAnonymous:v.a.func,startAddAnswer:v.a.func,endAddAnswer:v.a.func};var br=Object(O.connect)((function(e,t){var n=t.params,i=n.id,r=n.answerId,o=t.location.query,a=e.question.topicMeta,c=e.entities.drafts,s=void 0===c?{}:c,l=e.env,u=l.referer,d=l.userAgent,b=e.reward,h=void 0===b?{}:b,f=e.currentUser,p=Boolean(r);return Object.assign({id:i,topicMeta:a[i]||{},question:Object(I.eb)(e,{id:i}),attachedArticleId:o.attach_to_article,reward:h,draft:s["question_".concat(i)],referer:u,ua:d,currentUserUrlToken:f,currentUser:Object(H.b)(e),useMediumEditor:-1!==["1","2"].indexOf(Object(F.abParamSelector)(e,"pc_fullsize"))},p?{answer:Object(U.c)(e,{id:r})}:{firstAnswer:Object(U.j)(e,{id:i})})}),{loadQuestion:I.T,loadDraft:I.Q,loadAttachedArticleToDraft:I.F,showNotification:V.h,getPublicEditPermission:_.b})(dr),hr=n(893),fr=n(416),pr=n(1132),mr=n(1185),vr=function(e){var t,n,r,a=e.question,c=a.id,s=a.title,l=a.person,u=e.headerInfo,d=e.enableIgnore,b=e.extraFooterInfo,h=e.button,p=e.handleIgnoreQuestion,m=void 0===p?hi.a:p,v="https://www.zhihu.com/question/".concat(c),O=Object(j.i)().trackEvent,g=Object(f.useState)(!1),y=Object(o.a)(g,2),C=y[0],k=y[1];return Object(i.b)(j.b,{content:{type:"Question",token:String(c)},children:Object(i.c)(j.e,{zaType:"Card",as:w.Flex,zaText:s,justifyContent:"space-between",alignItems:"center",css:function(e){return{padding:"22px 0px",borderBottom:"1px solid ".concat(e.colors.GBK09A),position:"relative"}},onMouseEnter:function(){k(!0)},onMouseLeave:function(){k(!1)},children:[Object(i.c)(w.Box,{css:{flex:"1"},children:[Object(i.c)(w.Flex,{mb:12,color:"GBL05A",alignItems:"center",css:{fontSize:"15px"},children:[Object(i.b)("img",{alt:"",css:{width:"20px",height:"20px",borderRadius:"50%",marginRight:"8px"},src:null==u||null===(t=u.avatar)||void 0===t?void 0:t.url}),Boolean(l||(null==u||null===(n=u.avatar)||void 0===n?void 0:n.people))&&Object(i.c)(w.Flex,{alignItems:"center",css:function(e){return{color:e.colors.GBK03A,marginRight:"6px",fontSize:"14px",fontWeight:"16px"}},children:[Object(i.c)(w.Flex,{alignItems:"center",css:function(e){return{color:e.colors.GBK03A}},children:[l||(null==u||null===(r=u.avatar)||void 0===r?void 0:r.people),null!=u&&u.labels?Object(i.b)(w.Flex,{css:function(e){return{marginBottom:"3px",padding:"1px 2px",marginLeft:"4px",marginRight:"8px",color:e.colors.GBL01A,fontSize:"12px",border:"1px solid ".concat(e.colorMod(e.colors.GBL01A).alpha(.2)),borderRadius:"2px"}},children:null==u?void 0:u.labels}):null," ","邀请你回答"===(null==u?void 0:u.invite)?"":"的提问"]}),Object(i.b)(w.Flex,{css:function(e){return{color:e.colors.GBK06A,marginLeft:"6px",lineHeight:"21px"}},children:null==u?void 0:u.createdTime}),Object(i.b)(w.Flex,{css:function(e){return{color:e.colors.GBK06A,marginLeft:"6px"}},children:null==u?void 0:u.invite})]}),d&&C&&Object(i.b)(ie.c,{css:{position:"absolute",top:"12px",right:"0"},className:"QuestionItem-ignoreButton",preset:"plain","data-tooltip":"不感兴趣","aria-label":"不感兴趣","data-tooltip-preset":"white","data-tooltip-classname":"QuestionItem-ignoreButtonTooltip",color:"GBL07A",icon:zt.a,onClick:function(){m(c),O({eventType:"Click",elementLocation:{type:"Button",text:"不感兴趣",content:{type:"Question",token:String(c)}}})}})]}),Object(i.b)(mr.b,{item:{question:{url:v,title:s}}}),Object(i.b)(w.Flex,{css:function(e){return{color:e.colors.GBK06A,fontSize:"14px"}},children:b})]}),h||Object(i.b)(ut.a,{css:function(e){return{width:"96px",height:"28px",lineHeight:"26px",borderRadius:"3px",color:e.colors.GBK99B,padding:0,border:"1px solid ".concat(e.colors.GBL01A),backgroundColor:e.colors.GBL01A,boxSizing:"border-box"}},icon:Ze.a,label:"写回答",href:"".concat(v,"?write"),target:"_blank",onClick:function(){O({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Button",text:"写回答",content:{type:"Question",token:String(c)}}},{link:{url:"".concat(v,"?write")}})}})]})})};var Or=function(e){var t=e.type,n=e.index,o=e.onClick,a=e.enablingTypeName,c=e.totals,s=t.name,l=t.text,u=t.queryName,d=t.icon,b=s===a;return Object(i.c)(r.Link,{className:le()("QuestionType","QuestionWaiting-type",{"QuestionType--active":b}),role:"tab","aria-selected":b,"aria-setsize":c,"aria-posinset":n+1,to:u?"/question/waiting?type=".concat(u):"/question/waiting","data-za-detail-view-id":5362,"data-za-extra":JSON.stringify({button:{text:l}}),onClick:o,children:[Object(i.b)(d,{className:"QuestionType-icon",size:18}),l]})},jr=n(607);var gr=Object(r.withRouter)(Object(O.connect)((function(e,t){var n=t.location.query.type;return{allWaitingQuestions:e.question.waitingQuestions,defaultType:jr.b.find((function(e){return e.queryName===n}))||jr.b[0]}}),{getWaitingQuestions:I.z,getWaitingInvitedQuestions:I.y,deleteWaitingQuestion:I.m,ignoreToolsQuestionInvite:I.B})((function(e){var t=e.allWaitingQuestions,n=e.defaultType,r=e.getWaitingQuestions,a=e.getWaitingInvitedQuestions,c=e.deleteWaitingQuestion,s=e.ignoreToolsQuestionInvite,l=Object(f.useRef)(null),u=Object(f.useState)(n.name),d=Object(o.a)(u,2),b=d[0],h=d[1],p=Object(f.useState)(jr.b.reduce((function(e,t){var n=t.name;return Object.assign(Object.assign({},e),{},Object(pe.a)({},n,0))}),{})),m=Object(o.a)(p,2),v=m[0],O=m[1],j=t[b].paging,g=function(){return a(null!=j&&j.next?j.next:"notifications/v3/timeline/entry/invite?invite_with_time_slice=1&limit=20&offset=0")},w=Object(f.useState)(new Set),C=Object(o.a)(w,2),k=C[0],x=C[1],A=t[b],R=A.isEnd,S=A.isLoading,N=A.questions.filter((function(e){var t=Object(jr.a)(e,b).question,n=t.ignoreId,i=t.id;return!k.has(n||i)}));return Object(i.c)("div",{className:"QuestionWaiting",children:[Object(i.b)(y.a,{title:"等你来答"}),Object(i.c)(hr.d,{role:"region","aria-label":"问题列表",className:"QuestionWaiting-mainColumn",children:[Object(i.b)(oe.a,{offset:62,children:function(e){var n=e.isFixed;return Object(i.c)("div",{className:le()("QuestionWaiting-typesContainer",{"QuestionWaiting-typesContainer--fixed":n}),children:[n&&Object(i.b)("div",{className:"QuestionWaiting-typesTopper"}),Object(i.b)("div",{role:"tablist","aria-label":"问题分类",className:le()("QuestionWaiting-types",{"QuestionWaiting-types--fixed":n}),children:jr.b.map((function(e,n){return Object(i.b)(Or,{totals:jr.b.length,type:e,index:n,enablingTypeName:b,onClick:function(){return function(e){O(Object.assign(Object.assign({},v),{},Object(pe.a)({},b,window.pageYOffset)));var n=e.name,i=e.request,o=i.endpoint,a=i.query;t[e.name].questions.length||("invite"!==e?r({type:n,endpoint:o,query:a}):g()),h(n),window.scrollTo(0,v[n])}(e)}},e.name)}))})]})}}),Object(i.b)(fr.b,{ref:l,className:"QuestionWaiting-questions",onLoad:function(){"invite"===b?g():r({type:b,endpoint:n.request.endpoint,query:n.request.query,offset:N.length})},isLoading:S,placeholder:Object(i.b)(fr.a,{className:"QuestionWaiting-placeholder"}),isDrained:R,children:N.map((function(e){var t,n=Object(jr.a)(e,b),r=n.question,o=n.headerInfo,a=n.extraFooter,u=n.showTime,d=n.button,h=n.titleLink;return Object(i.b)(vr,{className:"QuestionWaiting-questionItem",question:r,headerInfo:o,extraFooterInfo:a,showTime:u,enableIgnore:!0,handleIgnoreQuestion:(t=r.ignoreId||r.id,function(){x(new Set(k).add(t)),"invite"===b?s(t):c(t),l.current.maybeRun()}),button:d,titleLink:h},e.id)}))})]}),Object(i.b)(pr.a,{omit:{noBanner:!0,noCategory:!0}})]})}))),yr=n(26),wr=function(e){return p.a.createElement(yr.a,e,p.a.createElement("path",{d:"M12.004 4.15a7.85 7.85 0 1 1-5.772 13.17.85.85 0 0 1 1.25-1.153 6.15 6.15 0 1 0-1.559-5.087l1.208.343a.542.542 0 0 1 .112.996l-2.597 1.42a.542.542 0 0 1-.732-.21l-1.44-2.561a.542.542 0 0 1 .62-.787l1.182.334a7.852 7.852 0 0 1 7.728-6.465zm-.178 3.792c.385 0 .7.31.7.69l-.003 3.495 2.564 1.693c.315.207.425.671.185.977-.24.305-.69.33-.99.126 0 0-2.53-1.663-2.844-1.9-.315-.236-.315-.551-.315-.551l.003-3.84c0-.38.315-.69.7-.69z",fillRule:"evenodd"}))};wr.defaultProps={name:"Later"};var Cr=wr,kr=n(856);var xr=function(e){var t=e.className,n=e.titleClassName,r=e.sourceClassName,a=e.hideButtonClassName,c=e.question,s=c.id,l=c.title,u=c.detail,d=c.excerpt,b=c.isDeleted,h=e.mainSource,p=e.subSource,m=e.mainTool,v=e.subTool,O=e.zaId,j=void 0===O?{}:O,g=e.onMouseEnter,y=void 0===g?hi.a:g,w=e.onMouseLeave,C=void 0===w?hi.a:w,k=e.onExpand,A=void 0===k?hi.a:k,R=e.onCollapse,S=void 0===R?hi.a:R,N="https://www.zhihu.com/question/".concat(s),T=Object(f.useState)(!0),B=Object(o.a)(T,2),q=B[0],E=B[1],I=Object(f.useCallback)((function(e){E(!0),S(e),ce.a.trackEvent(e.target,{id:j.collapse,action:"Collapse"})}),[E,S,j]),Q=Object(f.useCallback)((function(e){E(!1),A(e),ce.a.trackEvent(e.target,{id:j.expand,action:"Expand"})}),[E,A,j]);return b?Object(i.c)("div",{className:le()("ListQuestionItem","ListQuestionItem--deleted",t),children:[Object(i.b)("div",{className:"ListQuestionItem-hint",children:"该问题已被删除"}),Object(i.b)("div",{className:"ListQuestionItem-mainTool",children:m})]}):Object(i.b)(x.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(s)}},trackCardShow:Boolean(j.cardShow),view:{id:j.cardShow},children:Object(i.c)("div",{className:le()("ListQuestionItem",t),onMouseEnter:y,onMouseLeave:C,children:[(h||p)&&Object(i.c)("div",{className:le()("ListQuestionItem-source",r),children:[h&&Object(i.b)("div",{className:"ListQuestionItem-mainSource",children:h}),p&&Object(i.b)("div",{className:"ListQuestionItem-subSource",children:p})]}),Object(i.b)("a",{className:le()("ListQuestionItem-title",n,{"ListQuestionItem-title--noDetail":!u}),href:N,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":j.titleClick,children:l}),u&&Object(i.b)(it,{className:"ListQuestionItem-RichText",html:u,reviewInfo:{},excerpt:d,collapsed:q,onExpand:Q,editable:!1}),Object(i.c)("div",{className:"ListQuestionItem-tool",children:[Object(i.c)("div",{className:"ListQuestionItem-mainTool",children:[Object(i.b)(ut.a,{className:"ListQuestionItem-writeAnswerButton",color:"blue",icon:Ze.a,label:"写回答",href:"".concat(N,"?write"),target:"_blank","data-za-not-track-link":!0,onClick:function(e){ce.a.trackEvent(e.target,{id:j.writeAnswer,action:"Answer"})}}),m]}),(v||!v&&!q)&&Object(i.c)("div",{className:"ListQuestionItem-subTool",children:[v,!q&&Object(i.c)("div",{className:le()("ListQuestionItem-hideButton",a),role:"button",tabIndex:0,onClick:I,children:["收起",Object(i.b)(re.a,{className:"ToolsQuestionItem-hideButtonIcon",center:!0})]})]})]})]})})},Ar=n(2246),Rr=n.n(Ar);function Sr(e){var t=e.laterQuestions,n=e.getLaterQuestions,a=e.updateLaterQuestion,c=Object(f.useRef)(null),s=Object(f.useState)(new Set),l=Object(o.a)(s,2),u=l[0],d=l[1],b=t.count,h=t.isEnd,p=t.isLoading,m=t.questions.filter((function(e){return!u.has(e.id)}));return Object(i.c)("div",{className:"QuestionLater",children:[Object(i.c)(hr.d,{className:"QuestionLater-mainColumn",children:[Object(i.c)("div",{className:"QuestionLater-title",children:[Object(i.b)(Cr,{className:"QuestionLater-titleIcon",size:30}),"我的稍后答",Boolean(b)&&Object(i.b)("div",{className:"QuestionLater-titleNumber",children:b})]}),!p&&0===m.length&&Object(i.c)("div",{className:"QuestionLater-empty",children:[Object(i.b)("img",{className:"QuestionLater-emptyImage",src:Rr.a,alt:""}),Object(i.c)("div",{className:"QuestionLater-emptyText",children:["还没有稍后答，",Object(i.b)(r.Link,{className:"QuestionLater-emptyLink",to:"/question/waiting",children:"看看为你推荐的问题"})]})]}),Object(i.b)(fr.b,{ref:c,className:"QuestionLater-questions",onLoad:function(){return n(20,m.length)},isLoading:p,placeholder:Object(i.b)(fr.a,{className:"QuestionLater-placeholder"}),isDrained:h,children:m.map((function(e){return Object(i.b)(xr,{className:"QuestionLater-questionItem",question:e,zaId:{titleClick:5372,expand:5373,cardShow:5375,writeAnswer:5374},mainTool:Object(i.c)(f.Fragment,{children:[Object(i.c)(ie.c,{className:le()("QuestionLater-deletingButton"),preset:"outline",color:"grey",onClick:function(t){d(new Set(u).add(e.id)),a(e.id,!1),c.current.maybeRun(),ce.a.trackEvent(t.target,{id:5376,action:"Delete"})},children:[Object(i.b)(kr.a,{size:22}),"移除"]}),!e.isDeleted&&Object(i.c)("div",{className:"QuestionLater-info",children:[Object(Se.formatNumber)(e.answerCount)," 个回答"," · ",Object(Se.formatNumber)(e.visitCount)," 个浏览"]})]})},e.id)}))})]}),Object(i.b)(pr.a,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}Sr.fetchData=function(e){return(0,e.dispatch)(Object(I.u)())};var Nr=Object(O.connect)((function(e){return{laterQuestions:e.question.laterQuestions}}),{getLaterQuestions:I.t,updateLaterQuestion:I.nb})(Sr),Tr=n(1323);var Br=function(e){var t=e.users,n=void 0===t?[]:t;return 0===n.length?null:1===n.length?Object(i.b)(Ft.a,{user:n[0]}):2===n.length?Object(i.c)(f.Fragment,{children:[Object(i.b)(Ft.a,{user:n[0]})," 和 ",Object(i.b)(Ft.a,{user:n[1]})]}):3===n.length?Object(i.c)(f.Fragment,{children:[Object(i.b)(Ft.a,{user:n[0]}),"、",Object(i.b)(Ft.a,{user:n[1]})," 和"," ",Object(i.b)(Ft.a,{user:n[2]})]}):n.length>3?Object(i.c)(f.Fragment,{children:[Object(i.b)(Ft.a,{user:n[0]}),"、",Object(i.b)(Ft.a,{user:n[1]})," 和"," ",Object(i.b)(Ft.a,{user:n[2]})," 等 ",n.length," 人"]}):null};var qr=function(e){var t=e.user,n=t.isFollowed,r=t.isFollowing,o=t.gender,a=null;return n&&r?a="互相关注":r&&(a="你关注了".concat(function(e){return 0===e?"她":1===e?"他":"TA"}(o))),a?Object(i.b)("div",{className:"RelationLabel",children:a}):null},Er=n(406),Ir=Er.a[0];function Qr(e){var t=e.allInvitedQuestions,n=e.getInvitedQuestions,r=e.ignoreInvitedQuestion,a=e.updateLaterQuestion,c=Object(f.useRef)(null),s=Object(f.useState)(Ir),l=Object(o.a)(s,2),u=l[0],d=l[1],b=Object(f.useState)(new Set),h=Object(o.a)(b,2),p=h[0],m=h[1],v=Object(f.useState)(new Set),O=Object(o.a)(v,2),j=O[0],g=O[1],y=Object(f.useState)(Er.a.reduce((function(e,t){var n=t.name;return Object.assign(Object.assign({},e),{},Object(pe.a)({},n,0))}),{})),w=Object(o.a)(y,2),C=w[0],k=w[1],x=t[u.name],A=x.isEnd,R=x.isLoading,S=x.questions.filter((function(e){var t=e.question;return!p.has(t.id)}));return Object(i.c)("div",{className:"QuestionInvited",children:[Object(i.c)(hr.d,{className:"QuestionInvited-mainColumn",children:[Object(i.c)("div",{className:"QuestionInvited-title",children:["邀请回答",Boolean(t.total.count)&&Object(i.b)("div",{className:"QuestionInvited-titleNumber",children:t.total.count-C.total})]}),Object(i.b)("div",{className:"QuestionInvited-tabs",children:Er.a.map((function(e){return Object(i.c)("div",{className:le()("QuestionInvited-tab",{"QuestionInvited-tab--active":e.name===u.name}),role:"button",tabIndex:0,onClick:function(){return function(e){t[e.name].questions.length||n(e,20,0),ce.a.trackEvent(null,{id:5377},{button:{text:e.text}}),d(e)}(e)},children:[Object(i.b)("div",{className:"QuestionInvited-tabTitle",children:e.text}),Object(i.b)("div",{className:"QuestionInvited-tabMeta",children:t[e.name].count-C[e.name]})]},e.name)}))}),Object(i.b)(fr.b,{ref:c,className:"QuestionInvited-questions",onLoad:function(){return n(u,20,S.length)},isLoading:R,placeholder:Object(i.b)(fr.a,{className:"QuestionInvited-placeholder"}),isDrained:A,children:S.map((function(e){var t=e.inviters,n=e.question;return Object(i.b)(xr,{className:"QuestionInvited-questionItem",question:n,zaId:{titleClick:5378,expand:5379,cardShow:5380,writeAnswer:5381},mainSource:Object(i.c)("div",{className:"QuestionInvited-questionItemMainSource",children:[Object(i.b)(Br,{users:t})," 邀请你回答"]}),subSource:1===t.length&&Object(i.b)(qr,{user:t[0]}),mainTool:Object(i.c)(f.Fragment,{children:[Object(i.c)(ie.c,{className:le()("QuestionInvited-deletingButton"),preset:"outline",color:"grey",onClick:function(e){m(new Set(p).add(n.id)),k(Object.assign(Object.assign({},C),{},Object(pe.a)({total:C.total+1},u.name,C[u.name]+1))),r(n.id),c.current.maybeRun(),ce.a.trackEvent(e.target,{id:5382,action:"Ignore"})},children:[Object(i.b)(Tr.a,{size:18}),"忽略"]}),Object(i.c)(ie.c,{className:le()("QuestionInvited-laterButton",{"QuestionInvited-laterButton--active":j.has(n.id)}),preset:"outline",color:"grey",onClick:function(e){var t=!j.has(n.id),i=new Set(j);t?i.add(n.id):i.delete(n.id),g(i),a(n.id,t),ce.a.trackEvent(e.target,{id:5383,action:t?"Add":"UnAdd"})},children:[j.has(n.id)?null:Object(i.b)(Cr,{}),j.has(n.id)?"已添加":"稍后答"]}),Object(i.c)("div",{className:"QuestionInvited-info",children:[Object(Se.formatNumber)(n.answerCount)," 个回答"," · ",Object(Se.formatNumber)(n.visitCount)," 个浏览"]})]})},n.id)}))})]}),Object(i.b)(pr.a,{omit:{noWrite:!0,noCreator:!0,noBanner:!0,noCategory:!0}})]})}Qr.fetchData=function(e){return(0,e.dispatch)(Object(I.s)())};var zr=Object(O.connect)((function(e){return{allInvitedQuestions:e.question.invitedQuestions}}),{getInvitedQuestions:I.r,ignoreInvitedQuestion:I.A,updateLaterQuestion:I.nb})(Qr),Mr=n(874),Pr=n(477),Lr=n(2134),Dr=n(2135),Fr=n(456),Hr=n(88),_r=n(65);var Ur=n(2217),Vr=n(2216),Wr=n(423);function Gr(e){if(!Object(Pr.a)(e))return"";var t="";return Object(Lr.a)(e)?t+="今天":Object(Dr.a)(e)?t+="昨天":t+=Object(Fr.a)(e,"yyyy/MM/dd"),0!==function(e){Object(_r.a)(1,arguments);var t=Object(Hr.a)(e),n=t.getSeconds();return n}(e)?t+=" "+Object(Fr.a)(e,"HH:mm:ss"):0!==Object(Ur.a)(e)?t+=" "+Object(Fr.a)(e,"HH:mm"):0!==Object(Vr.a)(e)&&(t+=" "+Object(Vr.a)(e)+"点"),t}var Kr=function(e){var t=e.event,n=e.status,r=t.isOnline,o=t.events;if(!r&&0===n)return null;var a=Object(mi.f)(),c=a.colors,s=c.GBL05A,l=c.GBK09A,u=c.GBK99A,d=c.GBL01A,b=a.fontWeights;return Object(i.b)(w.Box,{pt:"16px",css:Object.assign(Object.assign({},Object(mi.c)({borderTop:"1px solid ".concat(l)})),{},{"&::after":{content:"''",display:"block",position:"absolute",width:"2px",height:"calc(100% - 30px - 52px)",backgroundColor:s,opacity:.12,left:"24px",top:"30px"}}),children:o.map((function(e,t){var r=e.content,o=e.created,a=e.url,c=0===t;return 1===n&&t>2?null:Object(i.c)(Wr.b,{zaBlock:"EventItem",target:"_blank","data-za-detail-view-id":6621,href:a,pl:"40px",css:{paddingLeft:"40px",paddingRight:"16px",position:"relative",display:"block",paddingBottom:"16px","&::after":Object.assign({content:"''",zIndex:1,display:"block",position:"absolute",left:"25px",top:"0.5em",transform:"translateX(-50%)",boxShadow:"0px 0px 0px 2px ".concat(u),borderRadius:"50%",width:"6px",height:"6px",background:s},c&&{background:d,border:"2px solid ".concat(u),boxShadow:"0 0 0 1px ".concat(d)})},children:[Object(i.b)(w.Text,{css:Object.assign({color:s},c&&{color:d,fontWeight:b.bold}),children:Gr(1e3*o)}),Object(i.c)(w.Flex,{flexDirection:"row",alignItems:"center",mt:"6px",color:"GBK02A",css:Object.assign({},c&&{fontWeight:b.bold}),children:[Object(i.b)(w.Text,{flex:"0 1 auto",css:Object(mi.d)(1),children:r}),Object(i.b)(vi.a,{text:!0,css:{color:s,flex:"0 0 auto"}})]})]},o+a)}))})},Jr=function(e){var t=e.slice(0,2).map((function(e){return e.content})).join("、");return t.length<=16?t:e[0]&&e[0].content},Yr=function(e){var t=e.event,n=e.status,r=e.onClick,o=t.url,a=!o,c=null,s=Ge.a,l=6623;return 0===n?c="显示全部":1==n?(c=a?"展开全部进展":"查看全部进展",l=a?6623:6622,s=a?Ge.a:vi.a):2==n&&(c="收起",s=re.a),Object(i.c)(Be.a,{zaAction:o?"OpenUrl":null,zaBlock:"ViewAll","data-za-detail-view-id":l,target:"_blank",flex:"0 0 auto",ml:"8px",color:"GBL05A",css:{display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer"},onClick:function(e){o||(e.preventDefault(),r(!1))},href:o,children:[c,Object(i.b)(s,{})]})},Zr=function(e){var t=e.event,n=e.status,r=e.onChangeStatus,o=t.isOnline,a=t.url,c=t.events;if(o&&c.length<=3&&!a)return null;var s=Object(f.useRef)(),l=Object(ui.d)((function(){0===n||1===n?r(2):2===n&&r(o?1:0),setTimeout((function(){var e;return null===(e=s.current)||void 0===e?void 0:e.check()}))}));return Object(i.b)(oe.a,{ref:s,bottom:!0,children:Object(i.c)(w.Flex,{flexDirection:"row",alignItems:"center",justifyContent:o||2===n?"flex-end":"flex-start",bg:"GBK99B",pl:"20px",pr:"13px",height:"48px",css:function(e){return Object(mi.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)})},children:[!o&&2!==n&&Object(i.c)(w.Text,{children:[Jr(c),"等 ",c.length," 个事件进展"]}),Object(i.b)(Yr,{event:t,status:n,onClick:l})]})})},$r=function(e){var t=e.event,n=t.isOnline,r=t.url,a=Object(f.useState)((function(){return r||n?1:0})),c=Object(o.a)(a,2),s=c[0],l=c[1];return Object(i.c)(i.a,{children:[Object(i.b)(Kr,{event:t,status:s}),Object(i.b)(Zr,{event:t,status:s,onChangeStatus:l})]})},Xr={special_event:"事件讨论",timeline_event:"最新进展"};var eo=function(e){var t,n=e.question;if(null===(t=n.event)||void 0===t||!t.events)return null;var r=Object(mi.f)().colors,o=r.GBK09A,a=r.GBL01A,c=n.event,s=n.id,l=c.url,u=c.type,d=c.title,b=c.isOnline,h=function(e){var t=e.match(/special\/(\d+)/);return t&&t[1]}(l);return Object(i.b)(j.b,{block:"SpecialTimeline",content:{type:"SpecialTopic",token:h},children:Object(i.b)(x.a,{trackCardShow:!0,module:"Content",content:{type:"SpecialTopic",token:h,parent_token:String(s)},extra:{button:{text:b?"online":"offline"}},view:{id:6620},children:Object(i.c)(j.e,{as:hr.d,zaType:"Card",css:{fontSize:15},children:[Object(i.c)(w.Flex,{flexDirection:"row",alignItems:"center",pl:"18px",height:"48px",css:Object(mi.c)({borderTop:"1px solid ".concat(o)}),children:[Object(i.b)(Mr.a,{css:{color:a},size:20}),Object(i.c)(w.Text,{fontWeight:"bold",ml:"10px",children:[Xr[u]," · ",d]})]}),Object(i.b)($r,{event:c})]})})})},to=n(926),no=n(1141),io=n(131),ro=n.n(io),oo=n(39),ao=n.n(oo),co=n(1013),so=n.n(co),lo=n(1014),uo=n(1369),bo=n(1497),ho=n(1012),fo=n(1167),po=function(e){function t(){var e,n;Ct()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=Nt()(this,(e=Bt()(t)).call.apply(e,[this].concat(r)))).state={display:!1},n.handleCloseByDocument=function(e){e.target.closest("div")&&"Pc-word-card-sign-label"!==e.target.closest("div").className&&n.setState({display:!1})},n.handleClick=function(){n.setState((function(e){return{display:!e.display}}));var e=n.sign.querySelector(".Pc-word-card-sign-label").getBoundingClientRect(),t=e.left,i=e.top,r=e.width,o=e.height+15,a=Math.floor(r/2);n.sign.querySelector(".Pc-word-card-sign-popup").style.top="".concat(i+o,"px"),n.sign.querySelector(".Pc-word-card-sign-popup").style.left="".concat(t-a,"px")},n.handleClose=function(){n.props.onClose&&n.props.onClose()},n.handleRef=function(e){n.sign=e},n}return Rt()(t,e),xt()(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleCloseByDocument)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleCloseByDocument)}},{key:"render",value:function(){return p.a.createElement("div",{className:"Pc-word-card-sign",ref:this.handleRef},p.a.createElement("div",{className:"Pc-word-card-sign-label",onClick:this.handleClick},"广告​",p.a.createElement(fo.a,{name:"triangle",className:"Pc-word-card-sign-svg"})),p.a.createElement("div",{className:"Pc-word-card-sign-popup ".concat(this.state.display?"Pc-word-card-sign-popup--isShowed":"Pc-word-card-sign-popup--isHidden")},p.a.createElement("span",{className:"Pc-word-card-sign-popup-arrow"}),p.a.createElement("div",{className:"Pc-word-card-sign-popup-menu"},p.a.createElement("button",{type:"button",onClick:this.handleClose},"不感兴趣"),p.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/promotion-intro"},"知乎广告介绍"))))}}]),t}(f.Component);po.propTypes={onClose:v.a.func};var mo=n(1220),vo=n(905),Oo=function(e){function t(){var e,n;Ct()(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=Nt()(this,(e=Bt()(t)).call.apply(e,[this].concat(r)))).state={display:!0},n.handleClick=function(e){e.stopPropagation();var t=Object(uo.a)(n.props).ad.clickTracks;Object(ho.a)(t)},n.handleClose=function(){var e=Object(uo.a)(n.props).ad.closeTracks;Object(ho.b)(e).then((function(){n.setState((function(e){return{display:!e.display}})),n.props.onClose&&n.props.onClose()}))},n.handleRef=function(e){n.root=e},n}return Rt()(t,e),xt()(t,[{key:"componentDidMount",value:function(){if(this.root&&!this.props.preview){var e=Object(uo.a)(this.props).ad,t=e.impressionTracks,n=e.debugTracks,i={impressionTracks:t,viewTracks:e.viewTracks,debugTracks:n};Object(ho.f)(this.root,i),Object(ho.c)(n,!!this.props.data.adjson)}}},{key:"render",value:function(){if(!this.state.display)return null;var e=Object(uo.a)(this.props),t=e.ad,n=e.creative,i=t.expand.displayAdvertisingTag,r=n.asset,o=r.title,a=r.desc,c=r.cta,s=r.landingUrl,l=r.brandName,u=r.brandLogo,d="out_link"===Object(vo.e)(n,"protoInfo.contentType","");return p.a.createElement("div",{className:"Pc-word",ref:this.handleRef},p.a.createElement("div",{className:"Pc-word-card"},p.a.createElement(jo,{href:s,onClick:this.handleClick},p.a.createElement(go,{data:{name:l,logo:u}})),i&&p.a.createElement(po,{onClose:this.handleClose}),p.a.createElement(jo,{href:s,onClick:this.handleClick},p.a.createElement("h2",{className:"Pc-word-card-title"},o),p.a.createElement("div",{className:"Pc-word-card-content  "},a&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",null,a),p.a.createElement("span",{className:"Pc-word-card-content-cta  "},c))))),p.a.createElement(mo.a,{url:d?"":s}))}}]),t}(f.Component);function jo(e){var t=e.children,n=so()(e,["children"]);return p.a.createElement("a",ao()({target:"_blank"},n),t)}function go(e){var t=e.data,n=t.name,i=t.logo;return p.a.createElement("div",{className:"Pc-word-card-brand"},p.a.createElement("div",{className:"Pc-word-card-brand-wrapper"},p.a.createElement("img",{width:"20",height:"20",src:i,alt:"logo"}),p.a.createElement("span",null,n)))}function yo(e){var t=Object(bo.a)(e.data);return t&&t.adjson?p.a.createElement(lo.a,null,p.a.createElement(Oo,ao()({},e,t))):null}Oo.propTypes={data:v.a.object.isRequired,onClose:v.a.func};var wo=n(899),Co=n(989),ko=n(5),xo=["item"];var Ao={isDrained:!1,isFetching:!1,ids:[]};function Ro(e,t){var n=t.id,i=t.resource;return e.question[i][n]||Ao}var So=function(e){var t=e.item,n=Object(Re.default)(e,xo);return Object(i.b)(wo.a,{children:Object(i.b)(Co.a,Object.assign({editable:!0,expanded:!0,relatedTo:"question",answer:t,zaInfos:{cardShow:4351,index:String(n.dataZaIndex)}},n))},t.id)},No=function(e,t,n){var i=t.relationship,r=i.canCollapseAnswers,o=i.canStickAnswers,a=t.hasPublishingDraft,c=e.map((function(e,t){return So({item:e,canCollapse:r,canStick:o,hasPublishingDraft:a,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t})}));return n?c:Object(be.b)(2,c)},To=function(e,t){return e.map((function(e){return t[e]})).filter((function(e){return e&&!e.isDelete}))},Bo=Object(Pt.isBrowser)()?ro()(To,(function(e,t){return"".concat(e.join(","),"-").concat(t.length)})):To;function qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Eo=function(e){Object(d.a)(n,e);var t=qo(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.isFetching,i=t.id,r=t.loadNotificationAnswers;n||r(i)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.id,i=e.items,r=e.router;i.length||r.replace(location.pathname),(t||i.length)&&Object(I.S)(n)}},{key:"render",value:function(){var e=this.props,t=e.question,n=t.id,r=t.answerCount,o=e.question,a=e.items,c=e.isFetching,s=e.isDrained;return Object(i.c)("div",{className:"QuestionAnswers-answers",children:[Object(i.b)(hr.d,{children:Object(i.c)(no.a,{to:"/question/".concat(n),children:["查看全部 ",Object(Se.formatNumber)(r)," 条回答"]})}),Object(i.c)(hr.d,{children:[Object(i.c)(to.b,{children:[No(a,o),c&&Object(i.b)(fr.a,{className:"List-item"})]}),!s&&!c&&Object(i.b)(no.a,{onClick:this.load,children:"更多"})]}),Object(i.b)(hr.d,{children:Object(i.c)(no.a,{to:"/question/".concat(n),children:["查看全部 ",Object(Se.formatNumber)(r)," 条回答"]})})]})}}]),n}(f.PureComponent),Io=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){var n=Ro(e,{id:t.id,resource:"notificationAnswers"}),i=n.isFetching,r=n.isDrained,o=n.ids;return{isFetching:i,isDrained:r,items:Bo(o,e.entities.answers)}}),{loadNotificationAnswers:I.S}))(Eo),Qo=n(906),zo=n(210),Mo=n(964);function Po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Lo=[{text:"默认排序",value:"default"},{text:"".concat("按","时间排序"),value:"updated"}],Do={updatedAnswers:"updated",answers:"default"};var Fo=function(e){Object(d.a)(n,e);var t=Po(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleResourceChange=function(t){e.props.router.push("/question/".concat(e.props.question.id).concat("default"===t?"":"/answers/".concat(t)))},e}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.permission)!==JSON.stringify(e.permission)&&this.loadQuestionAnswerCount(e)}},{key:"loadQuestionAnswerCount",value:function(e){var t=e.question,n=t.id,i=t.questionType,r=e.permission.canBrandAdminEdit,o=e.loadBrandQuestionAnswerCount;"commercial"===i&&r&&o(n)}},{key:"renderAnswerListHeader",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.id,o=n.answerCount,a=n.questionType,c=n.brand,s=(c=void 0===c?{}:c).isPuQuestion,l=e.commonAnswerCount,u=e.hiddenAnswerCount,d=e.permission.canBrandAdminEdit,b=s?"":"，由品牌推荐";return"commercial"===a&&void 0!==s?d?Object(i.c)("div",{className:"QuestionAnswers-navs",children:[Object(i.c)(ie.c,{preset:"plain",className:le()("QuestionAnswers-nav",{"is--active":["answers","updatedAnswers"].includes(t)}),onClick:function(){location.href="/question/".concat(r)},children:[Object(Se.formatNumber)(l)," 个回答",b]}),Object(i.c)(ie.c,{preset:"plain",className:le()("QuestionAnswers-nav",{"is--active":"hiddenAnswers"===t}),onClick:function(){location.href="/question/".concat(r,"/answers/hidden")},children:[Object(Se.formatNumber)(u)," 个隐藏回答"]})]}):Object(i.c)("span",{children:[Object(Se.formatNumber)(o)," 个回答 ",b]}):Object(i.c)("span",{children:[Object(Se.formatNumber)(o)," 个回答"]})}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.children;return Object(i.b)(hr.d,{className:"AnswersNavWrapper",children:Object(i.b)(Mo.a,Object.assign(Object.assign({title:this.renderAnswerListHeader()},{options:"hiddenAnswers"===t?Object(i.b)("span",{children:"按时间排序"}):Object(i.b)(zo.b,{listClassName:"Answers-select",needsReposition:!0,plain:!0,value:Do[t],onChange:this.handleResourceChange,children:Lo.map((function(e){var t=e.value,n=e.text;return Object(i.b)(zo.a,{value:t,text:n},t)}))})}),{},{children:n}))})}}]),n}(f.PureComponent),Ho=Object(E.compose)(r.withRouter,Object(O.connect)((function(e){var t=e.question;return{commonAnswerCount:t.commonAnswerCount,hiddenAnswerCount:t.hiddenAnswerCount,permission:Object(I.cb)(e)}}),{loadBrandQuestionAnswerCount:I.K}))(Fo),_o=n(1033),Uo=n(12);function Vo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Wo=function(e){Object(d.a)(n,e);var t=Vo(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handlePaginationClick=function(t){e.props.router.push("".concat(location.pathname,"?page=").concat(t))},e.handleUpdatedAnswersLoad=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uo.b,i=e.props,r=i.question.id,o=i.loadItems;o(r,"updatedAnswers",{offset:t,limit:n})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,i=e.isDrained,r=e.items,o=e.loadItems;!i&&r.length<Uo.b&&o(t,"updatedAnswers",{offset:Object(ko.c)(n)+r.length,limit:Uo.b-r.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,o=e.isCurrentLoaded,a=e.page,c=e.items,s=e.total,l=e.question,u=e.isMuteSpecial;return n&&!c.length?Object(i.b)(hr.d,{className:"Answers-none",children:Object(i.c)(Qo.k,{children:[Object(i.b)(Qo.b,{}),Object(i.b)("div",{children:u?"回答暂时无法查看":"还没有回答"})]})}):Object(i.b)(_o.a,{isFetching:t,isDrained:a>=s?n:o,isNextLoaded:r,page:a,total:s,placeholder:Object(i.b)(fr.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleUpdatedAnswersLoad,children:No(c,l)})}}]),n}(f.PureComponent),Go=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){var n=t.page,i=Ro(e,{id:t.question.id,resource:"updatedAnswers"}),r=i.isFetching,o=i.isDrained,a=i.ids,c=Object(ko.d)(n,a),s=c.total,l=c.isCurrentLoaded,u=c.isNextLoaded,d=c.items;return{isMuteSpecial:Object(I.E)(t.question),isFetching:r,isDrained:o,total:s,isNextLoaded:u,isCurrentLoaded:l,items:Bo(d,e.entities.answers).filter((function(e){return!e.isDelete}))}}),{loadItems:I.R}))(Wo),Ko=n(2247),Jo=n.n(Ko),Yo=n(399),Zo=n.n(Yo),$o=n(1473),Xo=n(1464),ea=n(1474),ta=n(1007),na=n(1485),ia=n(1292),ra=function(){var e=Object(f.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(f.useState)("login"),c=Object(o.a)(a,2),s=c[0],l=c[1],u=Object(f.useState)(""),d=Object(o.a)(u,2),b=d[0],h=d[1],p=Object(f.useState)(""),m=Object(o.a)(p,2),v=m[0],O=m[1];return Object(i.c)("div",{className:"BlockTypeLogin",children:[Object(i.c)("div",{className:"BlockTypeLogin-leftPart",children:[Object(i.c)("div",{className:"BlockTypeLogin-headImg",children:[Object(i.b)(ia.a,{css:{width:"59px",height:"70px"}}),Object(i.b)("div",{className:"BlockTypeLogin-imgTips",children:"登录查看余下内容"})]}),"login"===s?Object(i.b)("div",{children:Object(i.b)(Xo.a,{showSwitchTypeIcon:!1,showQrcode:!1,selectClassName:"BlockTypeLogin-select"})}):Object(i.c)("div",{children:[Object(i.b)(ta.b.Provider,{value:{selectClassName:"BlockTypeLogin-select"},children:Object(i.b)(ea.a,{socialType:v,defaultFullname:b,onResetRegister:function(){l("login"),h(""),O("")}})}),Object(i.b)("div",{className:"SignContainer-tip",children:Object(i.b)("div",{children:Object(i.c)("div",{children:["手机验证后自动登录，登录即代表同意",Object(i.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms",children:"《知乎协议》"}),Object(i.b)("a",{href:"https://www.zhihu.com/term/privacy",children:"《隐私保护指引》"})]})})})]}),Object(i.b)("div",{className:"BlockTypeLogin-loginModeSwitch",onClick:function(){r((function(e){return!e}))},children:n?"关闭其他方式":"其他方式登录"})]}),Object(i.b)("div",{className:"BlockTypeLogin-rightPart",children:Object(i.c)("div",{className:"BlockTypeLogin-otherLoginMode",style:{opacity:n?1:0},children:[Object(i.b)($o.a,{showSwitchTypeIcon:!1,className:"smallVersion",isBlockType:!0}),Object(i.b)(na.a,{onRegister:function(e){var t=e.fullname,n=e.socialType;l("register"),h(t),O(n)}})]})})]})},oa=function(){return Object(i.b)(j.e,{zaType:"Block",zaBlock:"blockingTypeLoginModal",zaText:"阻断式登录弹层",children:Object(i.b)("div",{css:{position:"absolute",zIndex:3,borderTop:"1px solid #e7eaf1",left:0,width:"100%",marginTop:-254,height:294,backgroundColor:"rgba(255, 255, 255, 0.95)"},children:Object(i.b)(ra,{})})})};function aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var ca=function(e){Object(d.a)(n,e);var t=aa(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showBlockModal:!1},e.handleLoad=function(){var t,n=e.state.showBlockModal,i=e.props,r=i.question.id,o=i.loadItems,a=i.isFetching,c=i.isDrained,s=i.items,l=i.resource,u=void 0===l?"answers":l,d=Number(null===(t=e.props.modalShowCondition)||void 0===t?void 0:t.insertIndex)||10;if(!c&&!a){if(s.length>=+d&&n)return;o(r,u,{limit:5})}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.question.id,i=t.isDrained,r=t.items,o=t.loadItems,a=t.getShowConditions,c=t.getActiveDays;if(t.hasBlockLogin){var s=ke.a.get("blockShow"),l=(new Date).getTime();(!s||Jo.a.duration(l-s).asDays()>30)&&Promise.all([a(),c()]).then((function(t){var n,i,r,o,a=null===(n=t[0].payload)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.activeDays;+(null===(r=t[1].payload)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.num)>=+a&&(e.setState({showBlockModal:!0}),ke.a.set("blockShow",l))}))}!i&&r.length<5&&o(n,"answers",{offset:r.length,limit:5})}},{key:"render",value:function(){var e,t=this,n=this.state.showBlockModal,r=this.props,o=r.adverts,a=r.isBot,c=r.isFetching,s=r.isDrained,l=r.items,u=r.question,d=Number(null===(e=this.props.modalShowCondition)||void 0===e?void 0:e.insertIndex)||10,b=n?l.slice(0,d):l,h=u.relationship,f=h.canCollapseAnswers,p=h.canStickAnswers,m=u.hasPublishingDraft,v=[0].concat(Object(Kt.a)(Object.keys(o||{}).map(Number).sort((function(e,t){return e-t})))),O=n?v.filter((function(e){return e<d})):v,j={canCollapse:f,canStick:p,hasPublishingDraft:m};return Object(i.c)("div",{children:[Object(i.b)(fr.b,{onRef:function(e){t.listEl=e},isLocal:!0,isLoading:c,isDrained:s,onLoad:this.handleLoad,placeholder:Object(i.b)(fr.a,{className:"List-item"}),children:a?b.map((function(e,t){return So(Object.assign({item:e,itemProp:0===t?"acceptedAnswer":"suggestedAnswer",dataZaIndex:t},j))})):Object(be.b)(2,Zo()(O.map((function(e,t){var r,a=O[t+1],c=(a?b.slice(e,a):b.slice(e)).map((function(r,o){var a=e+o+t;return a===d&&n?Object(i.b)("div",{style:{height:254,overflow:"hidden"},children:So(Object.assign({item:r,itemProp:0===a?"acceptedAnswer":"suggestedAnswer",dataZaIndex:a},j))}):So(Object.assign({item:r,itemProp:0===a?"acceptedAnswer":"suggestedAnswer",dataZaIndex:a},j))}));return a?[].concat(Object(Kt.a)(c),[(r=o[a],r?Object(i.b)(yo,{data:r}):null)]):c}))))}),b.length>d-1&&n&&Object(i.b)(oa,{})]})}}]),n}(f.Component),sa=Object(E.compose)(Object(O.connect)((function(e,t){var n=Ro(e,{id:t.question.id,resource:"answers"}),i=n.isFetching,r=n.isDrained,o=n.ids,a=r||i?o:o.slice(0,Math.max(5,o.length-5)),c=Object(H.b)(e);return{isBot:e.env.userAgent.isBot,isFetching:i,hasBlockLogin:!("1"!==Object(F.abParamSelector)(e,"PC_blockLogin")||Object(F.isMobileSelector)(e)||c&&"guest"!==c.userType),modalShowCondition:e.question.modalShowCondition,isDrained:r,items:Bo(a,e.entities.answers).filter((function(e){return e&&!e.isDelete})),adverts:Object(I.c)(e)}}),{loadItems:I.R,getShowConditions:I.x,getActiveDays:I.p}))(ca);function la(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var ua=function(e){Object(d.a)(n,e);var t=la(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handlePaginationClick=function(t){e.props.router.push("".concat(location.pathname,"?page=").concat(t))},e.handleHiddenAnswersLoad=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uo.b,i=e.props,r=i.question.id,o=i.loadItems;o(r,"hiddenAnswers",{offset:t,limit:n})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.page,i=e.isDrained,r=e.items,o=e.loadItems;!i&&r.length<Uo.b&&o(t,"hiddenAnswers",{offset:Object(ko.c)(n)+r.length,limit:Uo.b-r.length})}},{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,r=e.isNextLoaded,o=e.isCurrentLoaded,a=e.page,c=e.items,s=e.total,l=e.question;return Object(i.b)(_o.a,{isFetching:t,isDrained:a>=s?n:o,isNextLoaded:r,page:a,total:s,placeholder:Object(i.b)(fr.a,{className:"List-item"}),onPaginationClick:this.handlePaginationClick,onLoad:this.handleHiddenAnswersLoad,children:No(c,l)})}}]),n}(f.PureComponent),da=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){var n=t.page,i=Ro(e,{id:t.question.id,resource:"hiddenAnswers"}),r=i.isFetching,o=i.isDrained,a=i.ids,c=Object(ko.d)(n,a,Uo.b);return Object.assign(Object.assign({isFetching:r,isDrained:o},c),{},{items:Bo(c.items,e.entities.answers).filter((function(e){return!e.isDelete}))})}),{loadItems:I.R}))(ua);function ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var ha=function(e){Object(d.a)(n,e);var t=ba(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question,n=t.id,i=t.relationship.isAuthor,r=e.resource,o=e.router;"collapsedAnswers"!==r||i||o.push("/question/".concat(n))}},{key:"render",value:function(){var e=this.props,t=e.resource,n=e.question,r=e.question,o=r.questionType,a=r.answerCount,c=r.reviewInfo.tips,s=r.isVisible,l=e.location;if(e.isMuteSpecial||!s)return Object(i.b)(hr.d,{className:"Answers-none",children:Object(i.c)(Qo.k,{children:[Object(i.b)(Qo.b,{}),Object(i.b)("div",{children:"回答暂时无法查看"})]})});if("commercial"!==o&&!a){if(c)return null;var u=n.status||{},d=u.isClose,b=u.isLocked,h=u.isSuggest;return d||b||h?null:Object(i.b)(hr.d,{className:"Answers-none",children:Object(i.c)(Qo.k,{children:[Object(i.b)(Qo.b,{}),Object(i.c)("div",{children:["暂时还没有回答，开始",Object(i.b)(ft,{preset:"plain",className:"QuestionAnswers-answerLink",children:"写第一个回答"})]})]})})}return Object(i.b)("div",{id:"QuestionAnswers-answers",className:"QuestionAnswers-answers","data-zop-feedlistmap":"answers"===t?"0,0,1,0":"0,0,1",children:Object(i.c)(Ho,{question:n,resource:t,children:["updatedAnswers"===t&&Object(i.b)(Go,{question:n,page:Number(l.query.page)||1}),"answers"===t&&Object(i.b)(sa,{question:n}),"hiddenAnswers"===t&&Object(i.b)(da,{question:n,page:Number(l.query.page)||1})]})})}}]),n}(f.PureComponent),fa=Object(E.compose)(Object(x.b)({module:"ContentList"}),r.withRouter,Object(O.connect)((function(e,t){return{isMuteSpecial:Object(I.E)(t.question)}})))(ha),pa=n(1426),ma=n(891),va=n(1634),Oa=n(1181),ja=n(1707),ga=n(1635),ya=n(1462);function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Ca=function(e){Object(d.a)(n,e);var t=wa(n);function n(){var e,i;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(i=t.call.apply(t,[this].concat(o))).state={topicBiosModalShown:!1,activeTabKey:"video_answer"===(null===(e=i.props.draft)||void 0===e?void 0:e.draftType)?Oa.a.videoAnswer:Oa.a.textAnswer},i.answerFormRef=Object(f.createRef)(),i.handleSubmit=function(e){var t=i.props,n=t.currentUser,r=t.question.id,o=t.addAnswer,a=t.scheduledPublish,c=t.validateScheduledPublish,s=t.loadDraft;if(e.publishAt){var l=a(r,e);return l.then((function(){i.context.endAddAnswer(),s(r)})),l}var u=function(){return o(r,e)};return n.autoSendingCreations?c(r).then(u,(function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return at.a.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(u,(function(){}))})):u()},i.focus=function(){i.answerFormRef.current.focus()},i.handleToggleAnonymous=function(){var e=i.context.toggleAnonymous,t=i.props,n=t.showNotification,r=t.question.relationship.isAnonymous,o=t.isOffice;if(r||!i.answerFormRef.current.hasVideo()){if(r||!i.answerFormRef.current.hasMCNLinkCard())return!r&&i.answerFormRef.current.hasADLinkCard()?i.answerFormRef.current.hasFeeConsultCard()?n("不能使用匿名身份插入付费咨询卡片","red"):void n("不能使用匿名身份插入推荐卡片","red"):void(!r&&i.answerFormRef.current.hasCommercialReport()&&o?n("已经进行商业声明的内容不能启用匿名","red"):e());n("不能使用匿名身份推荐商品","red")}else n("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red")},i.handleTabChange=function(e){if(e!==i.state.activeTabKey){var t=i.props,n=t.question.relationship.isAnonymous,r=t.showNotification;if(e===Oa.a.videoAnswer){if(n)return void r("视频回答不支持匿名","red");i.answerFormRef.current.hasEditorContent()&&(ke.a.get("answerContentSync")||(r("图文回答内容已同步至视频描述"),ke.a.set("answerContentSync",!0)))}i.setState({activeTabKey:e})}},i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.getBio)(t),this.props.answering&&setTimeout(this.focus)}},{key:"componentWillReceiveProps",value:function(e){this.props.answering!==e.answering&&this.focus()}},{key:"render",value:function(){var e,t=this.state.activeTabKey,n=this.props,r=n.question,o=n.useMediumEditor,a=o?ya.a:ja.a;return Object(i.c)("div",{className:"AnswerAdd",css:{position:"relative"},children:[Object(i.c)(w.Flex,{justifyContent:"space-between",css:function(e){return[{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}},o&&{background:e.colors.GBK99A}]},children:[Object(i.b)(Oa.b,{activeTabKey:t,onChange:this.handleTabChange}),Object(i.b)(ga.a,{handleClick:null===(e=this.answerFormRef.current)||void 0===e?void 0:e.toggleFullscreen,useMediumEditor:o})]}),Object(i.b)("div",{css:function(e){return o&&{background:e.colorMod(e.colors.GBK10C).alpha(.45)}},children:Object(i.b)(a,{activeTabKey:t,handleTabChange:this.handleTabChange,handleToggleAnonymous:this.handleToggleAnonymous,imperativeRef:this.answerFormRef,question:r,onSubmit:this.handleSubmit,onCancel:this.context.endAddAnswer,useMediumEditor:o})})]})}}]),n}(f.Component);Ca.contextTypes={toggleAnonymous:v.a.func.isRequired,endAddAnswer:v.a.func};var ka=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){var n=e.question.bio,i=e.topic.bios,r=e.answers.newAnswer,o=e.entities.drafts,a=void 0===o?{}:o,c=t.question.id,s=(n[c]||{result:{type:"headline"}}).result;return"topic"===s.type&&(s.bio=i[s.topic.id]||s.bio),{currentUser:Object(H.b)(e),questionBio:s,newAnswer:r,allowCommercialAnonymousAnswer:"show"===Object(F.abParamSelector)(e,"gue_anonymous"),isOffice:Object(F.isOfficeSelector)(e),draft:a["question_".concat(c)]}}),{showNotification:V.h,addAnswer:U.a,scheduledPublish:U.C,validateScheduledPublish:U.N,loadDraft:I.Q,getBio:I.q}))(Ca);function xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Aa=function(e){Object(d.a)(n,e);var t=xa(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question,i=n.id,r=n.relationship.myAnswer,o=void 0===r?{}:r,a=t.router,c=e.question,s=c.id,l=c.relationship.myAnswer,u=void 0===l?{}:l;i===s&&o.answerId!==u.answerId&&(ce.a.trackEvent(this,{action:"StatusReport"},{status:{result:"Success",event:{action:"Answer"}}}),a.push("/question/".concat(i,"/answer/").concat(u.answerId)),ke.a.set("answer::justPublished",!0))}},{key:"render",value:function(){if(!this.context.currentUser)return null;var e=this.props,t=e.question,n=e.question,r=n.relationship.myAnswer,o=n.isNormal,a=n.status,c=(a=void 0===a?{}:a).isClose,s=a.isLocked,l=a.isSuggest,u=n.hasPublishingDraft,d=e.answering,b=e.useMediumEditor;return r?null:l?Object(i.c)("div",{className:"QuestionAnswers-answerTip",children:["被建议修改的问题不允许添加新的回答。",Object(i.b)(ut.a,{preset:"plain",to:"/question/21290061",children:"问题为什么会被建议修改？"})]}):s?Object(i.c)("div",{className:"QuestionAnswers-answerTip",children:["该问题目前已经被锁定，无法添加新答案。",Object(i.b)(ut.a,{preset:"plain",to:"/question/19604313",children:"问题为什么会被锁定？"})]}):c?Object(i.c)("div",{className:"QuestionAnswers-answerTip",children:["被关闭的问题不允许添加新的回答。",Object(i.b)(ut.a,{className:"QuestionAnswers-iconLink",preset:"plain",to:"/question/21290061","data-tooltip":"为什么部分问题会被「关闭」「建议修改」？","aria-label":"为什么部分问题会被「关闭」「建议修改」？",icon:ma.a})]}):u?Object(i.b)(hr.d,{className:"QuestionAnswers-answerTipCard",children:"你创建的回答正在发布中…"}):o?Object(i.b)(va.a,{disabled:!b,children:Object(i.b)(pa.CSSTransitionGroup,{className:"QuestionAnswers-statusWrapper",transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"expand",component:"div",children:d&&Object(i.c)(hr.d,{className:"QuestionAnswers-answerAdd",id:"js-answerAddCard",children:[Object(i.b)("a",{name:"draft"}),Object(i.b)(ka,{question:t,answering:d,useMediumEditor:b})]})})}):null}}]),n}(f.PureComponent);Aa.contextTypes={currentUser:v.a.object};var Ra=Object(r.withRouter)(Aa),Sa=["className","children"];function Na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Ta=function(e){Object(d.a)(n,e);var t=Na(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=Object(Re.default)(e,Sa);return Object(i.b)("div",Object.assign(Object.assign({},r),{},{className:le()("QuestionMainDivider",t),children:Object(i.b)("span",{className:"QuestionMainDivider-inner",children:n})}))}}]),n}(f.Component);function Ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var qa=function(e){Object(d.a)(n,e);var t=Ba(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={opened:!1},e.handleLoad=function(){var t=e.props,n=t.question.id;return(0,t.loadItems)(n,"collapsedAnswers")},e.handleOpen=function(){e.handleLoad(),e.setState({opened:!0})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isDrained,n=e.isFetching,r=e.items,o=e.question,a=e.question,c=a.collapsedAnswerCount,s=a.questionType,l=this.state.opened,u="org"===s,d="".concat(Object(Se.formatNumber)(c)," 个回答被").concat(u?"隐藏":"折叠"),b=Object(i.b)(ut.a,{preset:"plain",to:u?"/org-intro#org-question":"/question/20120168",target:"_blank",children:"为什么？"});return l?Object(i.c)(hr.d,{children:[Object(i.c)(Ta,{children:[d,"（",b,"）"]}),Object(i.c)(to.b,{children:[No(r,o),n&&Object(i.b)(fr.a,{className:"List-item"})]}),!t&&!n&&Object(i.b)(no.a,{onClick:this.handleLoad,children:"更多"})]}):Object(i.c)("div",{className:"CollapsedAnswers-bar",style:{},children:[Object(i.b)(ie.c,{preset:"plain",onClick:this.handleOpen,children:d}),"（",b,"）"]})}}]),n}(f.Component);qa.contextTypes={currentUser:v.a.object};var Ea=Object(O.connect)((function(e,t){var n=Ro(e,{id:t.question.id,resource:"collapsedAnswers"}),i=n.isFetching,r=n.isDrained,o=n.ids;return{isFetching:i,isDrained:r,items:Bo(o,e.entities.answers)}}),{loadItems:I.R})(qa),Ia=n(1479),Qa=n(1488),za=n(1040),Ma=n(986),Pa=n(1368),La=n(140);function Da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Fa=function(e){Object(d.a)(n,e);var t=Da(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.question,t=e.id,n=e.title,r=e.answerCount,o=e.followerCount,a="/question/".concat(t);return Object(i.c)("div",{className:"SimilarQuestions-item",itemProp:"zhihu:similarQuestion",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(i.b)("meta",{itemProp:"name",content:n}),Object(i.b)("meta",{itemProp:"url",content:"https://www.zhihu.com".concat(a)}),Object(i.b)("meta",{itemProp:"answerCount",content:r}),Object(i.b)("meta",{itemProp:"zhihu:followerCount",content:o}),Object(i.b)(ut.a,{preset:"plain",to:a,target:"_blank",children:n})," ",Object(Se.formatNumber)(r)," 个回答"]})}}]),n}(f.Component),Ha=Object(x.b)((function(e){var t=e.question;return{module:"QuestionItem",content:{type:"Question",token:String(t.id),author_member_hash_id:(t.author||{}).id},trackCardShow:!0}}))(Fa);function _a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Ua=function(e){Object(d.a)(n,e);var t=_a(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id;(0,e.loadSimilarQuestions)(t)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,i=t.loadSimilarQuestions,r=e.question.id;n!==r&&i(r)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(i.c)(hr.d,{css:{borderRadius:"0 0 2px 2px"},role:"complementary","aria-label":"相关问题",children:[Object(i.b)(hr.b,{className:"SimilarQuestions-title",children:"相关问题"}),Object(i.b)(hr.c,{className:"SimilarQuestions-list",children:e.map((function(e){return Object(i.b)(Ha,{question:e},e.id)}))})]}):null}}]),n}(f.Component),Va=Object(E.compose)(Object(O.connect)((function(e,t){return{items:e.question.similarQuestions[t.question.id]}}),{loadSimilarQuestions:I.bb}),Object(x.b)({module:"RelatedQuestions"}))(Ua),Wa=n(6),Ga=n(2791);function Ka(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Ja=function(e){Object(d.a)(n,e);var t=Ka(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={hideDescription:!1},e.handleRef=function(t){e.title=t},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.title.offsetWidth<this.title.scrollWidth&&this.setState({hideDescription:!0})}},{key:"render",value:function(){var e=this.props,t=e.link,n=e.title,r=e.description,o=e.meta,a=e.imageUrl,c=this.state.hideDescription;return Object(i.c)(ut.a,{preset:"plain",a:!0,to:t,className:"RelatedCommodities-item",target:"_blank",children:[Object(i.b)("img",{className:"RelatedCommodities-image",src:Object(Ne.imgUrl)(a,{quality:90,size:"250x0"}),alt:"live"}),Object(i.c)("div",{className:"RelatedCommodities-content",children:[Object(i.b)("div",{className:le()("RelatedCommodities-subject",{"RelatedCommodities-subject-two":c}),style:{},ref:this.handleRef,"data-tooltip":n,children:n}),c||Object(i.b)("div",{className:"RelatedCommodities-description",children:r}),Object(i.b)("div",{className:"RelatedCommodities-meta",children:o})]})]})}}]),n}(f.Component),Ya=n(1725);function Za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var $a=function(e){Object(d.a)(n,e);var t=Za(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleListen=function(e){var t="".concat(e.target.closest("a").href,"?extra_auto_play=1");e.preventDefault(),e.stopPropagation(),ce.a.trackEvent(e.target,{action:"OpenUrl",element_name:"Play"},{link:{url:t}}),window.open(t,"_blank")},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.item;switch(e.type){case"live":var t=e.id,n=e.subject,r=e.reviewScore,o=e.seats,a=(e.startsAt,e.speaker.member),c=a.name,s=a.avatarUrl;return Object(i.b)(Ja,{link:"/lives/".concat(t),imageUrl:s,title:n,description:c,meta:Object(i.c)("div",{className:"RelatedCommodities-scoreWrapper",children:[Object(i.b)(Ya.a,{score:r}),Boolean(o&&o.taken)&&"".concat(o.taken," 人参与"),!1]})});case"remix_album":case"podcast":case"remix":var l=e.id,u=e.artwork,d=e.title,b=e.author,h=(b=void 0===b?{}:b).user,f=e.trackCount,p="/remix/albums/".concat(l);return Object(i.b)(Ja,{link:p,imageUrl:u,title:d,description:h&&h.name,meta:Object(i.c)("div",{className:"RelatedCommodities-remixMeta",children:[Object(i.c)("div",{children:["共 ",Object(Se.formatNumber)(f)," 节课"]}),Object(i.b)(ie.c,{className:"RelatedCommodities-remixListen",onClick:this.handleListen,preset:"plain",children:"试听"})]})});case"special":var m=e.id,v=e.subject,O=e.liveCount,j=e.liveMemberCount,g=e.speakers,y=e.artworkMobile,w=g.slice(0,2).map((function(e){return e.member.name})).join("、");return Object(i.b)(Ja,{link:"/lives/specials/".concat(m),imageUrl:y,title:v,description:"".concat(w).concat(g.length>=2?" 等":""),meta:"".concat(Object(Se.formatNumber)(O)," 场 Live, ").concat(Object(Se.formatNumber)(j)," 次参与")});case"book":var C=e.id,k=e.title,x=e.cover,A=e.authorName,R=e.readCount;return Object(i.b)(Ja,{link:"/pub/book/".concat(C),imageUrl:x,title:k,description:A,meta:Object(i.c)("div",{className:"RelatedCommodities-bookMeta",children:["".concat(Object(Se.formatNumber)(R)," 人读过"),Object(i.c)("span",{className:"RelatedCommodities-bookRead",children:[Object(i.b)(Ga.a,{width:13,height:14,center:!0}),"阅读"]})]})});default:return null}}}]),n}(f.Component),Xa=Object(x.b)((function(e){var t=e.item,n=e.index;if("book"===t.type)return{module:"EBookItem",index:n,content:{type:"EBook",token:String(t.id)},trackCardShow:!0};var i="special"===t.type?"LiveAlbum":Object(Wa.pascalize)(t.type);return{module:"".concat(i,"Item"),index:n,content:Object.assign({type:i,id:t.id},"live"===t.type&&{author_member_hash_id:t.speaker.member.id}),trackCardShow:!0}}))($a);function ec(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var tc=function(e){Object(d.a)(n,e);var t=ec(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.question.id,n=e.answer;(0,e.loadRelatedCommodities)(t,n&&n.id)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.question.id,i=t.loadRelatedCommodities,r=e.question.id;n!==r&&i(r)}},{key:"componentDidUpdate",value:function(e){!e.items&&this.props.items&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props.items;return e&&e.length?Object(i.c)(hr.d,{children:[Object(i.b)(hr.b,{className:"RelatedCommodities-title",children:"相关推荐"}),Object(i.b)(hr.c,{className:"RelatedCommodities-list",children:e.slice(0,3).map((function(e){return Object(i.b)(Xa,{item:e},e.id)}))})]}):null}}]),n}(f.Component),nc=Object(E.compose)(Object(O.connect)((function(e,t){var n=e.question.relatedCommodities[t.question.id];return{attachedInfo:(n||[]).attachedInfo,items:n}}),{loadRelatedCommodities:I.ab}),Object(x.b)((function(e){return{attachedInfoBytes:e.attachedInfo,module:"ContentList",moduleName:"相关推荐"}})))(tc),ic=n(1655),rc=n(1063);function oc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var ac=function(e){Object(d.a)(n,e);var t=oc(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).goToBrand=function(){var t=e.props.brand.target;t&&(location.href="/org/".concat(t.urlToken))},e}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,i=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&n.target.urlToken&&i(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this.props,t=e.brand,n=t.logo,r=t.name,o=t.target,a=t.isPuQuestion,c=e.brandMember,s=this.context.currentUser,l=a?"关于大咖":"关于品牌";return Object(i.c)(hr.d,{className:le()({MobileBrandQuestionAuthor:!1}),children:[Object(i.b)(hr.b,{className:"BrandQuestionAuthor-header",children:Object(i.b)("span",{className:"BrandQuestionAuthor-headerText",children:l})}),Object(i.c)(hr.c,{className:le()("BrandQuestionAuthor",o&&"is-clickable"),onClick:this.goToBrand,children:[Object(i.b)("img",{src:n,className:"BrandQuestionAuthor-icon",alt:"brand"}),Object(i.c)("div",{className:"BrandQuestionAuthor-content",children:[Object(i.c)("div",{className:"BrandQuestionAuthor-name",children:[r,o&&o.urlToken&&Object(i.b)(ve.c,{css:{marginLeft:3},badge:o.badge})]}),o&&o.headline&&Object(i.b)("div",{className:"BrandQuestionAuthor-intro",children:o.headline})]})]}),c&&c.id&&s&&s.id!==c.id&&Object(i.b)(rc.a,{className:"BrandQuestionAuthor-buttons",user:c})]})}}]),n}(f.Component);ac.contextTypes={currentUser:v.a.object};var cc=Object(O.connect)((function(e){var t=e.entities,n=e.question.brand,i={};return n&&n.target&&n.target.urlToken&&(i=t.users[n.target.urlToken]||{}),{brand:n,brandMember:i}}),{loadBrand:I.I,loadProfile:La.i})(ac),sc=Object(E.compose)(r.withRouter,Object(Q.a)(null))((function(e){var t=e.params,n=Object(O.useSelector)((function(e){return Object(I.db)(e,{id:t.id})})),r=Object(O.useDispatch)();return Object(f.useEffect)((function(){n||r(Object(I.X)(t.id))}),[t.id]),null!=n&&n.title?n.vote&&!n.vote.disable?null:Object(i.b)(hr.d,{css:{marginBottom:"10px"},children:Object(i.b)(Ui,{data:n})}):null})),lc=n(293),uc=Object(E.compose)(Object(Q.a)(null),lc.b,Object(O.connect)(null,{getReadingMembership:I.w}))((function(e){var t=e.getReadingMembership,n=e.isLogin,r=Object(f.useState)(!1),a=Object(o.a)(r,2),c=a[0],s=a[1],l=Object(f.useState)(!1),u=Object(o.a)(l,2),d=u[0],b=u[1];Object(f.useEffect)((function(){n&&t().then((function(e){var t=e.payload;b(t.isHaveRight)})).catch((function(){}))}),[t,n]);var h=function(){s(!c)};return d&&Object(i.c)(i.a,{children:[Object(i.c)(hr.d,{className:"ReadingMembership",onClick:h,children:[Object(i.c)("div",{className:"ReadingMembership-banner",children:[Object(i.b)("div",{children:"领取读书会会员体验卡"}),Object(i.c)("div",{children:["海量电子书免费读 ",Object(i.b)(vi.a,{size:22})]})]}),Object(i.b)("img",{src:"https://pic3.zhimg.com/80/v2-ba02e89d92407e3e2491a27af5ace660_hd.jpeg",alt:""})]}),Object(i.b)(Wt.b,{className:"ReadingMembership-modal",onClose:h,children:c&&Object(i.c)("div",{className:"ReadingMembership-content",children:[Object(i.b)("img",{src:"https://pic2.zhimg.com/80/v2-8f8b9ff43e407c160bfc2d6352c662b6_hd.jpeg",alt:""}),Object(i.c)("div",{className:"ReadingMembership-title",children:[Object(i.b)("div",{children:"登录知乎 App 领取"}),Object(i.b)("div",{children:"读书会会员 7 天体验卡"})]}),Object(i.c)("div",{className:"ReadingMembership-qrcode",children:[Object(i.b)("div",{children:"知乎读书会会员，海量电子书免费读"}),Object(i.b)("img",{src:"https://pic2.zhimg.com/80/v2-e3a03af184c11dc3526218de74977fd5_hd.png",alt:"知乎二维码"}),Object(i.b)("div",{children:"扫码下载知乎 App"})]})]})})]})}));function dc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var bc=function(e){Object(d.a)(n,e);var t=dc(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).sidebarRef=Object(f.createRef)(),e.onHeightChange=function(){e.dynamicSticky&&e.dynamicSticky.check()},e}return Object(u.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.question,n=t.id,i=t.questionType,r=e.loadBrand;"commercial"===i&&r(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.brand,n=e.brand,i=e.loadProfile;t&&n&&t.name!==n.name&&n.target&&i(n.target.urlToken,!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,o=r.id,a=r.questionType,c=t.brand;return Object(i.b)(Ma.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:this.sidebarRef,offset:un.i+10,ref:function(t){e.dynamicSticky=t},children:Object(i.c)(Pa.a,{sidebarRoot:this.sidebarRef,selector:".Card",children:["commercial"===a&&Object(i.b)(ic.a,{questionId:o,pageType:"question",onLoad:this.onHeightChange}),"commercial"===a&&c&&Object(i.b)(cc,{brand:c}),"commercial"!==a&&Object(i.b)(Qa.a,{type:"question"}),"normal"===a&&Object(i.b)("div",{className:"Card",children:Object(i.b)(Ia.a,{isMobile:!1,id:"question/".concat(o),location:"new_question_up",query:{question_token:o},onHeightChange:this.onHeightChange})}),Object(i.b)(sc,{}),Object(i.b)(uc,{}),Object(i.b)(er,{id:o,question:n,position:"right"}),"normal"===a&&Object(i.b)(Va,{question:n,onLoad:this.onHeightChange}),"normal"===a&&Object(i.b)(nc,{question:n,onLoad:this.onHeightChange}),"normal"===a&&Object(i.b)("div",{className:"Card",children:Object(i.b)(Ia.a,{isMobile:!1,id:"question/".concat(o),location:"new_question_down_sticky",query:{question_token:o},delay:500,onHeightChange:this.onHeightChange})}),"commercial"===a&&Object(i.b)(Qa.a,{type:"question"}),Object(i.b)(za.a,{})]})})}}]),n}(f.Component),hc=Object(E.compose)(Object(Q.a)(null),Object(x.b)({module:"RightSideBar"}),Object(O.connect)((function(e){return{brand:e.question.brand}}),{loadBrand:I.I,loadProfile:La.i}))(bc);function fc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var pc=function(e){Object(d.a)(n,e);var t=fc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"renderAnswers",value:function(){var e=this.props,t=e.resource,n=e.question,r=n.questionType,o=n.collapsedAnswerCount,a=n.answerCount,c=n.isNormal,s=n.status,l=(s=void 0===s?{}:s).isLocked,u=e.question,d=e.location,b=e.answering,h=e.invitationShowCount,f=e.isDrained,p=e.isMuteSpecial,m=e.isMuteFreeze,v=e.useMediumEditor,O="updatedAnswers"===t||f,j="commercial"!==r&&!a;return Object(i.c)("div",{children:[Object(i.b)(Ra,{question:u,answering:b,useMediumEditor:v}),Object(i.b)(eo,{question:u}),Boolean(h)&&!p&&!m&&Object(i.b)(Ht.a,{expandCount:h,question:u}),Object(i.b)(fa,{resource:t,question:u,location:d}),c&&!l&&"updatedAnswers"!==t&&f&&!j&&Object(i.b)(x.a,{module:"BottomBar",children:Object(i.b)(hr.d,{children:Object(i.b)(ft,{className:"QuestionAnswers-answerButton",size:"spread"})})}),O&&o>0&&!p&&Object(i.b)(Ea,{question:u})]})}},{key:"render",value:function(){var e=this.props,t=e.question,n=e.isNormalNotification,r=e.notificationId,o=e.location;return Object(i.c)("div",{className:"Question-main",children:[Object(i.b)("div",{className:"Question-mainColumn",children:n?Object(i.b)(Io,{location:o,question:t,id:r}):this.renderAnswers()}),Object(i.b)(be.a,{children:Object(i.b)(hc,{question:t})})]})}}]),n}(f.PureComponent);pc.fetchData=function(e){var t=e.params.id,n=e.route.resource,i=e.location.query,r=i.group_id,o=i.page,a=i.qc,c=e.dispatch,s=e.getState;if(!a&&r)return c(Object(I.S)(r));var l=s(),u=l.env.userAgent,d=Object(F.isMobileSelector)(l),b=5;return u.isBot?b=20:d&&(b=4),c(Object(I.R)(t,n,{offset:Object(ko.c)(Number(o)||1),limit:b}))};var mc=Object(O.connect)((function(e,t){var n=t.params.id,i=t.route.resource,r=t.location.query,o=r.group_id,a=r.qc,c=e.currentUser,s=!a&&o,l=Ro(e,{id:n,resource:i}).isDrained,u=Object(I.eb)(e,{id:n}),d=u.answerCount,b=u.relationship.isAnonymous;return{isNormalNotification:s,notificationId:o,resource:i,question:u,isDrained:l,invitationShowCount:c&&!b&&d<4?d?5:3:0,isBot:e.env.userAgent.isBot,isHuman:Object(F.isHumanSelector)(e),currentUser:Object(H.b)(e),canOia:Object(F.isMobileSelector)(e),shouldOia:Object(F.shouldOiaSelector)(e),shouldSpecialOia:Object(F.shouldSpecialOiaSelector)(e),referer:Object(F.refererSelector)(e),isMuteSpecial:Object(I.E)(u),isMuteFreeze:Object(I.D)(u),ua:Object(F.uaSelector)(e),draft:Object(I.n)(e,{id:n}),useMediumEditor:-1!==["1","2"].indexOf(Object(F.abParamSelector)(e,"pc_fullsize"))}}))(pc),vc=n(1102),Oc=n(245),jc=n(156);function gc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var yc=function(e){Object(d.a)(n,e);var t=gc(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={contentRef:null,innerEditingState:!1,isWantToWrite:!1},e.contentRef=Object(f.createRef)(),e.handleCloseComment=function(){var t=e.props,n=t.location,i=n.pathname,r=n.search,o=t.byComment,a=t.router;o&&a.replace({pathname:i,search:r})},e.handleCloseEditing=function(){var t=e.props,n=t.location,i=n.pathname,r=n.query,o=n.hash,a=t.router;window.scrollTo(0,0),"#draft"!==o&&"#write"!==o||a.replace({pathname:i,query:r})},e.handleEditingStateChange=function(t){e.setState({innerEditingState:t})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.loadContentRightsNotification,i=e.location;this.context.currentUser&&Object(ue.c)("answer",t,ue.a),this.setState({contentRef:this.contentRef.current,isWantToWrite:Object(vt.f)(i)}),ke.a.get("answer::justPublished")&&(ke.a.delete("answer::justPublished"),n("answer",t))}},{key:"render",value:function(){var e,t=this.props,n=t.question,r=n.id,o=n.relationship,a=o.canCollapseAnswers,c=o.canStickAnswers,s=n.hasPublishingDraft,l=t.answer,u=t.location.hash,d=t.isSearchSpecialSource,b=t.hasLoadedDraft,h=t.isAnswerPage,f=t.useMediumEditor;return(null==l||null===(e=l.question)||void 0===e?void 0:e.id)!==r||l.isDelete?Object(i.b)(vc.a,{to:"/question/".concat(r)}):Object(i.b)(hr.d,{className:"AnswerCard",css:f&&h&&this.state.innerEditingState&&{display:"none"},children:Object(i.b)("div",{className:"QuestionAnswer-content",ref:this.contentRef,tabIndex:0,children:Object(i.b)(Oc.d.Provider,{value:this.state.contentRef,children:Object(i.b)(Co.a,{relatedTo:"answer",answer:l,byComment:Object(On.a)(u),onCloseComment:this.handleCloseComment,onCloseEditing:this.handleCloseEditing,canCollapse:a,canStick:c,editing:b&&this.state.isWantToWrite,editable:!0,canAbstract:!0,expanded:d||!0,hasPublishingDraft:s,itemProp:"mainEntityOfPage",showReviewingLabel:!0,isSearchSpecialSource:d,isAnswerPage:h,onEditingStateChange:this.handleEditingStateChange})})})})}}]),n}(f.Component);yc.contextTypes={currentUser:v.a.object};var wc=Object(E.compose)(r.withRouter,Object(O.connect)((function(e,t){var n,i,r=e.question,o=(r=void 0===r?{}:r).draftStatus,a=t.answer;return{hasLoadedDraft:!1===(null==o||null===(n=o[null==a||null===(i=a.question)||void 0===i?void 0:i.id])||void 0===n?void 0:n.loading),useMediumEditor:-1!==["1","2"].indexOf(Object(F.abParamSelector)(e,"pc_fullsize"))}}),{loadAnswer:U.o,loadContentRightsNotification:jc.xb}))(yc);function Cc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var kc=function(e){Object(d.a)(n,e);var t=Cc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isDrained,n=e.items;t||n.length||this.loadItems()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.question.id,n=e.question.id,i=e.isDrained,r=e.items;n!==t&&!i&&r.length<2&&this.loadItems()}},{key:"loadItems",value:function(){var e=this.props,t=e.question.id,n=e.loadItems;return n(t,"answers",{limit:3})}},{key:"render",value:function(){var e=this.props,t=e.question.relationship.canCollapseAnswers,n=e.items,r=e.isWechat;return Boolean(n.length)&&Object(i.b)(hr.d,{className:"MoreAnswers",children:Object(i.b)(to.b,{title:"更多回答","data-zop-feedlist":!0,children:n.map((function(e){return Object(i.b)(wo.a,{children:Object(i.b)(Co.a,{relatedTo:"question",answer:e,canCollapse:t,lastreadTouchable:!0,blockReading:!r})},e.id)}))})})}}]),n}(f.Component),xc=Object(O.connect)((function(e,t){var n=t.question.id,i=t.answerId,r=e.entities.answers,o=e.question.answers[n]||{ids:[],isDrained:!1},a=o.ids;return{isDrained:o.isDrained,items:a.filter((function(e){return e!==Number(i)})).slice(0,2).map((function(e){return r[e]})),isWechat:e.env.userAgent.Wechat}}),{loadAnswer:U.o,loadItems:I.R})(kc),Ac=n(931),Rc=n(999),Sc=n(1238),Nc=n(113);function Tc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Bc=function(e){Object(d.a)(n,e);var t=Tc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.author;return t&&t.length?Object(i.c)("div",{className:"AnswerAuthor-item",children:[Object(i.b)("span",{className:"AnswerAuthor-item-icon",children:Object(i.b)(Sc.a,{text:!0,center:!0})}),Object(i.b)("div",{className:"AnswerAuthor-item-value",children:Object(i.c)(Rc.CJKSpace,{children:[t.slice(0,3).map((function(e,t){return Object(i.c)("span",{children:[0!==t&&"、",Object(i.b)(Ft.a,{user:e,noBadge:!0,noHoverCard:!0,children:e.name})]},e.urlToken)})),"也关注了",un.O[n.gender]]})})]}):null}}]),n}(f.Component);Bc.propTypes={author:v.a.object.isRequired};var qc=Object(E.compose)(Object(O.connect)((function(e,t){var n=t.author;return Object.assign({currentUser:Object(H.b)(e)},n&&function(e,t){var n=t.urlToken||t.id,i=e.people.mutualsByUser[n]||{isDrained:!1,isFetching:!1,ids:[]};return{isDrained:i.isDrained,isFetching:i.isFetching,items:i.ids.map((function(t){var n=Object(Nc.c)(e,{id:t});return n.code?null:n})).filter(Boolean)}}(e,{urlToken:n.urlToken}))}),{loadItems:La.g}),Object(en.a)({shouldLoad:function(e){return e.currentUser&&e.author&&e.author.urlToken&&e.currentUser.urlToken!==e.author.urlToken&&!e.isDrained},load:function(e){return e.loadItems(e.author.urlToken,"mutuals")}}))(Bc),Ec=n(936),Ic=n(928);function Qc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var zc=function(e){return e&&void 0!==e.answerCount&&"undefined"!=typeof articlesCount&&"undefined"!=typeof followerCount&&void 0!==e.badge};var Mc=function(e){Object(d.a)(n,e);var t=Qc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.nextItem()}},{key:"componentWillReceiveProps",value:function(e){this.props.answer.author.urlToken!==e.answer.author.urlToken&&this.nextItem(e)}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.props.onLoad&&this.props.onLoad()}},{key:"nextItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.answer.author.urlToken,n=e.loadProfile,i=e.isDrained;t&&(i||n(t))}},{key:"render",value:function(){var e,t=this.props,n=t.user,r=t.isSelf;if(!n)return null;var o=n.urlToken,a=n.isOrg,c=n.headline,s=n.badge,l=n.badgeV2,u=n.answerCount,d=n.articlesCount,b=n.followerCount,h=ve.e(l||s),f=h.identity,p=h.bestAnswerer,m=h.baike,v=a?"org":"people";return Object(i.c)(hr.d,{className:"AnswerAuthor",role:"complementary","aria-label":"关于作者",children:[Object(i.b)(hr.b,{className:"AnswerAuthor-title",children:"关于作者"}),Object(i.b)(hr.c,{children:Object(i.c)("div",{className:"AnswerAuthor-user",children:[Object(i.b)("div",{className:"AnswerAuthor-user-avatar",children:Object(i.b)(Ec.a,{user:n,avatarProps:{size:60},noHoverCard:!0})}),Object(i.c)("div",{className:"AnswerAuthor-user-content",children:[Object(i.b)("div",{className:"AnswerAuthor-user-name",children:Object(i.b)(Ic.a,{user:n,noBadge:!0,noHoverCard:!0})}),c&&Object(i.b)("div",{className:"AnswerAuthor-user-headline",children:Object(i.b)(Dt.a,{html:c})})]})]})}),Object(i.c)(hr.c,{children:[f&&Object(i.c)("div",{className:"AnswerAuthor-item",children:[Object(i.b)("a",{className:"AnswerAuthor-item-icon",href:"/account/verification/intro",target:"_blank",children:Object(i.b)(ve.a,{center:!0,size:19})}),Object(i.b)("div",{className:"AnswerAuthor-item-value",children:f.slice(0,2).map((function(e){return e.description})).join("，")})]}),Boolean(null==p||null===(e=p.topics)||void 0===e?void 0:e.length)&&Object(i.c)("div",{className:"AnswerAuthor-item",children:[Object(i.b)("span",{className:"AnswerAuthor-item-icon",children:Object(i.b)(ve.b,{center:!0,size:19})}),Object(i.c)("div",{children:[Object(i.b)(Ac.a,{topics:p.topics,user:n,noHoverCard:!0}),"的优秀答主"]})]}),Boolean(m)&&Object(i.c)("div",{className:"AnswerAuthor-item",children:[Object(i.b)("span",{className:"AnswerAuthor-item-icon",children:Object(i.b)(ve.d,{center:!0,size:19})}),Object(i.b)("div",{children:m.description})]}),n&&!r&&Object(i.b)(qc,{author:n})]}),o&&Object(i.c)(hr.c,{children:[Object(i.b)("div",{className:"AnswerAuthor-counts",children:Object(i.c)(Gt.a,{children:[Object(i.b)(Gt.a.Item,{tag:ut.a,preset:"plain",to:"/".concat(v,"/").concat(o,"/answers"),name:"回答",value:u,"data-za-detail-view-element_name":"Answer"}),Object(i.b)(Gt.a.Item,{tag:ut.a,preset:"plain",to:"/".concat(v,"/").concat(o,"/posts"),name:"文章",value:d,"data-za-detail-view-element_name":"Post"}),Object(i.b)(Gt.a.Item,{tag:ut.a,preset:"plain",to:"/".concat(v,"/").concat(o,"/followers"),name:"关注者",value:b,"data-za-detail-view-element_name":"Follower"})]})}),!r&&Object(i.b)(rc.a,{className:"AnswerAuthor-buttons",user:n})]})]})}}]),n}(f.Component),Pc=Object(O.connect)((function(e,t){var n=t.answer,i=n.author,r=n.author.urlToken,o=e.entities.users,a=r?o[r]:i;return{currentUser:Object(H.b)(e),isDrained:zc(a),user:a,isSelf:Object(H.i)(e,a)}}),{loadProfile:La.i})(Mc),Lc=n(900),Dc=n(1286);function Fc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Hc=function(e){Object(d.a)(n,e);var t=Fc(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerFavlists)(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,o=e.isDrained;return Object(i.c)("div",{className:"AnswerFavlists",children:[Object(i.b)("div",{className:"AnswerFavlists-header",children:Object(i.c)("div",{className:"AnswerFavlists-title",children:["被收藏 ",Object(Se.formatNumber)(n)," 次"]})}),!(o&&!t.length)&&Object(i.b)(fr.b,{className:"AnswerFavlists-list",isLocal:!0,isLoading:r,isDrained:o,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(i.b)(fr.a,{className:"AnswerFavlists-item",small:!0}),children:t.map((function(e){var t=e.id,n=e.type,r=e.creator,o=e.isFollowing,a=e.answerCount,c=e.followerCount;return Object(i.b)(to.a,{children:Object(i.b)(Dc.a,{favlist:e,action:Object(i.b)(pt.a,{preset:"primary",id:t,type:n,isFollowing:o}),status:Object(i.c)(Lc.d,{children:[Object(i.c)("span",{children:["由"," ",Object(i.b)(Ft.a,{user:r,noBadge:!0,noHoverCard:!0,target:"_blank"})," ","创建"]}),Object(i.c)("span",{children:[Object(Se.formatNumber)(a)," 条内容"]}),Object(i.c)("span",{children:[Object(Se.formatNumber)(c)," 人关注"]})]})})},t)}))})]})}}]),n}(f.Component),_c=Object(E.compose)(Object(O.connect)((function(e,t){var n=t.answer.id,i=e.entities.favlists,r=e.answers.favlists[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:r.ids.map((function(e){return i[e]})),count:r.totals,isFetching:r.isFetching,isDrained:r.isDrained}}),{loadAnswerFavlists:U.t}),Object(x.b)({module:"CollectionList"}))(Hc),Uc=n(976);function Vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Wc=function(e){Object(d.a)(n,e);var t=Vc(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerCopyrightApplicants)(n)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.count,r=e.isFetching,o=e.isDrained;return Object(i.c)("div",{className:"AnswerCopyrightApplicants",children:[Object(i.b)("div",{className:"AnswerCopyrightApplicants-header",children:Object(i.c)("div",{className:"AnswerCopyrightApplicants-title",children:["授权转载 ",Object(Se.formatNumber)(n)," 次"]})}),!(o&&!t.length)&&Object(i.b)(fr.b,{className:"AnswerCopyrightApplicants-list",isLocal:!0,isLoading:r,isDrained:o,onLoad:this.load,getContainer:function(e){return e},placeholder:Object(i.b)(fr.a,{className:"AnswerCopyrightApplicants-item",small:!0}),children:t.map((function(e){var t=e.applier,n=e.accountType,r=e.accountUsername,o=e.createdAt;return Object(i.b)("div",{className:"AnswerCopyrightApplicants-item",children:Object(i.b)(Uc.a,{user:t,meta:"".concat(n," ").concat(r),status:null,action:Object(i.c)("div",{className:"AnswerCopyrightApplicants-time",children:["申请于 ",Object(A.toDateString)(o)]})})},"".concat(t.name,".").concat(o))}))})]})}}]),n}(f.Component),Gc=Object(O.connect)((function(e,t){var n=t.answer.id,i=e.entities.copyrightApplicants,r=e.answers.copyrightApplicants[n]||{isFetching:!1,isDrained:!1,totals:0,ids:[]};return{items:r.ids.map((function(e){return i[e]})),count:r.totals,isFetching:r.isFetching,isDrained:r.isDrained}}),{loadAnswerCopyrightApplicants:U.r})(Wc);function Kc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Jc=function(e){Object(d.a)(n,e);var t=Kc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicant,t=e.applier,n=e.accountType,r=e.accountUsername,o=e.createdAt;return Object(i.c)("div",{className:"AnswerInfo-copyright-applicant",children:[Object(i.b)(Ft.a,{user:t,noBadge:!0,noHoverCard:!0,target:"_blank"}),"，",n," ",r]},"".concat(t.name,".").concat(o))}}]),n}(f.Component);function Yc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Zc=function(e){Object(d.a)(n,e);var t=Yc(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.copyrightApplicants;return Object(i.b)(hr.c,{className:"AnswerInfo-copyright-applicants",children:e.map((function(e,t){return Object(i.b)(Jc,{copyrightApplicant:e},t)}))},"content")}}]),n}(f.Component);function $c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Xc=function(e){Object(d.a)(n,e);var t=$c(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.favlist,t=e.id,n=e.title,r=e.followerCount,o=e.creator;return Object(i.c)("div",{className:"AnswerInfo-favlist",children:[Object(i.b)("div",{className:"AnswerInfo-favlist-title",children:Object(i.b)(ut.a,{preset:"plain",a:!0,to:"/collection/".concat(t),target:"_blank","data-za-detail-view-element_name":"Collection",title:n,children:n})}),Object(i.c)("div",{className:"AnswerInfo-favlist-author",children:[Object(i.b)(Ft.a,{user:o,noBadge:!0,noHoverCard:!0,target:"_blank","data-za-detail-view-element_name":"Author"})," ","创建"]}),Object(i.c)("div",{className:"AnswerInfo-favlist-followers",children:[Object(Se.formatNumber)(r)," 人关注"]})]},t)}}]),n}(f.Component),es=Object(x.b)((function(e){var t=e.favlist;return{module:"CollectionItem",content:{type:"Collection",token:String(t.id),follower_num:t.followerCount,author_member_hash_id:t.creator.id},trackCardShow:!0}}))(Xc);function ts(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var ns=function(e){Object(d.a)(n,e);var t=ts(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.favlists;return Object(i.b)(hr.c,{className:"AnswerInfo-favlists",children:e.map((function(e){return Object(i.b)(es,{favlist:e},e.id)}))},"content")}}]),n}(f.Component),is=Object(x.b)({module:"CollectionList"})(ns);function rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var os=function(e){Object(d.a)(n,e);var t=rs(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={copyrightApplicantsModalShown:!1,favlistsModalShown:!1},e.handleCopyrightApplicantsModalShow=function(){ce.a.trackEvent(Object(ot.a)(e),{action:"Click",element:"Button",name:"转载授权"}),e.setState({copyrightApplicantsModalShown:!0})},e.handleCopyrightApplicantsModalHide=function(){e.setState({copyrightApplicantsModalShown:!1})},e.handleFavlistsModalShow=function(){ce.a.trackEvent(Object(ot.a)(e),{action:"Click",element:"Button",name:"被收藏"}),e.setState({favlistsModalShown:!0})},e.handleFavlistsModalClose=function(){e.setState({favlistsModalShown:!1})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer.id,n=e.copyrightApplicants,i=e.favlists,r=e.loadAnswerCopyrightApplicants,o=e.loadAnswerFavlists;n.length||i.length||(r(t),o(t))}},{key:"componentDidUpdate",value:function(e){this.props.onLoad&&(!e.copyrightApplicants.length&&this.props.copyrightApplicants.length||!e.favlists.length&&this.props.favlists.length)&&this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.copyrightApplicants,r=e.copyrightApplicantCount,o=e.favlists,a=e.favlistCount,c=this.state,s=c.favlistsModalShown,l=c.copyrightApplicantsModalShown;return n.length||o.length?Object(i.c)(hr.d,{role:"complementary","aria-label":"更多回答信息",children:[Boolean(n.length)&&[Object(i.c)(hr.b,{className:"AnswerInfo-title",children:["授权转载"," ",Object(i.b)(ie.c,{preset:"plain",onClick:this.handleCopyrightApplicantsModalShow,children:Object(Se.formatNumber)(r)})," ","次"]},"header"),Object(i.b)(Zc,{copyrightApplicants:n.slice(0,5)},"content")],Boolean(o.length)&&[Object(i.c)(hr.b,{className:"AnswerInfo-title",children:["被收藏"," ",Object(i.b)(ie.c,{preset:"plain",onClick:this.handleFavlistsModalShow,children:Object(Se.formatNumber)(a)})," ","次"]},"header"),Object(i.b)(is,{favlists:o.slice(0,5)},"content")],Object(i.b)(Wt.b,{size:"fullPage",onClose:this.handleFavlistsModalClose,children:s&&Object(i.b)(_c,{answer:t})}),Object(i.b)(Wt.b,{size:"fullPage",onClose:this.handleCopyrightApplicantsModalHide,children:l&&Object(i.b)(Gc,{answer:t})})]}):null}}]),n}(f.Component),as=Object(O.connect)((function(e,t){var n=t.answer.id,i=e.entities,r=i.copyrightApplicants,o=i.favlists,a=e.answers.copyrightApplicants[n]||{totals:0,ids:[]},c=e.answers.favlists[n]||{totals:0,ids:[]};return{copyrightApplicants:a.ids.map((function(e){return r[e]})),copyrightApplicantCount:a.totals,favlists:c.ids.map((function(e){return o[e]})),favlistCount:c.totals}}),{loadAnswerCopyrightApplicants:U.r,loadAnswerFavlists:U.t})(os);function cs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var ss=function(e){Object(d.a)(n,e);var t=cs(n);function n(){var e;Object(l.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).sidebarRef=Object(f.createRef)(),e.onHeightChange=function(){e.dynamicSticky&&e.dynamicSticky.check()},e}return Object(u.a)(n,[{key:"shouldComponentUpdate",value:function(e){return e.answer.id!==this.props.answer.id}},{key:"render",value:function(){var e=this,t=this.props,n=t.question,r=t.question,o=r.id,a=r.questionType,c=t.answer,s=Object(U.n)(c)||Object(U.l)(c);return Object(i.b)(Ma.a,{className:"Question-sideColumn Question-sideColumn--sticky",onRef:this.sidebarRef,offset:un.i+10,ref:function(t){e.dynamicSticky=t},children:Object(i.c)(Pa.a,{sidebarRoot:this.sidebarRef,selector:".Card",children:[Object(i.b)(Qa.a,{type:"question"}),s||"normal"===a&&437329650!==o&&Object(i.b)("div",{className:"Question-sideColumnAdContainer",children:Object(i.b)(Ia.a,{isMobile:!1,id:"question/".concat(o,"/answer/").concat(c.id),location:"new_answer_up",query:{question_token:o,answer_token:c.id},onHeightChange:this.onHeightChange})}),"commercial"===a&&Object(i.b)(ic.a,{questionId:o}),c.author&&Object(i.b)(Pc,{answer:c,onLoad:this.onHeightChange}),Object(i.b)(sc,{}),Object(i.b)(as,{answer:c,onLoad:this.onHeightChange}),Object(i.b)(uc,{}),Object(i.b)(er,{id:o,question:n,position:"right"}),s||"normal"===a&&Object(i.b)(Va,{question:n,onLoad:this.onHeightChange}),s||"normal"===a&&Object(i.b)(nc,{answer:c,question:n,onLoad:this.onHeightChange}),s||"normal"===a&&437329650!==o&&Object(i.b)("div",{children:Object(i.b)(Ia.a,{isMobile:!1,id:"question/".concat(o,"/answer/").concat(c.id),location:"new_answer_down_sticky",query:{question_token:o,answer_token:c.id},delay:1e3,onHeightChange:this.onHeightChange})}),Object(i.b)(za.a,{})]})})}}]),n}(f.Component),ls=Object(E.compose)(Object(Q.a)(null),Object(x.b)((function(e){var t=e.answer;return{module:"RightSideBar",content:Object.assign({},t.author&&{member_hash_id:t.author.id})}})))(ss);function us(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var ds=function(e){Object(d.a)(n,e);var t=us(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.itemNum,r=e.questionType;e.bottom;return Object(i.b)(hr.d,{className:le()("ViewAll",{"ViewAll--bottom":!1}),children:Object(i.b)(no.a,{className:"ViewAll-QuestionMainAction",to:t,"data-za-detail-view-element_name":"ViewAll",style:{},children:"commercial"===r?"查看 ".concat(Object(Se.formatNumber)(n)," 个品牌推荐的回答"):"查看全部 ".concat(Object(Se.formatNumber)(n)," 个回答")})})}}]),n}(f.Component),bs=Object(x.b)((function(e){return{module:"MessageItem",content:{item_num:e.itemNum}}}))(ds),hs=n(1180),fs=Object.assign;var ps=function(e){return p.a.createElement(qe.a,fs({width:"43",height:"50",fill:"none",viewBox:"0 0 43 50"},e),p.a.createElement("path",{fill:"#121212",d:"M23.376 45.237c-1.567 0-3.133.012-4.698 0a1.701 1.701 0 00-1.133.386 507.16 507.16 0 01-4.493 3.517 3.959 3.959 0 01-.694.449 1.305 1.305 0 01-1.792-1.537c.239-.737.477-1.47.744-2.192.158-.42.153-.597-.384-.68-1.963-.3-3.672-1.093-4.879-2.756a7.614 7.614 0 01-1.272-2.983c-.098-.477-.238-.455-.651-.317-.625.212-.783.568-.601 1.16.041.155.057.316.047.477a.988.988 0 01-.806 1.03.954.954 0 01-1.162-.589c-.115-.257-.189-.417-.527-.408a1.009 1.009 0 01-1.003-.701c-.188-.463.015-.828.337-1.112.238-.22.238-.356.067-.625a1.023 1.023 0 01.238-1.432.98.98 0 011.377.203c.293.348.542.344.966.227 1.315-.365 1.974-1.088 1.99-2.534.015-1.239.346-2.467.494-3.706.158-1.314-.1-2.61-.258-3.905-.205-1.67-.477-3.34-.742-4.992-.136-.89.44-1.462 1.325-1.312 1.119.186 1.104.183 1.255-.955.224-1.689.45-3.376.715-5.058a1.102 1.102 0 00-.522-1.243C5.336 12.284 4.34 10.273 3.93 7.954c-.462-2.57.65-4.554 2.53-6.175C8.34.156 10.609-.166 12.993.068a11.67 11.67 0 013.884 1.028 5.311 5.311 0 012.147 1.728c.303.436.645.541 1.138.539 4.362-.017 8.721 0 13.08 0 1.776 0 3.415.413 4.813 1.563 2.04 1.67 2.784 3.87 2.558 6.442-.009.08-.023.16-.04.239-.178.954-.21 1.655.715 2.479a4.5 4.5 0 01.386 6.15 13.421 13.421 0 01-2.2 2.246 1.322 1.322 0 00-.548.928c-.604 4.355-1.267 8.7-1.814 13.06-.539 4.327-3.407 7.65-7.566 8.59-.876.169-1.768.235-2.66.198H23.38l-.003-.021z"}),p.a.createElement("path",{fill:"#FEFEFE",d:"M12.394 47.606c.441-1.293.809-2.417 1.21-3.526.136-.377 0-.442-.335-.444-.715 0-1.431-.019-2.147-.07-1.346-.095-2.458-.698-3.412-1.624a1.357 1.357 0 01-.425-1.105c.046-.93.062-1.863.062-2.794a.614.614 0 01.492-.692c.513-.148 1.014-.338 1.517-.517.442-.156.642-.478.509-.929-.144-.477-.537-.532-.955-.41-.322.09-.64.21-.954.31-.403.13-.601 0-.592-.446.02-.89 0-1.782.024-2.675.05-2.944-.33-5.85-.775-8.751-.02-.117-.043-.239-.055-.351-.046-.535.086-.659.606-.53 1.095.267 2.2.504 3.278.833 1.67.51 3.329.365 4.975-.1 1.97-.559 3.798-1.473 5.64-2.343a1.038 1.038 0 00.604-.955c.072-1.047.16-2.095.238-3.14.048-.61.184-.715.747-.477 1.625.628 3.252 1.25 4.865 1.909a3.12 3.12 0 002.195.074c1.73-.558 3.348-1.413 5.018-2.114.745-.306.768-.306 1.074.458.532 1.322 1.038 2.653 1.603 3.963.191.444.079.695-.265.954a37.672 37.672 0 01-4.576 2.976c-.833.463-.883.568-.716 1.517.838 4.57 1.217 9.189 1.556 13.813a1.209 1.209 0 01-.44 1.085c-1.631 1.494-3.552 2.148-5.752 2.148-3.101-.029-6.184 0-9.276 0a1.432 1.432 0 00-1 .374c-1.436 1.179-2.93 2.317-4.538 3.58z"}),p.a.createElement("path",{fill:"#06F",d:"M32.376 15.823a3.172 3.172 0 00-.04-.366c-.284-1.171.035-2.087 1.026-2.834.584-.441.61-.926.293-1.403s-.78-.573-1.45-.239c-.24.122-.299.072-.356-.157a1.583 1.583 0 00-.212-.477.936.936 0 00-1.14-.408.995.995 0 00-.693 1.062c.023.211.06.42.112.627-.365-.05-.69-.239-1.05-.086a.99.99 0 00-.675.759.869.869 0 00.415.973c.392.239.802.427 1.215.62a.548.548 0 01.394.52c.023.655.076 1.308.133 1.957a.46.46 0 01-.327.542 2.832 2.832 0 01-2.343.05c-1.894-.8-3.817-1.517-5.743-2.26-.97-.376-1.536-.028-1.63 1.005-.114 1.262-.238 2.524-.312 3.791a.809.809 0 01-.51.78c-1.797.83-3.594 1.67-5.56 2.031a6.441 6.441 0 01-2.708-.06c-.752-.176-1.494-.398-2.248-.555-.36-.075-.439-.24-.39-.568.28-1.922.552-3.843.813-5.765.043-.322.183-.418.477-.336.424.112.871.104 1.29-.024.492-.132.82.045 1.163.365a8.126 8.126 0 003.209 1.849c.828.239 1.243-.11 1.08-.954-.142-.738-.262-1.482-.443-2.212a1 1 0 01.334-1.093 17.656 17.656 0 002.758-3.34c.821-1.272 1.265-2.642.954-4.171-.083-.418.063-.506.451-.506 4.18.012 8.363 0 12.544.012 1.708 0 3.242.477 4.435 1.782 1.29 1.42 1.484 3.102 1.336 4.94-.095 1.176-.522 1.791-1.732 2.147-1.489.434-2.878 1.21-4.309 1.837-.17.1-.363.157-.56.165z"}),p.a.createElement("path",{fill:"#FEFEFE",d:"M14.94 15.307c-.871-.3-1.477-.87-2.088-1.431-.318-.291-.685-.477-1.129-.392-1.88.404-3.219-.587-4.4-1.806-1.479-1.53-2.2-3.426-1.892-5.538.33-2.25 2.699-4.328 4.99-4.56 1.838-.206 3.7.034 5.425.702 2.83 1.107 3.775 3.844 2.207 6.442a15.454 15.454 0 01-3.102 3.656.992.992 0 00-.367 1.143c.153.56.231 1.147.356 1.784z"}),p.a.createElement("path",{fill:"#06F",d:"M35.01 38.244a128.668 128.668 0 00-.763-7.824 60.35 60.35 0 00-.527-3.464.584.584 0 01.324-.716c.842-.52 1.67-1.062 2.51-1.59.146-.09.296-.295.463-.197.167.098.088.36.064.544-.226 1.652-.455 3.299-.687 4.939-.362 2.507-.73 5.014-1.105 7.523a1.38 1.38 0 01-.279.785z"}),p.a.createElement("path",{fill:"#B7B7B6",d:"M37.792 17.19c-.238-.239-.353-.392-.303-.6 0-.03.13-.073.139-.061a.98.98 0 01.164.66z"}),p.a.createElement("path",{fill:"#121212",d:"M20.92 27.309c.025.954-.488 1.479-1.43 1.5-.943.022-1.633-.615-1.64-1.56-.007-.945.697-1.53 1.804-1.546.9-.012 1.231.42 1.267 1.606z"}),p.a.createElement("path",{fill:"#444",d:"M11.938 5.575c.172-.137.35-.265.537-.382a.804.804 0 011.178.294c.378.652.654 1.358.816 2.094.1.38-.176.432-.43.492-.252.06-.522.112-.6-.265-.094-.444-.172-.895-.308-1.329-.079-.255-.131-.656-.563-.518-.396.124-.477.416-.31.802.183.44.312.897.491 1.336.217.535-.2.623-.518.728-.317.105-.749.339-.93-.239a33.209 33.209 0 01-.897-3.567c-.098-.477.26-.553.584-.651.325-.098.575-.045.673.348.072.289.074.6.277.857zM9.266 9.09l.954-.356c.191-.067.356-.048.442.165a.32.32 0 01-.047.376.322.322 0 01-.11.077 9.983 9.983 0 01-2.172.775c-.446.093-.675-.238-.525-.715.22-.697.477-1.38.733-2.09-.332-.077-.616.095-.912.166-.186.046-.358.074-.453-.143a.354.354 0 01.179-.5c.67-.302 1.4-.445 2.133-.42.415.018.551.338.422.737-.196.591-.398 1.188-.644 1.927zm6.461-1.544c-.289.043-.458-.096-.55-.39-.15-.477-.238-.954-.355-1.43-.152-.597.208-.74.626-.862.46-.136.57.212.684.537.115.324.253.715.377 1.059.25.704-.002 1.064-.782 1.086z"}),p.a.createElement("path",{fill:"#4A4B4A",d:"M15.037 3.055a.77.77 0 01.75.77.728.728 0 01-.779.745.716.716 0 01-.741-.751c.028-.485.324-.707.77-.764z"}))},ms=Object.assign;var vs=function(e){return p.a.createElement(qe.a,ms({width:"14",height:"14",fill:"none",viewBox:"0 0 14 14"},e),p.a.createElement("mask",{id:"id-628033106-a",width:"14",height:"14",x:"0",y:"0",maskUnits:"userSpaceOnUse"},p.a.createElement("path",{fill:"#fff",d:"M.001.014h13.985V14H.001V.014z",fillRule:"evenodd",clipRule:"evenodd"})),p.a.createElement("g",{mask:"url(#id-628033106-a)"},p.a.createElement("path",{fill:"#121212",d:"M2.543 8.278a.636.636 0 010 1.272h-.636A1.907 1.907 0 010 7.643V1.92C0 .868.854.014 1.907.014H7.63c1.053 0 1.907.854 1.907 1.907v.636a.636.636 0 01-1.271 0V1.92a.636.636 0 00-.636-.636H1.907a.636.636 0 00-.636.636v5.722c0 .35.285.635.636.635h.636zm3.814-3.814h5.722c1.053 0 1.907.854 1.907 1.907v5.722A1.907 1.907 0 0112.08 14H6.357a1.907 1.907 0 01-1.907-1.907V6.37c0-1.053.854-1.907 1.907-1.907zm0 1.271a.636.636 0 00-.635.636v5.722c0 .35.284.636.635.636h5.722a.636.636 0 00.636-.636V6.37a.636.636 0 00-.636-.636H6.357z",fillRule:"evenodd",clipRule:"evenodd"})))},Os=Object.assign;var js=function(e){return p.a.createElement(qe.a,Os({width:"15",height:"14",fill:"none",viewBox:"0 0 15 14"},e),p.a.createElement("path",{fill:"#121212",d:"M3.55 14c-.106 0-.159 0-.265-.053a.583.583 0 01-.318-.53v-2.225H.954A.95.95 0 010 10.238V.965A.95.95 0 01.954.01h12.982a.95.95 0 01.954.954v9.273a.95.95 0 01-.954.954H7.418l-3.497 2.702c-.106.053-.212.106-.37.106zm-2.49-3.921h2.437c.318 0 .53.212.53.53v1.854l2.914-2.225c.106-.053.212-.106.318-.106h6.518V1.124H1.06v8.955z",fillRule:"evenodd",clipRule:"evenodd"}),p.a.createElement("path",{fill:"#121212",d:"M3.709 4.515h7.948v-1.06H3.71v1.06zm0 3.18h4.239v-1.06H3.709v1.06z",fillRule:"evenodd",clipRule:"evenodd"}))},gs=Object.assign;var ys=function(e){return p.a.createElement(qe.a,gs({width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},e),p.a.createElement("mask",{id:"id-95574191-a",width:"16",height:"16",x:"0",y:"0",maskUnits:"userSpaceOnUse"},p.a.createElement("path",{fill:"#fff",d:"M.001.016h15.983V16H.001V.016z",fillRule:"evenodd",clipRule:"evenodd"})),p.a.createElement("g",{mask:"url(#id-95574191-a)"},p.a.createElement("path",{fill:"#121212",d:"M7.992.016C3.585.016 0 3.6 0 8.008a7.96 7.96 0 001.344 4.435.521.521 0 00.867-.58 6.915 6.915 0 01-1.169-3.855 6.958 6.958 0 016.95-6.95 6.958 6.958 0 016.95 6.95 6.958 6.958 0 01-6.95 6.95 6.917 6.917 0 01-3.865-1.175.522.522 0 00-.58.866A7.956 7.956 0 007.992 16c4.407 0 7.992-3.585 7.992-7.992S12.4.016 7.992.016zM5.046 8.368c-.221 0-.332-.096-.332-.29V7.29c0-.216.111-.323.332-.323h2.167a4.28 4.28 0 01-.394 1.401H5.046zm3.14-1.401h2.746a.47.47 0 01.28.071c.058.041.086.125.086.252v.845c0 .155-.12.233-.366.233H7.873a8.4 8.4 0 00.314-1.401zm-2.964 3.316c-.386.266-.945.508-1.677.727v.822c.301-.032.542-.069.722-.11a4.708 4.708 0 001.63-.774c.558-.409 1.07-.976 1.54-1.701h.712v1.615c0 .33.098.572.294.727.178.143.404.214.68.214h3.206V10.9H9.426c-.126 0-.218-.023-.275-.07-.054-.045-.079-.142-.076-.29l.005-1.293h2.166a.98.98 0 00.703-.261c.155-.149.233-.376.233-.68V7.03c0-.311-.085-.545-.256-.704-.105-.098-.268-.172-.49-.223l.252-.58c.073-.168.11-.308.11-.422a.823.823 0 00-.276-.608c-.187-.187-.444-.28-.77-.28h-5.14l.137-.47h-.893c-.161.449-.327.778-.498.987-.206.257-.447.412-.723.466v.907a2.96 2.96 0 00.908-.404 3 3 0 00.622-.608h5.221c.188 0 .304.013.352.038.073.038.109.092.109.162s-.03.175-.095.318l-.21.46H5.09c-.478 0-.805.083-.983.248-.187.177-.28.43-.28.76V8.26c0 .491.202.804.607.94.096.032.288.048.576.048h1.287c-.37.46-.728.805-1.074 1.036z",fillRule:"evenodd",clipRule:"evenodd"})))};function ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(b.a)(this,n)}}var Cs=function(e){Object(d.a)(n,e);var t=ws(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.answer,n=e.params.answerId,i=e.loadAnswer,r=e.currentUser,o=e.checkIfCanConvertToVessay;t||i(n),Object(hs.a)(r,null==t?void 0:t.author)&&o(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.params.answerId,n=e.params.answerId,i=e.loadAnswer;n!==t&&i(n)}},{key:"render",value:function(){if(!this.props.answer)return null;var e=this.props,t=e.answer,n=e.answer.id,r=e.question,o=e.question,a=o.id,c=o.answerCount,s=o.questionType,l=e.location,u=e.isMuteSpecial,d=(e.currentUser||{}).userType;return!t.relationship.isAuthor&&t.visibleOnlyToAuthor?Object(i.b)(q,{}):Object(i.c)("div",{className:"Question-main",children:[Object(i.b)(y.a,{meta:Object(L.a)(t,r.topics)}),Object(i.b)(Oc.b,{selector:[".ViewAll-QuestionMainAction",".QuestionAnswer-content",".List-item"].join(","),children:Object(i.c)("div",{className:"Question-mainColumn","data-zop-questionanswerlist":!0,children:[("guest"===d||!d)&&Object(i.c)("div",{className:"Question-mainColumnLogin",children:[Object(i.b)("div",{className:"Question-mainColumnLoginImg",children:Object(i.b)(ps,{})}),Object(i.c)("div",{className:"Question-mainColumnLoginContent",children:[Object(i.b)("div",{className:"Question-mainColumnLoginTitle",children:"登录后你可以"}),Object(i.c)("div",{className:"Question-mainColumnLoginDes",children:[Object(i.c)("span",{className:"Question-mainColumnLoginDesIcon",children:[Object(i.b)(vs,{}),"不限量看优质回答"]}),Object(i.c)("span",{className:"Question-mainColumnLoginDesIcon",children:[Object(i.b)(js,{}),"私信答主深度交流"]}),Object(i.c)("span",{className:"Question-mainColumnLoginDesIcon",children:[Object(i.b)(ys,{}),"精彩内容一键收藏"]})]})]}),Object(i.b)("div",{className:"Question-mainColumnLoginRightButton",children:Object(i.b)(W.b,{loginButton:Object(i.b)(ie.c,{className:"Question-mainColumnLoginButton",children:"登录"})})})]}),Object(U.n)(t)||Object(U.l)(t)||c>0&&!u&&Object(i.b)(bs,{itemNum:c,to:"/question/".concat(a),questionType:s}),Object(i.b)(wc,{question:r,location:l,answer:t,isAnswerPage:!0}),Object(U.n)(t)||Object(U.l)(t)||Object(i.b)(xc,{question:r,answerId:n}),c>0&&!u&&Object(i.b)(bs,{itemNum:c,to:"/question/".concat(a),questionType:s})]})}),Object(i.b)(be.a,{children:Object(i.b)(ls,{question:r,answer:t})})]})}}]),n}(f.Component);Cs.fetchData=function(e){var t=e.dispatch,n=e.params.answerId;return t(Object(U.o)(n))};var ks=Object(O.connect)((function(e,t){var n=t.params,i=n.id,r=n.answerId,o=Object(I.eb)(e,{id:i}),a=Object(U.c)(e,{id:r}),c=Object(H.b)(e),s=(o||{}).relationship||{myAnswer:{isDelete:!1}};return{question:o,isOffice:Object(F.isOfficeSelector)(e),answer:a&&Object.assign(Object.assign({},a),{},{isDelete:(a.relationship||{}).isAuthor&&(s.myAnswer||{}).isDeleted}),isMuteSpecial:Object(I.E)(o),currentUser:c}}),{loadAnswer:U.o,checkIfCanConvertToVessay:U.f})(Cs),xs=n(225),As=n(457),Rs={},Ss=function(e){var t=e.handleTabChange,n=e.activeTabKey,r=e.isReediting,o=e.videoAnswerPublished,a=Object(O.useSelector)(xs.a),c=Object(O.useSelector)(V.g)||Rs;return Object(i.c)(j.b,{block:"AnswerEditorPageHeader",children:[Object(i.b)(be.a,{children:Object(i.b)(Mt.a,{notification:c,delay:un.K,className:"AppHeader-notification",css:c.css})}),Object(i.c)(w.Box,{bg:"GBK99A",css:{position:"relative",width:"100%",height:"52px",backgroundClip:"content-box",boxShadow:"0px 16px 32px rgba(0, 0, 0, 0.04)",zIndex:1},children:[Object(i.c)(w.Flex,{css:{position:"relative",width:"1000px",height:"52px",padding:"0 16px",margin:"0 auto",alignItems:"center"},children:[Object(i.b)(As.a,{}),Object(i.b)(w.Box,{height:"28px",width:"1px",pl:"20px",sx:{borderRight:"1px solid",borderColor:"GBK09A"}}),r?Object(i.b)(w.Box,{fontSize:15,fontWeight:"bold",lineHeight:"21px",color:"GBK03A",pl:"20px",children:o?"本回答为视频回答":"本回答为图文回答"}):Object(i.b)(Oa.b,{activeTabKey:n,onChange:t})]}),Object(i.b)(w.Box,{css:{position:"absolute",top:"50%",left:"50%",transform:"translate(522px, -50%)"},children:Object(i.b)(tr.a,{currentUser:a})})]})]})},Ns=n(914),Ts=function(e,t){window.onbeforeunload=null,window.name="",requestAnimationFrame((function(){var n=window.location.host,i=t?"//".concat(n,"/question/").concat(e,"/answer/").concat(t):"//".concat(n,"/question/").concat(e);window.location.href=i}))},Bs=function(e){var t,n=e.params,r=e.location,a=n.id,c=n.answerId,s=r.query,l=Object(O.useDispatch)(),u=Object(f.useRef)(null),d=Object(O.useSelector)((function(e){return Object(I.eb)(e,{id:a})})),b=s.attach_to_article,h=Object(O.useSelector)((function(e){var t;return null===(t=e.entities.drafts)||void 0===t?void 0:t["question_".concat(a)]})),p=Object(O.useSelector)((function(e){return Object(U.c)(e,{id:c})})),m=["zvideo","video"].includes(null==p||null===(t=p.attachment)||void 0===t?void 0:t.type),v=Object(f.useState)("video_answer"===(null==h?void 0:h.draftType)?Oa.a.videoAnswer:Oa.a.textAnswer),g=Object(o.a)(v,2),y=g[0],C=g[1],k=Object(f.useState)((function(){return Object(or.c)("QuestionAnswerEditable")})),A=Object(o.a)(k,1)[0],R=Boolean(c),S=Object(Ns.a)(["autoSendingCreations"]),N=Object(ui.d)((function(e){if(e!==y){var t=d.relationship.isAnonymous;if(e===Oa.a.videoAnswer){if(t)return void l(Object(V.h)("视频回答不支持匿名","red"));u.current.hasEditorContent()&&(ke.a.get("answerContentSync")||(l(Object(V.h)("图文回答内容已同步至视频描述")),ke.a.set("answerContentSync",!0)))}C(e)}})),T=Object(ui.d)((function(e){if(e.publishAt){var t=l(Object(U.C)(a,e));return t.then((function(){Ts(a)})),t}var n=function(){return l(Object(U.a)(a,e)).then((function(e){var t=e.payload;Ts(a,t.id)}))};return S.autoSendingCreations?l(Object(U.N)(a)).then(n,(function(e){if(e&&e.payload&&e.payload.message&&400===e.status)return at.a.confirm(e.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(n,(function(){}))})):n()})),B=Object(ui.d)((function(e){return l(Object(U.E)(c,e)).then((function(){Ts(a,c)}))}));return Object(ui.i)((function(){Object(or.d)(),c||b&&Object(I.F)(a,b)})),Object(ui.i)((function(){return window.name=Object(dt.a)(a),function(){window.name=""}})),Object(i.b)(j.b,{content:{type:"Question",token:String(a)},children:Object(i.b)(x.a,{module:"QuestionItem",card:{content:{type:"Question",token:String(a)}},children:Object(i.c)(w.Box,{children:[Object(i.b)(Ss,{isReediting:R,handleTabChange:N,activeTabKey:y,videoAnswerPublished:m}),Object(i.b)(or.b.Provider,{value:A,children:Object(i.b)(be.a,{children:Object(i.b)(j.b,{block:y===Oa.a.textAnswer?"TextAnswer":"VideoAnswer",children:Object(i.b)(ya.a,{question:d,answer:p,defaultValue:null==p?void 0:p.editableContent,isReediting:R,activeTabKey:y,imperativeRef:u,onSubmit:R?B:T})})})})]})})})};Bs.fetchData=function(e){var t=e.dispatch,n=e.params,i=n.id,r=n.answerId,o=e.location.query,a=o.attach_to_article;return Promise.all([r&&t(Object(U.o)(r)),t(Object(I.Q)(i)).then((function(){if(!r&&a)return t(Object(I.F)(i,a))})),t(Object(I.T)(i)).then((function(e){var t=e.payload,n=S()(o,["write"]),a=t.relationship,c=a.isAuthor,s=a.myAnswer,l=t.isNormal,u=t.status,d=(u=void 0===u?{}:u).isClose,b=u.isLocked,h=u.isSuggest,f=t.hasPublishingDraft,p=t.visibleOnlyToAuthor,m=function(e){var t=new Error;throw t.status=302,t.redirect=Object(P.a)(e,n),t};return null!=s&&s.isDeleted?m("/question/".concat(i,"?answer_deleted_redirect=true")):r?s?String(s.answerId)!==r?m("/question/".concat(i,"/answer/").concat(s.answerId,"/edit")):void 0:m("/question/".concat(i,"/write")):s?m("/question/".concat(i,"/answer/").concat(s.answerId,"/edit")):h||b||d||f||!l||!c&&p?m("/question/".concat(i)):void 0}))].filter(Boolean))};var qs=Bs;t.default=Object(i.c)(r.Route,{children:[Object(i.b)(r.Route,{path:"waiting",component:gr,name:"QuestionWaiting",authRequired:!0,zaPageShowId:5541}),Object(i.b)(r.Route,{path:"later",component:Nr,name:"QuestionLater",authRequired:!0,zaPageShowId:5371}),Object(i.b)(r.Route,{path:"invited",component:zr,name:"QuestionInvited",authRequired:!0,zaPageShowId:5543}),Object(i.c)(r.Route,{path:":id",component:br,name:"Question",children:[Object(i.c)(r.Route,{children:[Object(i.b)(r.IndexRoute,{component:mc,entity:"answers",resource:"answers",name:"QuestionPage",zaPageShowId:3378}),Object(i.b)(r.Route,{path:"answers/hidden",component:mc,entity:"answers",resource:"hiddenAnswers",name:"QuestionHiddenAnswers"}),Object(i.b)(r.Route,{path:"answers/updated",component:mc,resource:"updatedAnswers",name:"QuestionUpdatedAnswers"}),Object(i.b)(r.Redirect,{from:"answers/created",to:"answers/updated"})]}),Object(i.b)(r.Route,{path:"answer/:answerId",component:ks,name:"AnswerPage",zaPageShowId:2012}),Object(i.b)(r.Redirect,{from:"noti-answers",to:"."})]}),Object(i.b)(r.Route,{path:":id/write",showAppHeader:!1,component:qs,name:"QuestionAnswerEditableAdd",authRequired:!0}),Object(i.b)(r.Route,{path:":id/answer/:answerId/edit",showAppHeader:!1,component:qs,name:"QuestionAnswerEditableEdit",authRequired:!0})]})},899:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(33),r=n(15),o=n(16),a=n(17),c=n(18),s=n(9),l=n(1),u=n(0),d=n(926),b=n(245),h=["tabIndex","children"];function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(c.a)(this,n)}}var p=function(e){Object(a.a)(n,e);var t=f(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={ref:null},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabIndex,r=t.children,o=Object(i.default)(t,h),a=this.state.ref;return Object(l.b)(d.a,Object.assign(Object.assign({tabIndex:n,onRef:function(t){return!e.state.ref&&e.setState({ref:t})}},o),{},{children:Object(l.b)(b.d.Provider,{value:a,children:r})}))}}]),n}(u.Component);p.defaultProps={tabIndex:0};var m=p},901:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(0),r=n.n(i),o=n(86),a=Object.assign;var c=function(e){return r.a.createElement(o.a,a({width:"150",height:"120",viewBox:"0 0 150 120"},e),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#EBEEF5",d:"M44 31.005v55.99A3.003 3.003 0 0047.003 90h53.994A3.005 3.005 0 00104 86.995v-55.99A3.003 3.003 0 00100.997 28H47.003A3.005 3.005 0 0044 31.005zm-3 0A6.005 6.005 0 0147.003 25h53.994A6.003 6.003 0 01107 31.005v55.99A6.005 6.005 0 01100.997 93H47.003A6.003 6.003 0 0141 86.995v-55.99z",fillRule:"nonzero"}),r.a.createElement("path",{fill:"#F7F8FA",d:"M59 50a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 40.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5zM59 73a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 63.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5z"})))}},903:function(e,t,n){"use strict";var i=n(33),r=n(1),o=n(0),a=n(55),c=["ratio","children"],s=function(e,t){var n=e.ratio,o=void 0===n?1:n,s=e.children,l=Object(i.default)(e,c);return Object(r.b)(a.Box,Object.assign(Object.assign({css:{position:"relative",paddingBottom:"".concat(1/o*100,"%"),height:"0",borderRadius:"inherit"}},l),{},{ref:t,children:Object(r.b)("div",{css:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",borderRadius:"inherit"},children:s})}))};t.a=Object(o.forwardRef)(s)},906:function(e,t,n){"use strict";n.d(t,"k",(function(){return c})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return g})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return k})),n.d(t,"g",(function(){return A})),n.d(t,"j",(function(){return N})),n.d(t,"f",(function(){return R.a}));var i=n(33),r=n(1),o=n(55),a=["children"],c=function(e){var t=e.children,n=Object(i.default)(e,a);return Object(r.b)(o.Flex,Object.assign(Object.assign({alignItems:"center",justifyContent:"center",flex:1,height:"100%"},n),{},{children:Object(r.b)(o.Text,{textAlign:"center",color:"GBL05A",children:t})}))},s=n(0),l=n.n(s),u=n(86),d=Object.assign;var b=function(e){return l.a.createElement(u.a,d({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M94 29v-2.002c0-.55.443-.998 1-.998h1c.553 0 1 .446 1 .998V29h2.002c.55 0 .998.443.998 1v1c0 .553-.446 1-.998 1H97v2.002c0 .55-.443.998-1 .998h-1c-.553 0-1-.446-1-.998V32h-2.002A.997.997 0 0191 31v-1c0-.553.446-1 .998-1H94zm30.613 17.724l-21.82-4.638.207-3.023 22.237 4.727a6.004 6.004 0 014.62 7.122l-7.9 37.158a6.001 6.001 0 01-7.116 4.627l-15.31-3.254.63-2.934 15.31 3.25c1.62.34 3.218-.69 3.56-2.32l7.9-37.16a3.005 3.005 0 00-2.31-3.567zM48.596 85.727l.624 2.935-12.717 2.703a6.004 6.004 0 01-7.117-4.628L21.488 49.58a6.004 6.004 0 014.62-7.123L47 38.017l.133 3.038-20.402 4.337a3 3 0 00-2.3 3.564l7.9 37.157a3.005 3.005 0 003.56 2.317l12.71-2.703zM100 82c0 3.314-2.688 6-6.006 6H56.006A6.01 6.01 0 0150 82V34c0-3.314 2.688-6 6.006-6h27.147v3H56.006A3.003 3.003 0 0053 34v48c0 1.65 1.35 3 3.006 3h37.988A3.003 3.003 0 0097 82V42.373h3V82zm-4.5-41C89.7 41 85 36.3 85 30.5S89.7 20 95.5 20 106 24.7 106 30.5 101.3 41 95.5 41zm0-3a7.5 7.5 0 100-15 7.5 7.5 0 000 15z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M47 73.22l-6.484 1.378c-.82.174-1.333.97-1.16 1.78.173.816.97 1.327 1.784 1.154L47 76.287V73.22zm0-8.594l-4.58.974c-.8.17-1.324.968-1.152 1.778a1.494 1.494 0 001.775 1.156l3.957-.84v-3.068zm0-17.285a6.002 6.002 0 00-8 5.66 6.002 6.002 0 008 5.66V47.34zm56 29.88l6.178 1.318a1.5 1.5 0 10.624-2.934L103 74.148v3.067zm0-8.58l4.275.91c.808.17 1.6-.34 1.775-1.157a1.507 1.507 0 00-1.15-1.78l-4.9-1.04v3.067zm0-8.97c.626.22 1.3.34 2 .34 3.314 0 6-2.685 6-6s-2.686-6-6-6c-.7 0-1.374.12-2 .34v11.32zM76 56a8 8 0 110-16 8 8 0 010 16zm-8 7.5c0-.828.667-1.5 1.505-1.5h12.99a1.5 1.5 0 110 3h-12.99A1.5 1.5 0 0168 63.5zm-5 8c0-.828.67-1.5 1.49-1.5h23.02c.822 0 1.49.666 1.49 1.5 0 .828-.67 1.5-1.49 1.5H64.49c-.822 0-1.49-.666-1.49-1.5z"})))},h=Object.assign;var f=function(e){return l.a.createElement(u.a,h({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M67.757 83H45c-1.66 0-3-1.338-3-2.998V37.998A3.003 3.003 0 0145 35h53.42v-3H45c-3.31 0-6 2.686-6 5.998v42.004A5.994 5.994 0 0045 86h21.515l6.853 6.854a2.99 2.99 0 004.234 0L84.456 86H105c3.31 0 6-2.686 6-5.998v-36.54h-3v36.54A3.003 3.003 0 01105 83H83.214l-7.728 7.728L67.756 83z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M55 48.5c0-.828.67-1.5 1.508-1.5h26.984a1.5 1.5 0 110 3H56.508A1.5 1.5 0 0155 48.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 59.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 70.5z"}),l.a.createElement("path",{fill:"#EBEEF5",d:"M94.868 50.46l18.92-18.92-2.83-2.827-18.918 18.92-2.12-2.123 18.917-18.918a3.005 3.005 0 014.245-.002l2.828 2.828a3.004 3.004 0 01-.002 4.245L96.99 52.58l-2.122-2.12zm-7.193 2.377l2.244-7.327 7.07 7.07-7.328 2.245c-1.575.482-2.473-.405-1.988-1.988z",fillRule:"nonzero"})))},p=Object.assign;var m=function(e){return l.a.createElement(u.a,p({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.316 2.79A1.99 1.99 0 0144 93V30.997C44 27.687 46.68 25 50.002 25h48.996A5.996 5.996 0 01105 30.998v62c0 .45-.147.866-.396 1.2l-4.112-2.658z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M55 39c0-.553.44-1 1-1h19c.553 0 1 .44 1 1v19c0 .553-.44 1-1 1H56c-.553 0-1-.44-1-1V39zm25 .5c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.5 1.5 0 110 3h-35.99A1.5 1.5 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0155 75.5z"})))},v=Object.assign;var O=function(e){return l.a.createElement(u.a,v({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M37.273 69.98c.212-3.3 3.063-5.98 6.387-5.98h63.91c3.315 0 6.175 2.673 6.387 5.98l1.285 20.04c.212 3.302-2.302 5.98-5.615 5.98H41.603c-3.313 0-5.827-2.673-5.615-5.98l1.285-20.04zm1.71 20.23C38.88 91.788 40.02 93 41.603 93h68.023c1.58 0 2.722-1.215 2.62-2.79l-1.284-20.037c-.11-1.726-1.657-3.173-3.394-3.173H43.66c-1.74 0-3.282 1.447-3.393 3.173L38.982 90.21zM47 58h58v-3.5a1.5 1.5 0 013 0v5c0 .414-.168.79-.44 1.06a1.49 1.49 0 01-1.06.44h-61a1.49 1.49 0 01-1.06-.44A1.49 1.49 0 0144 59.5v-5a1.5 1.5 0 013 0V58zm50-31H55v28.008h-3V25.992c0-1.1 1.025-1.992 2.283-1.992h43.434c1.26 0 2.283.898 2.283 1.992v29.016h-3V27zM60 87.5c0-.828.668-1.5 1.5-1.5h29c.828 0 1.5.666 1.5 1.5 0 .828-.668 1.5-1.5 1.5h-29c-.828 0-1.5-.666-1.5-1.5zM46 72.01c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm-52 7c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M71 34.5a1.5 1.5 0 011.497-1.5h7.006a1.5 1.5 0 110 3h-7.006A1.495 1.495 0 0171 34.5zm-9 8c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0162 42.5zm0 7c0-.828.67-1.5 1.495-1.5h19.01c.826 0 1.495.666 1.495 1.5 0 .828-.67 1.5-1.495 1.5h-19.01A1.494 1.494 0 0162 49.5z"})))},j=Object.assign;var g=function(e){return l.a.createElement(u.a,j({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M106.807 78h8.19A3.004 3.004 0 00118 74.998V34.002A3 3 0 00114.997 31H61.003A3.004 3.004 0 0058 34.002V36h-3v-1.998A6.004 6.004 0 0161.003 28h53.994A6 6 0 01121 34.002v40.996A6.004 6.004 0 01114.997 81h-5.372l-.375 6.004c-.138 2.207-1.514 2.732-3.074 1.172L99 81h-5v-3h6.243l6.178 6.178.388-6.178zM44.824 95.176c-1.56 1.56-2.936 1.035-3.074-1.172L41.312 87H37a6 6 0 01-6-6.006V45.006A6.01 6.01 0 0137 39h48a6 6 0 016 6.006v35.988A6.01 6.01 0 0185 87H53l-8.176 8.176zm-.245-3.998L51.755 84H85c1.65 0 3-1.35 3-3.006V45.006A3 3 0 0085 42H37c-1.65 0-3 1.35-3 3.006v35.988A3 3 0 0037 84h7.13l.45 7.178z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M94 49h9.494a1.5 1.5 0 110 3H94v-3zm0 9h9.494a1.5 1.5 0 110 3H94v-3zm-50 6.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 64.5zm0-14.503c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM44 73.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 73.5z"})))},y=Object.assign;var w=function(e){return l.a.createElement(u.a,y({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("path",{fill:"#EBEEF5",d:"M62.85 82.335c-.13-.03-.202-.04-.25-.044-.117 0-.31.05-.87.34-7.092 2.65-7.508 2.79-9.903 3.43-.955.26-1.885.46-2.826.63-1.24.23-2.52-.08-3.35-.83-1.12-1.01-1.16-2.58-.02-3.73l.28-.22s.074-.053.204-.19c.265-.26.54-.63.81-1.102.588-1.05 1.025-2.445 1.224-4.246.145-.8-.374-2.14-1.117-2.833-.23-.216-.696-.727-1.487-1.683-3.62-4.37-6.03-12.332-6.03-18.87C39.5 37.19 53.48 23.5 72.446 23.5c19.842 0 32.947 13.235 32.947 29.466 0 21.157-22.76 36.133-42.028 29.488-.182-.04-.473-.11-.515-.12zm-.068-3.038c.233.014.448.05.717.108l.6.14c17.56 6.102 38.29-7.514 38.29-26.58 0-14.58-11.77-26.465-29.95-26.465-17.32 0-29.95 12.36-29.95 26.466 0 5.885 2.203 13.176 5.333 16.96.716.865 1.102 1.287 1.222 1.4 1.432 1.34 2.34 3.65 2.044 5.404-.246 2.172-.8 3.94-1.585 5.338a8.3 8.3 0 01-1.213 1.68c1.02-.175 1.87-.366 2.75-.598 2.25-.596 2.667-.743 9.4-3.245.95-.47 1.596-.653 2.326-.608zm11.554 9.593a1.5 1.5 0 111.919-2.306c5.242 4.364 12.82 5.41 19.8 2.98l.173-.05c.084-.017.372-.085.433-.1.22-.046.39-.074.59-.086.61-.037 1.14.11 1.87.472 4.83 1.793 5.13 1.9 6.73 2.324.57.15 1.12.276 1.68.38-.22-.318-.46-.7-.68-1.153-.58-1.14-.99-2.51-1.173-4.12-.232-1.39.38-2.75 1.537-3.83.12-.11.43-.44.947-1.05 2.1-2.47 3.356-7.15 3.356-11.61 0-4.7-.62-7.39-2.7-10.094a1.5 1.5 0 012.381-1.828c2.56 3.33 3.318 6.62 3.318 11.925 0 5.11-1.433 10.45-4.066 13.555-.59.693-.98 1.107-1.19 1.304-.49.46-.675.873-.623 1.16.16 1.37.47 2.41.894 3.25.324.647.62 1.013.756 1.13 1.162 1.17.883 2.636-.177 3.54-.78.67-1.91 1-2.948.817-.69-.124-1.373-.28-2.073-.46-1.75-.466-2.05-.57-7.08-2.44l-.156-.068c-.344-.173-.42-.195-.414-.195-.142.03-.33.075-.464.105-7.91 2.728-16.56 1.52-22.627-3.533z"}))},C=Object.assign;var k=function(e){return l.a.createElement(u.a,C({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("path",{fill:"#EBEEF5",d:"M46.76 78.71a1.895 1.895 0 00-1.378 2.092c.13.948.94 1.648 1.904 1.635h55.468a1.882 1.882 0 001.884-1.635c.13-.95-.46-1.846-1.367-2.09a8.61 8.61 0 01-6.4-7.872l-2.473-20.928c-.96-7.872-6.567-14.37-14.178-16.435l-.986-.267-.113-1.014c-.24-2.106-2.01-3.696-4.11-3.696s-3.87 1.59-4.104 3.696l-.114 1.014-.98.267c-7.61 2.063-13.22 8.563-14.18 16.43L53.15 70.84c-.2 3.74-2.79 6.926-6.393 7.87zm50.61-29.155l2.482 20.982c.127 2.562 1.817 4.654 4.19 5.276a4.895 4.895 0 013.568 5.397c-.336 2.446-2.434 4.26-4.876 4.227H47.306a4.883 4.883 0 01-4.896-4.227 4.897 4.897 0 013.58-5.4 5.614 5.614 0 004.17-5.168l2.49-21.093c1.068-8.77 7.135-16.06 15.46-18.7.807-3.11 3.615-5.35 6.9-5.35s6.094 2.24 6.9 5.35c8.325 2.64 14.393 9.93 15.46 18.7zm-16.417 38.91c-.288 3.184-3.007 5.36-5.943 5.36-2.936 0-5.655-2.176-5.943-5.36l-2.988.27c.43 4.82 4.52 8.09 8.93 8.09s8.49-3.27 8.93-8.09l-2.99-.27z"}))},x=Object.assign;var A=function(e){return l.a.createElement(u.a,x({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("path",{fill:"#E7EAF1",d:"M39.09 35.994c.05-3.31 2.777-5.994 6.096-5.994h18.562c2.21 0 4.667 1.66 5.487 3.708L70.152 36h34.85A5.997 5.997 0 01111 41.99v40.02c0 3.308-2.69 5.99-6 5.99H45c-3.314 0-6-2.686-6-5.99V41.99c0-.077 0-.153.004-.23l.086-5.766zm2.914 5.81L42 41.99v40.02A2.998 2.998 0 0045 85h60c1.655 0 3-1.342 3-2.99V41.99a2.998 2.998 0 00-3-2.99H68.12l-1.67-4.177C66.085 33.915 64.73 33 63.747 33h-18.56c-1.68 0-3.07 1.368-3.097 3.038l-.086 5.767zM69.89 72.658c-1.56.715-3.105-.395-2.906-2.113l.697-6.032-4.11-4.47c-1.16-1.265-.58-3.076 1.115-3.418l5.952-1.2 2.982-5.29c.843-1.498 2.744-1.507 3.593 0l2.98 5.29 5.955 1.2c1.684.34 2.28 2.145 1.11 3.418l-4.11 4.47.698 6.032c.197 1.708-1.336 2.832-2.908 2.113l-5.52-2.527-5.523 2.53z"}))},R=n(901),S=Object.assign;var N=function(e){return l.a.createElement(u.a,S({width:"150",height:"120",viewBox:"0 0 150 120"},e),l.a.createElement("g",{fill:"none",fillRule:"evenodd"},l.a.createElement("path",{fill:"#EBEEF5",d:"M109.545 78h5.463A2.995 2.995 0 00118 75.01V34.99c0-1.648-1.34-2.99-2.992-2.99H62.992A2.995 2.995 0 0060 34.99v2.027h-3V34.99c0-3.308 2.69-5.99 5.992-5.99h52.016A5.993 5.993 0 01121 34.99v40.02c0 3.308-2.69 5.99-5.992 5.99h-2.744l-.558 5.65c-.217 2.197-1.783 2.842-3.49 1.45l-8.7-7.1h-18.69v-3h19.76l8.29 6.767.67-6.767zM37.33 91.9c-1.942 1.057-3.23.15-2.878-2.027l1.237-7.64A25.886 25.886 0 0130 66c0-14.36 11.637-26 26-26 14.36 0 26 11.637 26 26 0 14.36-11.637 26-26 26-4.627 0-8.973-1.21-12.737-3.327L37.33 91.9zm5.958-6.656l1.447.814A22.878 22.878 0 0056 89c12.705 0 23-10.296 23-23 0-12.705-10.296-23-23-23-12.705 0-23 10.296-23 23a22.894 22.894 0 005.03 14.36l.833 1.04-1.11 6.855 5.535-3.01zm13.108-31.452c2.304 0 4.176.612 5.616 1.908 1.44 1.26 2.16 2.988 2.16 5.148 0 1.764-.468 3.24-1.368 4.392-.324.396-1.332 1.332-3.024 2.808-.684.576-1.188 1.224-1.512 1.872-.396.72-.576 1.512-.576 2.376v.612H53.84v-.612c0-1.332.216-2.484.72-3.42.468-1.008 1.836-2.484 4.068-4.464l.612-.684c.648-.828 1.008-1.692 1.008-2.628 0-1.26-.36-2.232-1.044-2.952-.72-.72-1.764-1.08-3.06-1.08-1.62 0-2.808.504-3.528 1.548-.648.864-.972 2.088-.972 3.672h-3.78c0-2.628.756-4.68 2.268-6.192 1.512-1.548 3.6-2.304 6.264-2.304zm-.648 21.06c.756 0 1.404.216 1.908.72.504.468.756 1.08.756 1.836s-.288 1.368-.792 1.872a2.703 2.703 0 01-1.872.72c-.72 0-1.368-.252-1.872-.756s-.756-1.116-.756-1.836c0-.756.252-1.368.756-1.836.504-.504 1.152-.72 1.872-.72z",fillRule:"nonzero"}),l.a.createElement("path",{fill:"#F7F8FA",d:"M83.23 56h24.275c.818 0 1.495-.672 1.495-1.5 0-.834-.67-1.5-1.495-1.5H81.93a28.845 28.845 0 013.002 11h12.56a1.5 1.5 0 110 3h-12.51a29.422 29.422 0 00-.05-3zM72.285 42h35.22c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5H76a28.945 28.945 0 00-3.715-3z"})))}},914:function(e,t,n){"use strict";var i=n(4),r=n(0),o=n(182),a=n.n(o),c=n(24),s=n(46);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(c.useDispatch)(),n=Object(c.useSelector)((function(t){return a()(Object(s.b)(t),e)}),c.shallowEqual);return Object(r.useEffect)((function(){t(Object(s.e)(e))}),[t].concat(Object(i.a)(e))),n}},962:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(15),r=n(16),o=n(17),a=n(18),c=n(9),s=n(1),l=n(3),u=n.n(l),d=n(0),b=n(13),h=n.n(b),f=n(279),p=n(462),m=n(220),v=n(245),O=n(30);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=j(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={enabled:!1,shown:!1},e.handleScrollUp=function(){e.state.shown&&e.canToggle()&&e.setState({shown:!1})},e.handleScrollDown=function(){!e.state.shown&&e.canToggle()&&e.setState({shown:!0})},e.handlePositionStatusChange=function(t){e.canToggle()&&("normal"!==t?e.enable():e.disable())},e}return Object(r.a)(n,[{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.offset,i=t.children,r=this.state,o=r.enabled,a=r.shown;return Object(s.c)(d.Fragment,{children:[Object(s.b)(v.a,{shortcuts:[{key:"/",action:function(){return e.setState({shown:!1})}}]}),Object(s.b)(f.a,{offset:n,onPositionStatusChange:this.handlePositionStatusChange,children:Object(s.b)("div",{})}),o&&Object(s.b)(p.a,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}),Object(s.b)(m.a.Inlet,{shown:a,children:Object(s.b)("div",{className:h()("PageHeader",{"is-shown":a}),children:i})})]})}}]),n}(d.Component);g.propTypes={prevent:u.a.bool,offset:u.a.number},g.defaultProps={prevent:!1,offset:O.i};var y=g},964:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n(33),r=n(15),o=n(16),a=n(17),c=n(18),s=n(9),l=n(1),u=n(0),d=n(3),b=n.n(d),h=n(926),f=n(245),p=["containerClassName","selector"];function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(e){Object(a.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,r=Object(i.default)(e,p);return Object(l.b)(f.b,{className:t,selector:n,children:Object(l.b)(h.b,Object.assign({},r))})}}]),n}(u.Component);v.propTypes={containerClassName:b.a.string,selector:b.a.string},v.defaultProps={selector:".List-item"};var O=v},983:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n(15),r=n(16),o=n(17),a=n(18),c=n(9),s=n(1),l=n(0),u=n(3),d=n.n(u),b=n(87),h=n(36),f=n(414),p=n(1046),m=n(1055);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}var O=function(e){Object(o.a)(n,e);var t=v(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.memberHashId,n=e.isModalShow,i=e.handleCloseModal;return Object(s.b)(b.b,{className:"ChatBoxModal",spread:!0,onClose:i,contentClassName:"ChatBoxModal-content",closeButton:Object(s.b)(h.c,{preset:"plain",className:"ChatBoxModal-closeButton",onClick:i,"aria-label":"关闭",children:Object(s.b)(f.a,{className:"ChatBoxModal-closeIcon"})}),children:n&&Object(s.b)(p.a,{handleReceiveMessage:this.handleReceiveMessage,children:Object(s.b)(m.a,{type:"default",senderId:t,className:"Chat-ChatBox"},t)})})}}]),n}(l.Component);O.propTypes={memberHashId:d.a.string,handleCloseModal:d.a.func,isModalShow:d.a.bool}}}]);
//# sourceMappingURL=main.question-routes.071e7a63729c840a8887.js.map