(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{1009:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(26),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("defs",null,a.a.createElement("linearGradient",{id:"id-3811055512-a",x1:"11.015%",x2:"87.655%",y1:"18.594%",y2:"96.14%"},a.a.createElement("stop",{offset:"0%",stopColor:"#F2D9B6"}),a.a.createElement("stop",{offset:"100%",stopColor:"#BF8B43"}))),a.a.createElement("path",{fill:"url(#id-3811055512-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};i.defaultProps={name:"VIP"},t.a=i},1059:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return d}));var r=n(3),a=n.n(r),o=n(0),i=n(13),c=n.n(i),l=n(208),u=n(7),s=function(e){var t=e.title,n=e.subtitle,r=e.attrInfo,a=e.coverUrl,o=e.avatarUrl,i=e.avatarFit;return Object(u.g)("div",null,a&&Object(u.g)("div",{className:"HoverCard-coverContainer"},Object(u.g)("img",{className:"HoverCard-cover",src:a,alt:"cover"})),Object(u.g)("div",{className:c()("HoverCard-titleContainer",{"HoverCard-titleContainer--noAvatar":!a})},o&&Object(u.g)(l.a,{size:68,className:"HoverCard-avatar",url:o,imgFit:i}),Object(u.g)("div",{className:c()("HoverCard-titleText",{"HoverCard-titleText--noAvatar":!o})},Object(u.g)("div",{className:"HoverCard-title"},t),n&&Object(u.g)("div",{className:"HoverCard-subtitle"},n)),r&&Object(u.g)("div",{className:"HoverCard-attrInfo"},r)))};s.propTypes={title:a.a.node,subtitle:a.a.node,attrInfo:a.a.node,coverUrl:a.a.string,avatarUrl:a.a.string,avatarFit:a.a.oneOf(["fill","contain","cover","none","scale-down"])};var d=s,p=n(31),f=n.n(p),h=n(21),b=n.n(h),v=n(25),m=n.n(v),g=n(23),O=n.n(g),y=n(27),j=n.n(y),w=n(14),C=n.n(w),R=n(39),k=n.n(R),_=n(89),B=n.n(_),x=n(425),S=n(160),M=["toggler","children","isLoading","onRef","size"];function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j()(this,n)}}var N=function(e){O()(n,e);var t=P(n);function n(){var e;b()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={opened:!1,placement:null,loaderStyle:null},e.handleOpen=function(t){var n=t.arrowStyle,r=t.placement,a=e.props.onOpen;a&&a(),e.setState({opened:!0,placement:r,loaderStyle:n})},e.handleClose=function(){var t=e.props.onClose;t&&t(),e.setState({opened:!1})},e}return m()(n,[{key:"render",value:function(){var e=B()(this.props,["onOpen","onClose"]),t=e.toggler,n=e.children,r=e.isLoading,a=e.onRef,i=e.size,l=f()(e,M),s=this.state,d=s.opened,p=s.loaderStyle;return Object(u.g)(S.a,k()({noLayer:!0,toggler:Object(u.g)("div",null,t),toggleEvent:"hover",targetClassName:"HoverCard-popoverTarget",placement:"bottom-left",onOpen:this.handleOpen,onClose:this.handleClose},l),Object(u.g)("div",{className:c()("HoverCard-container",{"HoverCard-container--large":"large"===i}),ref:a},r&&Object(u.g)("div",{className:"HoverCard-loading",style:p},Object(u.g)(x.a,null)),Object(u.g)("div",{className:c()("HoverCard",{"HoverCard--isLoading":r||!d})},o.Children.map(n,(function(e){return e&&("string"==typeof e?Object(u.g)("div",{className:"HoverCard-item"},e):Object(o.cloneElement)(e,{className:c()("HoverCard-item",e.props.className)}))})))))}}]),n}(o.Component);N.propTypes={toggler:a.a.node.isRequired,isLoading:a.a.bool,onOpen:a.a.func,onClose:a.a.func,size:a.a.oneOf(["default","large"])},N.defaultProps={margin:16,align:"left",topExcludedHeight:60,size:"default"};var E=N},1063:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),l=n(1),u=n(3),s=n.n(u),d=n(0),p=n(24),f=n(13),h=n.n(f),b=n(1360),v=n(36),m=n(908),g=n(288),O=n(77),y=n(884),j=n(35),w=n(29),C=n(983),R=n(30);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var _=function(e){Object(o.a)(n,e);var t=k(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={modalShown:!1},e.handleSendMessage=function(){var t=e.props,n=t.onModalOpen,r=t.user.allowMessage,a=t.dispatch,o=t.doNotCheckAllowMessageSetting;r||void 0===r&&o?(e.setState({modalShown:!0}),n&&n()):a(Object(w.h)(R.V.blocked,"red")),j.a.trackEvent(Object(O.a)(e),{action:"Message",element:"Button",is_intent:!0})},e.handleCloseModal=function(){var t=e.props.onModalClose;e.setState({modalShown:!1}),t&&t()},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.preset,r=e.color,a=e.icon,o=e.label,i=e.className,c=e.tooltip,u=e.tooltipPreset,s=this.state.modalShown,d="3d198a56310c02c4a83efb9f4a4c027e"===t.id;return Object(l.c)(l.a,{children:[Object(l.b)(v.c,{preset:n,color:r,className:i,icon:a,label:o,onClick:this.context.authRequired(this.handleSendMessage,d?R.X.serviceAccountMessage:R.X.message),"data-tooltip":c,"aria-label":c,"data-tooltip-preset":u}),Object(l.b)(C.a,{memberHashId:t.id,handleCloseModal:this.handleCloseModal,isModalShow:s})]})}}]),n}(d.Component);_.propTypes={onModalOpen:s.a.func,onModalClose:s.a.func},_.defaultProps={preset:"outline",color:"grey",icon:y.a,label:"发私信",doNotCheckAllowMessageSetting:!1},_.contextTypes={authRequired:s.a.func};var B=Object(p.connect)()(_),x=n(140);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var M=function(e){Object(o.a)(n,e);var t=S(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={reportModalShown:!1},e.handleShieldUser=function(){var t=e.props,n=t.user.urlToken,r=t.updateUserBlocking,a=t.showNotification;r(n,!1).then((function(){return a("屏蔽已取消")}))},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.user,a=r.urlToken,o=r.isBlocking,i=r.isOrg,c=t.canShowMutualFollowStatus,u=t.className,s=t.buttonClassName,d=t.onModalOpen,p=t.onModalClose,f=this.context.authRequired,O=this.state.reportModalShown,y=h()("MemberButtonGroup",u);return o?Object(l.c)("div",{className:y,children:[Object(l.c)(v.c,{className:s,preset:"primary",color:"red",onClick:this.handleShieldUser,children:[Object(l.b)(b.a,{center:!0,text:!0})," 已屏蔽"]}),!i&&Object(l.c)(v.c,{className:s,onClick:f((function(){e.setState({reportModalShown:!0}),d&&d()}),R.X.report),children:["举报用户",Object(l.b)(g.a,{shown:O,onClose:function(){e.setState({reportModalShown:!1}),p&&p()},type:"member",urlToken:a,zaEnabled:!0})]})]}):Object(l.c)("div",{className:y,children:[Object(l.b)(m.a,{id:a,type:n.type,gender:n.gender,isFollowing:n.isFollowing,isFollowed:n.isFollowed,canShowMutualFollowStatus:c,className:s,preset:m.a.PRESETS.primary}),Object(l.b)(B,{user:n,className:s,onModalOpen:d,onModalClose:p})]})}}]),n}(d.Component);M.contextTypes={authRequired:s.a.func},M.propTypes={user:s.a.object.isRequired,buttonClassName:s.a.string,onModalOpen:s.a.func,onModalClose:s.a.func};t.a=Object(p.connect)(null,{updateUserBlocking:x.o,showNotification:w.h})(M)},1110:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(26),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z",fillRule:"evenodd"}))};i.defaultProps={name:"Dots"},t.a=i},1111:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(26),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-.034 2.966c1.949 0 1.485 1.807 1.485 2.211 0 .115-.785 7.79-.785 7.79h-1.4s-.785-7.623-.785-7.738c0-.416-.463-2.263 1.485-2.263zm1.057 13.522c-.294.287-.647.43-1.056.43-.41 0-.762-.142-1.058-.43a1.429 1.429 0 0 1-.443-1.07c0-.41.148-.762.443-1.057a1.443 1.443 0 0 1 1.058-.442c.409 0 .762.143 1.056.43.296.287.443.644.443 1.07 0 .427-.147.783-.443 1.07z",fillRule:"evenodd"}))};i.defaultProps={name:"Alert"},t.a=i},1117:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),l=n(1),u=n(3),s=n.n(u),d=n(0),p=n(13),f=n.n(p),h=n(36),b=n(35),v=n(1063),m=n(30);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var O=function(e){Object(o.a)(n,e);var t=g(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.user.isOrg,a=t.className,o=t.buttonClassName,i=t.onModalOpen,c=t.onModalClose,u=this.context,s=u.currentUser,d=u.authRequired,p=u.router,g=f()("ProfileButtonGroup",a);return s&&n.urlToken===s.urlToken?Object(l.b)("div",{className:g,children:Object(l.c)(h.c,{color:"blue",className:o,onClick:d((function(){b.a.trackEvent(e,{action:"OpenUrl",element:"Link"},{link:{url:"".concat(location.origin,"/people/edit")}}),p.push("/people/edit")}),m.X.editProfile),children:["编辑",r?"机构":"个人","资料"]})}):Object(l.b)(v.a,{user:n,canShowMutualFollowStatus:!0,className:g,buttonClassName:o,onModalOpen:i,onModalClose:c})}}]),n}(d.Component);O.contextTypes={router:s.a.object.isRequired,currentUser:s.a.object,authRequired:s.a.func},O.propTypes={user:s.a.object.isRequired,buttonClassName:s.a.string,onModalOpen:s.a.func,onModalClose:s.a.func},t.a=O},1118:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),a=n(5),o=n(29),i=n(30),c=Object(a.a)("user",["UPDATE_FOLLOWERS_PIN"]).UPDATE_FOLLOWERS_PIN;function l(e,t,n){return function(a,l){var u=l(),s=u.entities.users,d=u.currentUser,p=s[e];return a(n?Object(o.h)(i.V.blocked,"red"):{urlToken:d,userUrlToken:e,expect:t,API:{types:c,endpoint:"members/".concat(e,"/followers"),method:t?"POST":"DELETE"},UPDATE:{request:{users:Object(r.a)({},e,{isFollowing:t})},failure:{users:Object(r.a)({},e,p)},success:function(t){return{users:Object(r.a)({},e,t)}}}})}}},1139:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),l=n(1);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var s=function(e){Object(o.a)(n,e);var t=u(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFollowed,n=e.isFollowing;return t?Object(l.b)("span",{className:"FollowStatus",children:n?"相互关注":"关注了你"}):null}}]),n}(n(0).Component);t.a=s},1169:function(e,t,n){"use strict";var r=n(0),a=n(645),o="element",i="text",c="empty",l="fragment",u=function(e,t){return function e(n){var a,u=n.node;return n.type=(a=u,r.isValidElement(a)?o:function(e){return"string"==typeof e||"number"==typeof e}(a)?i:function(e){return null==e||"boolean"==typeof e}(a)?c:Array.isArray(a)?l:void 0),n.type===o?n.children=r.Children.map(u.props.children,(function(t){return e({node:t,parent:n})})):n.type===l&&(n.children=r.Children.map(u,(function(t){return e({node:t,parent:n})}))),t(n),n}({node:e,parent:null})},s=function e(t,n){return[t].concat(null==(r=n(t))?[]:function(t){return e(t,n)}(r));var r},d=function(e){var t=!1;return e.reduce((function(e,n){if(e&&n&&a(String(e.node),String(n.node))){var r=(c=n,l=s(e,(function(e){return e.parent})),u=s(c,(function(e){return e.parent})),d=l.findIndex((function(e){return u.includes(e)})),[l[d],l[d-1]]);i=r[1],(o=r[0]).children.splice(o.children.indexOf(i)+1,0,{node:" "}),t=!0}var o,i,c,l,u,d;return n})),t},p=function(e){if(!e)return null;var t=[],n=u(e,(function(e){e.type===i&&""!==e.node&&t.push(e)}));return t.length&&d(t)?function e(t){return Array.isArray(t.children)?t.type===l?r.Children.map(t.children.map(e),(function(e){return e})):r.createElement(t.node.type,t.node.props,r.Children.map(t.children.map(e),(function(e){return e}))):t.node}(n):e},f=function(e){var t=e.component,n=e.children;return r.createElement(t,{children:p(n)})};f.defaultProps={component:r.Fragment||"span"},t.CJKSpace=f},1238:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(26),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M9.676 11.252c-.243.433-.542.85-.494 1.237.189 1.509 2.938 1.807 3.746 2.816.59.736.835 1.852.892 3.725.01.303 0 .97-.867.97H1.933c-.915 0-.925-.643-.915-.936.062-1.877.292-3.02.895-3.76.812-.994 3.743-1.267 3.872-2.872.03-.361-.246-.74-.493-1.18C3.917 8.802 3.39 4 7.466 4s3.506 4.941 2.21 7.252zm8.073.79l.002.641c1.57 1.766 4.47 1.307 4.851 3.166.125.61.328 1.538.384 3.232.009.284.014.919-.905.919-.92 0-5.523-.021-6.875-.019 0-2.806-.144-5.987-2.707-6.285.537-.331 1.725-.504 2.178-1.013l.002-.64c-.881.118-2.679-.541-2.679-.541.61-.64.747-1.387 1.192-4.317.355-2.93 2.835-2.903 3.022-2.903.187 0 2.667-.027 3.028 2.903.439 2.93.577 3.677 1.186 4.317 0 0-1.797.659-2.68.54z",fillRule:"evenodd"}))};i.defaultProps={name:"Users"},t.a=i},1360:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(26),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M18.376 5.624c-3.498-3.499-9.254-3.499-12.752 0-3.499 3.498-3.499 9.254 0 12.752 3.498 3.499 9.254 3.499 12.752 0 3.499-3.498 3.499-9.14 0-12.752zm-1.693 1.693c2.37 2.37 2.596 6.094.678 8.69l-9.367-9.48c2.708-1.919 6.32-1.58 8.69.79zm-9.48 9.48c-2.37-2.37-2.595-6.095-.676-8.69l9.48 9.48c-2.822 1.918-6.433 1.58-8.803-.79z",fillRule:"evenodd"}))};i.defaultProps={name:"Ban"},t.a=i},1575:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(26),i=function(e){return a.a.createElement(o.a,e,a.a.createElement("path",{d:"M17 6.998h3.018c1.098 0 1.975.89 1.982 2.002v10a1.993 1.993 0 0 1-1.987 2H3.98A1.983 1.983 0 0 1 2 19l.009-10.003c0-1.11.873-1.999 1.971-1.999L7 7V5c.016-1.111.822-2 2-2h6c.98 0 1.86.889 2 2v1.998zM9 7h6V5.5s0-.5-.5-.5h-5c-.504 0-.5.5-.5.5V7z",fillRule:"evenodd"}))};i.defaultProps={name:"Company"},t.a=i},908:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),l=n(1),u=n(3),s=n.n(u),d=n(0),p=n(19),f=n(24),h=n(13),b=n.n(h),v=n(965),m=n.n(v),g=n(854),O=n(36),y=n(35),j=n(74),w=n(447),C=n(56),R=n(1118),k=n(113),_=n(121),B=n(223),x=n(370),S=n(430),M=n(179),P=n(460),N=n(30);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var T={default:"default",primary:"primary"},F=function(e){Object(o.a)(n,e);var t=E(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).zaRef=Object(d.createRef)(),e.state={hovered:!1,isFetching:!1},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e.toggleFollow=function(t){var n=e.props,r=n.isFollowing,a=n.type,o=n.id,i=n.zaId,c=n.useCustomZa,l=n.onFollowButtonClick,u=!r;c||(y.a.trackEvent(t.target,Object.assign({action:u?"Follow":"UnFollow",element:"Button",element_name:N.bb[a]},i&&{id:i})),e.zaRef.current.trackEvent({action:u?"Follow":"UnFollow",eventType:"Click",elementLocation:{type:"Button",text:u?"关注问题":"取消关注"}}));var s="toggleFollow".concat(a.slice(0,1).toUpperCase()).concat(a.slice(1)),d=e.props[s](o,u);m()(d)&&(e.setState({isFetching:!0}),d.then((function(){e.setState({isFetching:!1}),l&&l()})).catch((function(){return e.setState({isFetching:!1})})))},e.handleToggleFollow=function(t){e.props.authRequired?e.props.authRequired(e.toggleFollow,N.X.follow,!0)(t):e.props.ua.Zhihu?e.toggleFollow(t):e.context.authRequired(e.toggleFollow,N.X.follow)(t)},e.handleClick=function(t){var n=e.props.onClick;n&&!n(t)||(e.handleToggleFollow(t),t.stopPropagation())},e}return Object(a.a)(n,[{key:"render",value:function(){var e,t,n,r=this.state.hovered,a=this.props,o=a.onRef,i=a.preset,c=a.entityHidden,u=a.type,s=a.isFollowing,d=a.isFollowed,p=a.gender,f=a.className,h=a.children,v=a.isMobile,m=a.disabled,y=a.canShowMutualFollowStatus;s?(e="primary",n=r?"取消关注":y&&d?"互相关注":"已关注",t={color:"grey"}):(e=i,t={color:"blue"},n=h||("people"===u||"rewardPeople"===u?[Object(l.b)(g.a,{className:"FollowButton-icon",text:!0,center:!0},"icon"),"关注".concat("number"==typeof p&&-1!==p?N.O[p]:"")]:"关注".concat(c?"":w.b[u])));var C=this.state.isFetching;return Object(l.c)(O.c,Object.assign(Object.assign(Object.assign({onRef:o,preset:e,onClick:this.handleClick,className:b()("FollowButton",f)},t),!v&&{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),{},{disabled:m||C,children:[Object(l.b)(j.d,{ref:this.zaRef}),n]}))}}]),n}(d.Component);F.contextTypes={authRequired:s.a.func},F.propTypes={preset:s.a.oneOf(Object.values(T)),type:s.a.oneOf(w.a).isRequired,id:s.a.oneOfType([s.a.number,s.a.string]).isRequired,zaId:s.a.number,useCustomZa:s.a.bool},F.defaultTypes={preset:T.default},F.PRESETS=T;t.a=Object(p.compose)(Object(f.connect)((function(e){return{ua:e.env.userAgent,isMobile:Object(C.isMobileSelector)(e,{includeTablet:!0})}}),{toggleFollowQuestion:_.qb,toggleFollowCollection:B.d,toggleFollowColumn:x.e,toggleFollowRoundtable:S.m,toggleFollowTopic:M.M,toggleFollowPeople:k.a,toggleFollowRewardPeople:P.o,toggleFollowClub_mask:R.a}))(F)},915:function(e,t,n){"use strict";function r(e){var t=e.id,n=e.name,r=e.urlToken;return"0"===t||"知乎用户"===n?null:Boolean(r||t)}n.d(t,"a",(function(){return r}))},916:function(e,t,n){"use strict";var r=n(33),a=n(1),o=n(24),i=n(43),c=n(56),l=n(0),u=n(64),s=n.n(u),d=n(41),p=n(66),f=n(35),h=["isPinProfile","user","isPinDaily","onClick","children"];function b(e,t){var n=e.isPinProfile,o=e.user,c=e.isPinDaily,l=e.onClick,u=void 0===l?s.a:l,b=e.children,v=Object(r.default)(e,h),m=o.id,g=o.urlToken,O=o.isOrg,y=o.url,j=o.maskLevel,w="//www.zhihu.com/".concat(O?"org":"people","/").concat(g||m),C="zhihu://pin".concat(y,"/moments"),R=Object(i.d)((function(e){c&&"A"===e.target.nodeName&&f.a.trackEvent(e.target,{id:2065}),n&&(e.preventDefault(),Object(p.a)("base/openURL").dispatch({url:C})),j&&e.preventDefault(),u(e)}));return Object(a.b)(d.Link,Object.assign(Object.assign({ref:t,to:w,target:"_blank",onClick:R,className:"UserLink-link","data-za-detail-view-element_name":"User"},v),{},{children:b}))}var v=Object(l.forwardRef)(b),m=n(915),g=["user","noHoverCard","noLink","children"];t.a=function(e){var t=e.user,l=e.noHoverCard,u=e.noLink,s=e.children,d=Object(r.default)(e,g),p=t.id,f=t.urlToken,h=!Object(m.a)(t)||u,b=Object(o.useSelector)((function(e){return Object(c.isMobileSelector)(e,{includeTablet:!0})})),O=null!=l?l:b,y=Object(i.e)((function(){return Promise.all([n.e(0),n.e(9),n.e(93)]).then(n.bind(null,998))}),!O);if(h)return s||null;var j=Object(a.b)(v,Object.assign(Object.assign({},d),{},{user:t,children:s}));return O||!y?j:Object(a.b)(y,{toggler:j,id:p,urlToken:f,user:t})}},928:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(33),a=n(1),o=n(13),i=n.n(o),c=n(417),l=n(915),u=n(930),s=n(910),d=n(916),p=["className","showVipIcon","vipIconZaViewName","user","noBadge","noVipBadge","children","badgeProps"];function f(e){var t,n,o=e.className,f=e.showVipIcon,h=e.vipIconZaViewName,b=e.user,v=void 0===b?{}:b,m=e.noBadge,g=e.noVipBadge,O=void 0!==g&&g,y=e.children,j=e.badgeProps,w=void 0===j?{}:j,C=Object(r.default)(e,p),R=Object(l.a)(v),k=R&&!m,_=(null===(t=v.vipInfo)||void 0===t?void 0:t.isVip)&&!O,B=R&&f&&(null===(n=v.vipInfo)||void 0===n?void 0:n.vipIcon);return Object(a.c)("span",{className:i()("UserLink",o),children:[Object(a.b)(d.a,Object.assign(Object.assign({},C),{},{user:v,children:y||v.name})),k&&Object(a.b)(c.c,Object.assign({css:{marginLeft:".3em"},isOrg:v.isOrg,badge:v.badgeV2||v.badge,linkify:!0,enableTooltip:!0},w)),_&&Object(a.b)(u.a,{css:{marginLeft:".3em"}}),B&&Object(a.b)(s.a,{vipIcon:v.vipInfo.vipIcon,zaViewName:h})]})}},930:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),l=n(1),u=n(0),s=n(13),d=n.n(s);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var f=function(e){Object(o.a)(n,e);var t=p(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return Object(l.b)("div",{className:d()("Badge",t),children:n})}}]),n}(u.Component),h=n(74),b=n(1009),v=n(948);function m(e){return Object(l.b)(h.a,Object.assign(Object.assign({as:"span",rel:"noopener noreferrer",zaBlock:"VipBadge",zaType:"Button",zaEventType:"Click",onClick:v.a.show},e),{},{children:Object(l.b)(b.a,{css:{height:"1em",width:"1em","&:hover":{cursor:"pointer"}},center:!0})}))}var g=Object(u.memo)(m);t.b=f},931:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(77),i=n(17),c=n(18),l=n(9),u=n(1),s=n(3),d=n.n(s),p=n(0),f=n(41),h=n(36),b=n(932),v=n(30);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=m(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={expanded:!1},e.onExpand=e.handleExpand.bind(Object(o.a)(e)),e}return Object(a.a)(n,[{key:"handleExpand",value:function(){this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.topics,n=e.user,r=e.ellipsisLength,a=e.expandable,o=e.privacyEnabled,i=e.showPrivacyPage,c=this.state.expanded,l="等 ".concat(t.length," 个"),s=t;return c||(s=t.slice(0,r)),0===t.length?null:Object(u.c)("span",{children:[s.map((function(e,t){return Object(u.c)("span",{children:[Object(u.b)(b.a,{showPrivacyPage:o&&i,authWrapperClassName:"ProfileMainPrivacy-authWrapper",authChild:Object(u.b)("span",{className:"ProfileMainPrivacy-pointerWrapper",children:e.name}),children:Object(u.b)(f.Link,{to:"".concat(v.E,"/").concat(n.isOrg?"org":"people","/").concat(n.urlToken,"/creations/").concat(e.id),children:e.name})}),t<s.length-1?"、":" "]},t)})),!c&&t.length>r&&(a?Object(u.b)(h.c,{preset:"plain",onClick:this.onExpand,children:l}):l),"话题"]})}}]),n}(p.Component);g.propTypes={topics:d.a.array.isRequired,user:d.a.object,ellipsisLength:d.a.number,expandable:d.a.bool,noHoverCard:d.a.bool,privacyEnabled:d.a.bool,showPrivacyPage:d.a.bool},g.defaultProps={ellipsisLength:3,expandable:!0,noHoverCard:!1},t.a=g},932:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(0),o=n(434),i=function(e){var t=e.children,n=e.showPrivacyPage,i=e.authWrapperClassName,c=e.authChild,l=a.Children.only(t),u=c?a.Children.only(c):l;return n?Object(r.b)(o.a,{wrapperClassName:i,loginButton:u}):l}},940:function(e,t,n){var r=n(640),a=n(298),o=n(296),i=n(94),c=n(183),l=n(297),u=n(295),s=n(368),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||s(e)||o(e)))return!e.length;var t=a(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},949:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return u}));var r={general:"general",live:"live",publication:"publication",album:"album",special:"special",manga:"manga"},a=(Object.assign(Object.assign({},r),{},{album_chapter:r.album,album_video_chapter:r.album,album_paid_column:r.album,paid_column_chapter:r.album,training:r.album,training_bundle:r.album,training_chapter:r.album,web_literature:r.publication,instabook:r.publication,ebook_audio:r.publication,publication_chapter:r.publication,publication_paid_magazine:r.publication,magazine_section:r.publication,paid_answer:r.album,assessment:r.album,playlet:r.album}),{live:"Live 讲座",album:"盐选专栏",album_paid_column:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",paid_column_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书章节",instabook:"讲书",ebook_audio:"有声书",publication_paid_magazine:"盐选杂志",special:"专题",training:"训练营",training_bundle:"训练营",training_chapter:"训练营",web_literature:"网络文学",magazine_section:"杂志文章",manga:"漫画"}),o={live:"Live 讲座",album:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",album_paid_column:"盐选专栏",paid_column_chapter:"盐选专栏",assessment:"盐选专栏",training:"盐选专栏",training_bundle:"盐选专栏",training_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书",instabook:"电子书",ebook_audio:"电子书",publication_paid_magazine:"电子书",special:"电子书",web_literature:"电子书",magazine_section:"电子书",manga:"电子书"},i={live:r.live,album:r.album,album_chapter:r.album,album_paid_column:r.album,album_video_chapter:r.album,training:r.album,training_bundle:r.album,training_chapter:r.album,paid_column_chapter:r.album,assessment:r.album,publication:r.publication,publication_chapter:r.publication,instabook:r.publication,ebook_audio:r.publication,publication_paid_magazine:r.publication,special:r.publication,web_literature:r.publication,magazine_section:r.publication,manga:r.publication},c=["live","album","album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section","album_paid_column","assessment","special"],l={PaidAnswer:"PaidAnswer",PaidPost:"PaidPost",Answer:"Answer",Post:"Post"},u={paid_magazine:"PaidMagazine",paid_column:"PaidColumn",paid_column_chapter:"PaidColumn",album:"RemixAlbum",ebook:"EBook",instabook:"InstaBook",literature:"Literature",training:"Training",training_bundle:"TrainingBundle",special:"Special",ebook_audio:"AudioBook",live:"Live",publication:"EBook",web_literature:"EBook",album_chapter:"RemixAlbum",album_paid_column:"RemixAlbum",album_video_chapter:"RemixAlbum",manga:"Manga",free_conversation:"FreeConversation",event:"Event",Onebox:"OneBox",paid_answer:"Answer"}},958:function(e,t,n){"use strict";var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),l=n(1),u=n(0),s=n(3),d=n.n(s),p=n(85),f=n.n(p),h=n(435);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}t.a=function(e){var t=function(t){Object(o.a)(i,t);var n=b(i);function i(){return Object(r.a)(this,i),n.apply(this,arguments)}return Object(a.a)(i,[{key:"render",value:function(){var t=this.props.currentUser,n=this.context.authRequired,r=void 0===n?function(){}:n;return Object(l.b)(e,Object.assign({isLogin:t&&"guest"!==t.userType,authRequired:r},this.props))}}]),i}(u.Component);return t.contextTypes={authRequired:d.a.func},f()(Object(h.b)(t),e)}},963:function(e,t,n){"use strict";var r=n(21),a=n.n(r),o=n(25),i=n.n(o),c=n(23),l=n.n(c),u=n(27),s=n.n(u),d=n(14),p=n.n(d),f=n(3),h=n.n(f),b=n(0),v=n.n(b),m=n(13),g=n.n(m),O=n(996),y=n(138),j=n(96),w=n.n(j),C=n(163),R=n(7);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s()(this,n)}}var _={top:10,left:20},B={top:0,left:0};var x=function(e){l()(n,e);var t=k(n);function n(){var e;a()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).scrollerRef=v.a.createRef(),e.state={transEnded:!1,rect:null,translate:null,scale:null},e.getBoundingClientRect=function(){var t=e.props,n=t.img,r=t.data,a=n.getBoundingClientRect(),o=a.left,i=a.top,c=a.width,l=a.height,u=r.width,s=r.height,d={left:o,top:i,width:c,height:l},p=1;return u>s?(d.height=l,p=l/s,d.width=u*p,d.left=o+(c-d.width)/2,d.top=i+(l-d.height)/2):u<s&&(d.width=c,p=c/u,d.height=s*p,d.left=o+(c-d.width)/2,d.top=i+(l-d.height)/2),d},e.handleClick=function(t){t.stopPropagation(),e.setState({translate:null,scale:null})},e.handleTransitionEnd=function(){var t=e.state,n=t.translate,r=t.scale,a=e.props.onClose;n&&r?(e.setState({transEnded:!0}),e.scrollerRef.current.style.overflow="auto"):a()},e}return i()(n,[{key:"originalSrc",get:function(){return this.props.img.dataset.original}},{key:"currentSrc",get:function(){var e=this.props.img;return e.currentSrc||e.src}},{key:"componentWillMount",value:function(){var e=this.props,t=e.img,n=e.isOriginalUrl;this.originalSrc!==this.currentSrc&&((new Image).src=this.originalSrc);this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})}},{key:"componentDidMount",value:function(){var e=this;Object(O.disableBodyScroll)(this.scrollerRef.current);var t=this.props.img;setTimeout((function(){return e.setState(Object.assign({},e.computeTransition(e.state.rect,{width:t.dataset.rawwidth||t.naturalWidth})))}))}},{key:"componentWillUnmount",value:function(){Object(O.enableBodyScroll)(this.scrollerRef.current)}},{key:"computeTransition",value:function(e,t){var n,r=this.props,a=r.transitionType,o=r.data,i=w()(navigator.userAgent).Mobile?B:_,c=i.top,l=i.left,u=window,s={left:0,top:0,width:u.innerWidth,height:u.innerHeight},d=function(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}(s),p={width:s.width-2*l,height:s.height-2*c},f={},h={};return 1===a?(f.width=p.width>o.width?o.width:p.width,n=f.width/o.width,f.height=o.height*n,h={x:(p.width-f.width)/2+l,y:f.height<p.height?(p.height-f.height)/2+c:_.top}):(f.width=p.width>t.width?t.width:p.width,n=f.width/e.width,f.height=e.height*n,h={x:d.x-e.width/2,y:(f.height<p.height?d.y:_.top+f.height/2)-e.height/2}),{translate:h,scale:n}}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.img,a=n.isOriginalUrl,o=n.data,i=n.transitionType,c=n.className,l=this.state,u=l.translate,s=l.scale,d=l.rect,p=l.transEnded,f=u&&s,h=1,b="";if(1===i){var v=(w()(navigator.userAgent).Mobile?B:_).left;e=Math.min(window.innerWidth-2*v,o.width);var m=d.width/e;b=f?"translate(".concat(u.x,"px, ").concat(u.y,"px) scale(1) "):"translate(".concat(d.left,"px, ").concat(d.top,"px) scale(").concat(m,") "),h=f?1:0}else b=f?"translate(".concat(u.x,"px ,").concat(u.y,"px) scale(").concat(s,") "):"translate(".concat(d.left,"px,").concat(d.top,"px)");return Object(R.g)(C.a,null,Object(R.g)("div",{className:g()("ImageView",c,{"is-active":f}),style:{paddingBottom:_.top},onClick:this.handleClick},Object(R.g)("div",{className:"ImageView-inner",ref:this.scrollerRef},Object(R.g)("img",{ref:function(e){t.imgEl=e},src:!1===a?Object(y.imgUrl)(r.dataset.original,"r"):p&&this.originalSrc||this.currentSrc,className:g()("ImageView-img",{"ImageView-transformOrigin":1===i}),style:{width:e||d.width,transform:b,opacity:h},onTransitionEnd:this.handleTransitionEnd,alt:"preview"}))))}}]),n}(b.Component);x.propTypes={img:h.a.object.isRequired,onClose:h.a.func.isRequired};t.a=x},965:function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n,e.exports.default=n},983:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(15),a=n(16),o=n(17),i=n(18),c=n(9),l=n(1),u=n(0),s=n(3),d=n.n(s),p=n(87),f=n(36),h=n(414),b=n(1046),v=n(1055);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(o.a)(n,e);var t=m(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.memberHashId,n=e.isModalShow,r=e.handleCloseModal;return Object(l.b)(p.b,{className:"ChatBoxModal",spread:!0,onClose:r,contentClassName:"ChatBoxModal-content",closeButton:Object(l.b)(f.c,{preset:"plain",className:"ChatBoxModal-closeButton",onClick:r,"aria-label":"关闭",children:Object(l.b)(h.a,{className:"ChatBoxModal-closeIcon"})}),children:n&&Object(l.b)(b.a,{handleReceiveMessage:this.handleReceiveMessage,children:Object(l.b)(v.a,{type:"default",senderId:t,className:"Chat-ChatBox"},t)})})}}]),n}(u.Component);g.propTypes={memberHashId:d.a.string,handleCloseModal:d.a.func,isModalShow:d.a.bool}},993:function(e,t,n){"use strict";var r=n(21),a=n.n(r),o=n(25),i=n.n(o),c=n(23),l=n.n(c),u=n(27),s=n.n(u),d=n(14),p=n.n(d),f=n(31),h=n.n(f),b=n(39),v=n.n(b),m=n(3),g=n.n(m),O=n(0),y=n(13),j=n.n(y),w=n(178),C=n(36),R=n(7),k=["className","tag","name","value"],_=["className","divider","children","items"];function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s()(this,n)}}function x(e){var t=e.className,n=e.tag,r=e.name,a=e.value,o=h()(e,k),i="div";return n?i=n:o.href?i="a":o.onClick&&(i=C.c),Object(R.g)(i,v()({className:j()("NumberBoard-item",t)},o),Object(R.g)("div",{className:"NumberBoard-itemInner"},Object(R.g)("div",{className:"NumberBoard-itemName"},r),Object(R.g)("strong",{className:"NumberBoard-itemValue",title:a},Object(w.formatNumber)(a))))}var S=function(e){l()(n,e);var t=B(n);function n(){return a()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.divider,r=e.children,a=e.items,o=h()(e,_);return Object(R.g)("div",v()({className:j()("NumberBoard",t,{"NumberBoard--divider":n})},o),r||a.map((function(e){return Object(R.g)(x,v()({key:e.name},e))})))}}]),n}(O.Component);S.propTypes={divider:g.a.bool},S.defaultProps={divider:!1},S.Item=x;var M=S;t.a=M},996:function(e,t,n){var r,a,o;a=[t],void 0===(o="function"==typeof(r=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var r={get passive(){n=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}function a(e){return l.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))}function o(e){var t=e||window.event;return!!a(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)}function i(){setTimeout((function(){void 0!==p&&(document.body.style.paddingRight=p,p=void 0),void 0!==d&&(document.body.style.overflow=d,d=void 0)}))}var c="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),l=[],u=!1,s=-1,d=void 0,p=void 0;e.disableBodyScroll=function(e,r){if(c){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!l.some((function(t){return t.targetElement===e}))){var i={targetElement:e,options:r||{}};l=[].concat(t(l),[i]),e.ontouchstart=function(e){1===e.targetTouches.length&&(s=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,r,i,c;1===t.targetTouches.length&&(r=e,c=(n=t).targetTouches[0].clientY-s,a(n.target)||(r&&0===r.scrollTop&&0<c||(i=r)&&i.scrollHeight-i.scrollTop<=i.clientHeight&&c<0?o(n):n.stopPropagation()))},u||(document.addEventListener("touchmove",o,n?{passive:!1}:void 0),u=!0)}}else{h=r,setTimeout((function(){if(void 0===p){var e=!!h&&!0===h.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(p=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===d&&(d=document.body.style.overflow,document.body.style.overflow="hidden")}));var f={targetElement:e,options:r||{}};l=[].concat(t(l),[f])}var h},e.clearAllBodyScrollLocks=function(){c?(l.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),u&&(document.removeEventListener("touchmove",o,n?{passive:!1}:void 0),u=!1),l=[],s=-1):(i(),l=[])},e.enableBodyScroll=function(e){if(c){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,l=l.filter((function(t){return t.targetElement!==e})),u&&0===l.length&&(document.removeEventListener("touchmove",o,n?{passive:!1}:void 0),u=!1)}else(l=l.filter((function(t){return t.targetElement!==e}))).length||i()}})?r.apply(t,a):r)||(e.exports=o)},998:function(e,t,n){"use strict";n.r(t);var r=n(33),a=n(15),o=n(16),i=n(17),c=n(18),l=n(9),u=n(1),s=n(3),d=n.n(s),p=n(0),f=n(24),h=n(41),b=n(55),v=n(35),m=n(1575),g=n(1238),O=n(131),y=n.n(O),j=n(999),w=n(417),C=n(57),R=n(993),k=n(1059),_=n(421),B=n(1117),x=n(140),S=n(30),M=n(928),P=n(205),N=n(931),E=n(1139),T=["toggler","user","id","urlToken","mutuals","onRef"];function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var L=function(e,t){return e.map((function(e){return t[e]})).slice(0,3)},z=Object(C.isBrowser)()?y()(L,(function(e,t){return"".concat(e.join(","),"-").concat(t.length)})):L,A=[];var U=function(e){return Object(u.b)(b.Flex,Object.assign({css:{"&:not(:last-child)":{marginBottom:8}}},e))},I=function(e){Object(i.a)(n,e);var t=F(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isLoading:!1,childModalOpened:!1},e.loadUserProfile=function(){var t=e.props,n=t.id,r=t.urlToken;return(0,t.dispatch)(Object(x.j)(r||n,!1))},e.load=function(){var t=e.props,n=t.id;(t.urlToken||n)&&(e.setState({isLoading:!0}),e.loadUserProfile().then((function(){return e.setState({isLoading:!1})})),e.loadMutuals())},e.loadMutuals=function(){var t=e.props,n=t.user,r=t.dispatch,a=t.mutuals;return!(void 0===a?[]:a).length&&e.context.currentUser&&n?r(Object(x.g)(n.urlToken,"mutuals")):Promise.resolve()},e.track=function(){var t=e.props.user;e.hoverCardElement&&t&&(v.a.setModule(e.hoverCardElement,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:t.id}}}),v.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(o.a)(n,[{key:"render",value:function(){var e,t,n=this,a=this.props,o=a.toggler,i=a.user,c=a.id,l=a.urlToken,s=a.mutuals,d=void 0===s?[]:s,p=a.onRef,f=Object(r.default)(a,T),v=i||{},O=v.isOrg,y=v.headline,C=v.avatarUrl,x=v.badge,F=v.badgeV2,L=v.answerCount,z=v.articlesCount,A=v.followerCount,I=v.employments,H=v.coverUrl,V=v.gender,q=v.isFollowed,D=v.isFollowing,W=this.state,G=W.isLoading,J=W.childModalOpened,X=d.length,K=Object(w.e)(F||x),Z=K.bestAnswerer,Y=K.identity,Q="//www.zhihu.com/".concat(O?"org":"people","/").concat(l||c),$=this.context.currentUser,ee=$&&i&&$.urlToken===i.urlToken,te=X>0&&!ee,ne=I&&I[0];if(null!=Y&&Y.length)t=Object(u.c)(U,{children:[Object(u.b)("a",{href:"".concat(S.F,"/account/verification/intro"),target:"_blank",rel:"noopener noreferrer",css:{marginRight:".3em"},children:Object(u.b)(w.a,{})}),Object(u.b)("div",{children:Y.slice(0,2).map((function(e){return e.description})).join("，")})]});else if(ne){var re=ne.company,ae=ne.job;t=Object(u.c)(U,{children:[(re||ae)&&Object(u.b)(b.Box,{as:"span",mr:".3em",color:"GBL05A",children:Object(u.b)(m.a,{text:!0,center:!0})}),Object(u.c)("div",{children:[re&&re.name,re&&ae&&Object(u.b)(b.Box,{display:"inline-block",width:"1px",height:"10px",mx:"8px",bg:"GBK09A"}),ae&&ae.name]})]})}else t=null;return Object(u.c)(k.b,Object.assign(Object.assign({toggler:o,onOpen:this.handleOpen,isLoading:G,globalClose:!J,stickHover:J,preventCloseOnTarget:!0},f),{},{onRef:function(e){p&&"function"==typeof p&&p(e),n.hoverCardElement=e},children:[Object(u.b)(k.a,{coverUrl:H,title:Object(u.c)("span",{css:{display:"flex"},children:[Object(u.b)(M.a,{user:i,noHoverCard:!0}),Object(u.b)(E.a,{isFollowed:q,isFollowing:D})]}),subtitle:y&&Object(u.b)(_.a,{inline:!0,html:y}),avatarUrl:C}),(t||Z||te)&&Object(u.c)("div",{children:[t,Boolean(null==Z||null===(e=Z.topics)||void 0===e?void 0:e.length)&&Object(u.c)(U,{children:[Object(u.b)("span",{css:{marginRight:".3em"},children:Object(u.b)(w.b,{})}),Object(u.c)("div",{children:[Object(u.b)(N.a,{expandable:!1,noHoverCard:!0,topics:Z.topics,user:i}),"的优秀答主"]})]}),te&&Object(u.c)(U,{color:"GBL05A",children:[Object(u.b)(b.Box,{mr:".3em",children:Object(u.b)(g.a,{text:!0,center:!0})}),Object(u.b)("div",{children:Object(u.c)(j.CJKSpace,{children:[d.map((function(e,t){return Object(u.c)(h.Link,{to:"//www.zhihu.com/".concat(O?"org":"people","/").concat(e.urlToken),target:"_blank",children:[e.name,t<X-1&&"、"]},t)})),"也关注了",S.O[V]]})})]})]}),Object(u.c)("div",{children:[Object(u.c)(R.a,{children:[Object(u.b)(R.a.Item,{tag:P.a,preset:"plain",to:"".concat(Q,"/answers"),name:"回答",value:L,target:"_blank"}),Object(u.b)(R.a.Item,{tag:P.a,preset:"plain",to:"".concat(Q,"/posts"),name:"文章",value:z,target:"_blank"}),Object(u.b)(R.a.Item,{tag:P.a,preset:"plain",to:"".concat(Q,"/followers"),name:"关注者",value:A,target:"_blank"})]}),i&&!ee&&Object(u.b)(B.a,{className:"HoverCard-buttons",user:i,onModalOpen:function(){n.hoverCardElement.style.opacity="0",n.setState({childModalOpened:!0})},onModalClose:function(){return n.setState({childModalOpened:!1})}})]})]}))}}]),n}(p.PureComponent);I.contextTypes={currentUser:d.a.object},t.default=Object(f.connect)((function(e,t){var n=t.id,r=t.urlToken,a=e.entities,o=e.people.mutualsByUser,i=a.users[r]||Object.values(a.users).find((function(e){return e.id===n}))||t.user,c=o[r||n]||{ids:A,isFetching:!1},l=c.ids,u=c.isFetching;return{user:i,mutuals:z(l,a.users),isFetching:u}}))(I)},999:function(e,t,n){e.exports=n(209),e.exports.CJKSpace=n(1169).CJKSpace}}]);
//# sourceMappingURL=main.user-hover-card.368b5c7b198846d8a44a.js.map