(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1e3:function(e,t,n){var a=n(1077),o=n(1001),r=n(367),i=n(451);e.exports=function(e,t,n){e=i(e);var c=(t=r(t))?o(e):0;return t&&c<t?a(t-c,n)+e:e}},1001:function(e,t,n){var a=n(1079),o=n(953),r=n(1080);e.exports=function(e){return o(e)?r(e):a(e)}},1002:function(e,t,n){var a=n(1390);function o(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var o=a(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(this,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},1003:function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}function o(e,t){for(var n,a=0,o="",r=e.length,i=0;i<r&&((n=e[i]).charCodeAt(0)<128?a+=1:a+=2,o+=n,!(a>=t-1));i+=1);return o}n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c}));var r=null;function i(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"undefined"==typeof document?t=o(n=e.replace(/<.+?>/g,""),a):((r=r||document.createElement("div")).textContent=e,t=o(n=r.textContent.replace(/<.+?>/g,""),a));var l=!1;return t!==n&&(l=!0,t=t.slice(0,t.length-i.length),t+=i),c?{output:t,truncated:l}:t}function c(e){return/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g.test(e)}},1004:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var a=n(2),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(33),u=n(1),d=n(3),b=n.n(d),f=n(0),p=n(19),h=n(24),m=n(34),v=n(164),g=n(521),O=n(200),j=n(134);var y=n(125),C=n(512),w=function(e,t){var n=t.urlToken;return e.people.allFavlistsByUser[n]||{}},x=function(e){return e.currentUser},k=(Object(y.a)(O.a.GET_ALL_FAVLISTS,(function(e,t,n){return function(a,o){var r=o();if(e=e||x(r),!t){var i=w(r,{urlToken:e}),c=i.offset,l=void 0===c?0:c,s=i.limit;t={offset:l,limit:void 0===s?10:s}}return{action:Object.assign(Object.assign({urlToken:e,paging:t},j.a.enableSchema&&{schema:C.b}),{},{extra:n}),fetcher:function(e,t){var n=t.next,a=t.offset,o=void 0===a?0:a,r=t.limit,i=void 0===r?10:r;return n?j.a.http(n):j.a.http("/api/v4/people/".concat(e,"/collections"),{query:{include:"data[*].updated_time,answer_count,follower_count,creator,is_public",offset:o,limit:i}})}(e,t)}}})),Object(y.a)(O.a.GET_ALL_FAVLISTS_WITH_RELATIONS,(function(e,t,n,a,o){return function(r,i){var c=i();if(e=e||x(c),!a){var l=w(c,{urlToken:e}),s=l.offset,u=void 0===s?0:s,d=l.limit;a={offset:u,limit:void 0===d?10:d}}var b=Object.assign(Object.assign({contentType:t,contentId:n,urlToken:e,paging:a},j.a.enableSchema&&{schema:C.b}),{},{extra:o});return{action:b,fetcher:function(e){var t=e.contentType,n=e.contentId,a=e.paging,o=(a=void 0===a?{}:a).next,r=a.offset,i=void 0===r?0:r,c=a.limit,l=void 0===c?10:c;return o?j.a.http(o):j.a.http("/api/v4/collections/contents/".concat(t,"/").concat(n),{query:{offset:i,limit:l}})}(b)}}}))),S=["ids"];function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var R=function(){return n.e(72).then(n.bind(null,1134)).then((function(e){return e.FavlistsModal}))},T={ids:[],isFetching:!1,isDrained:!1},I=Object(m.createSelector)((function(e){return e.people.allFavlistsByUser[e.currentUser]||T}),(function(e){return e.entities.favlists}),(function(e,t){var n=e.ids,a=Object(s.default)(e,S);return Object.assign(Object.assign({},a),{},{items:n.map((function(e){return t[e]}))})}));var E=function(e){Object(i.a)(n,e);var t=A(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onFavlistAdd=function(){for(var t=e.props,n=t.urlToken,a=t.onFavlistAdd,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return a.apply(void 0,r.concat([{urlToken:n}]))},e.onLoad=function(){for(var t=e.props,n=t.onLoad,o=t.type,r=t.id,i=t.urlToken,c=t.onUpdateReaction,l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return n.apply(void 0,[i,o,r].concat(s)).then((function(e){c({contentType:o,contentId:r,relations:e.payload.data.reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(a.a)({},t.id,t.isFavorited))}),{})})}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.context.currentUser||{};return Object(u.b)(v.a,Object.assign(Object.assign({getComponent:R},this.props),{},{authRequired:this.context.authRequired,isUserActive:Boolean(e.isActive),onLoad:this.onLoad,onFavlistAdd:this.onFavlistAdd}))}}]),n}(f.Component);E.contextTypes={authRequired:b.a.func,currentUser:b.a.object};var N=Object(p.compose)(Object(h.connect)((function(e,t){var n=t.id,a=t.type,o=e.favlists.relations,r=e.currentUser,i=I(e);return{isFetching:i.isFetching,isDrained:i.isDrained,items:i.items,relations:o["".concat(a,"_").concat(n)],zaEnabled:!0,urlToken:r}}),(function(e,t){return{onUpdateFav:function(){return e(g.b.apply(void 0,arguments))},onFavlistAdd:t.onFavlistAdd||function(){return e(g.a.apply(void 0,arguments))},onLoad:function(){return e(k.apply(void 0,arguments))},onUpdateReaction:function(){return e(g.c.apply(void 0,arguments))}}})))(E)},1016:function(e,t,n){"use strict";function a(e){var t=String(e);return t.length<2&&(t="0"+t),t}function o(e){if(!isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(a(n),":").concat(a(t))}n.d(t,"a",(function(){return o}))},1021:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(31),o=n.n(a),r=n(21),i=n.n(r),c=n(25),l=n.n(c),s=n(23),u=n.n(s),d=n(27),b=n.n(d),f=n(14),p=n.n(f),h=n(39),m=n.n(h),v=n(0),g=n(13),O=n.n(g),j=n(7),y=["className"];function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return b()(this,n)}}var w=function(e){u()(n,e);var t=C(n);function n(){return i()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=o()(e,y);return Object(j.g)("textarea",m()({},n,{className:O()(t,"TextArea")}))}}]),n}(v.Component)},1030:function(e,t,n){var a=n(216),o=n(94),r=n(132);e.exports=function(e){return"string"==typeof e||!o(e)&&r(e)&&"[object String]"==a(e)}},1031:function(e,t,n){"use strict";var a=n(1087);n.d(t,"getReferencedContent",(function(){return a.d})),n.d(t,"isCoCreateRelation",(function(){return a.e})),n.d(t,"isReferenceRelation",(function(){return a.f}));var o=n(1624);n.d(t,"CoCreationLabel",(function(){return o.a}));var r=n(1625);n.o(r,"CancelCoCreation")&&n.d(t,"CancelCoCreation",(function(){return r.CancelCoCreation})),n.o(r,"CoCreationLinkCard")&&n.d(t,"CoCreationLinkCard",(function(){return r.CoCreationLinkCard})),n.o(r,"CreationRelationshipBar")&&n.d(t,"CreationRelationshipBar",(function(){return r.CreationRelationshipBar})),n.o(r,"renderDualAuthor")&&n.d(t,"renderDualAuthor",(function(){return r.renderDualAuthor}));var i=n(1726);n.d(t,"CreationRelationshipBar",(function(){return i.a}));var c=n(1626);n.d(t,"CoCreationLinkCard",(function(){return c.a}));var l=n(1627);n.d(t,"renderDualAuthor",(function(){return l.a}));var s=n(1742);n.d(t,"CancelCoCreation",(function(){return s.a}))},1032:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i}));var a=n(30),o=50,r={expand:2765,title:2812,voteUp:2756,voteDown:2761,toggleComment:2757,share:2758,favlists:2759,thank:2767,options:2760,report:2796,ignore:2821,follow:2797,getCommentAction:function(e){return e?"Expand":"Collapse"}},i=a.i+10},1045:function(e,t,n){"use strict";var a=n(1),o=n(24),r=n(46),i=n(42),c=n(45),l=n.n(c),s=n(205);t.a=Object(o.connect)((function(e){var t;return{vipInfo:null===(t=Object(r.b)(e))||void 0===t?void 0:t.vipInfo}}))((function(e){var t=e.widget,n=e.className,o=e.vipInfo,r=t.id,c=t.url;return Object(a.b)(s.a,{className:n,onClick:function(){var e;(null==o||null===(e=o.widget)||void 0===e?void 0:e.id)!=="".concat(r)&&(l.a.set("widgetId",r),l.a.set("widgetUrl",c))},preset:"link",a:!0,to:"https://".concat(i.a.wwwHost,"/settings/stickers"),children:Object(a.b)("img",{src:c,style:{width:"100%"},alt:""})})}))},1051:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(159),o=n(88),r=n(65);function i(e,t){Object(r.a)(2,arguments);var n=Object(o.a)(e),i=Object(a.a)(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var c=n.getDate(),l=new Date(n.getTime());l.setMonth(n.getMonth()+i+1,0);var s=l.getDate();return c>=s?l:(n.setFullYear(l.getFullYear(),l.getMonth(),c),n)}},1052:function(e,t,n){var a=n(476);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:a(e,t,n)}},1053:function(e,t,n){var a=n(1081),o=n(953),r=n(1082);e.exports=function(e){return o(e)?r(e):a(e)}},1054:function(e,t,n){"use strict";var a=n(33),o=n(1),r=n(36),i=n(1154),c=["onClick","text"],l=function(e){var t=e.onClick,n=e.text,l=Object(a.default)(e,c);return Object(o.c)(r.c,Object.assign(Object.assign({preset:"link",onClick:t,css:{fontSize:15}},l),{},{children:[Object(o.b)(i.a,{text:!0,center:!0})," ",n]}))};l.defaultProps={text:"修改"},t.a=l},1056:function(e,t,n){"use strict";var a,o=n(4),r=n(33),i=n(49),c=n(1),l=n(0),s=n.n(l),u=n(19),d=n(472),b=n(44),f=n.n(b),p=n(22),h=n.n(p),m=n(436),v=n.n(m),g=n(40),O=n.n(g),j=n(53),y=n.n(j),C=n(207),w=n.n(C),x=n(28),k=n.n(x),S=n(21),A=n.n(S),R=n(25),T=n.n(R),I=n(31),E=n.n(I),N=n(64),B=n.n(N),z=n(913),L=n(3),P=n.n(L),M=n(13),D=n.n(M),_=n(89),V=n.n(_),U=n(138),F=n(6),q=n(2211),H=n.n(q),G=n(178),K=n(2760),W=n(2001),Z=n(2212),Q=n.n(Z),Y=n(74),J=n(43),X=n(897),$=n(35),ee=n(47),te=n(83),ne=(n(646),n(7)),ae=n(68),oe=n.n(ae),re=n(650),ie=n.n(re),ce=n(52),le=n.n(ce),se=n(1712),ue=["text","target","url","image","imageWidth","imageHeight","component","className","size","children"],de=["inEditor","data-text","href","zaBlock"],be=["root"],fe=["as","tag","className","html","clearBoth","richContentKey","root","Portal","useHooks"],pe=["src","useWebP","useMp4","onRef","onLoadStateChange"],he=["html","css","options","linkCardInfo"],me=["lazyLoadImageOptions","useGifPortalOption"];function ve(e){return e.reduce((function(e,t){return t||(t={}),"function"==typeof t?function(n){return Object.assign(Object.assign({},e(n)),t(n))}:function(n){return Object.assign(Object.assign({},e(n)),t)}}),(function(e){return{}}))}var ge=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}};function Oe(e){var t=this;return e.length?function(n,a){for(var o=e.length-1,r=n;o>=0;)r=e[o].call(t,r,a),o--;return r}:B.a}var je=s.a.forwardRef((function(e,t){var n=V()(e,["entityType","entityData","notCommerce"]),a=n.text,o=n.target,r=n.url,i=n.image,l=n.imageWidth,s=n.imageHeight,u=n.component,d=n.className,b=n.size,f=n.children,p=E()(n,ue),h=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return"180x120";if(n<=.8)return"120x160"}return"ipico"}(l,s),m=Object(U.imgUrl)(i,h);return Object(c.b)(u,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ref:t,target:o,href:r,"data-draft-node":"block","data-draft-type":"link-card"},m&&{"data-image":m}),l&&{"data-image-width":l}),s&&{"data-image-height":s}),b&&{"data-size":b}),a!==r&&a&&{"data-text":a}),{},{className:D()("LinkCard new",d)},p),{},{children:f||Object(c.c)(c.a,{children:[Object(c.c)("span",{className:"LinkCard-contents",children:[Object(c.b)("span",{className:"LinkCard-title loading","data-text":!0}),Object(c.b)("span",{className:"LinkCard-desc loading"})]}),Object(c.b)("span",{className:"LinkCard-image LinkCard-image--default"})]})}))}));je.propTypes={component:P.a.oneOfType([P.a.string,P.a.func]),target:P.a.string,url:P.a.string.isRequired,text:P.a.string,image:P.a.string,imageWidth:P.a.oneOfType([P.a.string,P.a.number]),imageHeight:P.a.oneOfType([P.a.string,P.a.number])},je.defaultProps={component:"a",target:"_blank"};var ye={answer:"回答",article:"文章",zvideo:"视频",question:"问题",collection:"收藏夹",roundtable:"圆桌",topic:"话题"},Ce={voteupCount:"赞同",commentCount:"评论",playCount:"播放",followerCount:"关注",answerCount:"回答",visitCount:"浏览"},we={answer:["voteupCount","commentCount"],article:["voteupCount","commentCount"],zvideo:["playCount","voteupCount"],question:["followerCount","answerCount"],collection:["visitCount","followerCount"],default:["followerCount","visitCount"]},xe=function(e){var t=e.twoLine,n=e.children;return Boolean(n)&&Object(c.b)("span",{className:D()("LinkCard-title",{"two-line":t}),children:n})},ke=function(e){var t=e.data,n=t.objectType,a=(we[n]||we.default).map((function(e){var n=t[e];return"".concat(Object(G.cnNiceNumber)(n)).concat(Ce[e])})).filter(Boolean).join(" · ");return Object(c.c)("span",{className:"LinkCard-desc",children:[a,Object(c.b)("span",{className:"LinkCard-tag",children:ye[n]})]})},Se=function(e){var t=e.url,n=Object(l.useMemo)((function(){var e=null,n=H()(t,!0);return"link.zhihu.com"===n.hostname&&(e=n.query.target),(e||t).replace(/^https?:\/\//,"")}),[t]);return Object(c.c)("span",{className:"LinkCard-desc",children:[Object(c.b)(K.a,{size:14,center:!0}),n]})},Ae=function(e){var t=e.url,n=e.isVideo,a=e.ratio,o=void 0===a?1:a,r=e.onClick;return Boolean(t)&&Object(c.c)("span",{className:"LinkCard-image",style:{height:60*o},children:[Object(c.b)("img",{src:t,onClick:r,alt:n?"点击可播放视频":""}),n&&Object(c.b)("span",{className:"LinkCard-image--video",children:Object(c.b)(W.a,{size:10,center:!0})})]})},Re=function(e,t){var n=e.url,a=e.data,o=e.onClick,r=e.onClickImage,i=a.title,l=a.thumbnail,s=a.objectType;return Object(c.c)(c.a,{children:[Object(c.c)("span",{ref:t,className:"LinkCard-contents",onClick:o,children:[Object(c.b)(xe,{twoLine:!0,children:i}),s?Object(c.b)(ke,{data:a}):Object(c.b)(Se,{url:n})]}),Object(c.b)(Ae,{url:l,isVideo:"zvideo"===s,onClick:r})]})},Te=s.a.forwardRef(Re),Ie=function(e){var t=e.className,n=e.html;return n?Object(c.b)("span",{className:"LinkCard-richText ".concat(t),dangerouslySetInnerHTML:{__html:"<object>".concat(n,"</object>")}}):null},Ee=function(e){var t=e.data,n=t.title,a=t.desc,o=t.url,r=t.image,i=t.ratio,l=t.isVideo;return Object(c.c)(c.a,{children:[Object(c.c)("span",{className:"LinkCard-contents",children:[Object(c.b)(xe,{twoLine:!0,children:n},"title"),Object(c.b)(Ie,{className:"LinkCard-desc",html:a}),!a&&Object(c.b)(Se,{url:o},"url")]}),Object(c.b)(Ae,{url:r,ratio:i,isVideo:l})]})},Ne={ANSWER:"Answer",ARTICLE:"Column",ZVIDEO:"Zvideo",QUESTION:"Question",COLLECTION:"Collection",ROUNDTABLE:"Roundtable",SPECIAL:"Special",TOPIC:"Topic"},Be=function(e){var t=Object(l.useMemo)((function(){return function(e){var t={};if(e.data){var n=Object(F.camelizeKeys)(JSON.parse(e.data)),a=n.source,o=void 0===a?{}:a,r=n.display,i=void 0===r?{}:r,c=n.zaData,l=void 0===c?{}:c,s=i.cardOpenUrl,u=i.title,d=i.content,b=i.desc,f=i.image||{};t={source:o,url:s,title:u,content:d,desc:b,image:f.imageUrl,ratio:f.ratio,isVideo:f.isVideo,zaAttachInfo:l.attachInfo}}return Object.assign(Object.assign(Object.assign({},t),e),{},{title:e.text||t.title,image:t.image||e.image})}(e)}),[e]),n=t.source,a=t.target,o=t.title,r=t.url,i=t.zaAttachInfo;return Object(c.b)(je,{notCommerce:!0,target:a,text:o,url:r,"data-za-attach-info":i,"data-za-content-type":Ne[null==n?void 0:n.contentType]||"Unknown",className:"static",children:Object(c.b)(Ee,{data:t})})},ze=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,Le=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.decodeValue,o=void 0!==a&&a,r={};t=ze.exec(e);){var i=t[1],c=t[3]||t[4];r[i]=(o?Me(c):c)||""}return r},Pe=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}function De(){return Math.max(window.innerHeight/10,100)}var _e=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t);if([n.overflow,n.overflowY,n.overflowX].some((function(e){return"scroll"===e||"auto"===e})))return t;t=t.parentNode||t.parentElement}return window};function Ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=_e(e),o=e.getBoundingClientRect().top+(a.pageYOffset||a.scrollTop||0)-(n?De():0)-t;a.scrollTo({top:o,behavior:"smooth"})}var Ue=/<a\b([^>]*data-draft-type="link-card"[^>]*)>(.*?)<\/a>/g,Fe=function(e){var t=e.target,n=e.url,a=e.component,o=e.className;return Object(c.b)(a,{target:t,href:n,"data-draft-node":"block","data-draft-type":"link-card","data-is-ecommerce":"1",className:D()("LinkCard",o),children:Object(c.c)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard",children:[Object(c.b)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper",children:Object(c.b)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})}),Object(c.c)("div",{className:"LinkCard-ecommerceLoadingCardLoadingbar",children:[Object(c.b)("span",{}),Object(c.b)("span",{})]})]})})};Fe.defaultProps={component:"a",target:"_blank"};var qe=/<a\b([^>]*BIZ(=|%3D)ECOMMERCE[^>]*)>(.*?)<\/a>/g;var He=function(){function e(t){var n,a,o,r=this;A()(this,e),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.url||(r.url=e),e!==r.url)throw new Error("mismatch url\n".concat(e,"\n").concat(r.url),e,r.url);return new Promise((function(e,n){r.addToQueue({options:t,resolve:e,reject:n})}))},(a="fetch")in(n=this)?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,this.instance=null,this.customFetch=t,this.delay=200,this.maxDelay=1e3,this.url="",this.queueMaxLength=10,this.queue=[],this.startTime=Date.now(),this.timeout=null,this.initialized=!1}var t;return T()(e,[{key:"initConfig",value:function(e){var t=e.delay,n=e.maxDelay,a=e.maxBatchCount;t&&(this.delay=t),n&&(this.maxDelay=n),a&&(this.maxBatchCount=a),this.initialized=!0}},{key:"buildFetchParams",value:function(e){var t=k()(e,1)[0].options,n=e.reduce((function(e,t){var n,a;return(null===(n=(a=t.options).dataBuilder)||void 0===n?void 0:n.call(a,e,t))||e}),{}),a=this.url,o=!t.method||"GET"===t.method.toUpperCase();if(o){var r=H()(a,!0);r.query=Object.assign(Object.assign({},r.query),n),a=r.toString()}return[a,Object.assign(Object.assign({},t),{},{data:o?null:Object.assign(Object.assign({},t.data),n)})]}},{key:"doFetch",value:(t=w()(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.queue,this.queue=[],e.prev=4,e.next=7,this.customFetch.apply(this,y()(this.buildFetchParams(t)));case 7:n=e.sent,t.forEach((function(e){var t=e.options,a=e.resolve;t.resultBuilder?a(t.resultBuilder(n)):a(n)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.forEach((function(t){return t.reject(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return t.apply(this,arguments)})},{key:"addToQueue",value:function(e){var t=this;this.initialized||this.initConfig(e.options),clearTimeout(this.timeout),(Date.now()-this.startTime>this.maxDelay||this.queue.length>=this.maxBatchCount)&&(this.startTime=Date.now(),this.doFetch()),this.queue.push(e),setTimeout((function(){t.startTime=Date.now(),t.doFetch()}),this.delay)}}]),e}(),Ge=null,Ke=function(){throw new Error("Not implemented")},We=function(){return function(e){return function(t,n){return Ge||(Ge=new He(e)),Ge.fetch(t,n)}}(function(e){return function(){var t=w()(O.a.mark((function t(n,a){var o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,a);case 2:return o=t.sent,t.t0=F.camelizeKeys,t.next=6,o.json();case 6:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}("undefined"!=typeof fetch?fetch:Ke))},Ze={},Qe=function(e,t,n){var a=e["data-text"],o=e.href,r=e.zvideoLinkCardProps;Object(l.useEffect)((function(){n&&Object(X.onViewedOnce)(t.current,(function(){return e=t.current,void $.a.trackCardShow(e,{id:7844},{button:{text:"inlinezvideo"}});var e}))}),[n,t]);var i=Object(J.d)((function(e){!function(e,t,n){var a;$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)}(e,{title:a,url:o,video:{}})})),c=Object(J.d)((function(e){!function(e,t,n){var a;$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)}(e,r,{title:a,url:o})}));return n?{handleImageClick:i,handleInfoClick:c}:{}},Ye={answer:"Answer",article:"Column",zvideo:"Zvideo",question:"Question",collection:"Collection",roundtable:"Roundtable",topic:"Topic"},Je=s.a.forwardRef((function(e,t){var n=V()(e,["zvideoLinkCardProps"]),a=n.inEditor,o=n["data-text"],r=n.href,i=n.zaBlock,s=E()(n,de),u=Object(l.useRef)(),d=function(e){var t=Object(l.useRef)(0),n=e.inEditor,a=e["data-offset-key"],o=e["data-text"],r=e["data-image"],i=e.href,c=Object(l.useState)((function(){return n&&Ze[a]||null})),s=k()(c,2),u=s[0],d=s[1],b=Object(J.f)({once:!0}),f=k()(b,2),p=f[0],h=f[1],m=Object(J.d)((function(e){var t=e||u;if(!t||0===Object.keys(t).length)return{objectType:null,title:o||i,thumbnail:r};t.title=o||t.title||i,t.thumbnail=r||t.thumbnail;var c=Object.assign(Object.assign({},t),{},{cached:!0});return n&&(Ze[a]=c),c})),v=Object(J.d)(We()),g=Object(J.d)(w()(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current+=1,e.prev=1,e.next=4,v("https://www.zhihu.com/api/v4/link_card_infos",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},dataBuilder:function(e){return e.urls="".concat(e.urls?e.urls+",":"").concat(i),e},resultBuilder:function(e){return e[i]}});case 4:n=e.sent,d(m(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.current<=1?g():d(m());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))));return Object(l.useEffect)((function(){!h||u&&u.cached||g()}),[h,u,g]),Object(l.useEffect)((function(){n&&d(m())}),[n,m,o,r]),[p,u]}(e),b=k()(d,2),f=b[0],p=b[1],h=Qe(e,u,"zvideo"===(null==p?void 0:p.objectType)),m=h.handleImageClick,v=h.handleInfoClick,g=Object(l.useCallback)(ge(t,f,u),[]),j=a?Te:Y.a,y=a?null:{as:Te,shouldTrackShow:!0,zaText:!0,zaType:"Button",zaAction:"OpenUrl",zaBlock:i,extra:{link:{url:r}},"data-za-module":"Content"},C=Object(c.b)(j,Object.assign(Object.assign({},y),{},{url:r,data:p,onClick:v,onClickImage:m}));return Object(c.b)(je,Object.assign(Object.assign({ref:g,text:o,url:r,component:"a"},s),{},{children:Boolean(p)&&Object(c.b)(Y.b,{content:{type:Ye[p.objectType]||"Unknown"},children:C})}))})),Xe=function(e){return function(t){var n=Object(l.useState)(null),a=k()(n,2),o=a[0],r=a[1],i=e.idAttr,s=e.selector,u=e.component,d=e.targetClassName,b=e.cardDataFilter,f=e.getCardProps,p=t.root,h=E()(t,be),m=i&&s&&d&&Object(l.useCallback)((function(e){return function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var a=e.getAttribute(t),o=document.createElement("div");return o.className=n,e.parentNode.replaceChild(o,e),{data:{id:a},target:o}}}({idAttr:i,targetClassName:d})(e)}),[i,d]),v=Object(l.useMemo)((function(){return m?function(e){return Array.from(e.querySelectorAll(s)).map(m)}:B.a}),[m,p,s]);return Object(l.useEffect)((function(){if(p||s&&b){var e=(b||v)(p).map((function(e){var t=e.data,n=e.target,a=null;return"function"==typeof f&&(a=f(t)),Object(ee.createPortal)(Object(c.b)(u,Object.assign(Object.assign({id:t.id},a),h),t.id),n)}));e.length>0&&r(e)}}),[p]),o}},$e=Xe({cardDataFilter:function(e){return Array.from(e.querySelectorAll("a.LinkCard[data-draft-type=link-card]:not([data-is-ecommerce])")).map((function(e){var t,n=(t=e.attributes,Array.from(t).reduce((function(e,t){return"class"===t.name?e.className=t.value:e[t.name]=t.value,e}),{})),a=document.createElement("div");return a.className="RichText-LinkCardContainer",e.parentNode.replaceChild(a,e),{data:n,target:a}}))},getCardProps:function(e){return e.href&&e.href.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)?e.zaBlock="ZTextZVideoLinkCard":e.zaBlock="ZTextLinkCard",e},component:Je}),et=function(e){return{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",padding:12,borderRadius:"inherit",height:80,boxSizing:"border-box",background:e.colorMod(e.colors.GBK10A).alpha(.88),color:e.colors.GBK08A}},tt=function(e){return{width:60,height:60,background:e.colors.GBK09A,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,marginRight:10}},nt=function(e){return{height:60,flex:1,display:"flex",flexDirection:"column",span:{height:16,display:"inline-block",background:e.colors.GBK09A},"span:nth-of-type(1)":{width:60,marginBottom:4},"span:nth-of-type(2)":{width:127}}},at=function(e){return{".LinkCard.old":{position:"relative",display:"block",margin:"1em auto",width:390,boxSizing:"border-box",borderRadius:12,maxWidth:"100%",overflow:"hidden","&,&:hover":{textDecoration:"none",border:"none !important",color:"inherit !important"}},".LinkCard-ecommerceLoadingCard":et(e),".LinkCard-ecommerceLoadingCardAvatarWrapper":tt(e),".LinkCard-ecommerceLoadingCardNetwork":{width:20,height:20},".LinkCard-ecommerceLoadingCardLoadingbar":nt(e)}},ot=function(e){return{position:"relative",display:"flex",boxSizing:"border-box",flexDirection:"row",alignItems:"center",width:390,minHeight:84,borderRadius:8,maxWidth:"100%",overflow:"hidden",margin:"16px auto",padding:"12px 12px 9px 12px",backgroundColor:e.colors.GBK10A,"&, &:hover":{textDecoration:"none",border:"none !important",color:"inherit !important"},".LinkCard-contents":{display:"block",flex:"1 1 auto",position:"relative",".loading":{height:14,background:e.colors.GBK09A,borderRadius:7},"&.withTitle":{marginBottom:3}},".LinkCard-title":Object.assign(Object.assign({display:"block",fontSize:15,fontWeight:500,lineHeight:1.4,marginBottom:2,color:e.colors.GBK02A},Object(te.d)(1)),{},{"&.two-line":Object.assign({lineHeight:"20px"},Object(te.d)(2)),"&.loading":{marginBottom:8,width:"80%","&.withTitle":{marginBottom:6}},"&.loadingTitle":{marginBottom:5}}),".LinkCard-excerpt":Object.assign(Object.assign({display:"block",textOverflow:"ellipsis",fontSize:13,lineHeight:"18px",color:e.colors.GBK06A,marginBottom:4},Object(te.d)(1)),{},{".LinkCard-author":{color:e.colors.GBK03A}}),".LinkCard-desc":Object.assign(Object.assign({display:"block",fontSize:13,height:18,lineHeight:"18px",color:e.colors.GBK06A,wordBreak:"break-all"},Object(te.d)(1)),{},{".LinkCard-tag,.tag":{display:"inline-block",fontSize:11,marginLeft:8,padding:"0 4px",borderRadius:3,background:e.colorMod(e.colors.GBK08A).alpha(.3)},"&.loading":{width:"40%"},svg:{marginRight:2}}),".LinkCard-image":{flex:"0 0 auto",backgroundColor:e.colors.GBK09A,backgroundSize:"cover",backgroundPosition:"center",position:"relative",display:"block",width:60,height:60,marginLeft:20,objectFit:"cover",borderRadius:"inherit",overflow:"hidden","&.LinkCard-image--default":{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.colors.GBK09A,color:e.colors.GBK08A,svg:{color:e.colors.GBK06A}},img:{width:"100%",height:"100%",objectFit:"cover"},".LinkCard-image--video":{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",width:24,height:24,borderRadius:12,background:e.colorMod(e.colors.GBK99C).alpha(.9),pointerEvents:"none",svg:{color:e.colors.GBK03A}}},".LinkCard-richText":{".text":{color:e.colors.GBK03A},".bold":{fontWeight:e.fontWeights.bold},".tag":{marginLeft:4}}}},rt=function(e){return{".LinkCard.new":ot(e)}},it=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))},ct=function(e){return Object.assign(Object.assign({},at(e)),rt(e))},lt=function(e){return Object.assign(Object.assign({},rt(e)),at(e))},st="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},ut=function(e){var t=Object(l.useRef)(null);Object(l.useEffect)((function(){if(e)return st((function(){e&&(t.current=function(e){var t=new IntersectionObserver((function(e){e.forEach(n)}),{threshold:[.1]});function n(e){if(0!==e.intersectionRatio){var n=e.target;n.dataset.zaDetailViewId=n.cardShowViewId,$.a.trackCardShow(n,{},{link:{url:n.href}}),t.unobserve(n),n.clickViewId&&(n.dataset.zaDetailViewId=n.clickViewId)}}return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'},{cardShowViewId:7692,selector:"a.FileLinkCard .FileLinkCard-info"},{cardShowViewId:9744,selector:".Catalog"}].forEach((function(n){var a=n.selector,o=n.cardShowViewId,r=n.clickViewId;Array.from(e.querySelectorAll(a)).forEach((function(e){e.cardShowViewId=o,e.clickViewId=r,t.observe(e)}))})),function(){t.disconnect()}}(e))})),function(){t.current&&t.current()}}),[e])},dt=function(e){return{elementLocation:{type:"Button",content:{type:e.dataset.zaContentType}}}},bt=function(e){return{attachedInfoBytes:e.dataset.zaAttachInfo}},ft=[{selector:"a.external, a.internal",zaBlock:"ZTextLink"},{selector:"a.member_mention, a.UserLink-link",zaBlock:"ZTextMention"},{selector:"a.video-box",zaBlock:"ZTextVideoCard"},{selector:'a.LinkCard.old[data-draft-type="link-card"]',zaBlock:"ZTextLinkCard"},{selector:'a.LinkCard.new.static[data-draft-type="link-card"]:not([data-za-content-type="Zvideo"])',zaBlock:"ZTextLinkCard",viewInfoBuilder:dt,extraInfoBuilder:bt},{selector:'a.LinkCard.new.static[data-draft-type="link-card"][data-za-content-type="Zvideo"]',zaBlock:"ZTextZVideoLinkCard",viewInfoBuilder:dt,extraInfoBuilder:bt},{selector:"a.FileLinkCard",zaBlock:"ZTextFileLinkCard"}],pt=function(e){var t,n,a=e.element,o=e.config,r=null===(t=o.viewInfoBuilder)||void 0===t?void 0:t.call(o,a,o),i=Object.assign({elementLocation:{type:"Button"},block:o.zaBlock},r),c=Object.assign({action:"OpenUrl",elementLocation:{type:"Button"},block:o.zaBlock,eventType:"Click"},r),s=Object.assign({link:{url:a.href}},null===(n=o.extraInfoBuilder)||void 0===n?void 0:n.call(o,a,o)),u=Object(Y.i)().trackEvent,d=Object(Y.h)(i,s),b=Object(J.d)((function(e){u(c,s),"ZTextLinkCard"===o.zaBlock&&a.dataset.isEcommerce&&e.preventDefault()}));return Object(l.useEffect)((function(){return a.addEventListener("click",b),function(){a.removeEventListener("click",b)}}),[]),Object(l.useEffect)((function(){return d(a),function(){return d(null)}}),[]),null},ht=function(e){var t=e.root,n=Object(l.useState)([]),a=k()(n,2),o=a[0],r=a[1];return Object(l.useEffect)((function(){if(t){var e=[];ft.forEach((function(n){var a=n.selector;Array.from(t.querySelectorAll(a)).forEach((function(t){e.push({el:t,config:n})}))})),r(e)}}),[t]),Object(c.b)(l.Fragment,{children:o.map((function(e,t){var n=e.el,a=e.config;return Object(c.b)(pt,{element:n,config:a},t)}))})},mt=/<p><br><\/p>/g,vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solid";return{borderBottom:"1px ".concat(t," ").concat(e.colors.GBK05A)}},gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solid";return{borderBottom:"1px ".concat(t," ").concat(e.colors.GBL07A)}},Ot=function(e){return{color:e.colors.GBL07A,"&:hover":gt(e)}},jt=Object(ne.h)(a||(a=v()(["\n   from {\n    opacity: 0;  \n   }\n   \n   to {\n    opacity: 1;\n  }\n"]))),yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[data-focus-visible]";return h()({outline:"none",transition:"box-shadow 0.3s"},"html".concat(t," &"),{boxShadow:"0 0 0 2px ".concat(e.colors.GBK99A,", 0 0 0 4px ").concat(e.colorMod(e.colors.GBL01A).alpha(.3))})},Ct={"--zFontSansSerif":"-apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif","--zFontMonospace":"Menlo, Monaco, Consolas, 'Andale Mono', 'lucida console', 'Courier New', monospace"},wt=[function(e){return e?e.replace(mt,'<p class="ztext-empty-paragraph"><br /></p>'):e}],xt=Object(l.forwardRef)((function(e,t){var n,a=e.as,o=e.tag,r=e.className,i=e.html,l=e.clearBoth,s=void 0!==l&&l,u=e.richContentKey,d=e.root,b=e.Portal,f=e.useHooks,p=E()(e,fe),h=Oe(wt);f(d);var m=null!==(n=null!=a?a:o)&&void 0!==n?n:"div";return Object(c.c)(c.a,{children:[b&&Object(c.b)(b,{root:d}),Object(c.b)(m,Object.assign({ref:t,css:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},function(e){return{"a.UserLink-link":Ot(e),"lazy[data-lazy-status]":{backgroundColor:e.colors.GBK10A},'lazy[data-lazy-status="ok"]':{backgroundColor:"transparent",animation:"".concat(jt," 0.5s ease-in")}}}(e)),function(e){return{wordBreak:"break-word",lineHeight:"1.6","> *:first-of-type":{marginTop:0},"> :last-child":{marginBottom:0},"h1,h2":{clear:"left",marginTop:"calc((".concat("1.4em"," * 2) / 1.2)"),marginBottom:"calc(".concat("1.4em"," / 1.2)"),fontSize:"1.2em",lineHeight:1.5,fontWeight:e.fontWeights.bold},"h3,h4,h5,h6":{clear:"left",marginTop:"calc((".concat("1.4em"," * 1.5) / 1.1)"),marginBottom:"calc(".concat("1.4em"," / 1.1)"),fontSize:"1.1em",lineHeight:"1.5",fontWeight:e.fontWeights.bold},u:Object.assign({textDecoration:"none"},vt(e,"dashed")),b:{fontWeight:e.fontWeights.bold},sup:{fontSize:"0.8em"},"sup[data-draft-type='reference']":{color:e.colors.GBL07A},"a:focus":yt(e),"a.ztext-link,a.internal,a.external":Object.assign(Object.assign({textDecoration:"none",cursor:"pointer"},vt(e)),{},{"&:hover":Object.assign({color:e.colors.GBL07A},gt(e))," > .ellipsis::after":{content:"'...'"},"> .invisible":{font:"0/0 a",color:"transparent",textShadow:"none",backgroundColor:"transparent"},u:{border:"none"}}),"a.member_mention":Ot(e),p:{margin:"".concat("1.4em"," 0")},"p.ztext-empty-paragraph":{margin:"calc((".concat("2.8em","- (").concat("1.4em"," * 2 + 1.6em)) / 2) 0"),"+ .ztext-empty-paragraph":{margin:"".concat("1.4em"," 0")}},hr:{margin:"4em auto",width:"240px",maxWidth:"100%",border:"none",borderTop:"1px solid ".concat(e.colors.GBK08A)},"img[eeimg]":Object.assign({maxWidth:" 100%",verticalAlign:"middle"},e.isDarkMod&&{filter:"invert(1)"}),'img[eeimg="1"]':{margin:"0 3px",display:"inline-block"},'img[eeimg="2"]':{margin:"".concat("1.4em"," 0"),display:"block"},blockquote:{margin:"".concat("1.4em"," 0"),paddingLeft:"1em",color:e.colors.GBK04A,borderLeft:"3px solid ".concat(e.colors.GBK08A)},"ol,ul":{margin:"".concat("1.4em"," 0"),padding:0,"ol,ul":{margin:0},"> ol, > ul":{display:"table-row","&::before":{display:"table-cell",content:"''"}}},ul:{display:"table","&>li":{display:"table-row",listStyle:"none","&::before":{display:"table-cell",content:"'•  '",whiteSpace:"pre"}}},ol:{display:"table",counterReset:"ol","> li":{display:"table-row",listStyle:"none","&::before":{display:"table-cell",textAlign:"right",counterIncrement:"ol",content:"counter(ol) '. '",whiteSpace:"pre"}}},"ol ol":{counterReset:"ol2","li::before":{counterIncrement:"ol2",content:"counter(ol2) '. '"}},"ol ol ol":{counterReset:"ol3","li::before":{counterIncrement:"ol3",content:"counter(ol3) '. '"}},"ol ol ol ol":{counterReset:"ol4","li::before":{counterIncrement:"ol4",content:"counter(ol4) '. '"}},figure:{margin:"".concat("1.4em"," 0"),".content_image,.origin_image":{margin:"0 auto"},figcaption:{marginTop:"calc(0.6em / 0.9)",padding:"0 1em",fontSize:"0.9em",lineHeight:"1.5",textAlign:"center",color:e.colors.GBK06A},"& + figure":{marginTop:"calc(".concat("1.4em"," * 1.6)")},"&[data-size='small'],&:not([data-size]) > [data-size='small']":{clear:"both"},"&[data-size='left'],&:not([data-size]) > [data-size='left']":{float:"left",margin:"0 20px 20px 0",maxWidth:"33%"},"&[data-size='right'],&:not([data-size]) > [data-size='right']":{float:"right",margin:"0 0 20px 20px",maxWidth:"33%"},"&[data-size='collapse']":{marginBottom:0,"& + figure":{marginTop:0}}},".content_image, .origin_image":{display:"block",maxWidth:"100%",margin:"".concat("1.4em"," auto"),"&[data-size='small']":{maxWidth:"40%"},"&.zh-lightbox-thumb":{cursor:"zoom-in"}},code:{margin:"0 2px",padding:"3px 4px",borderRadius:"3px",fontFamily:Ct.zFontMonospace,fontSize:"0.9em",backgroundColor:e.colors.GBK10A},pre:{margin:"".concat("1.4em"," 0"),padding:"calc(0.8em / 0.9)",fontSize:"0.9em",wordBreak:"initial",wordWrap:"initial",whiteSpace:"pre",overflow:"auto",WebkitOverflowScrolling:"touch",background:e.colors.GBK10A,borderRadius:"4px",code:{margin:0,padding:0,fontSize:"inherit",borderRadius:0,backgroundColor:"inherit"}},"li pre":{whiteSpace:"pre-wrap"},"table[data-draft-type='table']":{borderCollapse:"collapse",fontSize:"15px",margin:"".concat("1.4em"," auto"),maxWidth:"100%",tableLayout:"fixed",textAlign:"left",width:"100%","&[data-size='small']":{minWidth:"260px",width:"40%"},"&[data-row-style='striped'] tr:nth-of-type(2n + 1)":{background:e.colors.GBK10A},"td,th":{border:"1px solid ".concat(e.colors.GBK08A),lineHeight:"24px",height:"24px",padding:"3px 12px"},th:{background:e.colors.GBK09A,color:e.colors.GBK02A,fontWeight:500}},"& .video-box, & .link-box":{position:"relative",display:"flex",justifyContent:"space-between",margin:"".concat("1.4em"," 0"),overflow:"auto",whiteSpace:"normal",cursor:"pointer",border:"solid 1px ".concat(e.colors.GBK09A),borderRadius:"4px"}}}(e)),function(e){return{"& .highlight":{margin:"1em 0",pre:{margin:0},".hll":{backgroundColor:e.colors.GBK12A},".c":{fontStyle:"italic",color:e.colors.GBK06A},".err":{color:e.colors.GRD03A},".k":{fontWeight:e.fontWeights.bold},".o":{fontWeight:e.fontWeights.bold},".cm":{fontStyle:"italic",color:e.colors.GBK06A},".cp":{fontWeight:e.fontWeights.bold,color:e.colors.GBK06A},".c1":{fontStyle:"italic",color:e.colors.GBK06A},".cs":{fontStyle:"italic",fontWeight:e.fontWeights.bold,color:e.colors.GBK06A},".gd":{color:e.colors.GRD01A},".ge":{fontStyle:"italic"},".gr":{color:e.colors.GRD03A},".gh":{color:e.colors.GBK06A},".gi":{color:"#12b370"},".go":{color:e.colors.GBK05A},".gp":{color:e.colors.GBK04A},".gs":{fontWeight:e.fontWeights.bold},".gu":{color:e.colors.GBK06A},".gt":{color:e.colors.GRD03A},".kc":{fontWeight:e.fontWeights.bold},".kd":{fontWeight:e.fontWeights.bold},".kn":{fontWeight:e.fontWeights.bold},".kp":{fontWeight:e.fontWeights.bold},".kr":{fontWeight:e.fontWeights.bold},".kt":{fontWeight:e.fontWeights.bold,color:e.colors.GBL07A},".m":{color:e.colors.GBL01A},".s":{color:e.colors.GRD03A},".na":{color:e.colors.GBL01A},".nb":{color:e.colors.GBL01A},".nc":{fontWeight:e.fontWeights.bold,color:e.colors.GBL07A},".no":{color:e.colors.GBL01A},".ni":{color:e.colors.GRD07A},".ne":{fontWeight:e.fontWeights.bold,color:e.colors.GRD03A},".nf":{fontWeight:e.fontWeights.bold,color:e.colors.GRD03A},".nn":{color:e.colors.GBK04A},".nt":{color:e.colors.GBL07A},".nv":{color:e.colors.GBL01A},".ow":{fontWeight:e.fontWeights.bold},".w":{color:e.colors.GBK07A},".mf":{color:e.colors.GBL01A},".mh":{color:e.colors.GBL01A},".mi":{color:e.colors.GBL01A},".mo":{color:e.colors.GBL01A},".sb":{color:e.colors.GRD03A},".sc":{color:e.colors.GRD03A},".sd":{color:e.colors.GRD03A},".s2":{color:e.colors.GRD03A},".se":{color:e.colors.GRD03A},".sh":{color:e.colors.GRD03A},".si":{color:e.colors.GRD03A},".sx":{color:e.colors.GRD03A},".sr":{color:e.colors.GYL02A},".s1":{color:e.colors.GRD03A},".ss":{color:e.colors.GRD03A},".bp":{color:e.colors.GBK06A},".vc":{color:e.colors.GBL01A},".vg":{color:e.colors.GBL01A},".vi":{color:e.colors.GBL01A},".il":{color:e.colors.GBL01A},"&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-thumb:horizontal":{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.5),borderRadius:"6px","&:hover":{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.6)}}}}}(e)),s&&{"&::before, &::after":{clear:"both",content:'""',display:"block"}})},className:D()("RichText","ztext",r,{"RichText--clearBoth":s}),dangerouslySetInnerHTML:{__html:h(i)}},p),u||i)]})}));xt.propTypes={as:P.a.string,tag:P.a.string,html:P.a.string.isRequired,clearBoth:P.a.bool,ref:P.a.func,Portal:P.a.func,useHooks:P.a.func},xt.defaultProps={useHooks:B.a};var kt=s.a.memo(xt),St=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.rootMargin,o=n.threshold,r=n.once,i=void 0===r||r;e=Array.isArray(e)?e:e?[e]:[];var c=Object(l.useRef)(null),s=Object(J.d)(t);Object(l.useEffect)((function(){if(e.length)return c.current&&e.forEach((function(e){return c.current.unobserve(e)})),c.current=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(s(e),i&&c.current.unobserve(e.target))}))}),{rootMargin:a,threshold:o}),e.forEach((function(e){return c.current.observe(e)})),function(){e.forEach((function(e){return c.current.unobserve(e)}))}}),[e,a,JSON.stringify(o),i])},At=n(131);var Rt="function"==typeof Image,Tt={},It=Rt?At((function(e){return new Promise((function(t){return n=e,a=function(e,n){Tt[e]=n,t(n)},(o=new Image).onload=function(){var e=o.width>0&&o.height>0;a(n,e)},o.onerror=function(){a(n,!1)},void(o.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,a,o}))})):function(){return Promise.resolve(!1)},Et=function(e){var t=Tt[e],n=Object(l.useState)(t),a=k()(n,2),o=a[0],r=a[1];return Rt&&void 0===t&&It(e).then(r),o},Nt=oe()((function(){return/Mobile/.test(navigator.userAgent)}));function Bt(e,t){var n={monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}};$.a.trackMonitor({name:t},n)}var zt=function(e){var t=e.onLoadStateChange,n=e.enableWebP,a=e.size,o=e.quality;return function(e){var r=e.target,i=function(e){var t=e.image,n=e.enableWebP,a=e.size,o=e.quality,r=void 0===o?80:o,i=t.dataset,c=i.actualsrc,l=i.actualgif;return n&&l&&l.match(/.gif$/i)?c:(a||(a="720w",!Nt()&&window.devicePixelRatio>=1.5&&(a="1440w"),Nt()&&window.devicePixelRatio*window.innerWidth>=1080&&(a="1440w")),Object(U.imgUrl)(c,{quality:r,size:a}))}({image:r,enableWebP:n,size:a,quality:o});if(n&&(i=function(e){return e.replace(/\.(jpg|png|jpeg|gif)/,".webp")}(i)),r.src=i,r.complete)r.dataset.lazyStatus="ok";else{t&&r.addEventListener("loadstart",(function(){t("loadstart",i)})),r.dataset.lazyStatus="loading";var c=setTimeout((function(){r.complete||Bt(r.url,"image_web_timeout_image"),t&&t("timeout",i)}),15e3);r.addEventListener("load",(function(){r.dataset.lazyStatus="ok",clearTimeout(c),Bt(r.url,"image_web_success_image"),t&&t("load",i)})),r.addEventListener("error",(function(){clearTimeout(c),Bt(r.url,"image_web_fail_image"),t&&t("error",i)}))}}},Lt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useWebP,a=void 0===n||n,o=t.disabled,r=void 0!==o&&o,i=t.onLoadStateChange,c=t.size,s=t.quality,u=Object(l.useState)([]),d=k()(u,2),b=d[0],f=d[1],p=Et("lossless");St(b,zt({onLoadStateChange:i,enableWebP:p&&a,size:c,quality:s}),{rootMargin:"300px"}),Object(l.useEffect)((function(){if(e&&!r){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&f(t)}}),[e,r])},Pt=function(e,t){$.a.trackEvent(e,{action:"StatusReport",element:"Card"},{status:{result:t}})},Mt=function(e,t){var n,a,o;null===(n=window)||void 0===n||null===(a=n.Raven)||void 0===a||null===(o=a.captureException)||void 0===o||o.call(a,e,{fingerprint:["gif2mp4"],extra:t})},Dt=function(e){var t=e.src,n=e.useWebP,a=void 0===n?"auto":n,o=e.useMp4,r=void 0!==o&&o,i=e.onRef,s=e.onLoadStateChange,u=E()(e,pe),d=Object(l.useState)(""),b=k()(d,2),p=b[0],h=b[1],m=Object(l.useState)(null),v=k()(m,2),g=v[0],O=v[1],j=Object(l.useState)(Date.now()),y=k()(j,2),C=y[0],w=y[1],x=Object(l.useState)(!1),S=k()(x,2),A=S[0],R=S[1],T=Object(l.useState)(null),I=k()(T,2),N=I[0],z=I[1],L=Et("animation"),P=Object(l.useCallback)((function(){var e=(Object(re.imgPathParse)(t)||{}).hash;r&&Object(X.onViewedOnce)(g,(function(){var t;(t=e,fetch("https://api.zhihu.com/gif2mp4/".concat(t),{credentials:"include",headers:{"X-Requested-With":"Fetch"}}).then((function(e){return e.json()}))).then((function(e){var t,n,a=e.playlist,o=(null==a||null===(t=a.SD)||void 0===t?void 0:t.play_url)||(null==a||null===(n=a.LD)||void 0===n?void 0:n.play_url);o&&f.a.increment("Gif2Mp4Player.mp4.fetch.success.count"),h(o)})).catch(B.a)}))}),[g,t,r]);Object(l.useEffect)(P,[t,r,g]),Object(l.useEffect)((function(){g&&$.a.setModule(g,{module:"GifItem"})}),[g]),St(g,(function(){$.a.trackCardShow(g,{element:"Card"})})),Object(J.l)((function(){f.a.increment("Gif2Mp4Player.mp4.play.failure.count"),Mt(new Error("Gif2Mp4 play timeout"),{src:t,videoUrl:p}),R(!1)}),A?2e3:null),Object(J.l)((function(){f.a.increment("Gif2Mp4Player.mp4.play.success.count"),f.a.timing("Gif2Mp4Player.mp4.first_frame_time",Date.now()-C-100),R(!1),z(null)}),N);var M=ie()(t,{extension:("auto"===a?L:a)?"webp":"gif"});return Object(c.b)(se.a,Object.assign({videoUrl:p,src:M,onRef:Object(l.useCallback)(ge(i,O),[]),onPlayChange:function(e){e||(w(Date.now()),p&&(f.a.increment("Gif2Mp4Player.mp4.click.count"),R(!0)),$.a.trackEvent(g,{action:"Click",element:"Image"}))},onLoadStart:function(){if(p){var e=le.a.parse(p).expiration;e&&Number(e)<Date.now()/1e3+900&&P()}w(Date.now()),s&&s("loadstart",M)},onSuccess:function(){Pt(g,"Success"),p?A&&z(100):f.a.timing("Gif2Mp4Player.gif.first_frame_time",Date.now()-C),s&&s("load",M)},onFailed:function(e){Pt(g,"Fail"),p&&(A&&(f.a.increment("Gif2Mp4Player.mp4.play.failure.count"),R(!1),z(null)),Mt(e,{videoUrl:p,src:t})),s&&s("error",M)}},u))},_t=function(e){var t=e.dataset,n=t.thumbnail,a={src:n,poster:n,size:t.size},o=document.createElement("div");return o.className="RichText-gifPlaceholder",e.parentNode.replaceChild(o,e),{data:a,target:o}},Vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Component,a=void 0===n?Dt:n,o=Object(l.useState)(null),r=k()(o,2),i=r[0],s=r[1];return Object(l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll("img.origin_image[data-thumbnail],img.content_image[data-thumbnail]"));if(t.length){var n=t.map((function(e){return _t(e)})).map((function(e,t){var n=e.data,o=e.target;return Object(ee.createPortal)(Object(c.b)(a,Object.assign({},n),t),o)}));s(n)}}}),[e]),i},Ut=Oe([function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.linkCardInfo;return e?e.replace(Ue,(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=Le(t,{decodeValue:!0}),r=o.target,i=void 0===r?"_blank":r,l=o.href,s=void 0===l?"":l,u=o["data-image"],d=o["data-image-width"],b=o["data-image-height"],f=o["data-entity-type"],p=o["data-entity-data"],h=o["data-size"],m=o["data-is-ecommerce"];if(m)return e;var v=a.replace(/<[^>]*>/g,"");v=Me(v),s.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)&&!v&&(v="知乎视频");var g=n?Be:je;return Object(z.renderToStaticMarkup)(Object(c.b)(g,Object.assign({text:v,url:s,target:i,image:u,imageWidth:d,imageHeight:b,entityType:f,entityData:Pe(p),size:h},n&&{data:n[s]})))})):e},function(e){return e?e.replace(qe,(function(e,t){var n=Le(t,{decodeValue:!0}),a=n["data-draft-type"],o=n.href,r=n.class;return"link-card"!==a?e:Object(z.renderToStaticMarkup)(Object(c.b)(Fe,{url:o,className:Q()(r,{old:!0,new:!1,static:!1})}))})):e}]),Ft=Object(l.forwardRef)((function(e,t){var n=Object(l.useState)(null),a=k()(n,2),o=a[0],r=a[1],i=e.html,s=e.css,u=e.options,d=void 0===u?{}:u,b=e.linkCardInfo,f=E()(e,he),p=d.lazyLoadImageOptions,h=d.useGifPortalOption,m=E()(d,me);Lt(o,p),ut(o);var v=ve([ct,lt,s]),g=Object(l.useCallback)(ge(t,r),[]);return Object(c.c)(l.Fragment,{children:[!b&&Object(c.b)($e,{css:lt,root:o}),Vt(o,h),Object(c.b)(ht,{root:o}),Object(c.b)(kt,Object.assign({ref:g,html:Ut(i,{linkCardInfo:b}),css:v,root:o,options:m},f))]})})),qt=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,Ht=/<img\b[^<>]*?\bsrc="[^<>]*?"[^<>]*?(\beeimg+)[^<>]*?>/g,Gt=function(e){return e?e.replace(Ht,(function(e){return e.replace(/(.*)(\beeimg)/,'$1loading="lazy" $2')})):e},Kt=n(66),Wt=n(204),Zt=function(e){var t=Object(Wt.b)(),n=Object(l.useCallback)((function(n){t.ZhihuHybrid&&function(e,t){var n=t.root;if(!e.defaultPrevented){var a=e.target;if("img"===a.tagName.toLowerCase()&&(a.src.includes("zhimg")||!a.src.includes("equation"))&&(!a.classList.contains("ztext-gif")||a.parentNode.classList.contains("isPlaying"))){var o=Array.from(n.querySelectorAll(["img"])).filter((function(e){return e.src.includes("zhimg")&&!e.src.includes("equation")})),r=o.indexOf(a);if(-1!==r){e.preventDefault();var i=o.map((function(e){return e.dataset.thumbnail&&e.src.replace(/\.jpg|\.webp/,".gif")||e.dataset.src||e.src||""})).map((function(e){return Object(U.imgUrl)(e,Object.assign({quality:""},e.endsWith("webp")&&{extension:"jpg"}))}));Object(Kt.a)("base/openImage").dispatch({images:i,index:r})}}}}(n,{root:e})}),[e,t.ZhihuHybrid]);Object(l.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},Qt=n(181);function Yt(e){var t=e.content,n=e.className,a=Object(Wt.b)(),o={"KfeCollection-NovelDisplayBlock-Dark":Object(te.f)().isDarkMode,"KfeCollection-NovelDisplayBlock-Pc":!a.Mobile};return Object(l.useEffect)((function(){var e=Array.from(document.querySelectorAll('img[data-novel="role-image"]')),t=a.Mobile?"openInApp":"zh-lightbox-thumb";e.forEach((function(e){e.className="".concat(e.className," ").concat(t)}))}),[a.Mobile]),s.a.createElement("div",{className:D()("KfeCollection-NovelDisplayBlock",n,o),dangerouslySetInnerHTML:{__html:t}})}Yt.propTypes={content:P.a.string.isRequired};var Jt=Yt,Xt=function(e){var t=e.className,n=e.html,a=e.lazyLoadImageProps,o=Object(l.useState)(null),r=Object(i.a)(o,2),s=r[0],u=r[1];return Lt(s,a),Object(c.b)("div",{ref:u,children:Object(c.b)(Jt,{className:t,content:n})})};var $t=function(e){var t=this;return e.length?function(n,a){for(var o=e.length-1,r=n;o>=0;)r=e[o].call(t,r,a),o--;return r}:B.a};function en(e){var t=e.id,a=e.parentType,o=e.parentId,r=e.suger,i=e.data,c=e.isEditor,l=void 0!==c&&c,s=Object(J.e)((function(){return Promise.all([n.e(18),n.e(25)]).then(n.bind(null,2854))}),t),u=Object(J.e)((function(){return n.e(26).then(n.bind(null,2852))}),t);return t.startsWith("fee_")&&u?Object(ne.g)(u,{id:t,isEditor:l}):s?Object(ne.g)(s,{id:t,parentType:a,urlToken:o,suger:r,data:i,isEditor:l}):null}en.propTypes={id:P.a.string.isRequired,parentType:P.a.oneOf(["answer","article"]),parentId:P.a.string,suger:P.a.object,data:P.a.object,isEditor:P.a.bool};var tn=Xe({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:en}),nn=n(185),an=n.n(nn),on=function(e){var t=e.referenceList,n=e.onClick,a=e.listRef;return Object(ne.g)(l.Fragment,null,Object(ne.g)("h2",null,"参考"),Object(ne.g)("ol",{className:"ReferenceList",onClick:n,ref:a},an()(t,"refKey").map((function(e){var n=t.filter((function(t){return t.refKey===e.refKey})),a=n.length>1?Object(ne.g)(s.a.Fragment,null,Object(ne.g)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map((function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(ne.g)("sup",{key:n,className:"ReferenceList-backLink"},Object(ne.g)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))}))):Object(ne.g)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(ne.g)("li",{id:e.refKey,key:e.refKey,tabIndex:0},a,e.text&&Object(ne.g)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(ne.g)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))}))))},rn=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,cn=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,a=[];return n=n.replace(rn,(function(e,n){var o=Le(n,{decodeValue:!0}),r=o["data-text"],i=void 0===r?"":r,c=o["data-url"],l=void 0===c?"":c,s=o["data-numero"],u=t?"ref_".concat(t,"_").concat(s):"ref_".concat(s),d=a.filter((function(e){return e.refKey===u})),b="".concat(u,"_").concat(d.length);a.push({refKey:u,text:i,url:l,numero:s});var f=[i,l].filter(Boolean).join(" ");return Object(z.renderToStaticMarkup)(Object(ne.g)("sup",{"data-text":i,"data-url":l,"data-numero":s,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":f,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},Object(ne.g)("a",{id:b,href:"#".concat(u),"data-reference-link":!0,"aria-labelledby":u},"[",s,"]")))})),a.length?n=n.concat(Object(z.renderToStaticMarkup)(Object(ne.g)(on,{referenceList:a}))):n}(t,e)}},ln=function(e,t){var n=Object(J.d)((function(n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var a=e.target.getAttribute("href"),o=t.querySelector(a);if(o){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby"))return void n.onReferenceClick(e);o.focus({preventScroll:!0}),Ve(o),document.documentElement.setAttribute("data-focus-visible","")}}}(n,e,t)}));Object(l.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},sn=[{extensionList:["doc","docx","txt"],type:"doc"},{extensionList:["jpg","jpeg","png","bmp"],type:"image"},{extensionList:["mp3","aac"],type:"music"},{extensionList:["pdf"],type:"pdf"},{extensionList:["xls","xlsx","csv"],type:"table"},{extensionList:["torrent"],type:"torrent"},{extensionList:["mp4","flv"],type:"video"},{extensionList:["zip","rar","7z"],type:"zip"},{extensionList:[""],type:"folder"}];function un(e){var t=e.className,n=e.isDirectory,a=void 0!==n&&n,o=e.extension,r=function(e){return"https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_".concat(e,".svg")}(a?"folder":function(e){var t=sn.find((function(t){return t.extensionList.includes(e)}));return t?t.type:"other"}(o));return Object(ne.g)("img",{className:D()("FileExtensionIcon",t),src:r})}var dn={baidu:"百度网盘"};function bn(e){var t=e.component,n=void 0===t?"a":t,a=e.className,o=e.href,r=e.type,i=void 0===r?"file":r,c=e.name,s=e.extension,u=e.size,d=e.source,b=e.onRef,f=e.onClick,p=e.onMouseDown,h=Number(u);return Object(ne.g)(n,{className:D()("FileLinkCard",a),href:o,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":7693,ref:b,onClick:f,onMouseDown:p},Object(ne.g)(un,{className:"FileLinkCard-icon",isDirectory:"directory"===i,extension:s}),Object(ne.g)("div",{className:"FileLinkCard-info"},Object(ne.g)("div",{className:"FileLinkCard-name"},c),Object(ne.g)("div",{className:"FileLinkCard-meta"},Boolean(h)&&Object(ne.g)("div",{className:"FileLinkCard-size"},Object(G.unitPrefix)(h)),Boolean(h)&&d&&Object(ne.g)(l.Fragment,null," · "),d&&Object(ne.g)("div",{className:"FileLinkCard-source"},function(e){return dn[e]||e}(d)))))}var fn,pn=/<a\b([^>]*data-draft-type="file-link-card"[^>]*)>(.*?)<\/a>/g,hn=function(e){return e?e.replace(pn,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=Le(t,{decodeValue:!0}),o=a.href,r=void 0===o?"":o,i=a["data-file-type"],c=a["data-file-extension"],l=a["data-file-size"],s=a["data-file-source"],u=Me(n);return Object(z.renderToStaticMarkup)(Object(ne.g)(bn,{href:r,name:u,type:i,extension:c,size:l,source:s}))})):e},mn=function(e){return{alignItems:"center",backgroundColor:e.colorMod(e.colors.GBK10A).alpha(.88),borderRadius:"12px",boxSizing:"border-box",display:"flex",margin:"1em auto",maxWidth:"100%",overflow:"hidden",padding:"12px",position:"relative",width:"390px"}},vn=function(e){return Object.assign({color:e.colors.GBK02A,fontSize:"15px",fontWeight:500,lineHeight:"21px"},Object(te.d)(2))},gn=function(e){return{color:e.colors.GBK06A,fontSize:"12px",display:"flex",lineHeight:"14px",marginTop:"5px"}},On=n(55),jn=n(2761),yn=n(1571),Cn=n(1338),wn=n(892),xn=n(2762),kn=n(248),Sn=n(244),An=n.n(Sn),Rn=n(87),Tn=["children","pl","targetId","handleScroll","index"],In=["className"],En=["className"],Nn=["children","targetId","active","setCursor"],Bn=["children","pl","targetId","handleScroll","handleAction","index","status","className","isCollapsed","inEditor","active"],zn=["className"],Ln=["className"],Pn=["isCollapsed","inEditor","catalogRef","contentRoot","catalogLength","contentRootLeft","shouldCollapse"],Mn=function(e){var t=e.children,n=e.pl,a=e.targetId,o=e.handleScroll,r=e.index,i=E()(e,Tn);return Object(c.b)(On.Text,Object.assign(Object.assign({flexShrink:0,display:"flex",alignItems:"center",color:"GBK02A",fontSize:"12px",height:"20px",lineHeight:"19px",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"6px"}}},i),{},{children:Object(c.c)(On.Flex,{pl:n,css:{cursor:"pointer",alignItems:"center"},"data-catalog-target-id":a,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",onClick:function(e){o(e,r)},children:[Object(c.b)(On.Text,{css:[Object(te.d)(1),{pointerEvents:"none",wordBreak:"break-all"}],dangerouslySetInnerHTML:{__html:t}}),Object(c.b)(jn.a,{size:"20px",css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GBK08A,flex:"0 0 auto",pointerEvents:"none"}}})]})}))},Dn=function(e){var t=e.className,n=E()(e,In);return Object(c.b)(Mn,Object.assign({className:D()(t,"Catalog-FirstLevelTitle"),fontWeight:"bold",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"6px"}}},n))},_n=s.a.forwardRef((function(e,t){var n=e.isFold,a=e.onClick,o=n?yn.a:Cn.a,r=n?"展开目录":"收起目录";return Object(c.c)(c.a,{children:[Boolean(n)&&Object(c.b)("div",{className:"bottom-shadow",css:function(e){return{position:"absolute",bottom:"25px",width:"100%",height:"40px",background:"linear-gradient(to bottom, ".concat(e.colorMod(e.colors.GBK99A).alpha(0),", ").concat(e.colors.GBK99A,")")}}}),Object(c.c)(On.Flex,{ref:t,alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",color:"GBL05A",css:{cursor:"pointer"},onClick:a,children:[r,Object(c.b)(o,{size:18,css:{marginTop:"1px"}})]})]})})),Vn={1:Dn,2:function(e){var t=e.className,n=E()(e,En);return Object(c.b)(Mn,Object.assign({className:D()(t,"Catalog-SecondLevelTitle"),pl:"10px",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"0px"}}},n))}},Un=function(e){var t=e.catalog,n=e.className,a=e.canFold,o=e.inEditor,r=e.scrollOffset,i=void 0===r?0:r,s=a&&!o&&(null==t?void 0:t.length)>3,u=Object(l.useCallback)((function(e,t){if(o){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var a=Array.from(n.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return Ve(a,i)}))}}}),[o,i]);return null!=t&&t.length?Object(c.c)(On.Box,{className:D()(n,"Catalog"),mb:"48px",css:{"& .Catalog-wrapper":{position:"relative"}},"data-za-detail-view-name":"正文",children:[Object(c.b)("h2",{css:{marginBottom:"18px !important",marginTop:"0px !important"},children:"目录"}),Object(c.c)(On.Box,{className:"Catalog-wrapper",children:[Object(c.b)(On.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",overflow:"hidden",height:s?"84px":"auto",children:t.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,o=e.index,r=Vn[t]||Dn;return Object(c.b)(r,{targetId:a,handleScroll:u,index:o,children:n},String([a,o]))}))}),Boolean(s)&&Object(c.b)(_n,{isFold:!0})]})]}):o?Object(c.c)(On.Flex,{flexDirection:"column",alignItems:"center",mb:"18px",children:[Object(c.b)(On.Box,{size:"160px",mb:"10px",children:Object(c.b)(On.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})}),Object(c.b)(On.Text,{color:"GBK06A",fontSize:"17px",lineHeight:"24px",textAlign:"center",children:"在内容中设置标题将会在此处同步展示"})]}):null},Fn=function(e){var t=e.contentHTML,n=Object(l.useState)(!0),a=k()(n,2),o=a[0],r=a[1],i=Object(J.d)((function(){r(!o)}));return Object(c.c)(Y.b,{block:"ZTextCatalog",children:[Object(c.b)(Y.e,{as:On.Flex,zaType:"Block",className:"Catalog-content",flexDirection:"column",css:{fontSize:"12px",overflow:"hidden"},style:{height:o?"84px":"auto"},dangerouslySetInnerHTML:{__html:t}}),Object(c.b)(Y.a,{as:_n,zaType:"Button",zaAction:o?"Expand":"Collapse",isFold:o,onClick:i})]})},qn=function(e){var t=e.root,n=Object(l.useState)(null),a=k()(n,2),o=a[0],r=a[1];return Object(l.useEffect)((function(){if(t){var e=t.querySelector(".Catalog-wrapper");if(e&&e.querySelector(".bottom-shadow")){var n=e.querySelector(".Catalog-content").innerHTML,a=document.createElement("div");a.className="Catalog-wrapper",e.parentNode.replaceChild(a,e),r(Object(ee.createPortal)(Object(c.b)(Fn,{contentHTML:n}),a))}}}),[t]),o},Hn="removed",Gn="added",Kn=/<(h2|h3)[^>]*>(.*?)<\/\1>/g,Wn={h2:1,h3:2},Zn=function(e,t){return"h_".concat(e||"editor","_").concat(t)},Qn=function(e){return e.replace(qt,"").replace(/<[^>]*>/g,"")},Yn=function(e){return Wn[e]},Jn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return{catalog:[],html:e};var a=[];return t=t||"editor",n="function"==typeof n?n:function(){return String(n)},e=e.replace(Kn,(function(e,o){var r,i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=Qn(c),s=Yn(o),u=Zn(t,a.length),d=(null===(r=e.match(/(data-into-catalog-status=\\{0,1}"\S{1,}\\{0,1}")/))||void 0===r||null===(i=r[0])||void 0===i?void 0:i.indexOf(Hn))>-1?Hn:"";return a.push({text:l,titleLevel:s,Tag:o,targetId:u,status:d}),n({text:l,titleLevel:s,targetId:u,Tag:o,originText:c,status:d})})),{catalog:a,html:e}},Xn=function(e){var t=e.originText,n=e.targetId,a=e.Tag,o=e.status;return Object(z.renderToStaticMarkup)(Object(c.b)(a,{id:n,"data-into-catalog-status":o,dangerouslySetInnerHTML:{__html:t}}))},$n=function(e){return function(t,n){var a=n.sourceId,o=n.theme,r=n.shouldShowCatalog,i=n.shouldFoldCatalog;if(!t)return t;if(!r)return t;var l=Jn(t,a,Xn),s=l.catalog,u=l.html;return s.length?e?u:Object(z.renderToStaticMarkup)(Object(c.b)(kn.a,{theme:o,children:Object(c.b)(Un,{catalog:s,canFold:i})})).concat(u):u}},ea=function(e,t,n){var a=Object(Y.i)().trackEvent,o=Object(l.useCallback)((function(o){!function(e,t,n,a){if(!e.defaultPrevented){var o=e.target.getAttribute("data-catalog-target-id");if(o){n({action:"OpenUrl",block:"ZTextCatalog",eventType:"Click",elementLocation:{type:"Button",text:e.target.innerText}},{link:{url:window.location.href}}),$.a.trackEvent(e.target);var r=t.querySelector("#"+o);r&&(e.preventDefault(),Ve(r,10+a,!1))}}}(o,t||e,a,n)}),[e,t,a,n]);Object(l.useEffect)((function(){if(e)return e.addEventListener("click",o),function(){e.removeEventListener("click",o)}}),[e,o])},ta=function(e){var t=e.children,n=e.targetId,a=e.active,o=e.setCursor,r=E()(e,Nn);return Object(c.b)(Y.a,Object.assign(Object.assign({as:On.Text,zaType:"Text",color:a?"GBL01A":"GBK02A",fontWeight:a?"bold":"normal",css:{fontSize:"14px"}},r),{},{children:Object(c.c)(On.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(){var e=document.querySelector("#"+n);o(n),e&&Ve(e)},children:[Object(c.b)(On.Text,{css:Object(te.d)(1),children:t}),Object(c.b)(wn.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})}))},na=function(e){return Object(c.b)(ta,Object.assign({},e))},aa={1:na,2:function(e){return Object(c.b)(ta,Object.assign({pl:"20px"},e))}},oa=function(e){var t=e.catalog,n=e.className,a=Object(l.useState)(null),o=k()(a,2),r=o[0],i=o[1];return Object(l.useEffect)((function(){if(null!=t&&t.length){var e=null,n=De();t.forEach((function(t){var a=document.querySelector("#"+t.targetId);(null==a?void 0:a.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),i(e)}}),[]),null!=t&&t.length?Object(c.b)(Y.b,{block:"Popup",children:Object(c.b)(Y.e,{zaType:"Popup",as:On.Box,className:D()(n),children:Object(c.b)(On.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,o=aa[t]||na;return Object(c.b)(o,{targetId:a,active:r===a,setCursor:i,children:n},a)}))})})}):null},ra=function(e){var t=e.className,n=e.shown,a=e.onClose,o=e.zaContent,r=e.catalog;return Object(c.b)(Rn.b,{wrapperClassName:"CatalogModal-wrapper",className:D()("CatalogModal",t),title:"目录",onClose:a,children:n&&Object(c.b)(oa,{css:{paddingBottom:"16px"},catalog:r,zaContent:o})})},ia=function(e){var t=e.children,n=e.pl,a=e.targetId,o=e.handleScroll,r=e.handleAction,i=e.index,l=e.status,s=e.className,u=e.isCollapsed,d=e.inEditor,b=e.active,f=E()(e,Bn);return Object(c.b)(Y.a,Object.assign(Object.assign({as:On.Text,zaType:"Text",className:D()(s,"Catalog-Title"),flexShrink:0,display:"flex",alignItems:"center",color:"GBL05A",fontSize:"12px",height:"20px",lineHeight:"20px",pl:"30px",css:function(e){return{position:"relative",height:"30px",lineHeight:"30px","&.Catalog-FirstLevelTitle, &.Catalog-SecondLevelTitle":{position:"relative",height:"30px",color:b?e.colors.GBL01A:e.colors.GBL05A,"&::before":{content:'" "',position:"absolute",backgroundColor:b?e.colors.GBL01A:e.colors.GBL05A,display:"inline-block",borderRadius:"50%",top:"12px",marginRight:"12px"},"&:hover::before":{backgroundColor:e.colors.GBL01A}},"&.Catalog-FirstLevelTitle::before":{left:u?"78px":"16px",width:"6px",height:"6px"},"&.Catalog-SecondLevelTitle::before":{left:u?"79px":"17px",width:"4px",height:"4px"},".Catalog-TitleIcon":Object.assign({position:"absolute",right:"10px",width:"12px",height:"12px",objectFit:"contain"},("toAdd"!==l||!t)&&{display:"none"}),"&::after":{content:'" "',display:"block",position:"absolute",left:u?"81px":"19px",top:0,transform:"translateX(-50%)",width:"2px",height:"40px",marginTop:"12px",background:e.colorMod(e.colors.GBL05A).alpha(.12)},"&:last-child":{"&::after":{height:0}}}}},f),{},{onClick:function(e){o(e,i)},children:!u&&Object(c.c)(On.Flex,{px:"10px",ml:n,css:function(e){return Object.assign(Object.assign({cursor:"pointer",alignItems:"center",width:"100%"},"toAdd"===l&&Boolean(t)&&{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px"}),{},{"&:hover":{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px",".Catalog-TitleIcon":{display:"block"}}})},"data-catalog-target-id":a,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",children:[Object(c.b)(On.Text,{css:[Object(te.d)(1),{pointerEvents:"none",wordBreak:"break-all",width:"calc(100% - 22px)"}],dangerouslySetInnerHTML:{__html:t}}),d&&("toAdd"===l?Object(c.b)(On.Image,{src:"https://pic3.zhimg.com/v2-b01c062116d91b98059d7c90bb1139d2.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),r(e,i,Gn)}}):Object(c.b)(On.Image,{src:"https://pic2.zhimg.com/v2-4bf4e045dbe37447d257b72b5a79b05c.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),r(e,i,Hn)}}))]})}))},ca=function(e){var t=e.className,n=E()(e,zn);return Object(c.b)(ia,Object.assign({className:D()(t,"Catalog-FirstLevelTitle"),fontWeight:"500",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"4px"},"&+.Catalog-SecondLevelTitle":{marginTop:"4px"}}},n))},la={1:ca,2:function(e){var t=e.className,n=E()(e,Ln);return Object(c.b)(ia,Object.assign({className:D()(t,"Catalog-SecondLevelTitle"),pl:"10px",fontWeight:"400",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"4px"},"&+.Catalog-SecondLevelTitle":{marginTop:"4px"}}},n))}},sa=function(){return Object(c.c)(On.Flex,{flexDirection:"column",alignItems:"center",mb:"18px",children:[Object(c.b)(On.Box,{size:"160px",mb:"10px",children:Object(c.b)(On.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})}),Object(c.b)(On.Text,{color:"GBK05A",fontSize:"12px",lineHeight:"19px",textAlign:"center",children:"在内容中设置标题会在此展示"})]})},ua=function(e){var t=e.isCollapsed,n=e.isCollapsedChange,a=e.contentRootLeft,o=e.inEditor,r=e.onClose,i=e.setShownCatalogModal,l=e.shouldCollapse;return Object(c.c)(On.Flex,{px:"10px",py:"8px",bg:"GBK99A",alignItems:"center",justifyContent:"space-between",color:"GBL05A",css:Object.assign({width:"100%",height:"40px",borderRadius:t?!o&&!l&&a>=190?"4px 0px 0px 4px":"0px 4px 4px 0px":"4px",zIndex:"1",boxShadow:"0px 1px 3px rgba(18, 18, 18, 0.1)"},t&&(l||a<190)?{position:"relative",top:"50px"}:{position:"sticky",top:"0"}),children:[Object(c.c)(On.Flex,{alignItems:"center",children:[Object(c.b)(xn.a,{size:15,text:!0,center:!0}),Object(c.b)(Y.c,{as:On.Text,zaType:"Button",zaText:!0,shouldTrackShow:!0,shouldTrackClick:t,ml:"10px",fontSize:"14px",css:t&&{cursor:"pointer",whiteSpace:"nowrap"},onClick:function(){t&&(l||a<190?i(!0):n(!1))},children:t&&!o&&!l&&a>=190?"展开目录":"目录"})]}),o&&Object(c.b)(On.Image,{src:"https://pic1.zhimg.com/v2-6264c104a2b3efcd0bd3c4876232aec3.png",onClick:r,css:{width:"15px",height:"15px",cursor:"pointer"}}),!o&&!t&&Object(c.b)(Y.a,{as:On.Text,zaType:"Button",zaText:"收起目录",p:"2px 6px",bg:"GBK10A",color:"GBL05A",fontSize:"12px",lineHeight:"16px",css:{borderRadius:"10px",cursor:"pointer"},onClick:function(){n(!0)},children:"收起"})]})},da=function(e){var t,n,a=e.isCollapsed,o=e.inEditor,r=e.catalogRef,i=e.contentRoot,s=e.catalogLength,u=e.contentRootLeft,d=e.shouldCollapse,b=E()(e,Pn),f=Object(l.useState)(0),p=k()(f,2),h=p[0],m=p[1];return Object(l.useEffect)((function(){var e,t=null===(e=r.current)||void 0===e?void 0:e.clientHeight;o||m(-t)}),[r,o,u]),Object(l.useEffect)((function(){if(o)if(0===s)-267!==h&&m(-267);else{var e=76+34*s,t=parseInt(getComputedStyle(r.current).maxHeight),n=-Math.min(t,e);h!==n&&m(n)}}),[o,s,r,h]),o||i?(o?(t=180,n=-180):u<190||d?(t=76,n=-20):a?(t=100,n=-120):n=-(t=Math.min(u-40,250))-30,Object(c.b)(Y.b,{block:o?"EditPage":"AnswerPage",children:Object(c.b)(Y.e,Object.assign({ref:r,zaType:"Block",as:On.Box,css:{position:"sticky",top:0,width:t,marginLeft:n,marginBottom:h,zIndex:1}},b))})):null},ba=function(e){var t=e.catalogContainerRef,n=e.isShowScrollerArrow,a=e.catalog,o=e.isCollapsed,r=e.cursor,i=e.handleScroll,s=e.handleAction,u=e.inEditor,d=e.maskGradientColor,b=Object(l.useState)(!1),f=k()(b,2),p=f[0],h=f[1],m=Object(l.useState)(!1),v=k()(m,2),g=v[0],O=v[1],j=An()((function(){var e;(null===(e=t.current)||void 0===e?void 0:e.scrollTop)<20?h(!1):h(!0);var n=t.current||{},a=n.scrollHeight,o=n.clientHeight,r=n.scrollTop;O(!(a-o-r<20))}),100);return Object(l.useEffect)((function(){var e=t.current;if(e)return e.addEventListener("scroll",j),function(){return e.removeEventListener("scroll",j)}}),[t,j]),Object(c.b)(On.Box,{mt:"20px",ref:t,css:function(e){return Object.assign({maxHeight:"calc(100vh - 200px)",overflow:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},n&&{"&::before, &::after":{content:'" "',position:"absolute",width:"calc(100% - 15px)",height:"36px",pointerEvents:"none",marginLeft:"15px",zIndex:1,transition:"opacity .2s ease-in-out"},"&::before":{opacity:p?1:0,top:"60px",background:"linear-gradient(180deg, ".concat(e.colors[d]," 0%, ").concat(e.colorMod(e.colors[d]).alpha(0)," 100%)")},"&::after":{opacity:g?1:0,bottom:"20px",background:"linear-gradient(180deg, ".concat(e.colorMod(e.colors[d]).alpha(0)," 0%, ").concat(e.colors[d]," 100%)")}})},children:Object(c.b)(On.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",children:a.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,l=e.status,d=e.index,b=la[t]||ca;return l!==Hn?Object(c.b)(b,{targetId:a,handleScroll:i,handleAction:s,index:d,status:l,isCollapsed:o,inEditor:u,active:r===(a||d),children:n},String([a,d])):null}))})})},fa=function(e){var t=e.catalog,n=e.className,a=e.inEditor,o=e.scrollOffset,r=void 0===o?0:o,i=e.onClose,s=e.contentRoot,u=e.onChange,d=e.catalogRef,b=e.shouldCollapse,f=e.maskGradientColor,p=void 0===f?"GBK10A":f,h=Object(l.useRef)(),m=Object(l.useRef)(),v=d||h,g=Object(l.useState)(!a),O=k()(g,2),j=O[0],y=O[1],C=Object(l.useState)(0),w=k()(C,2),x=w[0],S=w[1],A=Object(l.useState)(!1),R=k()(A,2),T=R[0],I=R[1],E=Object(l.useState)(null),N=k()(E,2),B=N[0],z=N[1],L=Object(l.useState)(!1),P=k()(L,2),M=P[0],_=P[1];ea(null==v?void 0:v.current,s,r);var V=Object(l.useCallback)((function(e,t){if(a){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var o=Array.from(n.querySelectorAll("h2,h3"))[t];o&&requestAnimationFrame((function(){return Ve(o,r)}))}}}),[a,r]),U=Object(l.useCallback)((function(e,n,a){var o=document.querySelector(".DraftEditor-editorContainer");if(o){var r=Array.from(o.querySelectorAll("h2,h3"))[n].getAttribute("data-offset-key").split("-")[0];t[n].status=Hn,u(r,a)}}),[t,u]);Object(l.useEffect)((function(){if(!b&&s){var e=s.getBoundingClientRect().left;S(e),e>=190&&y(!1)}}),[s,b]);var F=null==m?void 0:m.current;Object(l.useEffect)((function(){F&&F.scrollHeight>F.clientHeight&&_(!0)}),[F]);var q=Object(l.useMemo)((function(){return null==t?void 0:t.filter((function(e){return e.status!==Hn}))}),[t]),H=q.length,G=An()((function(){var e,n,o,r;if(!H||a||j||(o=null,r=De(),t.forEach((function(e){if(e.status!==Hn){var t=document.querySelector("#"+e.targetId);(null==t?void 0:t.getBoundingClientRect().top)<=r+2&&(o=e.targetId)}})),o!==B&&(z(o),null===(n=document.querySelector('[data-catalog-target-id="'.concat(o,'"]')))||void 0===n||n.scrollIntoViewIfNeeded())),null!=v&&v.current){var i=null!=s?s:null==v||null===(e=v.current)||void 0===e?void 0:e.parentElement;if(i&&null!=v&&v.current){var c=i.getBoundingClientRect(),l=c.bottom,u=c.height,d=getComputedStyle(i),b=d.paddingTop,f=d.marginTop,p=v.current.getBoundingClientRect(),h=p.bottom,m=p.height;l-h<Math.min(0,u-(m+parseInt(b)+parseInt(f)))?v.current.style.visibility="hidden":v.current.style.visibility="visible"}}}),100);return Object(l.useEffect)((function(){return document.addEventListener("scroll",G),function(){document.removeEventListener("scroll",G)}}),[s,G]),a||H&&s?Object(c.c)(da,{catalogRef:v,catalogLength:H,inEditor:a,isCollapsed:j,contentRoot:s,contentRootLeft:x,shouldCollapse:b,className:D()(n,"Catalog","isCatalogV2",{isCollapsed:j}),pb:"20px","data-za-detail-view-name":"正文",children:[Object(c.b)(ua,{inEditor:a,isCollapsed:j,contentRootLeft:x,setShownCatalogModal:I,shouldCollapse:b,isCollapsedChange:y,onClose:i}),(x>=190||b||a)&&(H?Object(c.b)(ba,{catalogContainerRef:m,isShowScrollerArrow:M,catalog:t,isCollapsed:j,cursor:B,handleScroll:V,handleAction:U,inEditor:a,maskGradientColor:p}):Object(c.b)(sa,{})),Object(c.b)(ra,{shown:T,catalog:q,onClose:function(){return I(!1)}})]}):null},pa=n(1131),ha=n(1222),ma=n(61),va=Xe({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:pa.a}),ga=function(e){var t=e.contentType,n=e.token,a=e.root,o=e.mcnLinkCardProps,r=e.isAuthor,i=e.urlOrigin,c=void 0===i?"":i,s=Object(l.useState)(null),u=k()(s,2),d=u[0],b=u[1],f=Object(l.useState)(!1),p=k()(f,2),h=p[0],m=p[1];return Object(l.useEffect)((function(){var e=a&&a.querySelector("*[data-draft-type=mcn-link-card]");["answer","article"].includes(t)&&e&&it("".concat(c,"/api/v4/mcn/v2/linkcards?content_type=").concat(t,"&token=").concat(n)).then((function(e){var t=e.data;t&&(b(t),m(!0))})).catch((function(){m(!0)}))}),[a]),h&&Object(ma.jsx)(ha.a,{children:Object(ma.jsx)(va,Object.assign(Object.assign({},o),{},{originalData:d,root:a,isAuthor:r}))})},Oa=n(209),ja=n.n(Oa),ya=n(59),Ca=n.n(ya),wa=n(1039),xa=n(208),ka=n(1217),Sa=n(942),Aa=["id","shouldUseOldLinkCard"];function Ra(e){var t=String(e);return t.length<2&&(t="0"+t),t}function Ta(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(Ra(n),":").concat(Ra(t))}var Ia=function(){return{borderRadius:"8px",boxSizing:"border-box",display:"block",margin:"1em auto",maxWidth:"100%",overflow:"hidden",position:"relative","&,&:hover":{border:"none !important",color:"inherit !important",textDecoration:"none"}}},Ea=function(){return{position:"relative",paddingBottom:"56%"}},Na=function(){return{left:"0",height:"100%",position:"absolute",top:"0",width:"100%"}},Ba=function(){return{backgroundSize:"cover",backgroundPosition:"center",position:"relative",paddingBottom:"56%"}},za=function(){return{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"60px"}},La=function(){return{bottom:"10px",color:"#fff",fontSize:"14px",lineHeight:"16px",position:"absolute",right:"12px"}},Pa=function(e){return{backgroundColor:e.colors.GBK10A,padding:"12px"}},Ma=function(e){return{color:e.colors.GBK02A,fontSize:"16px",lineHeight:"22px",fontWeight:e.fontWeights.bold}},Da=function(e){return{alignItems:"center",color:e.colors.GBK06A,display:"flex",fontSize:"14px",lineHeight:"20px",marginTop:"6px"}},_a=function(){return{height:"20px",marginRight:"8px",width:"20px"}},Va=function(e){return{background:e.colors.GBK10A,borderRadius:"8px",boxSizing:"border-box",display:"block",margin:"1em auto",maxWidth:"100%",overflow:"hidden",paddingBottom:"56%",position:"relative"}},Ua=function(e){return{alignItems:"center",color:e.colors.GBK06A,display:"flex",fontSize:"28px",left:"50%",lineHeight:"40px",position:"absolute",textAlign:"center",transform:"translate(-50%, -50%)",top:"50%"}},Fa=Object.freeze({__proto__:null,ZVideoLinkCard:Ia,ZVideoLinkCardPlayerContainer:Ea,ZVideoLinkCardPlayer:Na,ZVideoLinkCardImage:Ba,ZVideoLinkCardPlayIcon:za,ZVideoLinkCardDuration:La,ZVideoLinkCardInfo:Pa,ZVideoLinkCardTitle:Ma,ZVideoLinkCardAuthor:Da,ZVideoLinkCardAvatar:_a,ZVideoLinkErrorCard:Va,ZVideoLinkErrorCardMessage:Ua}),qa=function(e){var t,n,a=null==e||null===(t=e.refTo)||void 0===t||null===(n=t.contents)||void 0===n?void 0:n[0];return null==a?void 0:a[null==a?void 0:a.type]},Ha=function(e){var t=e.enableInlinePlay,n=e.onImageClick,a=e.zvideo,o=e.zaButtonText,r=e.getVideoUrl,i=e.zaProps,s=a.imageUrl,u=a.video,d=u.videoId,b=u.duration,f=Object(l.useCallback)((function(e){$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:o}}),n(e,a)}),[n,a,o]);return Object(c.b)(c.a,{children:t?Object(c.b)(ka.a,{placeholder:Object(c.b)("div",{className:"ZVideoLinkCard-playerContainer",css:Ea}),children:Object(c.b)("div",{className:"ZVideoLinkCard-playerContainer",css:Ea,children:Object(c.b)(wa.a,{type:"video",className:"ZVideoLinkCard-player",css:Na,src:r?r(d):"https://www.zhihu.com/video/".concat(d),iframeProps:{allowFullScreen:!0},zaProps:i})})}):Object(c.c)("div",{className:"ZVideoLinkCard-image",css:Ba,style:{backgroundImage:"url(".concat(s,")")},onClick:f,children:[Object(c.b)(Sa.a,{className:"ZVideoLinkCard-playIcon",css:za}),Boolean(b)&&Object(c.b)("div",{className:"ZVideoLinkCard-duration",css:La,children:Ta(b)})]})})},Ga=function(e){var t=e.onInfoClick,n=e.zvideo,a=e.zaButtonText,o=e.showReferenceInfo,r=e.showCoCreationInfo,i=e.subAuthor,s=void 0===i?{}:i,u=n.title,d=n.url,b=n.author,f=n.playCount,p=Object(l.useCallback)((function(e){$.a.trackEvent(e.target,{id:7847,action:"OpenUrl"},{button:{text:a}}),t(e,n)}),[t,n,a]);return Object(c.c)("div",{className:"ZVideoLinkCard-info",css:Pa,onClick:p,children:[Object(c.b)("div",{className:"ZVideoLinkCard-title",css:Ma,children:u}),Boolean(d)&&Object(c.c)("div",{className:"ZVideoLinkCard-author",css:Da,children:[r?Object(c.c)(c.a,{children:[Object(c.b)(xa.a,{url:b.avatarUrl,alt:"",size:20,round:!0,css:{zIndex:1}}),Object(c.b)(xa.a,{url:s.avatarUrl,alt:"",size:20,round:!0,css:{marginLeft:-4,marginRight:8}}),Object(c.b)("div",{children:"".concat(b.name,"、").concat(s.name," 联合创作")})]}):Object(c.c)(c.a,{children:[Object(c.b)(xa.a,{className:"ZVideoLinkCard-avatar",css:_a,url:b.avatarUrl,alt:"",size:20,round:!0}),Object(c.b)("div",{children:o?"".concat(b.name," 引用创作"):ja()(fn||(fn=v()(["","的视频"])),b.name)})]}),Boolean(f)&&Object(c.c)("div",{children:[" · ",Object(G.cnNiceNumber)(f),"播放"]})]})]})};function Ka(e){var t,n=Object(l.useRef)(null),a=e.component,o=void 0===a?"a":a,r=e.getVideoUrl,i=e.className,s=e.onClick,u=e.onMouseDown,d=e.zvideo,b=e.enableInlinePlay,f=void 0!==b&&b,p=e.onImageClick,h=void 0===p?B.a:p,m=e.onInfoClick,v=void 0===m?B.a:m,g=e.renderInjection,O=e.zaProps,j=d.id,y=d.url,C=d.video,w=C.videoId,x=C.status,k=d.creationRelationship,S=!y?"inlinezvideo":"zvideo",A=qa(null==k?void 0:k.coCreation),R=Boolean(A),T="ZTextZVideoLinkCard";if(R?T="ZTextCoCreationZVideoLinkCard":(T="ZTextReferenceZVideoLinkCard",t=Boolean(qa(null==k?void 0:k.reference))),Object(l.useEffect)((function(){g||Object(X.onViewedOnce)(n.current,(function(){$.a.trackCardShow(n.current,{id:7844},{button:{text:S}})}))}),[S,g]),g){if("function"!=typeof g)throw new Error("renderInjection must be function");return g(e)}return"converting_failure"===x?Object(c.b)(Wa,{error:"视频转码失败，请重新上传视频"}):Object(c.b)(l.Fragment,{children:Object(c.c)(Y.c,{as:o,shouldTrackClick:!0,shouldTrackShow:!0,zaAction:"OpenUrl",zaEventType:"Click",zaBlock:T,zaType:"Card",view:{elementLocation:{content:{type:"Zvideo",id:j},card:{index:0}}},extra:{link:{url:y}},className:D()("ZVideoLinkCard",i),css:Ia,ref:n,href:y,target:"_blank",rel:"noopener noreferrer",onClick:s,onMouseDown:u,"data-za-not-track-link":!0,"data-za-module":"Content","data-za-module-info":JSON.stringify({card:{content:{type:"Zvideo",token:j,video_id:w}}}),children:[Object(c.b)(Ha,{zvideo:d,enableInlinePlay:f,zaButtonText:S,onImageClick:h,getVideoUrl:r,zaProps:Object.assign({token:j},O)}),Object(c.b)(Ga,{zvideo:d,zaButtonText:S,onInfoClick:v,showReferenceInfo:t,showCoCreationInfo:R,subAuthor:null==A?void 0:A.author})]})})}function Wa(e){var t=e.error;return Object(c.b)("div",{className:"ZVideoLinkErrorCard",css:Va,children:Object(c.b)("div",{className:"ZVideoLinkErrorCard-message",css:Ua,children:t.message||"视频加载错误"})})}function Za(e){var t=e.id,n=e.shouldUseOldLinkCard,a=E()(e,Aa),o=Object(l.useState)(null),r=k()(o,2),i=r[0],s=r[1],u=Object(l.useState)(null),d=k()(u,2),b=d[0],f=d[1];return Object(l.useEffect)((function(){if(n){var e=new URLSearchParams({include:Ca()({creation_relationship:!0})}),a="https://www.zhihu.com/api/v4/zvideos/".concat(t,"/card?").concat(e.toString());it(a).then((function(e){return Object(F.camelizeKeys)(e)})).then((function(e){e.error?f(e.error):s(e)})).catch((function(e){f(e)}))}}),[n,t]),n?b?Object(c.b)(Wa,{error:b}):i?Object(c.b)(Ka,Object.assign({zvideo:i,css:Fa},a)):null:Object(c.b)(Je,Object.assign({inEditor:!0,component:"div",href:"https://www.zhihu.com/zvideo/".concat(t)},a))}Za.defaultProps={shouldUseOldLinkCard:!0};var Qa,Ya=Xe({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type");if(!n||!a)return null;var o=null===(t=n.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/))||void 0===t?void 0:t[1];if(o){var r=document.createElement("div");return r.className="RichText-ZVideoLinkCardContainer",e.parentNode.replaceChild(r,e),{data:{id:o},target:r}}return null})).filter(Boolean)},component:Za}),Ja=function(e,t,n){var a=Object(l.useRef)(n),o=Object(J.d)((function(e){var n=e.currentTarget,a={title:n.dataset.text,href:n.href};"IMG"===e.target.tagName?function(e,t,n){var a;$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)}(e,t,Object.assign(Object.assign({},a),{},{video:{}})):function(e,t,n){var a;$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)}(e,t,a)}));Object(l.useEffect)((function(){if(e&&a.current){var t=Array.from(e.querySelectorAll(".LinkCard.new.static.zvideo"));return t.forEach((function(e){Object(X.onViewedOnce)(e,(function(){return t=e,void $.a.trackCardShow(t,{id:7844},{button:{text:"inlinezvideo"}});var t})),e.addEventListener("click",o)})),function(){t.forEach((function(e){e.removeEventListener("click",o)}))}}}),[e,a,o])},Xa=["id","useOpenArticleButton","enableZa","styleAbParam"],$a=function(e){return{position:"relative",width:"100%",maxWidth:"390px",fontSize:"15px",lineHeight:"21px",padding:"12px 12px 7px",background:e.colors.GBK10A,borderRadius:"8px",margin:"1em auto",boxSizing:"border-box"}},eo=function(){return Object.assign(Object.assign({marginTop:"8px"},Object(te.d)(3)),{},{"& p:first-of-type":{marginTop:"0"},"& p:last-of-type":{marginBottom:"0"}})},to=function(){return Object.assign({},Object(te.d)(10))},no=function(e){return{padding:"12px",background:e.colors.GBK99A,textAlign:"justify",position:"relative","&::before":{display:"block",content:"' '",position:"absolute",top:"-50%",right:"-50%",bottom:"-50%",left:"-50%",pointerEvents:"none",transform:"scale(0.5, 0.5)",border:"1px solid ".concat(e.colors.GBK08A),borderRadius:"8px"}}},ao=function(){return{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"13px",lineHeight:"16px"}},oo=function(e){return{display:"flex",alignItems:"center",color:e.colors.GBK06A}},ro=function(){return{width:"16px",height:"16px",borderRadius:"50%",marginRight:"6px"}},io=function(e){return{color:e.colors.GBL01A}},co=function(e){return{color:e.colors.GBL05A}},lo=function(e){return{padding:"0 0 0 10px",background:e.colors.GBK99A,borderLeft:"4px solid ".concat(e.colors.GBK09A),borderRadius:"0",fontSize:"17px",lineHeight:"28px",textAlign:"justify"}},so=function(e){return{marginTop:"4px",fontSize:"15px",lineHeight:"21px",color:e.colors.GBK06A}},uo=function(){return{marginTop:"12px"}},bo=function(e){return{marginTop:"6px",lineHeight:1,color:e.colors.GBL01A}},fo=function(){return{width:"100%",height:"135px",marginTop:"8px",objectPosition:"center",objectFit:"cover"}},po=fo,ho=function(e){return Object.assign(Object.assign({color:e.colors.GBK02A},Object(te.d)(2)),{},{fontWeight:e.fontWeights.bold})},mo=function(){return Object.assign(Object.assign({marginTop:"10px"},Object(te.d)(3)),{},{"@media (min-width: 768px)":Object.assign({},Object(te.d)(8))})},vo=function(){return{marginTop:"10px",width:"100%",height:"0",position:"relative",paddingTop:"56%"}},go=function(){return{position:"absolute",top:"0",width:"100%",height:"100%",objectPosition:"center",objectFit:"cover"}},Oo=function(){return{display:"flex",justifyContent:"space-between",height:"40px",width:"100%",alignItems:"center"}},jo=function(e){return{display:"flex",height:"50px",background:"linear-gradient(".concat(e.colorMod(e.colors.GBK10A).alpha(0),",").concat(e.colorMod(e.colors.GBK10A).alpha(1),")"),position:"absolute",bottom:"44px",width:"calc(100% - 24px)"}},yo=function(e){return{fontSize:"14px",color:e.colors.GBK06A}},Co=function(e){return{fontSize:"14px",color:e.colors.GBL01A}},wo=function(e){return{margin:"1em auto",width:"100%",maxWidth:"390px",background:e.colors.GBK10A,borderRadius:"8px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"15px",color:e.colors.GBK07A}},xo=wo,ko=function(e){var t=e.authorName,n=e.voteupCount;return Object(ne.g)(l.Fragment,null,ja()(Qa||(Qa=v()(["","的文章"])),t),n>=100&&" · ".concat(Object(G.cnNiceNumber)(n),"赞同"))};function So(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,o=e.title,r=e.excerptText,i=e.imgUrlSrc,c=e.voteupCount,l=e.commentCount;return Object(ne.g)("div",{className:"ArticleLinkCard",css:$a,ref:t},Object(ne.g)("span",{className:"ArticleLinkCard-title",css:ho},o),Boolean(r)&&Object(ne.g)("div",{className:"ArticleLinkCard-excerpt",css:mo},r),i&&Object(ne.g)("div",{className:"ArticleLinkCard-imageWrapper",css:vo},Object(ne.g)("img",{src:Object(U.imgUrl)(i,"540x300"),className:"ArticleLinkCard-image",css:go,alt:""})),Object(ne.g)("div",{className:"ArticleLinkCard-bottom",css:Oo},Object(ne.g)("span",{className:"ArticleLinkCard-hint",css:yo},"".concat(Object(G.cnNiceNumber)(c),"赞同 · ").concat(Object(G.cnNiceNumber)(l),"评论")),n&&Object(ne.g)("span",{onClick:a,className:"ArticleLinkCard-hybridLink",css:Co},"查看完整文章")),Object(ne.g)("div",{className:"ArticleLinkCard-bottomCardGradient",css:jo}))}function Ao(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,o=e.title,r=e.content,i=e.imgUrlSrc,c=e.voteupCount,l=e.authorName,s=e.avatarUrl;return Object(ne.g)("div",{className:"ArticleLinkCard AvatarArticleLinkCard",css:ve([$a,no]),ref:t},Object(ne.g)("div",{className:"AvatarArticleLinkCard-info",css:ao},Object(ne.g)("div",{className:"AvatarArticleLinkCard-hint",css:oo},s&&Object(ne.g)("img",{className:"AvatarArticleLinkCard-avatar",css:ro,src:s,alt:""}),Object(ne.g)(ko,{authorName:l,voteupCount:c})),n&&Object(ne.g)("span",{onClick:a,className:"AvatarArticleLinkCard-hybridLink",css:io},"查看全文")),Object(ne.g)("span",{className:"ArticleLinkCard-title",css:ho},o),Object(ne.g)("div",{className:D()("ArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!i}),css:ve([eo,!i&&to])},Object(ne.g)("div",{dangerouslySetInnerHTML:{__html:r}})),!i&&Object(ne.g)("span",{className:"AvatarArticleLinkCard-more",css:co},"更多内容"),i&&Object(ne.g)("img",{className:"AvatarArticleLinkCard-image",css:fo,src:i,alt:""}))}function Ro(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,o=e.title,r=e.content,i=e.imgUrlSrc,c=e.voteupCount,l=e.authorName;return Object(ne.g)("div",{className:"ArticleLinkCard QuoteArticleLinkCard",css:ve([$a,lo]),ref:t},Object(ne.g)("span",{className:"ArticleLinkCard-title",css:ho},o),Object(ne.g)("div",{className:"QuoteArticleLinkCard-hint",css:so},Object(ne.g)(ko,{authorName:l,voteupCount:c})),Object(ne.g)("div",{className:D()("ArticleLinkCard-content QuoteArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!i}),css:ve([eo,uo,!i&&to])},Object(ne.g)("div",{dangerouslySetInnerHTML:{__html:r}})),!i&&n&&Object(ne.g)("div",{onClick:a,className:"QuoteArticleLinkCard-hybridLink",css:bo},"查看全文"),i&&Object(ne.g)("img",{className:"QuoteArticleLinkCard-image",css:po,src:i,alt:""}))}function To(e){var t=e.article,n=t.title,a=t.excerpt,o=t.content,r=t.imageUrl,i=t.voteupCount,c=t.commentCount,s=t.author,u=void 0===s?{}:s,d=e.styleAbParam,b=e.cardRef,f=e.useOpenArticleButton,p=e.handleClickLink,h=Object(l.useMemo)((function(){var e=document.createElement("div");return e.innerHTML=a,e.textContent}),[a]),m=u.name,v=u.avatarUrl;return"1"===d?Object(ne.g)(Ao,{cardRef:b,useOpenArticleButton:f,handleClickLink:p,title:n,content:o,imgUrlSrc:r,voteupCount:i,authorName:m,avatarUrl:v}):"2"===d?Object(ne.g)(Ro,{cardRef:b,useOpenArticleButton:f,handleClickLink:p,title:n,content:o,imgUrlSrc:r,voteupCount:i,authorName:m}):Object(ne.g)(So,{cardRef:b,useOpenArticleButton:f,handleClickLink:p,title:n,excerptText:h,imgUrlSrc:r,voteupCount:i,commentCount:c})}var Io=function(e){var t=e.article.id,n=e.article,a=e.useOpenArticleButton,o=e.enableZa,r=e.styleAbParam,i=Object(l.useRef)(null);Object(l.useEffect)((function(){o&&($.a.setModule(i.current,{module:"Content"},{card:{content:{type:"Post",token:String(t)}}}),$.a.trackCardShow(i.current,{id:8589,element:"Card"}))}),[o,t]);var c="https://zhuanlan.zhihu.com/p/".concat(t),s=Object(l.useCallback)((function(){o&&$.a.trackEvent(i.current,{id:8590,action:"OpenUrl",element:"Card"})}),[o]);return Object(ne.g)(Y.c,{as:"a",shouldTrackShow:!0,shouldTrackClick:!0,zaBlock:"ZTextArticleLinkCard",zaAction:"OpenUrl",zaType:"Button",zaEventType:"Click",extra:{link:{url:c}},href:c,"data-za-not-track-link":!0,onClick:s,rel:"noopener noreferrer",target:"_blank"},Object(ne.g)(To,{styleAbParam:r,cardRef:i,useOpenArticleButton:a,linkUrl:c,handleClickLink:s,article:n}))},Eo=Xe({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type"),o="normal"===e.getAttribute("data-size");if(!n||!a||!o)return null;var r=null===(t=n.match(/https:\/\/zhuanlan.zhihu.com\/p\/(\d+)$/))||void 0===t?void 0:t[1];if(r){var i=document.createElement("div");return i.className="RichText-ArticleLinkCardContainer",e.parentNode.replaceChild(i,e),{data:{id:r},target:i}}return null})).filter(Boolean)},component:function(e){var t=e.id,n=e.useOpenArticleButton,a=e.enableZa,o=e.styleAbParam,r=E()(e,Xa),i=Object(l.useState)(null),c=k()(i,2),s=c[0],u=c[1],d=Object(l.useState)(null),b=k()(d,2),f=b[0],p=b[1],h=o&&["1","2"].includes(o)?"1":"0";return Object(l.useEffect)((function(){var e="https://www.zhihu.com/api/v4/articles/".concat(t,"?is_article_card=").concat(h);it(e).then((function(e){return Object(F.camelizeKeys)(e)})).then((function(e){e.error?p(e.error.message):u(e)})).catch((function(e){p(e.message||"未知错误")}))}),[t,h]),f?Object(ne.g)("div",{className:"ArticleLinkCard-error",css:xo},f):s?Object(ne.g)(Io,Object.assign({article:s,useOpenArticleButton:n,enableZa:a,styleAbParam:o},r)):Object(ne.g)("div",{className:"ArticleLinkCard-loading",css:wo},"加载中...")}}),No=n(940),Bo=n.n(No),zo=Xe({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.id,n=e.onClick,a=Object(l.useRef)(!1),o=Object(l.useState)({}),r=k()(o,2),i=r[0],c=r[1],s=Object(l.useState)(!1),u=k()(s,2),d=u[0],b=u[1];return Object(l.useEffect)((function(){it("https://www.zhihu.com/api/v4/market/km_sku_card/".concat(t),{credentials:"same-origin"}).then((function(e){var n=Object(F.camelizeKeys)(e)||{},a=n.title,o=n.desc,r=n.cover,i=n.button,l=n.resourceId,s=n.resourceName,u=n.price,d=n.error,f={};!Bo()(e)&&Bo()(d)&&(f=h()({},t,{id:t,skuId:l,source:2,productType:1,cardType:"cpsCommonCard",goods:{title:a,subtitle:o,price:{price:u},goodsImg:{imgUrl:r,imgShape:"rectangle",cornerText:s},goodsUrl:{url:null==i?void 0:i.url},btnText:"去查看"}})),c(f),b(!0)})).catch((function(){b(!0)}))}),[]),d&&!Bo()(i)?Object(ma.jsx)(ha.a,{children:Object(ma.jsx)(pa.a,Object.assign(Object.assign({id:t,ref:function(e){e&&!e.classList.contains("GoodsRecommendCard-placeholder")&&!1===a.current&&($.a.setModule(e,{module:"Content"},{card:{content:{id:t}}}),Object(X.onViewedOnce)(e,(function(){$.a.trackCardShow(e,{id:7203})})),a.current=!0)},originalBlockText:"ZTextMkSKuLinkCard",originalData:i},{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1}),{},{onClick:function(e){$.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),n&&n(e)}}))}):null}}),Lo=n(42),Po=n(1465),Mo=["onRef","htmlProcessors","linkCardInfo","shouldUseArticleCard","articleLinkCardProps","zvideoLinkCardProps","adLinkCardProps","mcnLinkCardProps","mkSkuLinkCardProps","html","sourceId","shouldShowCatalog","shouldCatalogCollapse","shouldFoldCatalog","referenceLinkProps","lazyLoadImageProps","newLinkCardAb","useGifProps","useCatalogV2","isAuthor","maskGradientColor"],Do=function(e){var t=e.onRef,n=e.htmlProcessors,a=void 0===n?[]:n,s=e.linkCardInfo,u=e.shouldUseArticleCard,d=e.articleLinkCardProps,b=e.zvideoLinkCardProps,f=e.adLinkCardProps,p=e.mcnLinkCardProps,h=e.mkSkuLinkCardProps,m=e.html,v=e.sourceId,g=e.shouldShowCatalog,O=e.shouldCatalogCollapse,j=e.shouldFoldCatalog,y=e.referenceLinkProps,C=e.lazyLoadImageProps,w=e.newLinkCardAb,x=e.useGifProps,k=e.useCatalogV2,S=e.isAuthor,A=e.maskGradientColor,R=Object(r.default)(e,Mo),T=f||{},I=T.parentType,E=T.parentId,N=Object(l.useState)(null),B=Object(i.a)(N,2),z=B[0],L=B[1],P=Object(te.f)(),M=$t([].concat(Object(o.a)(a),[cn(),hn,$n(k)]));Ja(z,b,s),ln(z,y),ea(z),function(e){Object(l.useEffect)((function(){e&&Array.from(e.querySelectorAll("img[eeimg]")).forEach((function(e){e.setAttribute("data-formula",e.alt),e.alt="[公式]"}))}),[e])}(z);var D=Object(J.d)((function(e){var t="";return[Po.a.zvideo,Po.a.answer].includes(I)&&(t="?".concat(new URLSearchParams([["itemId",E],["itemType",I]]).toString())),"https://".concat(Lo.a.videoHost,"/video/").concat(e).concat(t)})),_=!(Number(w)>0)&&Object(c.c)(c.a,{children:[u&&Object(c.b)(Eo,Object.assign(Object.assign({},d),{},{root:z})),Object(c.b)(Ya,Object.assign(Object.assign({getVideoUrl:D},b),{},{root:z}))]}),V=Object(l.useMemo)((function(){return Jn(m,v)}),[m,v]).catalog;return Object(c.c)(c.a,{children:[g&&j&&Object(c.b)(qn,{root:z}),Object(c.b)(tn,Object.assign(Object.assign({},f),{},{root:z})),Object(c.b)(zo,Object.assign(Object.assign({},h),{},{root:z})),_,ga({root:z,mcnLinkCardProps:p,contentType:I,token:E,isAuthor:S}),g&&k&&(null==V?void 0:V.length)>0&&Object(c.b)(fa,{catalog:V,inEditor:!1,scrollOffset:52,contentRoot:z,shouldCollapse:O,maskGradientColor:A}),Object(c.b)(Ft,Object.assign({ref:Object(J.h)(t,L),options:{lazyLoadImageOptions:C,useGifPortalOption:x},css:function(e){return function(e){return{".FileLinkCard":mn(e),".FileLinkCard-icon":{flexShrink:0,height:"30px",width:"30px"},".FileLinkCard-info":{marginLeft:"12px"},".FileLinkCard-name":vn(e),".FileLinkCard-meta":gn(e),".FileLinkCard-source":{whiteSpace:"pre"}}}(e)},html:M(m,{sourceId:v,theme:P,shouldShowCatalog:g,shouldFoldCatalog:j,newLinkCardAb:w,linkCardInfo:s})},R))]})},_o=n(902),Vo=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),a=document.createElement("span");return e.parentNode.replaceChild(a,e),{target:a,data:{id:t,name:n}}},Uo=function(e){var t=Object(l.useState)(null),n=Object(i.a)(t,2),a=n[0],o=n[1];return Object(l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));if(t.length){var n=t.map(Vo).map((function(e,t){var n=e.data,a=e.target;return Object(ee.createPortal)(Object(c.c)(_o.a,{user:n,children:["@",n.name]},t),a)}));o(n)}}}),[e]),a},Fo=n(1107),qo=function(e){var t=e.getAttribute("data-poster"),n="data:,"===t?"":t,a={title:e.getAttribute("data-name"),thumbnail:n,url:e.getAttribute("href"),src:e.getAttribute("data-src")};a=e.getAttribute("data-lens-id")?Object.assign(Object.assign({},a),{},{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign(Object.assign({},a),{},{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(a=Object.assign(Object.assign({},a),{},{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var o=document.createElement("div");return e.parentNode.replaceChild(o,e),{target:o,data:a}},Ho=function(e){var t=Object(l.useState)(null),n=Object(i.a)(t,2),a=n[0],o=n[1];return Object(l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));if(t.length){var n=t.map(qo).map((function(e,t){var n=e.data,a=e.target;return Object(ee.createPortal)(Object(c.b)(Fo.a,{data:n},t),a)}));o(n)}}}),[e]),a},Go=n(423),Ko=function(e){var t=e.size,n=e.className;return Object(c.b)("svg",{width:t,height:t,viewBox:"0 0 8 8",className:n,children:Object(c.b)("path",{d:"M3.16668 1.375C2.91355 1.375 2.70835 1.5802 2.70835 1.83333C2.70835 2.08646 2.91355 2.29167 3.16668 2.29167H5.06017L1.59994 5.75189C1.42095 5.93088 1.42095 6.22108 1.59994 6.40007C1.77893 6.57906 2.06913 6.57906 2.24812 6.40007L5.70835 2.93985V4.83333C5.70835 5.08646 5.91355 5.29167 6.16668 5.29167C6.41981 5.29167 6.62502 5.08646 6.62502 4.83333V1.83333C6.62502 1.5802 6.41981 1.375 6.16668 1.375H3.16668Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.25",strokeLinecap:"round",strokeLinejoin:"round"})})},Wo=function(e){var t=e.size,n=e.className;return Object(c.b)("svg",{width:t,height:t,viewBox:"0 0 15 15",className:n,children:Object(c.b)("path",{d:"M10.89 9.477l3.06 3.059a1 1 0 0 1-1.414 1.414l-3.06-3.06a6 6 0 1 1 1.414-1.414zM6 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",fill:"currentColor"})})},Zo=function(e){var t=e.word,n=e.sourceType,a=e.sourceId,o=e.link,r=void 0===o?{linkType:0,linkUrl:"",topicToken:""}:o,i=e.attachedInfoBytes,s=e.entityAB,u=e.hasKnowledgeTopic,d=e.onClick,b=Object(te.f)().colors,f=Object(Wt.b)(),p=f.Zhihu||f.ZhihuHybrid,h=0!==r.linkType,m=1===r.linkType,v=p&&m&&"1"===s,g=Object(l.useMemo)((function(){return h?r.linkUrl:function(e,t,n){var a=new URLSearchParams({q:e,search_source:"Entity",hybrid_search_source:"Entity",hybrid_search_extra:JSON.stringify({sourceType:t,sourceId:n})});return"https://www.zhihu.com/search?".concat(a.toString())}(t,n,a)}),[r,t,n,a]),O=Object(J.d)((function(e){v&&(e.preventDefault(),function(e,t,n){var a="https://www.zhihu.com/appview/topic/".concat(t,"/knowledge"),o=new URLSearchParams({url:a,show_header:"true",title:e,enable_close:"true",min_percent:"1",enable_drag:String(Boolean(n.iOS))});Object(Kt.a)("base/openURL").dispatch({url:"zhihu://popup_container?".concat(o.toString())})}(t,r.topicToken,f)),d(e,r,g)}));if(!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=0===t.linkType,r=1===t.linkType;return e?"0"===a?o:!n||r:o}(p,r,u,s||"0"))return Object(c.b)(l.Fragment,{children:t});var j=h?Ko:Wo;return Object(c.c)(Go.b,{as:p?"span":"a",shouldTrackShow:!0,zaText:t,zaBlock:h?"KnowledgeEntity":"SearchEntity",extra:{attachedInfoBytes:i},"data-za-not-track-link":!0,css:{color:b.GBL01A,textDecoration:"none",cursor:"pointer",":active":{padding:"3.5px 0",backgroundColor:b.GBK09A,borderRadius:"4px"}},href:g,target:"_blank",onClick:O,children:[t,Object(c.b)(j,{size:"8px",css:{position:"relative",verticalAlign:"top",top:"5px"}})]})},Qo=function(e,t){var n=t.type,a=t.sourceId,o=t.entityWords,r=void 0===o?[]:o,i=t.entityAB,s=t.onClick,u=void 0===s?B.a:s,d=Object(l.useState)(null),b=k()(d,2),f=b[0],p=b[1],h=Object(J.d)(u);return Object(l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll("span[data-search-entity]"));if(t.length){var o=!1,l=t.map((function(e){var t,n=e.getAttribute("data-search-entity"),a=r[Number(n)]||{},i=a.mention,c=a.link,l={word:i,link:c,attachedInfoBytes:a.attachedInfoBytes};1===(null==c?void 0:c.linkType)&&(o=!0);var s=document.createElement("span");return null===(t=e.parentNode)||void 0===t||t.replaceChild(s,e),{data:l,target:s}})).map((function(t,r){var l=t.data,s=t.target;return e.contains(s)?Object(ee.createPortal)(Object(c.b)(Zo,Object.assign({sourceType:n,sourceId:a,entityAB:i,hasKnowledgeTopic:o,onClick:h},l),r),s):null}));p(l)}}}),[e]),f},Yo=n(24),Jo=n(146),Xo=n.n(Jo),$o=n(1652),er=function(e){var t=e.goodsCardId,a=e.handleClose,o=Object(Yo.useSelector)((function(e){return e.currentUser})),r=Object(J.e)((function(){return n.e(27).then(n.bind(null,2845))})),i=Object($o.a)(),l=Object(J.d)((function(e){var t=e.id,n=e.sourceId,a=e.url,o=e.app_schema_ios,r=e.app_schema_android;i({id:t,source:n,url:a,appSchemaIos:o,appSchemaAndroid:r})}));return t?Object(c.b)(r,{showModal:Boolean(t),id:t,userId:o,clientId:Xo.a.get("_zap"),onClose:a,onSelectCard:l}):null},tr=["className","ecommerce","html","shouldUseArticleCard","shouldShowCatalog","sourceId","sourceType","isExpanded","entityWords"],nr=["isNovel"],ar={},or=function(e,t){var n=function(e){return e.split("/").reverse()[0]}(t),a=n.split("."),o=Object(i.a)(a,2),r=o[0],c=o[1],l=r.split("_"),s=Object(i.a)(l,2)[1],u="webp"===c||"gif"===c?c:"image",d=Object(b.statGenerator)({appName:"heifetz"})("".concat(u,".").concat(s,".unknown.RichText"));switch(e){case"loadstart":ar[n]=Date.now();break;case"load":if(ar[n]){var p="".concat(d,".success");f.a.increment({raw:"".concat(p,".count")}),f.a.timing(p,Date.now()-ar[n]),delete ar[n]}break;case"timeout":ar[n]&&(f.a.increment({raw:"".concat(d,".timeout.count")}),delete ar[n]);break;case"error":ar[n]&&(f.a.increment({raw:"".concat(d,".failure.count")}),delete ar[n])}},rr=function(e){return Object(c.b)(Dt,Object.assign(Object.assign({onLoadStateChange:or},e),{},{useMp4:!0}))},ir=function(e){var t=e.root,a=e.ecommerce,o=e.sourceType,r=e.sourceId,i=e.entityWords;return Object(c.c)(c.a,{children:[Ho(t),Uo(t),Object(c.b)(Qt.a,{target:"ecommercePortal",replacement:null,children:Object(d.d)(t,{ecommerce:a,getComponent:function(){return Promise.all([n.e(18),n.e(24)]).then(n.bind(null,1463))}})}),Qo(t,{type:o,sourceId:r,entityWords:i})]})},cr=function(e){var t=e.className,n=e.ecommerce,a=e.html,s=e.shouldUseArticleCard,d=e.shouldShowCatalog,b=e.sourceId,f=e.sourceType,p=e.isExpanded,h=void 0===p||p,m=e.entityWords,v=Object(r.default)(e,tr),g=Object(l.useState)(null),O=Object(i.a)(g,2),j=O[0],y=O[1],C=Object(l.useMemo)((function(){return a?u.compose.apply(void 0,Object(o.a)([(e=m,null!=e&&e.length?function(t){return t?e.reduce((function(e,t,n){var a=t.matchorder,o=t.mention;return function(e,t,n,a){if(null==e||!e.length)return e;for(var o=e.length,r=0,i=0;i<=o;){if(-1===(i=e.indexOf(t,i)))return e;if((r+=1)-1===n)return e.slice(0,i)+a+e.slice(i+t.length);i+=t.length}return e}(e,o,a-1,'<span data-search-entity="'.concat(n,'">').concat(o,"</span>"))}),t):t}:function(e){return e}),Gt].filter(Boolean)))(a):"";var e}),[a,m]);Zt(j);var w=function(){var e=Object(l.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1];return[n,Object(J.d)((function(e){var t=e.currentTarget.dataset.mcnId;a(t)})),Object(J.d)((function(){return a(null)}))]}(),x=Object(i.a)(w,3),k=x[0],S=x[1],A=x[2];return Object(c.c)(c.a,{children:[Object(c.b)(Do,Object.assign(Object.assign({},v),{},{className:t,html:h?C:a,onRef:y,lazyLoadImageProps:{onLoadStateChange:or,useWebP:!1},useGifProps:{Component:rr},adLinkCardProps:{parentId:b,parentType:f},mcnLinkCardProps:{onClick:S},mkSkuLinkCardProps:{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1},zvideoLinkCardProps:{enableInlinePlay:!0},articleLinkCardProps:{enableZa:!0,useOpenArticleButton:!0},shouldUseArticleCard:s,shouldShowCatalog:d,sourceId:b,useCatalogV2:!0})),Object(c.b)(ir,{root:j,ecommerce:n,sourceId:b,sourceType:f,entityWords:m}),Object(c.b)(er,{goodsCardId:k,handleClose:A})]})};t.a=function(e){var t=e.isNovel,n=Object(r.default)(e,nr);if(t){var a=n.className,o=n.html;return Object(c.b)(Xt,{className:a,html:o,lazyLoadImageProps:{onLoadStateChange:or,useWebP:!1}})}return Object(c.b)(cr,Object.assign({},n))}},1059:function(e,t,n){"use strict";n.d(t,"b",(function(){return B})),n.d(t,"a",(function(){return d}));var a=n(3),o=n.n(a),r=n(0),i=n(13),c=n.n(i),l=n(208),s=n(7),u=function(e){var t=e.title,n=e.subtitle,a=e.attrInfo,o=e.coverUrl,r=e.avatarUrl,i=e.avatarFit;return Object(s.g)("div",null,o&&Object(s.g)("div",{className:"HoverCard-coverContainer"},Object(s.g)("img",{className:"HoverCard-cover",src:o,alt:"cover"})),Object(s.g)("div",{className:c()("HoverCard-titleContainer",{"HoverCard-titleContainer--noAvatar":!o})},r&&Object(s.g)(l.a,{size:68,className:"HoverCard-avatar",url:r,imgFit:i}),Object(s.g)("div",{className:c()("HoverCard-titleText",{"HoverCard-titleText--noAvatar":!r})},Object(s.g)("div",{className:"HoverCard-title"},t),n&&Object(s.g)("div",{className:"HoverCard-subtitle"},n)),a&&Object(s.g)("div",{className:"HoverCard-attrInfo"},a)))};u.propTypes={title:o.a.node,subtitle:o.a.node,attrInfo:o.a.node,coverUrl:o.a.string,avatarUrl:o.a.string,avatarFit:o.a.oneOf(["fill","contain","cover","none","scale-down"])};var d=u,b=n(31),f=n.n(b),p=n(21),h=n.n(p),m=n(25),v=n.n(m),g=n(23),O=n.n(g),j=n(27),y=n.n(j),C=n(14),w=n.n(C),x=n(39),k=n.n(x),S=n(89),A=n.n(S),R=n(425),T=n(160),I=["toggler","children","isLoading","onRef","size"];function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return y()(this,n)}}var N=function(e){O()(n,e);var t=E(n);function n(){var e;h()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={opened:!1,placement:null,loaderStyle:null},e.handleOpen=function(t){var n=t.arrowStyle,a=t.placement,o=e.props.onOpen;o&&o(),e.setState({opened:!0,placement:a,loaderStyle:n})},e.handleClose=function(){var t=e.props.onClose;t&&t(),e.setState({opened:!1})},e}return v()(n,[{key:"render",value:function(){var e=A()(this.props,["onOpen","onClose"]),t=e.toggler,n=e.children,a=e.isLoading,o=e.onRef,i=e.size,l=f()(e,I),u=this.state,d=u.opened,b=u.loaderStyle;return Object(s.g)(T.a,k()({noLayer:!0,toggler:Object(s.g)("div",null,t),toggleEvent:"hover",targetClassName:"HoverCard-popoverTarget",placement:"bottom-left",onOpen:this.handleOpen,onClose:this.handleClose},l),Object(s.g)("div",{className:c()("HoverCard-container",{"HoverCard-container--large":"large"===i}),ref:o},a&&Object(s.g)("div",{className:"HoverCard-loading",style:b},Object(s.g)(R.a,null)),Object(s.g)("div",{className:c()("HoverCard",{"HoverCard--isLoading":a||!d})},r.Children.map(n,(function(e){return e&&("string"==typeof e?Object(s.g)("div",{className:"HoverCard-item"},e):Object(r.cloneElement)(e,{className:c()("HoverCard-item",e.props.className)}))})))))}}]),n}(r.Component);N.propTypes={toggler:o.a.node.isRequired,isLoading:o.a.bool,onOpen:o.a.func,onClose:o.a.func,size:o.a.oneOf(["default","large"])},N.defaultProps={margin:16,align:"left",topExcludedHeight:60,size:"default"};var B=N},1060:function(e,t,n){"use strict";n.d(t,"c",(function(){return a.c})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return v}));var a=n(1221),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(0),d=n(87),b=n(2218),f=n.n(b),p=n(415);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var m=function(e){Object(i.a)(n,e);var t=h(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(s.b)("img",{src:f.a,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),n}(u.Component);m.showModal=function(e){d.b.open((function(t){var n=(e||{}).reportText;return setTimeout(t,2e3),Object(s.b)(d.b,{title:"举报成功",onClose:t,children:Object(s.c)("div",{style:{textAlign:"center"},children:[Object(s.b)("div",{children:n||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"}),Object(s.b)(m,{})]})})}))};var v=Object(p.b)({view:{id:3038},trackCardShow:!0})(m),g=n(36),O=n(288);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var y=function(e){Object(i.a)(n,e);var t=j(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={reportModalShown:!1},e.handleSubmit=function(){var t=e.props,n=t.id,a=t.onDelete,o=t.onClose;a(n),o()},e.handleReportModalOpen=function(){return e.setState({reportModalShown:!0})},e.handleReportModalClose=function(){e.setState({reportModalShown:!1}),e.handleSubmit()},e.handleSuccess=function(){e.handleSubmit()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,a=e.onClose,o=e.reportAndDeleteExperiment;return Object(s.c)(u.Fragment,{children:[Object(s.b)(d.b,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:a,footer:o&&Object(s.c)("div",{className:"CommentDeleteAndReport-extra",children:["评论若构成举报条件可以",Object(s.b)(g.c,{preset:"link",onClick:this.handleReportModalOpen,children:"删除并举报"})]}),children:n&&Object(s.c)(d.a,{direction:"horizontal",children:[Object(s.b)(g.c,{onClick:a,children:"取消"}),Object(s.b)(g.c,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:"确定"})]})}),Object(s.b)(O.a,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose})]})}}]),n}(u.Component)},1062:function(e,t,n){"use strict";var a=n(49),o=n(15),r=n(16),i=n(77),c=n(17),l=n(18),s=n(9),u=n(1),d=n(0),b=n(19),f=n(13),p=n.n(f),h=n(3),m=n.n(h),v=n(41),g=n(24),O=n(55),j=n(2796),y=n(2797),C=n(1213),w=n(472),x=n(415),k=n(36),S=n(1210),A=n(138),R=n(35),T=n(422),I=n(2),E=n(5),N=Object(E.a)("brand",["GET_URL"]),B=n(369),z=n.n(B);function L(e,t){var n=e.trackUrl,a=void 0===n?[]:n,o=e.id;if(0===a.length)return null;var r="other";t.Android?r="android":t.iOS&&(r="ios");var i=z()();return a.forEach((function(e){(new Image).src=e.replace("__OS__",r).replace("__ADPLATFORM__",r).replace("__REQUESTID__",i).replace("__SESSIONID__",i).replace("__ATOKEN__",o).replace("__PAGETYPE__","article")})),{os:r,pageId:o,sessionId:i,pageType:"article"}}var P=n(56),M=n(459),D=n(1287),_=n(1409),V=n(1105),U=n(1739),F=n(1740),q=n(1179),H=n(1031),G=n(325),K=n(1415),W=n(924),Z=n(944),Q=n(1206),Y=n(1100),J=n(1136),X=n(1214),$=n(1724),ee=n(1212),te=n(30),ne=n(935),ae=n(945),oe=n(938),re=n(453),ie=n(900),ce=n(955),le=n(1004),se=n(1313),ue=n(1289),de=n(1478),be=(n(1651),n(1738));function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var pe=function(e){return"plain"===e||"special-plain"===e},he=pe,me=function(e){return e.thumbnailExtraInfo&&"video"===e.thumbnailExtraInfo.type?{cover:e.thumbnail,hasVideo:!0}:{cover:e.imageUrl||e.thumbnail,hasVideo:!1}};function ve(e){var t=Object(_.b)(e);return t?Object.assign(Object.assign({},e),{},{creationRelationship:t}):e}var ge=function(e){Object(c.a)(n,e);var t=fe(n);function n(){var e,a,r,c,l;Object(o.a)(this,n);for(var s=arguments.length,d=new Array(s),b=0;b<s;b++)d[b]=arguments[b];return(e=t.call.apply(t,[this].concat(d))).state={commentsShown:!1,commentsAutoFocus:!0,favlistsShown:!1,commentPattern:"fixed",positionStatus:null,guideShown:!1,contentExpanded:!1,hasFetchedLabels:!1,shownCatalogModal:!1},e.disableAuth=(a=e.props,r=a.router,c=(r=void 0===r?{}:r).location,l=(c=void 0===c?{}:c).pathname,a.isMobile&&!e.context.currentUser&&!l.startsWith("/topic")),e.handleCommentsShown=function(t,n){e.props.shouldOia?e.createOpenInAppHandler("comment_article")(t):e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleFavButtonClick=function(t){var n=e.props,a=n.zaInfos.favlists;n.shouldOia?e.createOpenInAppHandler("comment_article")(t):(R.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},a&&{id:a})),e.disableAuth?e.handleToggleGuide():e.handleFavlistsShown())},e.handleFavlistsShown=e.context.authRequired((function(){return e.setState({favlistsShown:!0})}),te.X.favlists),e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.toggleCatalogModal=function(){e.setState({shownCatalogModal:!e.state.shownCatalogModal})},e.handleVote=function(t){var n=e.props,a=n.article.id;(0,n.updateArticleVote)(a,t)},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;R.a.trackEvent(Object(i.a)(e),Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.loadArticleConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,a=t.article,o=t.loadArticleConcernedVoters;!n&&e.context.currentUser&&o(a.id)},e.handleToggleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.trackUserAction,o=void 0===a||a,r=e.props,i=r.onToggleExpand,c=r.getTrackUrl,l=r.article,s=r.ua,u=r.trackPromotionClick;if(i&&i(t),t&&(e.loadArticleConcernedVoters(),o)){var d=l.trackUrl?Promise.resolve():c(l.id);d.then((function(){return L(e.props.article,s)})),u&&u()}e.setState({contentExpanded:t})},e.renderPrefix=function(){var t=e.props.article,n=t.labelInfo,a=t.hermesLabel,o=e.state.contentExpanded;return!n&&!a||o?null:Object(u.b)(J.a,{labelInfo:n||a})},e.createOpenInAppHandler=function(t){var n=e.props.article.id;return function(e){e.preventDefault(),Object(T.e)(Object(ne.a)({type:"article",id:n}),{utm_content:t})}},e.handleLike=function(t){return!!e.props.shouldOia&&(e.createOpenInAppHandler("like_article")(t),!0)},e}return Object(r.a)(n,[{key:"renderLabels",value:function(){if(!this.state.contentExpanded)return null;var e=this.props,t=e.article,n=e.useNewLabels,a=t.annotationDetail,o=t.reviewInfo,r=(o=void 0===o?{}:o).isReviewing,i=o.tips;return r?Object(u.b)("div",{className:"ArticleItem-status",children:i}):Object(u.b)(X.a,{useOldLabels:!n,annotationProps:a&&{annotationDetail:a},item:t})}},{key:"renderArticleExtraInfo",value:function(){var e=this.props,t=e.actor,n=e.action,a=e.article,o=a.voteupCount,r=a.id,i=a.type,c=e.concernedUpvoters,l=void 0===c?[]:c,s=t&&t.urlToken;return o?Object(u.b)("div",{className:"ArticleItem-extraInfo",children:Object(u.b)($.a,{id:r,type:i,voteupCount:o,upvotedFollowees:null==l?void 0:l.filter((function(e){return s!==e.urlToken})),too:"voted"===n})},"articleExtraInfo"):null}},{key:"renderMeta",value:function(){var e=function(e){var t=e.title,n=e.id,a=e.created,o=e.updated,r=e.commentCount,i=e.imageUrl,c=e.thumbnail;return{headline:t,url:"".concat(te.m,"/p/").concat(n),datePublished:new Date(1e3*a).toISOString(),dateModified:new Date(1e3*o).toISOString(),commentCount:r,image:i||c}}(this.props.article);return Object.keys(e).map((function(t){return Object(u.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderSuggestEdit",value:function(){var e=this.props.article,t=e.isNormal,n=void 0===t||t,a=e.suggestEdit,o=(a=void 0===a?{}:a).title,r=a.status,i=a.reason;return r&&!n?Object(u.c)("div",{className:"AnswerItem-statusContent",children:[Object(u.b)("div",{className:"AnswerItem-statusReason",children:i}),Object(u.c)("div",{className:"AnswerItem-statusDescription",children:["作者修改内容通过后，文章会重新显示恢复正常 ",Object(u.b)("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink",children:o})]})]}):null}},{key:"render",value:function(){var e,t,n=this,o=this.props,r=o.article,i=o.article,c=i.id,l=i.title,s=i.author,d=i.excerpt,b=i.content,f=i.voteupCount,h=i.voting,m=i.type,v=i.created,g=i.updated,w=i.imageUrl,x=i.commentCount,R=i.adminClosedComment,T=i.reviewInfo,I=(T=void 0===T?{}:T).isReviewing,E=T.editType,N=i.annotationDetail,B=i.vessayInfo,z=i.creationRelationship,L=o.preset,P=o.lastreadTouchable,M=o.itemProp,_=void 0===M?"article":M,K=o.ua,J=o.lessExcerpt,X=o.formatContent,$=o.zaInfos,de=$.expand,fe=$.title,ve=$.voteUp,ge=$.voteDown,Oe=$.toggleComment,je=$.share,ye=$.report,Ce=$.options,we=$.getCommentAction,xe=o.renderOptions,ke=o.isSticky,Se=o.handleToggleSticky,Ae=o.trackPromotionClick,Re=o.renderActionButtons,Te=o.className,Ie=o.isMobile,Ee=o.ecommerce,Ne=o.useVessayV2,Be=o.showHeightLight,ze=void 0!==Be&&Be,Le=o.truncateDisabled,Pe=void 0!==Le&&Le,Me=this.state,De=Me.positionStatus,_e=Me.favlistsShown,Ve=Me.commentsShown,Ue=Me.commentsAutoFocus,Fe=Me.commentPattern,qe=Me.contentExpanded,He=Me.shownCatalogModal,Ge=this.context.currentUser,Ke="".concat(te.m,"/p/").concat(c),We=!(I&&"create"===E),Ze=Ge&&Ge.urlToken===s.urlToken,Qe=this.renderSuggestEdit(),Ye="function"==typeof Se,Je=!function(e){return"special-plain"===e}(L)&&Object(u.b)(W.a,Object.assign(Object.assign({},he(L)&&{preset:"plain"}),{},{author:s,userLinkV2:!0,className:"ArticleItem-authorInfo"}),"authorInfo"),Xe=this.renderArticleExtraInfo(),$e=this.renderLabels(),et=null==z||null===(e=z.coCreation)||void 0===e?void 0:e.refBy,tt=null==z||null===(t=z.reference)||void 0===t?void 0:t.refBy,nt=qe&&(et||tt)&&Object(u.b)(O.Box,{my:"16px",children:Object(u.b)(H.CoCreationLinkCard,{type:"article",coCreationRefBy:et,referenceRefBy:tt})}),at=pe(L)?[[Je,$e,nt],Xe]:[[Je,$e,nt,Xe],null],ot=Object(a.a)(at,2),rt=ot[0],it=ot[1],ct=!Qe||Ze,lt=X?X(b||d,r):b||d,st=We&&!Ie&&qe&&Object(q.a)(r,"article"),ut=Boolean(null==B?void 0:B.enableVideoTranslate);return Object(u.c)(ie.e,{className:p()("ArticleItem",Te),onRef:function(e){n.contentItem=e},"data-zop":JSON.stringify({authorName:s.name,itemId:c,title:l,type:"article"}),data:r,link:Ke,title:Object(u.c)(u.a,{children:[Ye&&ke&&Object(u.b)(se.a,{}),Object(u.b)("a",Object.assign(Object.assign({href:Ke,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-element_name":"Title"},fe&&{"data-za-detail-view-id":fe}),{},{onClick:Ae,children:ze?Object(u.b)("span",{dangerouslySetInnerHTML:{__html:l},className:"ArticleItem-highlight"}):l}))]}),meta:rt,lastreadTouchable:P,itemProp:_,itemType:"http://schema.org/SocialMediaPosting",itemScope:!0,children:[this.renderMeta(),ct?Object(u.b)(ce.b,Object.assign(Object.assign(Object.assign({truncateDisabled:Pe,className:p()({"ArticleItem-highlight":ze}),itemProp:"articleBody",data:r,excerpt:X?X(d,r):d,html:lt,ecommerce:Ee,onToggleExpend:this.handleToggleExpand,prefix:this.renderPrefix(),before:Object(u.c)("div",{children:[it,w&&Object(u.b)(S.a,{className:"ArticleItem-image",thumbnail:Object(A.imgUrl)(w,"60w"),url:w,alt:l})]}),after:Object(u.b)(ce.a,{href:Ke,created:v,updated:g})},J?{limit:74}:{}),{},{onPositionStatusChange:this.handlePositionStatusChange},me(r)),{},{zaIds:{expand:de},children:Re({componentList:[{name:"vote",component:We&&!G.b.includes(c)&&(Ie?Object(u.b)(Q.a,{id:c,type:m,liked:Boolean(h),count:f,disabled:Ze,onClick:this.handleLike,handleToggleGuide:this.handleToggleGuide,disableAuth:this.disableAuth},"vote"):Object(u.b)(Y.a,{type:m,count:f,onVote:this.handleVote,voting:h,isOwner:Ze,handleToggleGuide:this.handleToggleGuide,zaIds:{voteUp:ve,voteDown:ge}},"vote"))},{name:"comment",component:We&&Object(u.b)("div",{css:G.b.includes(c)?{marginLeft:-24}:{},children:Object(u.b)(ae.a,{onClick:this.handleCommentsShown,commentsShown:Ve,commentClosed:R,count:x,positionStatus:De,zaInfos:{toggleComment:Oe,getCommentAction:we}},"comment")})},{name:"catalog",component:st&&Object(u.b)(U.a,{html:lt,sourceId:r.id,onClick:this.toggleCatalogModal},"catalog")},{name:"share",component:We&&Object(u.b)(Z.a,{id:c,type:"article",url:Ke,title:l,authorName:s&&s.name,positionStatus:De,zaShareId:je},"share")},{name:"favlist",component:We&&(!Ge||!Ge.isOrg)&&Object(u.b)(V.a,{onRef:function(e){return n.favButtonRef=e},onClick:this.handleFavButtonClick,label:Ie?"":"收藏"},"favlist")},{name:"sticky",component:!Ie&&Ye&&Ze&&Object(D.a)(Ge)&&Object(u.b)(k.c,{preset:"plain",onClick:Se,icon:ke?j.a:y.a,label:ke?"取消置顶":"置顶"},"sticky")},{name:"report",component:We&&!Ze&&!Ie&&Ge&&Object(u.b)(re.a,{id:c,type:m,zaReportId:ye},"report")},{name:"vessay",component:!Ie&&Ze&&ut&&Object(u.b)(be.a,{type:"article",id:c,useVessayV2:Ne,isAuthor:Ze},"vessay")},{name:"options",component:!Ie&&We&&(null==xe?void 0:xe((function(){return n.contentItem}),Ce))},{name:"annotation",component:!qe&&Object(u.b)(ee.a,{annotationDetail:N},"annotation")}]})})):this.renderSuggestEdit(),ct&&Object(u.b)(ue.a,{content:b,type:"article",urlToken:String(c)}),this.disableAuth&&this.state.guideShown&&Object(u.b)(C.a,{redirectUrl:Ke,urlScheme:Object(ne.a)({type:"article",id:c}),buttons:[K.Wechat?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],onClose:this.handleToggleGuide}),Object(u.b)(oe.a,{parent:r,commentPattern:Fe,shown:Ve,autoFocus:Ue,onClose:this.handleCommentsHide}),Object(u.b)(le.a,{id:c,type:"article",shown:_e,onClose:this.handleFavlistHide,zaEnabled:!0}),st&&Object(u.b)(F.a,{shown:He,html:lt,sourceId:r.id,onClose:this.toggleCatalogModal,created:v,updated:g,author:s,zaContent:{type:"Answer",token:String(r.id)}})]})}}]),n}(d.Component);ge.contextTypes={currentUser:m.a.object,authRequired:m.a.func,isMobile:m.a.bool},ge.propTypes={preset:m.a.string,lessExperpt:m.a.bool,formatContent:m.a.func,renderOptions:m.a.func,zaInfos:m.a.object,trackPromotionClick:m.a.func,renderActionButtons:m.a.func},ge.defaultProps={preset:"primary",zaInfos:{},renderActionButtons:de.b};t.a=Object(b.compose)(Object(x.b)((function(e){var t=e.article,n=e.trackCardShow,a=void 0===n||n,o=e.zaInfos,r=(o=void 0===o?{}:o).cardShow;return Object.assign(Object.assign({module:"PostItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Post",token:t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:1e3*t.created,parent_token:t.column&&t.column.id,author_member_hash_id:t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}}},r&&{view:{id:r}}),{},{trackCardShow:a})})),Object(g.connect)((function(e,t){var n=t.article;return{article:ve(n),ua:e.env.userAgent,ecommerce:Object(w.c)(e,{type:"article",urlToken:t.article.id}),shouldOia:Object(P.shouldOiaSelector)(e),isMobile:Object(P.isMobileSelector)(e),concernedUpvoters:Object(M.a)(e,{id:n.id}),useVessayV2:Object(P.abParamSelector)(e,K.b)===K.a}}),{updateArticleVote:M.g,getTrackUrl:function(e){return{API:{types:N.GET_URL,endpoint:"/brand/track",method:"GET",fetchOptions:{credentials:"include",failsafe:!0,timeout:100},query:{target_url:"https://zhuanlan.zhihu.com/p/".concat(e)}},FAILSAFE:!0,UPDATE:{success:function(t){return{articles:Object(I.a)({},e,{trackUrl:t.data||[]})}}}}},loadArticleConcernedVoters:M.d}),v.withRouter,J.c)(ge)},1068:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var a=n(1339);Object.defineProperty(t,"TAG_RE_TEMPLATE",{enumerable:!0,get:function(){return a.TAG_RE_TEMPLATE}}),Object.defineProperty(t,"TAG_RE",{enumerable:!0,get:function(){return a.TAG_RE}}),Object.defineProperty(t,"parseAttrs",{enumerable:!0,get:function(){return a.parseAttrs}}),Object.defineProperty(t,"parseTagGroup",{enumerable:!0,get:function(){return a.parseTagGroup}}),Object.defineProperty(t,"parseTag",{enumerable:!0,get:function(){return a.parseTag}}),Object.defineProperty(t,"truncateHTML",{enumerable:!0,get:function(){return a.truncateHTML}}),Object.defineProperty(t,"stripHTML",{enumerable:!0,get:function(){return a.stripHTML}})},1076:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(254),o=n(65);function r(e,t){Object(o.a)(2,arguments);var n=Object(a.a)(e),r=Object(a.a)(t);return n.getTime()===r.getTime()}},1077:function(e,t,n){var a=n(1078),o=n(643),r=n(1052),i=n(953),c=n(1001),l=n(1053),s=Math.ceil;e.exports=function(e,t){var n=(t=void 0===t?" ":o(t)).length;if(n<2)return n?a(t,e):t;var u=a(t,s(e/c(t)));return i(t)?r(l(u),0,e).join(""):u.slice(0,e)}},1078:function(e,t){var n=Math.floor;e.exports=function(e,t){var a="";if(!e||t<1||t>9007199254740991)return a;do{t%2&&(a+=e),(t=n(t/2))&&(e+=e)}while(t);return a}},1079:function(e,t,n){var a=n(644)("length");e.exports=a},1080:function(e,t){var n="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+a+"|"+o+")"+"?",s="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[r,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[r+a+"?",a,i,c,n].join("|")+")",d=RegExp(o+"(?="+o+")|"+u+s,"g");e.exports=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}},1081:function(e,t){e.exports=function(e){return e.split("")}},1082:function(e,t){var n="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+a+"|"+o+")"+"?",s="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[r,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[r+a+"?",a,i,c,n].join("|")+")",d=RegExp(o+"(?="+o+")|"+u+s,"g");e.exports=function(e){return e.match(d)||[]}},1084:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useRef)({boundaryRef:t,callback:e});return Object(a.useEffect)((function(){n.current={boundaryRef:t,callback:e}})),Object(a.useEffect)((function(){var e=function(e){var t,a=n.current,o=a.boundaryRef,r=a.callback;null!==o&&null!=o&&null!==(t=o.current)&&void 0!==t&&t.contains(e.target)||r(e)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),null}},1087:function(e,t,n){"use strict";function a(e){var t,n,a,o;return Boolean(null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(a=n.contents)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.type)}function o(e){var t,n,o,r;return!a(e)&&Boolean(null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(o=n.contents)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.type)}function r(e){var t,n,a,o=null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(a=n.contents)||void 0===a?void 0:a[0];return o?"answer"===o.type?o.answer:"article"===o.type?o.article:null:null}function i(e){var t,n,a,o=null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(a=n.contents)||void 0===a?void 0:a[0];return o?"answer"===o.type?o.answer:"article"===o.type?o.article:null:null}function c(e,t){var n=e,a=t.contentAuthor;return a&&n.id!==(null==a?void 0:a.id)?a:n}function l(e){var t,n;return a(e)&&null!==(t=null===(n=r(e))||void 0===n?void 0:n.author)&&void 0!==t?t:null}n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}))},1088:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return l}));var a=function(e){var t=e.title,n=e.id,a=e.topics,o=e.answerCount,r=e.commentCount,i=e.created,c=e.updatedTime,l=e.visitsCount,s=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/".concat(n),keywords:a.map((function(e){return e.name})).join(","),answerCount:o,commentCount:r,dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*c).toISOString(),"zhihu:visitsCount":l,"zhihu:followerCount":s}};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}var r={auto_notif:"auto_notif",header:"header",question_header_card:"question_header_card",force_launch_notif:"force_launch_notif",agree:"agree",disagree:"disagree",comment:"comment",star:"star",comment_list:"comment_list",comment_more:"comment_more",more_answers:"more_answers",bottom:"bottom",capsule:"capsule",follow:"follow",write_answer:"write_answer"},i={expand_answer:"force_launch_notif",expand_answer1:"auto_notif",expand_answer2:"auto_notif",up:"agree",down:"disagree",comment_answer:"comment",collect_answer:"star"},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClose,n=e.isEvaluate,a=e.isLocked,o=e.isSuggest;return t?"closed":o?"suggested":n?"evaluated":a?"locked":""},l=function(e){return"#draft"===e.hash||"#write"===e.hash||"write"in e.query}},1095:function(e,t,n){"use strict";var a=n(4),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(0),d=n.n(u),b=n(13),f=n.n(b),p=n(3),h=n.n(p),m=n(159),v=n(1051),g=n(65);function O(e,t){Object(g.a)(2,arguments);var n=Object(m.a)(t);return Object(v.a)(e,12*n)}var j=n(1123),y=n(88);var C=n(801),w=n(647),x=n(253);var k=n(1607),S=n(1466),A=n(1076),R=n(1608),T=n(1609),I=n(409);function E(e,t){Object(g.a)(2,arguments);var n=Object(y.a)(e),a=Object(y.a)(t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function N(e){Object(g.a)(1,arguments);var t=Object(y.a)(e),n=t.getDate();return n}var B=n(26),z=function(e){return d.a.createElement(B.a,e,d.a.createElement("path",{d:"M17.782 16.78a.737.737 0 0 1-1.052 0l-4.512-4.249a.758.758 0 0 1 0-1.063L16.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L14 12l3.782 3.716c.29.294.29.77 0 1.063zm-5 0a.737.737 0 0 1-1.052 0L7.218 12.53a.758.758 0 0 1 0-1.063L11.73 7.22a.737.737 0 0 1 1.052 0c.29.294.29.77.001 1.063L9 12l3.782 3.716c.29.294.29.77 0 1.063z",fillRule:"evenodd"}))};z.defaultProps={name:"DoubleArrowLeft"};var L=z,P=n(1146),M=n(892),D=function(e){return d.a.createElement(B.a,e,d.a.createElement("path",{d:"M6.218 16.78a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L7.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L10 12l-3.782 3.716a.758.758 0 0 0 0 1.063zm5 0a.737.737 0 0 0 1.052 0l4.512-4.249a.758.758 0 0 0 0-1.063L12.27 7.22a.737.737 0 0 0-1.052 0 .759.759 0 0 0-.001 1.063L15 12l-3.782 3.716a.758.758 0 0 0 0 1.063z",fillRule:"evenodd"}))};D.defaultProps={name:"DoubleArrowRight"};var _=D;function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var U=["日","一","二","三","四","五","六"],F=function(e){Object(i.a)(n,e);var t=V(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={calendarDate:e.props.defaultCalendarDate||(Array.isArray(e.props.value)?e.props.value[0]:e.props.value),hoveringDate:null,now:new Date},e.handlePrevYearClick=function(){var t=O(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handlePrevMonthClick=function(){var t=Object(v.a)(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextMonthClick=function(){var t=Object(v.a)(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextYearClick=function(){var t=O(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleDayClick=function(t){e.setState({calendarDate:t}),e.props.onCalendarDateChange(t),e.props.onChange(t)},e.handleDayHover=function(t){e.setState({hoveringDate:t}),e.props.onHover(t)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.weekStartsOn,r=t.value,i=t.disabledDate,c=t.showToday,l=t.showPrevMonth,u=t.showPrevYear,d=t.showNextMonth,b=t.showNextYear,p=this.state,h=p.calendarDate,v=p.hoveringDate,O=p.now,B=Object(j.a)(function(e){Object(g.a)(1,arguments);var t=Object(y.a)(e);return t.setDate(1),t.setHours(0,0,0,0),t}(h),{weekStartsOn:o}),z=function(e,t){Object(g.a)(1,arguments);var n=t||{},a=n.locale,o=a&&a.options&&a.options.weekStartsOn,r=null==o?0:Object(m.a)(o),i=null==n.weekStartsOn?r:Object(m.a)(n.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var c=Object(y.a)(e),l=c.getDay(),s=6+(l<i?-7:0)-(l-i);return c.setHours(0,0,0,0),c.setDate(c.getDate()+s),c}(function(e){Object(g.a)(1,arguments);var t=Object(y.a)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(h),{weekStartsOn:o}),D=Object(a.a)(Array(Object(C.a)(z,B)+1)).map((function(e,t){return Object(w.a)(B,t)})).reduce((function(e,t){var n=function(e,t,n){Object(g.a)(2,arguments);var a=Object(j.a)(e,n),o=Object(j.a)(t,n),r=a.getTime()-Object(x.a)(a),i=o.getTime()-Object(x.a)(o);return Math.round((r-i)/6048e5)}(t,B,{weekStartsOn:o});return e[n]=e[n]?[].concat(Object(a.a)(e[n]),[t]):[t],e}),[]),V=D[0].map(k.a),F=Array.isArray(r),q=c;return Object(s.c)("div",{className:f()("Calendar",n,{"Calendar--hasBottomTool":q}),children:[Object(s.c)("div",{className:"Calendar-topTool",children:[u&&Object(s.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevYear",onClick:this.handlePrevYearClick,children:Object(s.b)(L,{size:20,center:!0})}),l&&Object(s.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevMonth",onClick:this.handlePrevMonthClick,children:Object(s.b)(P.a,{size:20,center:!0})}),Object(s.b)("div",{className:"Calendar-topToolDate",children:Object(S.a)(h,"yyyy 年 M 月")}),d&&Object(s.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextMonth",onClick:this.handleNextMonthClick,children:Object(s.b)(M.a,{size:20,center:!0})}),b&&Object(s.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextYear",onClick:this.handleNextYearClick,children:Object(s.b)(_,{size:20,center:!0})})]}),Object(s.c)("table",{className:"Calendar-table",cellSpacing:0,children:[Object(s.b)("thead",{className:"Calendar-thead",children:Object(s.b)("tr",{children:V.map((function(e){return Object(s.b)("th",{className:"Calendar-weekName",children:U[e]},e)}))})}),Object(s.b)("tbody",{children:D.map((function(t,n){return Object(s.b)("tr",{children:t.map((function(t,n){var a=i(t),o=F?Object(A.a)(t,r[0])||Object(A.a)(t,r[1]):Object(A.a)(t,r),c=!1;if(F){var l=Object(R.a)(r),u=Object(T.a)(r);c=Object(I.a)(t,l)>0&&Object(I.a)(u,t)>0}return Object(s.b)("td",{className:f()("Calendar-day",{"is-hovered":Object(A.a)(t,v),"is-today":Object(A.a)(t,O),"is-disabled":a,"is-not-this-month":!E(t,h),"is-input-date":o,"is-in-range":c}),onClick:function(){a||e.handleDayClick(t)},onMouseEnter:function(){a||e.handleDayHover(t)},onMouseLeave:function(){a||e.handleDayHover(null)},children:N(t)},n)}))},n)}))})]}),q&&Object(s.b)("div",{className:"Calendar-bottomTool",children:c&&Object(s.b)("button",{className:"Calendar-todayButton",onClick:function(){return e.handleDayClick(O)},disabled:i(O),children:"今天"})})]})}}]),n}(u.Component);F.defaultProps={weekStartsOn:0,disabledDate:function(){return!1},onChange:function(){return!1},onCalendarDateChange:function(){return!1},onHover:function(){return!1},showToday:!0,showPrevMonth:!0,showPrevYear:!0,showNextMonth:!0,showNextYear:!0},F.propTypes={defaultCalendarDate:h.a.instanceOf(Date),value:h.a.oneOfType([h.a.instanceOf(Date),h.a.arrayOf(h.a.instanceOf(Date))]),weekStartsOn:h.a.number,disabledDate:h.a.func,onChange:h.a.func,onHover:h.a.func,showToday:h.a.bool,showPrevMonth:h.a.bool,showPrevYear:h.a.bool,showNextMonth:h.a.bool,showNextYear:h.a.bool};t.a=F},1096:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(13),d=n.n(u),b=n(159),f=n(88),p=n(65);function h(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return n.setSeconds(a),n}var m=n(1393),v=n(1611);function g(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(f.a)(t);return n.getTime()===a.getTime()}var O=n(254);function j(e){Object(p.a)(1,arguments);var t=Object(f.a)(e);return t.setMinutes(0,0,0),t}function y(e){Object(p.a)(1,arguments);var t=Object(f.a)(e),n=t.getFullYear(),a=t.getMonth(),o=new Date(0);return o.setFullYear(n,a+1,0),o.setHours(0,0,0,0),o.getDate()}var C=n(1466);var w=n(2216);var x=n(2217),k=n(446),S=n.n(k),A=n(1e3),R=n.n(A),T=n(513),I=n.n(T),E=n(210),N=n(1104);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var z=S()(0,24).map((function(e){return R()(e,2,"0")})),L=S()(0,60).map((function(e){return R()(e,2,"0")})),P=function(e){Object(r.a)(n,e);var t=B(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={value:h(e.props.value,0)},e}return Object(o.a)(n,[{key:"handleChange",value:function(e,t){var n=this.props,a=n.onChange,o=n.min,r=n.max,i=e;o&&m.a(e,o)&&(i=o),r&&v.a(e,r)&&(i=r),this.setState({value:i}),a(i,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.large,o=t.min,r=t.max,i=t.onRef,c=t.showIcon,s=void 0!==c&&c,u=this.state.value,h=o&&g(O.a(u),O.a(o)),k=h&&g(j(u),j(o)),S=r&&g(O.a(u),O.a(r)),A=S&&g(j(u),j(r));return Object(l.c)("div",{className:d()("DateTimePicker",n),ref:i,children:[Object(l.b)(N.a,{showIcon:s,large:a,value:u,disabledDate:function(e){return!(!o||!m.a(e,O.a(o)))||!(!r||!v.a(e,O.a(r)))},onChange:function(t){e.handleChange(I()((function(e){return function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return isNaN(n)?new Date(NaN):(n.setFullYear(a),n)}(e,t.getFullYear())}),(function(e){return function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t),o=n.getFullYear(),r=n.getDate(),i=new Date(0);i.setFullYear(o,a,15),i.setHours(0,0,0,0);var c=y(i);return n.setMonth(a,Math.min(r,c)),n}(e,t.getMonth())}),(function(e){return function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return n.setDate(a),n}(e,t.getDate())}))(u),{date:t})}}),Object(l.b)(E.b,{listClassName:"DateTimePicker-selectList",large:a,value:C.a(u,"HH"),onChange:function(t){return e.handleChange(function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return n.setHours(a),n}(u,t),{hours:t})},children:z.map((function(e){var t=h&&e<w.a(o)||S&&e>w.a(r);return Object(l.b)(E.a,{value:e,disabled:t,css:function(e){return{color:t?e.colors.GBK07B:e.colors.GBK02A}}},e)}))}),Object(l.b)("span",{className:"DateTimePicker-label",children:"时"}),Object(l.b)(E.b,{listClassName:"DateTimePicker-selectList",large:a,value:C.a(u,"mm"),onChange:function(t){return e.handleChange(function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return n.setMinutes(a),n}(u,t),{minutes:t})},children:L.map((function(e){var t=k&&e<x.a(o)||A&&e>x.a(r);return Object(l.b)(E.a,{value:e,disabled:t,css:function(e){return{color:t?e.colors.GBK07B:e.colors.GBK02A}}},e)}))}),Object(l.b)("span",{className:"DateTimePicker-label",children:"分"})]})}}]),n}(s.Component);t.a=P},1100:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(49),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(13),p=n.n(f),h=n(36),m=n(1396),v=n(1630),g=n(35),O=n(74),j=n(178),y=n(87),C=n(245),w=n(4),x=n(414),k=n(160);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var A=function(e){Object(i.a)(n,e);var t=S(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={step:0},e.containerRef=Object(b.createRef)(),e.reasonButtonRefs=[],e.toggleStep=function(){e.setState({step:0===e.state.step?1:0},(function(){e.popover.position()}))},e.handleKeyDown=function(t){var n=Number(t.key);n&&e.reasonButtonRefs[n-1]&&e.reasonButtonRefs[n-1].focus()},e.handleNeverShowVoteDownReason=function(){e.props.onSetVoteDownReason(!1),e.popover.close()},e.handleSelectReason=function(t){e.props.onSelectVoteDownReason(t),e.popover.close()},e}return Object(r.a)(n,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,a=t.positionStatus,o=this.state.step,r=Object(w.a)(n).sort((function(e,t){return e.sort-t.sort}));return Object(s.b)(k.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:a,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0,children:Object(s.c)("div",{className:"VoteDownReasonMenu-container",onKeyDown:this.handleKeyDown,tabIndex:-1,children:[Object(s.c)("div",{className:"VoteDownReasonMenu-header",children:[0===o&&"已反对，你觉得",1===o&&"不再显示该反馈功能？"]}),Object(s.c)("div",{className:"VoteDownReasonMenu-action",children:[0===o&&Object(s.b)(h.c,{preset:"plain",className:"VoteDownReasonMenu-ignoreButton preventCloseOnTarget",onClick:this.toggleStep,children:"不再显示"}),0===o&&Object(s.b)("div",{className:"VoteDownReasonMenu-spliter"}),Object(s.b)(h.c,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭",tabIndex:1,icon:x.a})]}),0===o&&Object(s.b)("div",{className:"VoteDownReasonMenu-reasonList",children:r.map((function(t,n){return Object(s.b)(h.c,{preset:"plain",className:"VoteDownReasonMenu-reason",onClick:function(){e.handleSelectReason(t)},onRef:function(t){return e.reasonButtonRefs[n]=t},children:t.name},t.reasonId)}))}),1===o&&Object(s.c)("div",{className:"VoteDownReasonMenu-disableReason",children:[Object(s.b)("div",{className:"VoteDownReasonMenu-disableReasonHint",children:"你可以在「设置」页面中的「屏蔽」开启。"}),Object(s.c)("div",{className:"VoteDownReasonMenu-disableReasonButtonList",children:[Object(s.b)(h.c,{className:"preventCloseOnTarget",onClick:this.toggleStep,children:"返回"}),Object(s.b)(h.c,{color:"blue",onClick:this.handleNeverShowVoteDownReason,children:"不再显示"})]})]})]})})}}]),n}(b.Component);A.defaultProps={reasonList:[]};var R=A,T=n(30);n(1623);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var E=function(e){Object(i.a)(n,e);var t=I(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:e.props.isRecognized}},e.voteUpButtonRef=Object(b.createRef)(),e.voteDownButtonRef=Object(b.createRef)(),e.shouldShowMenu=function(){var t=e.props,n=t.voting,a=t.voteDownReason,o=t.onLoadVoteDownReason;return!!t.isShowVoteDownMenu&&(-1===n?(e.popover.close(),!1):!!a||(e.isPendingForVoteDownReason=!0,o(),!1))},e.onVote=e.context.authRequired((function(t){e.props.onVote(t)}),T.X.vote),e.voteUp=function(t){var n=1===e.props.voting?["UnUpvote","neutral"]:["Upvote","up"],o=Object(a.a)(n,2),r=o[0],i=o[1];e.vote(t,r,i),e.voteUpButtonRef.current.focus()},e._voteDown=function(t){var n=-1===e.props.voting?["UnDownvote","neutral"]:["Downvote","down"],o=Object(a.a)(n,2),r=o[0],i=o[1];e.vote(t,r,i),e.voteDownButtonRef.current.focus()},e.voteDown=function(t){e.shouldShowMenu()&&e.popover.open(),e._voteDown(t)},e.vote=function(t,n,a){var o=e.props,r=o.disableAuth,i=o.handleToggleGuide,c=o.onClick,l=o.type,s=o.zaIds,u=s.voteUp,d=s.voteDown,b=n.includes("Upvote")?u:d;"article"===l&&"down"===a&&g.a.trackEvent(e.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),g.a.trackEvent(n.includes("Upvote")?e.voteUpButtonRef.current:e.voteDownButtonRef.current,Object.assign({action:n,element:"Button"},b&&{id:b})),c?c(t,a):r?i():e.onVoteWithRecognize(n,a)},e.onVoteWithRecognize=function(t,n){var a=e.props.voting;!e.state.recognizeInfo.isRecognized||1!==a||"UnUpvote"!==t&&"Downvote"!==t?e.onVote(n):e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{showRecognizeModal:!0,action:t,voteType:n})})},e.handleConfirmCancelRecognize=function(){e.onVote(e.state.recognizeInfo.voteType),e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{isRecognized:!1,showRecognizeModal:!1})})},e.handleCloseCancelRecognizeModal=function(){return e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{showRecognizeModal:!1})})},e.handleTogglerClick=function(t){e.shouldShowMenu()||t.preventDefault(),e._voteDown(t)},e.renderVoteUpButton=function(){var t=e.props,n=t.isOwner,a=t.count,o=t.voting,r=t.disabled,i=t.hideDesc,c=1===o,l=c?"已赞同":"赞同",u=[l,Object(j.cnNiceNumber)(a)].join(" "),d=[!i&&l,0!==a&&Object(j.cnNiceNumber)(a).trim()].filter(Boolean).join(" ");return Object(s.c)(O.a,{as:h.c,zaText:c?"取消赞同":"赞同",zaType:"Button",zaAction:c?"UnUpvote":"Upvote",className:p()("VoteButton VoteButton--up",{"is-active":1===o}),disabled:n||r,onClick:e.voteUp,"aria-label":u,"aria-live":"polite",onRef:e.voteUpButtonRef,children:[Object(s.b)(m.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),d]})},e.renderVoteDownButton=function(){var t=e.props,n=t.voting,a=t.disabled,o=-1===n,r=o?"已反对":"反对";return Object(s.b)(O.a,{as:h.c,zaText:o?"取消反对":"反对",zaType:"Button",zaAction:o?"UnDownvote":"Downvote",className:p()("VoteButton VoteButton--down",{"is-active":-1===n},{"VoteButton--mobileDown":!1}),disabled:a,onClick:e._voteDown,"aria-label":r,"aria-live":"polite",onRef:e.voteDownButtonRef,children:Object(s.b)(v.a,{center:!0,size:10})})},e}return Object(r.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,a=t.positionStatus,o=t.isShowVoteDownMenu,r=t.voteDownReason,i=this.state.recognizeInfo,c=i.showRecognizeModal,l="UnUpvote"===i.action,u=o&&!0;return Object(s.c)("span",{ref:this.voteButtonRef,children:[Object(s.b)(C.c,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown}}),this.renderVoteUpButton(),!n&&!u&&this.renderVoteDownButton(),!n&&u&&Object(s.b)(R,{reasonList:r,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:a,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}),Object(s.b)(y.b,{title:"确定".concat(l?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal,children:c&&Object(s.c)("div",{children:[Object(s.c)("div",{children:[l?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"]}),Object(s.c)(y.a,{direction:"horizontal",children:[Object(s.b)(h.c,{onClick:this.handleCloseCancelRecognizeModal,children:l?"暂不取消":"暂不选择"}),Object(s.b)(h.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize,children:l?"取消赞同":"选择反对"})]})]})})]})}}]),n}(b.Component);E.contextTypes={authRequired:d.a.func},E.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),isRecognized:d.a.bool},E.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}}},1103:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),o=n(13),r=n.n(o);function i(e){var t=e.header,n=e.options,o=e.className,i=e.onRef,c=e.showOptions,l=void 0===c||c;return Object(a.c)("div",{className:r()("Topbar",o,!1),ref:i,children:[Object(a.b)("div",{className:"Topbar-title",children:t}),l&&Object(a.b)("div",{className:"Topbar-options",children:n})]})}},1104:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(3),d=n.n(u),b=n(13),f=n.n(b),p=n(1466),h=n(504),m=n(160),v=n(1610),g=n(875),O=n(1095);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var y=function(e){Object(r.a)(n,e);var t=j(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isFocused:!1},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.large,o=t.value,r=t.onChange,i=t.isButtonActive,c=t.toggler,s=t.disabledDate,u=t.getContainer,d=t.showIcon,b=void 0!==d&&d,j=this.state.isFocused;return Object(l.b)(m.a,{className:f()("DatePicker",n),toggler:c||Object(l.c)(h.a,{large:a,className:f()("DatePicker-Button",{"is-active":j||i}),children:[b&&Object(l.b)(v.a,{center:!0,size:20}),p.a(o,"yyyy/MM/dd"),Object(l.b)(g.a,{css:{marginLeft:8}})]}),onOpen:function(){e.setState({isFocused:!0})},onClose:function(){e.setState({isFocused:!1})},ref:function(t){e.popover=t},placement:"bottom",arrowed:!0,preventCloseOnTarget:!0,getContainer:u,children:Object(l.b)(O.a,{value:o,onChange:function(t){e.popover.close(),r(t)},disabledDate:s})})}}]),n}(s.Component);y.propTypes={toggler:d.a.element,disabledDate:d.a.func}},1105:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(1),o=n(0),r=n(74),i=n(36),c=n(870),l=n(245),s=function(e){var t=e.className,n=e.onClick,s=e.label,u=e.onRef,d=e.disabled,b=e.showIcon,f=void 0===b||b;return Object(a.c)(o.Fragment,{children:[Object(a.b)(l.c,{keyMap:{BOOKMARK:"s c"},handlers:{BOOKMARK:n}}),Object(a.b)(r.a,{as:i.c,zaText:"收藏",zaType:"Button",onRef:u,className:t,preset:"plain",onClick:n,icon:f?c.a:null,label:s,disabled:d})]})};s.defaultProps={label:"收藏"};var u=s},1107:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(77),i=n(17),c=n(18),l=n(9),s=n(1),u=n(0),d=n(19),b=n(24),f=n(433),p=n(942),h=n(1142),m=n(35),v=n(975),g=n(29),O=n(261),j=n(415),y=n(369),C=n.n(y),w=function(e,t){return e+(t?Date.now()-t:0)},x=function(e,t){return Math.abs(e-t)<.01},k={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},S={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},A=[1,2,3,5,8,13];function R(e){var t,n="sd",a=0,o=null,r=0,i=null,c=!1,l=0,s=0;function u(t,c){e(t,Object.assign({play_event_identifier:o,duration:1e3*a,elapsed:w(r,i),video_quality:k[n]},c))}function d(){(++s<15?A.includes(s):s%15==0)&&u({action:"Playing"})}function b(){clearInterval(t)}return{handlePlayEvent:function(e){var n=e.currentTime,c=e.duration;a=c,x(n,0)&&(o=C()(),r=0),i=Date.now(),x(n,0)?u({action:"Play"}):u({action:"ResumePlay"}),s=0,b(),t=setInterval(d,1e3)},handlePauseEvent:function(e){var t=e.currentTime,n=e.duration;i&&(r+=Date.now()-i,i=null),x(t,n)?u({action:"EndPlay"}):u({action:"Pause"}),b()},handleQualityChangeEvent:function(e){var t=e.quality;u({action:"Switch",name:S[t]}),n=t},handleFragmentLoading:function(){c||(l=Date.now())},handleFragmentLoaded:function(){c||(c=!0,u({action:"Load"},{video_load_time:Date.now()-l}))},clearTick:b}}var T=n(42);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var E=function(e){Object(i.a)(n,e);var t=I(n);function n(e){var o;Object(a.a)(this,n),(o=t.call(this,e)).pauseVideoInIframe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o.messageHelper.dispatchMessage(e.contentWindow,v.a.PLAYER.PAUSE,{dontApplyOnFullScreen:t})},o.pauseAllOtherVideos=function(){Array.from(document.querySelectorAll("iframe")).filter((function(e){return e!==o.iframe})).forEach((function(e){return o.pauseVideoInIframe(e)}))},o.handleMessage=function(e,t){var n=o.videoTracker,a=n.handlePlayEvent,r=n.handlePauseEvent,i=n.handleQualityChangeEvent,c=n.handleFragmentLoading,l=n.handleFragmentLoaded;switch(e){case v.b.DOM.PLAY:o.pauseAllOtherVideos(),a(t);break;case v.b.DOM.PAUSE:r(t);break;case v.b.PLAYER.QUALITY_CHANGE:i(t);break;case"fragment-loading":c(t);break;case"fragment-loaded":l(t)}},o.handleObserve=function(e){e[0].intersectionRatio<=0&&o.iframe&&o.pauseVideoInIframe(o.iframe,!0)},o.handlePlay=function(){o.props.trackEvent(Object(r.a)(o),{id:5500,action:"Play",element:"Video"})},o.handlePlayFailed=function(){(0,o.props.showNotification)("视频加载失败，请刷新页面重试","red")};var i=e.data;return o.messageHelper=Object(v.c)(i.id,"*",!0),o.videoTracker=R((function(e,t){m.a.trackEvent(Object(r.a)(o),e,{play:t})})),o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=t.isLens,a=t.id,o=t.playerUrl,r=t.flvPlayerUrl,i=e.loadVideo;n||!a||o||r||i(a);var c=this.messageHelper.subscribeMessage;this.messageSubscription=c(this.handleMessage)}},{key:"componentWillUnmount",value:function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.data.error,o=t.onBeforePlay;return Object(s.b)("div",{className:"RichText-video",children:a?Object(s.b)(h.a,Object.assign({},n)):Object(s.b)(f.a,{onObserve:this.handleObserve,children:Object(s.b)(p.b,Object.assign(Object.assign({},n),{},{onIframeRef:function(t){return e.iframe=t},onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:o}))})})}}]),n}(u.Component);t.a=Object(d.compose)(Object(b.connect)((function(e,t){var n=t.data,a=n.isLens,o=n.id;return a?{data:Object.assign(Object.assign({},t.data),{},{source:"lens",playerUrl:"https://".concat(T.a.videoHost,"/video/").concat(o)})}:{data:e.video.data[o]||t.data}}),{showNotification:g.h,loadVideo:O.c}),Object(j.b)((function(e){var t=e.data,n=t.isLens,a=t.id,o=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:a,is_playable:Boolean(o)},trackCardShow:!0,view:{id:174}}})))(E)},1110:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z",fillRule:"evenodd"}))};i.defaultProps={name:"Dots"},t.a=i},1111:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-.034 2.966c1.949 0 1.485 1.807 1.485 2.211 0 .115-.785 7.79-.785 7.79h-1.4s-.785-7.623-.785-7.738c0-.416-.463-2.263 1.485-2.263zm1.057 13.522c-.294.287-.647.43-1.056.43-.41 0-.762-.142-1.058-.43a1.429 1.429 0 0 1-.443-1.07c0-.41.148-.762.443-1.057a1.443 1.443 0 0 1 1.058-.442c.409 0 .762.143 1.056.43.296.287.443.644.443 1.07 0 .427-.147.783-.443 1.07z",fillRule:"evenodd"}))};i.defaultProps={name:"Alert"},t.a=i},1116:function(e,t,n){"use strict";t.a=function(e){var t=e.getCurrentContent();return t.getBlockMap().filter((function(e){return"atomic"===e.getType()})).map((function(e){var n=e.getEntityAt(0);return n?t.getEntity(n):null})).filter(Boolean)}},1119:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(131),o=n.n(a),r=n(75),i=function(e,t){var n=[];return o()((function(){for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];n.push(o),setTimeout((function(){n.length&&(t(n),n.length=0)}),e)}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)}))}(550,(function(e){var t=new FormData;return t.append("items",JSON.stringify(e)),Object(r.e)("/lastread/touch",{method:"POST",body:t})})),c="read",l="touch";t.c=i},1123:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(88),o=n(159),r=n(65);function i(e,t){Object(r.a)(1,arguments);var n=t||{},i=n.locale,c=i&&i.options&&i.options.weekStartsOn,l=null==c?0:Object(o.a)(c),s=null==n.weekStartsOn?l:Object(o.a)(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Object(a.a)(e),d=u.getDay(),b=(d<s?7:0)+d-s;return u.setDate(u.getDate()-b),u.setHours(0,0,0,0),u}},1124:function(e,t,n){"use strict";function a(e){try{return JSON.parse(e)}catch(e){return null}}n.d(t,"a",(function(){return a}))},1125:function(e,t,n){"use strict";var a=n(33),o=n(1),r=n(122),i=n(852),c=["checked","children"];t.a=function(e){var t=e.checked,n=e.children,l=Object(a.default)(e,c);return Object(o.c)(r.b,Object.assign(Object.assign({},l),{},{children:[Object(o.b)("span",{css:{display:"inline-block",width:24,marginLeft:-24},children:t&&Object(o.b)(i.a,{text:!0,center:!0})}),n]}))}},1126:function(e,t,n){"use strict";var a=n(1),o=n(13),r=n.n(o);t.a=function(e){var t=e.className;return Object(a.b)("span",{className:r()("Bull",t),children:" · "})}},1127:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(106),o=n.n(a);function r(e,t,n){var a=!1,r=o()((function(){a=!1,e.apply(void 0,arguments)}),t,n);return Object.assign((function(){a=!0,r.apply(void 0,arguments)}),{cancel:r.cancel,flush:r.flush,pending:function(){return a}})}},1128:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(1),o=n(0),r=n(130),i=n.n(r),c=n(24),l=n(85),s=n.n(l),u=n(13),d=n.n(u),b=n(1419),f=n.n(b),p=n(218),h=Object(o.memo)((function(e){var t=e.className,n=function(e){return Object.keys(e).filter((function(t){return f()(e[t])&&e[t]})).filter((function(t){return"Mobile"!==t||!e.Tablet})).map((function(e){return"Body--".concat(e)}))}(Object(c.useSelector)(p.q));return Object(a.b)(i.a,{children:Object(a.b)("body",{className:d()(t,n)})})})),m=function(e){return function(t){var n=Object(o.forwardRef)((function(n,o){return Object(a.c)(a.a,{children:[Object(a.b)(h,{className:e}),Object(a.b)(t,Object.assign(Object.assign({},n),{},{ref:o}))]})}));return s()(n,t)}};m("LightGreyBg-body"),m("WhiteBg-body"),m("GreyBg-body")},1135:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(22),o=n.n(a),r=n(21),i=n.n(r),c=n(25),l=n.n(c),s=n(23),u=n.n(s),d=n(27),b=n.n(d),f=n(14),p=n.n(f),h=n(0),m=n.n(h),v=n(13),g=n.n(v),O=n(7);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return b()(this,n)}}var y=function(e){u()(n,e);var t=j(n);function n(e){var a;i()(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({checked:e.target.checked});var t=a.props.onChange;"function"==typeof t&&t(e)},a.handleFocus=function(){a.setState({focused:!0})},a.handleBlur=function(){a.setState({focused:!1})};var o=e.checked;return a.state={checked:Boolean(o),focused:!1},a}return l()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.checked,a=t.forceControlled;if(!a){var o=e.forceControlled,r=e.checked;if(!o||a){if(void 0!==n){var i=this.state.checked;r!==n&&n!==i&&this.setState({checked:n})}}else this.setState({checked:Boolean(n)})}}},{key:"render",value:function(){var e,t=this.props,n=t.id,a=t.style,r=t.className,i=t.preset,c=t.onClick,l=t.onChange,s=t.name,u=t.value,d=t.checked,b=t.disabled,f=t.forceControlled,p=this.state,h=p.focused,m=p.checked,v=f?d:m,j=f?l:this.handleChange;return Object(O.g)("label",{className:g()("Switch",r,(e={},o()(e,"Switch--".concat(i),"normal"!==i),o()(e,"Switch--focused",h),o()(e,"Switch--disabled",b),o()(e,"Switch--checked",Boolean(v)),e)),style:a},Object(O.g)("input",{id:n,className:"Switch-input",type:"checkbox",onClick:c,onChange:j,onFocus:this.handleFocus,onBlur:this.handleBlur,name:s,value:u,checked:Boolean(v),disabled:b}))}}]),n}(m.a.Component);y.defaultProps={preset:"normal"}},1136:function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return y}));var a=n(1480),o=n(2),r=n(33),i=n(1),c=n(24),l=n(89),s=n.n(l),u=n(85),d=n.n(u),b=n(482),f=["showLabelInfo","showLabels"],p=["answer","article","post","item"],h=function(e){return e.itemType||p.find((function(t){return e[t]}))},m=function(e){return d()(Object(c.connect)((function(e,t){return{useNewLabels:Object(b.f)(e,t[h(t)])}}))((function(t){var n=t.showLabelInfo,a=void 0===n||n,c=t.showLabels,l=void 0===c||c,u=Object(r.default)(t,f),d=h(u),b=u,p=[];return l||p.push("isLabeled"),a||(p.push("labelInfo"),p.push("hermesLabel")),d&&p.length>0&&(b=Object.assign(Object.assign({},b),{},Object(o.a)({},d,s()(u[d],p)))),Object(i.b)(e,Object.assign({},b))})),e)},v=n(0),g=Object(v.createContext)({showLabelInfo:!0,showLabels:!0}),O=g.Provider,j=g.Consumer,y=function(e){return function(t){var n=Object(i.b)(j,{children:function(n){return Object(i.b)(e,Object.assign(Object.assign({},t),{},{showLabelProps:n}))}});return d()(n,e)}}},1139:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1);function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var u=function(e){Object(r.a)(n,e);var t=s(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFollowed,n=e.isFollowing;return t?Object(l.b)("span",{className:"FollowStatus",children:n?"相互关注":"关注了你"}):null}}]),n}(n(0).Component);t.a=u},1144:function(e,t,n){"use strict";n.d(t,"w",(function(){return u})),n.d(t,"a",(function(){return we})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return ke})),n.d(t,"d",(function(){return Ce})),n.d(t,"e",(function(){return X})),n.d(t,"f",(function(){return me})),n.d(t,"g",(function(){return Be})),n.d(t,"h",(function(){return T})),n.d(t,"i",(function(){return _e})),n.d(t,"j",(function(){return Me})),n.d(t,"k",(function(){return N})),n.d(t,"l",(function(){return B})),n.d(t,"m",(function(){return L})),n.d(t,"n",(function(){return D})),n.d(t,"o",(function(){return W})),n.d(t,"p",(function(){return ye})),n.d(t,"q",(function(){return je})),n.d(t,"r",(function(){return Oe})),n.d(t,"s",(function(){return I})),n.d(t,"t",(function(){return Ve})),n.d(t,"u",(function(){return E})),n.d(t,"v",(function(){return R})),n.d(t,"x",(function(){return Se})),n.d(t,"y",(function(){return z})),n.d(t,"z",(function(){return qe})),n.d(t,"A",(function(){return We})),n.d(t,"B",(function(){return Ge})),n.d(t,"C",(function(){return Ue})),n.d(t,"D",(function(){return Ke}));var a=n(28),o=n.n(a),r=n(21),i=n.n(r),c=n(53),l=n.n(c),s=x(),u=function(e){return j(e,s)},d=x();u.write=function(e){return j(e,d)};var b=x();u.onStart=function(e){return j(e,b)};var f=x();u.onFrame=function(e){return j(e,f)};var p=x();u.onFinish=function(e){return j(e,p)};var h=[];u.setTimeout=function(e,t){var n=u.now()+t,a={time:n,handler:e,cancel:function e(){var t=h.findIndex((function(t){return t.cancel==e}));~t&&h.splice(t,1),S.count-=~t?1:0}};return h.splice(m(n),0,a),S.count+=1,y(),a};var m=function(e){return~(~h.findIndex((function(t){return t.time>e}))||~h.length)};u.cancel=function(e){s.delete(e),d.delete(e)},u.sync=function(e){O=!0,u.batchedUpdates(e),O=!1},u.throttle=function(e){var t;function n(){try{e.apply(void 0,l()(t))}finally{t=null}}function a(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];t=a,u.onStart(n)}return a.handler=e,a.cancel=function(){b.delete(n),t=null},a};var v="undefined"!=typeof window?window.requestAnimationFrame:function(){};u.use=function(e){return v=e},u.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,u.batchedUpdates=function(e){return e()},u.catch=console.error;var g=-1,O=!1;function j(e,t){O?(t.delete(e),e(0)):(t.add(e),y())}function y(){g<0&&(g=0,v(C))}function C(){~g&&(v(C),u.batchedUpdates(w))}function w(){var e=g;g=u.now();var t=m(g);t&&(k(h.splice(0,t),(function(e){return e.handler()})),S.count-=t),b.flush(),s.flush(e?Math.min(64,g-e):16.667),f.flush(),d.flush(),p.flush()}function x(){var e=new Set,t=e;return{add:function(n){S.count+=t!=e||e.has(n)?0:1,e.add(n)},delete:function(n){return S.count-=t==e&&e.has(n)?1:0,e.delete(n)},flush:function(n){t.size&&(e=new Set,S.count-=t.size,k(t,(function(t){return t(n)&&e.add(t)})),S.count+=e.size,t=e)}}}function k(e,t){e.forEach((function(e){try{t(e)}catch(e){u.catch(e)}}))}var S={count:0,clear:function(){g=-1,h=[],b=x(),s=x(),f=x(),d=x(),p=x(),S.count=0}},A=n(0);function R(){}var T=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},I={arr:Array.isArray,obj:function(e){return!!e&&"Object"===e.constructor.name},fun:function(e){return"function"==typeof e},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},und:function(e){return void 0===e}};function E(e,t){if(I.arr(e)){if(!I.arr(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var N=function(e,t){return e.forEach(t)};function B(e,t,n){for(var a in e)t.call(n,e[a],a)}var z=function(e){return I.und(e)?[]:I.arr(e)?e:[e]};function L(e,t){if(e.size){var n=Array.from(e);e.clear(),N(n,t)}}var P,M,D=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return L(e,(function(e){return e.apply(void 0,n)}))},_=null,V=!1,U=R,F=Object.freeze({__proto__:null,get createStringInterpolator(){return P},get to(){return M},get colors(){return _},get skipAnimation(){return V},get willAdvance(){return U},assign:function(e){e.to&&(M=e.to),e.now&&(u.now=e.now),void 0!==e.colors&&(_=e.colors),null!=e.skipAnimation&&(V=e.skipAnimation),e.createStringInterpolator&&(P=e.createStringInterpolator),e.requestAnimationFrame&&u.use(e.requestAnimationFrame),e.batchedUpdates&&(u.batchedUpdates=e.batchedUpdates),e.willAdvance&&(U=e.willAdvance)}}),q=new Set,H=[],G=[],K=0,W={get idle(){return!q.size&&!H.length},start:function(e){K>e.priority?(q.add(e),u.onStart(Z)):(Q(e),u(J))},advance:J,sort:function(e){if(K)u.onFrame((function(){return W.sort(e)}));else{var t=H.indexOf(e);~t&&(H.splice(t,1),Y(e))}},clear:function(){H=[],q.clear()}};function Z(){q.forEach(Q),q.clear(),u(J)}function Q(e){H.includes(e)||Y(e)}function Y(e){var t,n,a;H.splice((n=function(t){return t.priority>e.priority},(a=(t=H).findIndex(n))<0?t.length:a),0,e)}function J(e){for(var t=G,n=0;n<H.length;n++){var a=H[n];K=a.priority,a.idle||(U(a),a.advance(e),a.idle||t.push(a))}return K=0,(G=H).length=0,(H=t).length>0}var X={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},$="[-+]?\\d*\\.?\\d+";function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var te=new RegExp("rgb"+ee($,$,$)),ne=new RegExp("rgba"+ee($,$,$,$)),ae=new RegExp("hsl"+ee($,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%")),oe=new RegExp("hsla"+ee($,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%",$)),re=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ce=/^#([0-9a-fA-F]{6})$/,le=/^#([0-9a-fA-F]{8})$/;function se(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ue(e,t,n){var a=n<.5?n*(1+t):n+t-n*t,o=2*n-a,r=se(o,a,e+1/3),i=se(o,a,e),c=se(o,a,e-1/3);return Math.round(255*r)<<24|Math.round(255*i)<<16|Math.round(255*c)<<8}function de(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function be(e){return(parseFloat(e)%360+360)%360/360}function fe(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function pe(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function he(e){var t,n,a="number"==typeof(t=e)?t>>>0===t&&t>=0&&t<=4294967295?t:null:(n=ce.exec(t))?parseInt(n[1]+"ff",16)>>>0:_&&void 0!==_[t]?_[t]:(n=te.exec(t))?(de(n[1])<<24|de(n[2])<<16|de(n[3])<<8|255)>>>0:(n=ne.exec(t))?(de(n[1])<<24|de(n[2])<<16|de(n[3])<<8|fe(n[4]))>>>0:(n=re.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=le.exec(t))?parseInt(n[1],16)>>>0:(n=ie.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=ae.exec(t))?(255|ue(be(n[1]),pe(n[2]),pe(n[3])))>>>0:(n=oe.exec(t))?(ue(be(n[1]),pe(n[2]),pe(n[3]))|fe(n[4]))>>>0:null;if(null===a)return e;var o=(16711680&(a=a||0))>>>16,r=(65280&a)>>>8,i=(255&a)/255;return"rgba(".concat((4278190080&a)>>>24,", ").concat(o,", ").concat(r,", ").concat(i,")")}var me=function e(t,n,a){if(I.fun(t))return t;if(I.arr(t))return e({range:t,output:n,extrapolate:a});if(I.str(t.output[0]))return P(t);var o=t,r=o.output,i=o.range||[0,1],c=o.extrapolateLeft||o.extrapolate||"extend",l=o.extrapolateRight||o.extrapolate||"extend",s=o.easing||function(e){return e};return function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,a,o,r,i,c,l){var s=l?l(e):e;if(s<t){if("identity"===i)return s;"clamp"===i&&(s=t)}if(s>n){if("identity"===c)return s;"clamp"===c&&(s=n)}if(a===o)return a;if(t===n)return e<=t?a:o;t===-1/0?s=-s:n===1/0?s-=t:s=(s-t)/(n-t);s=r(s),a===-1/0?s=-s:o===1/0?s+=a:s=s*(o-a)+a;return s}(e,i[t],i[t+1],r[t],r[t+1],s,c,l,o.map)}};var ve=Symbol.for("FluidValue.get"),ge=Symbol.for("FluidValue.observers"),Oe=function(e){return Boolean(e&&e[ve])},je=function(e){return e&&e[ve]?e[ve]():e},ye=function(e){return e[ge]||null};function Ce(e,t){var n=e[ge];n&&n.forEach((function(e){!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var we=function e(t){if(i()(this,e),!t&&!(t=this.get))throw Error("Unknown getter");xe(this,t)},xe=function(e,t){return Re(e,ve,t)};function ke(e,t){if(e[ve]){var n=e[ge];n||Re(e,ge,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Se(e,t){var n=e[ge];if(n&&n.has(t)){var a=n.size-1;a?n.delete(t):e[ge]=null,e.observerRemoved&&e.observerRemoved(a,t)}}var Ae,Re=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},Te=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ie=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ee=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Ne=function(e,t,n,a,o){return"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(a),", ").concat(o,")")},Be=function(e){Ae||(Ae=_?new RegExp("(".concat(Object.keys(_).join("|"),")"),"g"):/^\b$/);var t=e.output.map((function(e){return je(e).replace(Ie,he).replace(Ae,he)})),n=t.map((function(e){return e.match(Te).map(Number)})),a=n[0].map((function(e,t){return n.map((function(e){if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]}))})).map((function(t){return me(Object.assign(Object.assign({},e),{},{output:t}))}));return function(e){var n=0;return t[0].replace(Te,(function(){return String(a[n++](e))})).replace(Ee,Ne)}},ze="react-spring: ",Le=function(e){var t=e,n=!1;if("function"!=typeof t)throw new TypeError("".concat(ze,"once requires a function parameter"));return function(){n||(t.apply(void 0,arguments),n=!0)}},Pe=Le(console.warn);function Me(){Pe("".concat(ze,'The "interpolate" function is deprecated in v9 (use "to" instead)'))}var De=Le(console.warn);function _e(){De("".concat(ze,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead)'))}function Ve(e){return I.str(e)&&("#"==e[0]||/\d/.test(e)||e in(_||{}))}var Ue=function(e){return Object(A.useEffect)(e,Fe)},Fe=[];function qe(){var e=Object(A.useState)()[1],t=Object(A.useState)(He)[0];return Ue(t.unmount),function(){t.current&&e({})}}function He(){var e={current:!0,unmount:function(){return function(){e.current=!1}}};return e}function Ge(e,t){var n=Object(A.useState)((function(){return{inputs:t,result:e()}})),a=o()(n,1)[0],r=Object(A.useRef)(),i=r.current,c=i;c?Boolean(t&&c.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,c.inputs))||(c={inputs:t,result:e()}):c=a;return Object(A.useEffect)((function(){r.current=c,i==a&&(a.inputs=a.result=void 0)}),[c]),c.result}function Ke(e){var t=Object(A.useRef)();return Object(A.useEffect)((function(){t.current=e})),t.current}var We="undefined"!=typeof window&&window.document&&window.document.createElement?A.useLayoutEffect:A.useEffect},1169:function(e,t,n){"use strict";var a=n(0),o=n(645),r="element",i="text",c="empty",l="fragment",s=function(e,t){return function e(n){var o,s=n.node;return n.type=(o=s,a.isValidElement(o)?r:function(e){return"string"==typeof e||"number"==typeof e}(o)?i:function(e){return null==e||"boolean"==typeof e}(o)?c:Array.isArray(o)?l:void 0),n.type===r?n.children=a.Children.map(s.props.children,(function(t){return e({node:t,parent:n})})):n.type===l&&(n.children=a.Children.map(s,(function(t){return e({node:t,parent:n})}))),t(n),n}({node:e,parent:null})},u=function e(t,n){return[t].concat(null==(a=n(t))?[]:function(t){return e(t,n)}(a));var a},d=function(e){var t=!1;return e.reduce((function(e,n){if(e&&n&&o(String(e.node),String(n.node))){var a=(c=n,l=u(e,(function(e){return e.parent})),s=u(c,(function(e){return e.parent})),d=l.findIndex((function(e){return s.includes(e)})),[l[d],l[d-1]]);i=a[1],(r=a[0]).children.splice(r.children.indexOf(i)+1,0,{node:" "}),t=!0}var r,i,c,l,s,d;return n})),t},b=function(e){if(!e)return null;var t=[],n=s(e,(function(e){e.type===i&&""!==e.node&&t.push(e)}));return t.length&&d(t)?function e(t){return Array.isArray(t.children)?t.type===l?a.Children.map(t.children.map(e),(function(e){return e})):a.createElement(t.node.type,t.node.props,a.Children.map(t.children.map(e),(function(e){return e}))):t.node}(n):e},f=function(e){var t=e.component,n=e.children;return a.createElement(t,{children:b(n)})};f.defaultProps={component:a.Fragment||"span"},t.CJKSpace=f},1178:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(15),o=function(){return!0},r={REDIRECT_URL:"REDIRECT_URL",CHANGE_IFRAME_HEIGHT:"CHANGE_IFRAME_HEIGHT",SHOW_APPLY_RIGHTS_SUCCESS_MODAL:"SHOW_APPLY_RIGHTS_SUCCESS_MODAL"},i=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e),this.onIframeMessage=function(e){!1!==t.beforeMessage(e)&&e.data&&e.data.type&&t.onMessage(e.data,e)},this.close=function(){window.removeEventListener("message",t.onIframeMessage)};var o=Object.assign(Object.assign({},e.defaultOption),n);this.beforeMessage=o.beforeMessage,this.onMessage=o.onMessage,window.addEventListener("message",this.onIframeMessage)};i.defaultOption={beforeMessage:o,onMessage:o}},1179:function(e,t,n){"use strict";t.a=function(e,t){return!!e&&(!!(t=t||e.type)&&(("answer"===t||"post"===t||"article"===t)&&(null===(n=e.settings)||void 0===n||null===(a=n.tableOfContents)||void 0===a?void 0:a.enabled)));var n,a}},1180:function(e,t,n){"use strict";function a(e,t){return!(!e||!t)&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,"a",(function(){return a}))},1181:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1),o=n(0),r=n.n(o),i=n(55),c=n(246),l=n(74),s={textAnswer:"textAnswer",videoAnswer:"videoAnswer"},u=[{key:s.textAnswer,name:"图文回答"},{key:s.videoAnswer,name:"视频回答"}];function d(e,t){var n=e.activeTabKey,o=e.onChange;return Object(a.b)(c.b,{children:u.map((function(e){var r=e.key,u=e.name;return Object(a.b)(l.a,{as:c.a,zaType:"Button",zaText:!0,css:{padding:"0 10px",":first-of-type":{paddingLeft:20}},children:Object(a.b)(i.Text,{ref:r===s.videoAnswer?t:null,onClick:function(){return o(r)},css:function(e){return Object.assign({color:e.colors.GBK03A,cursor:"pointer"},n===r&&{fontWeight:"bold",borderBottom:"4px solid ".concat(e.colors.GBL01A)})},children:u})},r)}))})}t.b=r.a.forwardRef(d)},1182:function(e,t,n){"use strict";n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return A})),n.d(t,"a",(function(){return T}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(64),u=n.n(s),d=n(0),b=n(85),f=n.n(b),p=n(45),h=n.n(p),m=n(44),v=n.n(m),g=n(965),O=n.n(g),j=n(448);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var C={success:"success",fail:"fail",request:"request"},w="EDITABLE_STATSC";function x(){var e=h.a.get(w);e&&(e.forEach((function(e){v.a.increment(e)})),h.a.delete(w))}var k={get pageName(){return"UnknownPage"},reportRequest:u.a,reportSuccess:u.a,reportFail:u.a,recordError:function(e){return e},wrapAutoRecord:function(e){return e}},S=Object(d.createContext)(k),A=function(e){return f()((function(t){var n=Object(d.useContext)(S);return Object(l.b)(e,Object.assign({reporter:n},t))}),e)},R=function(e){Object(r.a)(n,e);var t=y(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this.props,a=n.reporter,o=n.name;throw a&&a.reportFail(o,e,{extra:{errorInfo:t}}),e}},{key:"render",value:function(){return this.props.children}}]),n}(d.Component),T=A(R);t.c=function(e){var t=function(t,n){v.a.increment("".concat(e,".").concat(t,".").concat(n,".count"))},n=function(e){return t(e,C.request)},a=function(e){return t(e,C.success)},o=function(t,n,a){var o="string"==typeof n?n:(null==n?void 0:n.name)||"Unknown";Object(j.c)(o)||(v.a.increment([e,t,C.fail,o,"count"].join(".")),function(t,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n instanceof Error&&(null===(a=window.Raven)||void 0===a||a.captureException(n,Object.assign({tags:{scope:"".concat(e,":").concat(t)}},o)))}(t,n,a))},r=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.intent,c=void 0===i||i,l=r.success,s=void 0===l||l;return function(){try{c&&n(e);var r=function(){return s?a(e):void 0},i=t.apply(void 0,arguments);return O()(i)?i.then((function(e){return r(),e}),(function(t){throw o(e,t),t})):(r(),i)}catch(t){throw o(e,t),t}}};return{get pageName(){return e},reportRequest:n,reportSuccess:a,reportFail:o,wrapAutoRecord:r,recordError:function(e,t){return r(e,t,{success:!1})},stash:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length){var o=h.a.get(w)||[];o.push("".concat(e,".").concat(n.join("."),".count")),h.a.set(w,o)}}}}},1183:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return u}));var a=n(2),o=n(30),r=function(e){return"FullScreenAnswerEditor_".concat(e)},i=function(){return Boolean(window.__FullScreenAnswerEditor&&!window.__FullScreenAnswerEditor.closed)},c=function(e,t){if(!e)return null;if(i())return window.__FullScreenAnswerEditor.focus(),window.__FullScreenAnswerEditor;var n=r(e),a=window.location,o=a.search,c=a.host,l=t?"//".concat(c,"/question/").concat(e,"/answer/").concat(t,"/edit").concat(o):"//".concat(c,"/question/").concat(e,"/write").concat(o);return window.__FullScreenAnswerEditor=window.open(l,n)},l=function(e){return e?Object.keys(e).reduce((function(t,n){var o=e[n];return"commercialReportInfo"===n?Object.assign(Object.assign({},t),{},{isReport:Boolean(null==o?void 0:o.isReport)}):Object.assign(Object.assign({},t),{},Object(a.a)({},n,o))}),{}):e},s=function(e){return e?Object.keys(e).reduce((function(t,n){var r=e[n];return"canReward"===n?Object.assign(Object.assign({},t),{},{rewardTagline:r?o.p:""}):Object.assign(Object.assign({},t),{},Object(a.a)({},n,r))}),{}):e},u=function(e){return e?(e=s(e),Object.keys(e).reduce((function(t,n){var o=e[n];return"commercialReportInfo"===n?Object.assign(Object.assign({},t),{},{isReport:Boolean(null==o?void 0:o.isReport)}):"disclaimerType"===n?Object.assign(Object.assign({},t),{},{disclaimerType:o||"none",isDisclaimerChecked:Boolean(o&&"none"!==o)}):Object.assign(Object.assign({},t),{},Object(a.a)({},n,o))}),{})):e}},1184:function(e,t){var n="function"==typeof Float32Array;function a(e,t){return 1-3*t+3*e}function o(e,t){return 3*t-6*e}function r(e){return 3*e}function i(e,t,n){return((a(t,n)*e+o(t,n))*e+r(t))*e}function c(e,t,n){return 3*a(t,n)*e*e+2*o(t,n)*e+r(t)}function l(e){return e}e.exports=function(e,t,a,o){if(!(0<=e&&e<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&a===o)return l;for(var r=n?new Float32Array(11):new Array(11),s=0;s<11;++s)r[s]=i(.1*s,e,a);function u(t){for(var n=0,o=1;10!==o&&r[o]<=t;++o)n+=.1;--o;var l=n+.1*((t-r[o])/(r[o+1]-r[o])),s=c(l,e,a);return s>=.001?function(e,t,n,a){for(var o=0;o<4;++o){var r=c(t,n,a);if(0===r)return t;t-=(i(t,n,a)-e)/r}return t}(t,l,e,a):0===s?l:function(e,t,n,a,o){var r,c,l=0;do{(r=i(c=t+(n-t)/2,a,o)-e)>0?n=c:t=c}while(Math.abs(r)>1e-7&&++l<10);return c}(t,n,n+.1,e,a)}return function(e){return 0===e?0:1===e?1:i(u(e),t,o)}}},1200:function(e,t,n){"use strict";n.d(t,"a",(function(){return xe}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(19),b=n(0),f=n(24),p=n(13),h=n.n(p),m=n(55),v=n(35),g=n(2133),O=n(2796),j=n(2797),y=n(414),C=n(36),w=n(21),x=n.n(w),k=n(25),S=n.n(k),A=n(23),R=n.n(A),T=n(27),I=n.n(T),E=n(14),N=n.n(E),B=n(138),z=n(963),L=n(1146),P=n(892),M=n(222),D=n(96),_=n.n(D),V=n(163),U=n(7);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=N()(e);if(t){var o=N()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return I()(this,n)}}var q={top:10,left:20},H={top:0,left:0};function G(){var e,t=_()(navigator.userAgent).Mobile?H:q,n=t.top,a=t.left,o=window,r=o.innerWidth,i={left:0,top:0,width:r,height:o.innerHeight},c={x:(e=i).left+e.width/2,y:e.top+e.height/2},l=2*(96+a),s=r,u=0;return r<1e3+l?s=r-l:(s=1e3,u=(r-(1e3+l))/2),{x:c.x,y:c.y,imgContainerWidth:s,imgContainerHeight:i.height-2*n,left:u,top:n}}var K=function(e){R()(n,e);var t=F(n);function n(e){var a;return x()(this,n),(a=t.call(this,e)).getBoundingClientRect=function(e,t){var n=t.width,a=t.height,o={top:0,left:0,width:0,height:0},r=1;return e.width>e.height?(o.height=a,r=a/e.height,o.width=e.width*r,o.left="-".concat((o.width-n)/2)):e.width<e.height?(o.width=n,r=n/e.width,o.height=e.height*r,o.top="-".concat((o.height-a)/2)):(o.width=n,o.height=a),o},a.getParentNode=function(){for(var e,t=a.props.img.parentNode;t&&"BODY"!==t.nodeName;){if(t.classList.contains("Image-Wrapper-Preview"))return e=t;t=t.parentNode}return e},a.getChildImgNode=function(e){if(e){var t=e.childNodes,n=a.state.index,o=n;return{img:(n>=t.length?t[o=t.length-1]:t[o]).querySelector(".Image-Preview"),index:o}}},a.setImageElAttr=function(){var e=a.state,t=e.width,n=e.transition,o=a.props.images,r=a.getParentNode(),i=a.getChildImgNode(r);if(i&&i.img){var c=i.img.getBoundingClientRect(),l=a.getBoundingClientRect(o[i.index],{width:c.width,height:c.height}),s=a.imgEl.getBoundingClientRect(),u=a.containerClientRect,d=u.left,b=u.top,f={x:s.left+s.width/2-d-l.width/2,y:s.top+s.height/2-b-l.height/2},p=t/l.width;"transition"!==n?(a.setState({transition:""},(function(){a.setState({rect:c,transition:"",width:l.width,height:l.height,translate:f,scale:p,transform:"translate(".concat(f.x,"px ,").concat(f.y,"px) scale(").concat(p,")")})})),setTimeout((function(){a.setState({transition:"transition",translate:null,scale:null,transform:"translate(".concat(c.left-d,"px,").concat(c.top-b,"px)"),opacity:-1})}),20)):a.setState({translate:null,scale:null,opacity:-1,transform:"translate(".concat(c.left-d,"px,").concat(c.top-b,"px)")})}},a.getImageSize=function(e){var t=a.containerClientRect,n=t.imgContainerWidth,o=t.imgContainerHeight,r=e.width,i=e.height,c=!1,l=1;return(e.width>n||e.height>o)&&(e.width>n&&(l=n/e.width,r=e.width*l,i=l*e.height),i>o&&(i*=l=o/i,r*=l),c=!0),a.setState({cursorZoomIn:c}),{width:r,height:i}},a.handleResizeCallback=function(){a.containerClientRect=G();var e=a.state.index,t=a.props.images;a.setState(Object.assign({transition:"fixed",transform:""},a.getImageSize(t[e])))},a.handleClick=function(e){var t=a.state.cursorZoomIn,n=e.target;n&&n.classList&&n.classList.contains("ImageGallery-Img")&&t&&a.setState({previewImage:n}),(n.classList.contains("ImageGallery")||n.classList.contains("ImageGallery-Inner"))&&a.setImageElAttr()},a.handleTransEnd=function(){var e=a.state,t=e.translate,n=e.scale,o=a.props.onClose;t&&n||o()},a.handlePreviewImageClose=function(){a.setState({previewImage:null},(function(){M.hide()}))},a.handleKeyUpCallback=function(e){39===e.keyCode?a.handleCutImage(1):37===e.keyCode&&a.handleCutImage(-1)},a.handleCutImage=function(e){var t=a.state.index+e,n=a.props.images;t<n.length&&t>=0&&a.setState(Object.assign({index:t,transition:"fixed",transform:""},a.getImageSize(n[t])))},a.state={transEnded:!1,translate:null,scale:null,url:null,index:e.index||0,width:0,height:0,rect:null,transition:"transition",previewImage:null,transform:"",cursorZoomIn:!1,opacity:1},a.containerClientRect=G(),a}return S()(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.data,n=e.img.getBoundingClientRect();M.hide();var a=this.containerClientRect,o=a.left,r=a.top,i=this.getBoundingClientRect(t,{width:n.width,height:n.height}),c={left:n.left-o+Number(i.left),top:n.top-r+Number(i.top)};this.setState({rect:i,width:i.width,height:i.height,transform:"translate(".concat(c.left,"px, ").concat(c.top,"px)")})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState(Object.assign({},e.computeTransition(e.props.index)))}),20),window.addEventListener("keyup",this.handleKeyUpCallback),window.addEventListener("resize",this.handleResizeCallback)}},{key:"componentWillUnmount",value:function(){M.show(),window.removeEventListener("keyup",this.handleKeyUpCallback),window.removeEventListener("resize",this.handleResizeCallback)}},{key:"computeTransition",value:function(e){var t=this.props.images[e],n=this.containerClientRect,a=n.x,o=n.y,r=n.left,i=n.top,c=this.getImageSize(t).width;if(this.imgEl){var l=this.imgEl.getBoundingClientRect(),s=c/l.width,u={x:a-l.width/2-r,y:o-l.height/2-i};return{translate:u,scale:s,transform:"translate(".concat(u.x,"px ,").concat(u.y,"px) scale(").concat(s,")")}}}},{key:"render",value:function(){var e=this,t=this.props.images,n=this.state,a=n.translate,o=n.index,r=n.width,i=n.height,c=n.transition,l=n.previewImage,s=n.transform,u=n.cursorZoomIn,d=n.opacity,b=this.containerClientRect,f=b.left,p=b.top,m=b.imgContainerWidth,v=b.imgContainerHeight,g=(_()(navigator.userAgent).Mobile?H:q).left,O=t[o];return Object(U.g)(V.a,null,Object(U.g)("div",{className:h()("ImageGallery",{"is-active":a}),onClick:this.handleClick},Object(U.g)("div",{className:"ImageGallery-Content",style:{width:"".concat(m+2*(96+g),"px"),height:"".concat(v,"px"),left:"".concat(f,"px"),top:"".concat(p,"px")}},!l&&t.length>1&&Object(U.g)("a",{className:h()("ImageGallery-arrow-left",{"ImageGallery-arrow-disabled":0===o}),style:{left:"".concat(g,"px")},onClick:function(){return e.handleCutImage(-1)}},Object(U.g)(L.a,{fill:"#fff",size:42})),Object(U.g)("div",{className:"ImageGallery-Inner",ref:function(t){e.scrollNode=t}},Object(U.g)("img",{ref:function(t){e.imgEl=t},src:Object(B.imgUrl)(O.url,"r"),className:h()("ImageGallery-Img",{"ImageGallery-transition":"transition"===c,"ImageGallery-fixed":"fixed"===c,"ImageGallery-CursorZoomIn":u}),style:{width:r,height:i,transform:s,opacity:d},onTransitionEnd:this.handleTransEnd,alt:"preview","data-rawwidth":O.width,"data-rawheight":O.height,"data-thumbnail":O.thumbnail,"data-original":Object(B.imgUrl)(O.url,"r"),"data-actualsrc":Object(B.imgUrl)(O.url,"b")})),!l&&t.length>1&&Object(U.g)("a",{className:h()("ImageGallery-arrow-right",{"ImageGallery-arrow-disabled":o>=t.length-1}),onClick:function(){return e.handleCutImage(1)},style:{right:"".concat(g,"px")}},Object(U.g)(P.a,{fill:"#fff",size:42}))),!l&&Object(U.g)("a",{className:"ImageGallery-close",onClick:this.setImageElAttr},Object(U.g)(y.a,{fill:"#fff"})),l&&Object(U.g)(z.a,{img:l,onClose:this.handlePreviewImageClose})))}}]),n}(b.Component);K.propTypes={img:u.a.object.isRequired,data:u.a.object.isRequired,onClose:u.a.func.isRequired};var W=K,Z=n(1210);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=N()(e);if(t){var o=N()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return I()(this,n)}}var Y=function(e){R()(n,e);var t=Q(n);function n(e){var a;return x()(this,n),(a=t.call(this,e)).setImageAttr=function(){var e=a.state,t=e.width,n=e.height;if(!t||!n){var o=a.divEl.getBoundingClientRect();t=t||o.width,n=n||o.width,a.setState({width:t,height:n})}var r=a.getBoundingClientRect({width:t,height:n});a.setState({imageWidth:r.width,imageHeight:r.height,imageTop:r.top,imageLeft:r.left})},a.getBoundingClientRect=function(e){var t=e.width,n=e.height,o=a.props.data,r={top:0,let:0,width:0,height:0},i=1;return o.width>o.height?(r.height=n,i=n/o.height,r.width=o.width*i,r.left="-".concat((r.width-t)/2)):(r.width=t,i=t/o.width,r.height=o.height*i,r.top="-".concat((r.height-n)/2)),r},a.handlePreviewImageOpen=function(e){var t=a.props.onPreviewImageOpen;e.persist(),t&&t(e)||a.setState({previewImage:a.imgWrapper.querySelector("img")})},a.handlePreviewImageClose=function(){a.setState({previewImage:null})},a.state={width:e.width||0,height:e.height||0,imageWidth:0,imageHeight:0,imageTop:0,imageLeft:0,previewImage:null},a}return S()(n,[{key:"componentDidMount",value:function(){this.setImageAttr()}},{key:"render",value:function(){var e=this,t=this.state,n=t.width,a=t.height,o=t.previewImage,r=t.imageWidth,i=t.imageHeight,c=t.imageTop,l=t.imageLeft,s=this.props,u=s.data,d=s.images,b=s.index,f=s.surplus,p=s.previewType,m=void 0===p?1:p,v=s.data.isGif,g=s.vague,O=s.previewTransitionType,j=void 0===O?0:O;return Object(U.g)("div",{onClick:this.handlePreviewImageOpen,className:"Thumbnail-Wrapper",ref:function(t){e.divEl=t},style:{width:n?"".concat(n,"px"):"",height:a?"".concat(a,"px"):""}},Object(U.g)("span",{ref:function(t){e.imgWrapper=t},className:h()({"Image-PreviewVague":g})},g?Object(U.g)(Z.a,{className:"Image-Preview",url:v?Object(B.imgUrl)(u.thumbnail,"xl"):Object(B.imgUrl)(u.url,"xl"),width:n,height:a,alt:"cover",thumbnail:v?Object(B.imgUrl)(u.thumbnail,"xl"):Object(B.imgUrl)(u.url,"xl"),"data-rawwidth":u.width,"data-rawheight":u.height,"data-thumbnail":u.thumbnail,"data-original":Object(B.imgUrl)(u.url,"r"),"data-actualsrc":Object(B.imgUrl)(u.url,"b")}):Object(U.g)("img",{className:"Image-Preview",src:v?u.thumbnail:Object(B.imgUrl)(u.url,"r"),width:r,height:i,style:{top:"".concat(c,"px"),left:"".concat(l,"px")},alt:"preview","data-rawwidth":u.width,"data-rawheight":u.height,"data-thumbnail":u.thumbnail,"data-original":Object(B.imgUrl)(u.url,"r"),"data-actualsrc":Object(B.imgUrl)(u.url,"b")})),f>0&&Object(U.g)("em",{className:"Thumbnail-Surplus-Sign"},"+".concat(f)),v&&Object(U.g)("em",{className:"Thumbnail-Gif-Sign"},"GIF"),o&&(1===m?Object(U.g)(W,{img:o,data:u,index:b,images:d,onClose:this.handlePreviewImageClose}):Object(U.g)(z.a,{img:o,isOriginalUrl:!g,transitionType:j,data:u,onClose:this.handlePreviewImageClose})))}}]),n}(b.Component);Y.propTypes={width:u.a.number,height:u.a.number,index:u.a.number,surplus:u.a.number,data:u.a.object,images:u.a.array,onPreviewImageOpen:u.a.func};var J=n(465),X=n(908),$=n(924),ee=n(944),te=n(1313),ne=n(1004),ae=n(1105),oe=n(56),re=n(900),ie=n(955),ce=n(453),le=n(945),se=n(938),ue=n(2798),de=n(178),be=n(447),fe=n(30);n(1623);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var he={pin:"updatePinsReaction"},me=function(e){Object(r.a)(n,e);var t=pe(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleToggleVote=e.context.authRequired((function(t){var n=e.props,a=n.reactioned,o=n.type,r=n.id,i=n.onReaction,c=!a;v.a.trackEvent(t.target,{action:c?"Upvote":"UnUpvote",element:"Button"});var l=he[o];i?i(r):e.props[l](r,c)}),fe.X.vote),e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.reactioned,n=e.count,a=e.className,o=e.disabled;return Object(l.c)(C.c,{className:h()("VoteButton","ReactionButton",{"is-active":t},a),onClick:this.handleToggleVote,disabled:o,children:[Object(l.b)(ue.a,{size:20,center:!0})," ",Object(de.formatNumber)(n)]})}}]),n}(b.Component);me.contextTypes={authRequired:u.a.func},me.propTypes={type:u.a.oneOf(be.a).isRequired,id:u.a.oneOfType([u.a.number,u.a.string]).isRequired,icon:u.a.string,reactioned:u.a.bool,count:u.a.number};var ve=Object(f.connect)(null,{updatePinsReaction:J.i})(me),ge=n(946),Oe=n(1107),je=n(415),ye=n(1287);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var we=function(e){Object(r.a)(n,e);var t=Ce(n);function n(e){var o;Object(a.a)(this,n),(o=t.call(this)).openDeleteModal=function(){o.setState({deleteModalShown:!0})},o.closeDeleteModal=function(){o.setState({deleteModalShown:!1})},o.handleFavlistsShown=function(){v.a.trackEvent(o.favButtonRef,{action:"Collect",element:"Button",is_intent:!0}),o.context.authRequired((function(){return o.setState({favlistsShown:!0})}),fe.X.favlists)()},o.handleFavlistHide=function(){o.setState({favlistsShown:!1})},o.handlePositionStatusChange=function(e){o.setState({positionStatus:e})},o.handleDeletePin=function(){var e=o.context.authRequired,t=o.props,n=t.pin.id;return e((0,t.deletePin)(n),fe.X.deletePin)},o.handleCommentsShown=function(e,t){o.setState(t)},o.handleCommentsHide=function(){o.setState({commentsShown:!1})},o.renderQuoteContents=function(e,t){var n=e.content;return Object(l.b)("blockquote",{className:"PinItem-3lineBlockquote",children:n},t)},o.renderLinkContents=function(e,t,n){var a=e.url,o=e.title,r=e.imageUrl,i=e.subtype;return"text"===n?Object(l.c)("a",{className:h()("link-text",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o}),href:a,target:"_blank",rel:"noopener noreferrer",children:[Object(l.b)(g.a,{stroke:"#BBC1CC",text:!0,center:!0})," ",o||a]},t):Object(l.c)("a",{className:"link-box",href:a,target:"_blank",rel:"noopener noreferrer",children:[Object(l.c)("span",{className:"content",children:[Object(l.b)("span",{className:h()("title",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o}),children:o||a}),o&&Object(l.c)("span",{children:[(a.match(/^https?:\/\/([^/?#]+)(?:[/?#]|$)/i)||[])[1],i&&Object(l.b)("span",{className:"subtype",children:i})]})]}),r&&Object(l.b)("img",{className:"thumbnail",src:r,alt:"头像"})]},t)},o.renderVideoContents=function(e,t){var n=e.videoId||e.id,a={title:"",thumbnail:e.thumbnail||e.coverInfo&&e.coverInfo.thumbnail,isLens:!0,id:n,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(n)};return Object(l.b)(Oe.a,{isAppView:o.isAppView,data:a},t)},o.renderOriginPinContents=function(e){if(!e)return null;if(e.isDeleted)return Object(l.b)("div",{className:h()("PinItem-RichText","PinItem-content-originpin"),children:e.deletedReason});if(e.content&&e.content[0]){var t=o.props.noCollapsed,n=o.state.originPinExpanded,a=e.content.find((function(e){return"text"===e.type}));return Object(l.c)("div",{className:h()("PinItem-RichText","PinItem-content-originpin"),children:[Object(l.c)("div",{children:[e.author.name,"："]}),a&&Object(l.b)(ie.b,{html:a.content,noCollapsed:t,expanded:n}),o.renderPinContents(e.content)]})}return null},o.renderPinContents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.filter((function(e){return e.url&&"image"===e.type})),a=[];return Object(l.c)("div",{className:h()("RichText","ztext","PinItem-remainContentRichText"),children:[e.map((function(e,r){var i=e.type;return"quote"===i?o.renderQuoteContents(e,r):"link"===i?o.renderLinkContents(e,r,t):"video"===i?o.renderVideoContents(e,r):("image"===i&&a.length<4&&e.url&&a.push(Object(l.b)(Y,{data:e,vague:!0,index:a.length,images:n,surplus:n.length>4&&3===a.length?n.length-4:0},r)),null)})),a.length>0&&Object(l.b)("div",{className:"Image-Wrapper-Preview",children:a})]})},o.renderRemainContents=function(){var e=o.props.pin,t=e.id,n=e.created,a=e.updated,r=e.originPin,i=e.content,c="//".concat(fe.q,"/pin/").concat(t);return Object(l.c)("div",{children:[o.renderPinContents(i),o.renderOriginPinContents(r),Object(l.b)(ie.a,{href:c,created:n,updated:a})]})};var r=e.pin,i=e.noCollapsed,c=e.showCommentButton;return o.contentHTML=o.getContentHTML(r),o.state={expanded:i,originPinExpanded:i,commentPattern:c?"fixed":"bottom",commentsShown:!c,commentsAutoFocus:c,deleteModalShown:!1,favlistsShown:!1},o}return Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.contentHTML=this.getContentHTML(e.pin)}},{key:"getContentHTML",value:function(e){var t;if(null==e||null===(t=e.content)||void 0===t||!t[0])return"";var n=e.content,a="";return"text"===n[0].type&&(a=n[0].content),a}},{key:"render",value:function(){var e=this,t=this.props,n=t.pin,a=t.pin,o=a.id,r=a.author,i=a.virtuals,c=(i=void 0===i?{}:i).reactionType,s=a.commentCount,u=a.reactionCount,d=a.adminClosedComment,b=a.reviewingInfo,f=t.preset,p=t.lastreadTouchable,h=t.isSticky,v=t.handleToggleSticky,g=t.noCollapsed,w=t.showFollowAuthorButton,x=t.showCommentButton,k=t.commentInputPosition,S=t.isMobile,A=t.renderOptions,R=this.state,T=R.positionStatus,I=R.expanded,E=R.deleteModalShown,N=R.favlistsShown,B=R.commentsShown,z=R.commentsAutoFocus,L=R.commentPattern,P=this.context.currentUser,M=P&&P.urlToken===r.urlToken,D="plain"===f,_="like"===c,V="function"==typeof v,U="//".concat(fe.q,"/pin/").concat(o);return Object(l.c)(re.e,{data:n,link:U,meta:D||Object(l.b)("div",{children:Object(l.c)("div",{className:"PinItem-author",children:[Object(l.b)($.a,{author:r,className:"PinItem-authorInfo",userLinkV2:!0,children:(null==b?void 0:b.isReviewing)&&Object(l.b)(m.Text,{color:"GBK06A",fontSize:"15px",children:b.tips})},"authorInfo"),w&&!M&&P&&Object(l.b)(X.a,{className:"PinItem-followButton",preset:"primary",type:r.type,id:r.urlToken,gender:r.gender,isFollowing:r.isFollowing,onClick:this.handleFollowButtonClick})]})}),className:"PinItem",lastreadTouchable:p,children:[Object(l.c)(ie.b,{prefix:V&&h&&Object(l.b)(te.a,{}),alwaysShowPrefix:!0,data:n,html:this.contentHTML,excerpt:this.contentHTML,noCollapsed:g,expanded:I,onPositionStatusChange:this.handlePositionStatusChange,renderCanExpandExtra:this.renderRemainContents,children:[Object(l.b)(ve,{reactioned:Boolean(_),count:u,id:o,type:"pin"}),x&&Object(l.b)(le.a,{onClick:this.handleCommentsShown,commentsShown:B,commentClosed:d,count:s,positionStatus:T}),Object(l.b)(ee.a,{id:o,type:"pin",authorName:r&&r.name,href:U,positionStatus:T}),(!P||!P.isOrg)&&Object(l.b)(ae.a,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:S?"":"收藏"}),!M&&Object(l.b)(ce.a,{type:"pin",id:o}),!S&&V&&M&&Object(ye.a)(P)&&Object(l.b)(C.c,{preset:"plain",onClick:v,icon:h?O.a:j.a,label:h?"取消置顶":"置顶"}),M&&Object(l.b)(C.c,{preset:"plain",onClick:this.openDeleteModal,icon:y.a,label:"删除"}),A()]}),M&&Object(l.b)(ge.a,{title:"你确定要删除自己的想法吗？",shown:E,onCancel:this.closeDeleteModal,onSubmit:this.handleDeletePin}),Object(l.b)(se.a,{parent:n,commentPattern:L,commentInputPosition:k,shown:B,showPackupButton:x,autoFocus:z,onClose:this.handleCommentsHide}),Object(l.b)(ne.a,{id:o,type:"pin",shown:N,onClose:this.handleFavlistHide,zaEnabled:!0})]})}}]),n}(b.Component);we.contextTypes={authRequired:u.a.func,currentUser:u.a.object},we.propTypes={noCollapsed:u.a.bool,showFollowAuthorButton:u.a.bool,showCommentButton:u.a.bool,commentInputPosition:u.a.oneOf(["top","bottom"])},we.defaultProps={noCollapsed:!1,showFollowAuthorButton:!1,showCommentButton:!0,commentInputPosition:"bottom",renderOptions:function(){return[null]}};var xe=Object(d.compose)(Object(je.b)((function(e){var t=e.pin,n=e.trackCardShow,a=void 0===n||n,o=e.zaInfos,r=(o=void 0===o?{}:o).cardShow;return Object.assign(Object.assign({module:"PinItem",card:{content:{type:"Pin",id:String(t.id),author_member_hash_id:t&&t.author.id}}},r&&{view:{id:r}}),{},{trackCardShow:a})})),Object(f.connect)((function(e,t){var n=t.pin;return Object.assign(Object.assign({},"string"==typeof(null==n?void 0:n.author)&&{pin:Object.assign({},n,{author:e.entities.users[n.author]})}),{},{isMobile:Object(oe.isMobileSelector)(e)})}),{deletePin:J.c}))(we);n(2215)},1204:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n.n(d),f=n(1323),p=n(26),h=function(e){return b.a.createElement(p.a,e,b.a.createElement("path",{d:"M4.5 4h15a1.5 1.5 0 0 1 0 3h-15a1.5 1.5 0 0 1 0-3zm0 6h15a1.5 1.5 0 0 1 0 3h-15a1.5 1.5 0 0 1 0-3zm0 6H12a1.5 1.5 0 0 1 0 3H4.5a1.5 1.5 0 0 1 0-3z",fillRule:"evenodd"}))};h.defaultProps={name:"Answer"};var m=h,v=n(139),g=n(178),O=n(13),j=n.n(O),y=n(1111);function C(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var a=t.detail,o=t.member,r=t.reasonDescription,i=t.type,c=o?"".concat(o.name,"："):"";return Object(l.c)("section",{className:j()("Annotation-mark",n),children:[Object(l.c)("header",{className:"Annotation-header",children:["strong"===i&&Object(l.b)(y.a,{size:16,center:!0,text:!0,className:"Annotation-alert"}),Object(l.b)("h1",{className:"Annotation-markTitle",children:r||"该内容已被标记"})]}),(a||c)&&Object(l.b)("div",{className:"Annotation-markSummary",dangerouslySetInnerHTML:{__html:"".concat(c).concat(a||"未填写原因")}})]})}C.propTypes={annotationDetail:u.a.shape({reason:u.a.number.isRequired,reasonDescription:u.a.string,type:u.a.oneOf(["strong","weak"]).isRequired,detail:u.a.string,member:u.a.shape({name:u.a.string.isRequired}),showOuter:u.a.bool}).isRequired};var w=n(1212),x=n(900),k=n(955),S=n(944),A=n(205),R=n(945),T=n(938),I=n(908),E=n(415);n(1621);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var B={placeholders:{img:" [图片] "}},z=function(e){Object(r.a)(n,e);var t=N(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!0,commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleOpenComment=function(t){var n=t.target.parentNode.className.includes("is-fixed")?"fixed":"bottom",a=e.state.modalShown,o=!("bottom"===n&&a);e.setState({modalShown:o,commentPattern:n})},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handlePackupButton=function(){e.setState({modalShown:!1}),e.CommentsButtonEl.scrollIntoView({block:"start",behavior:"smooth"}),window.scrollTo(0,window.pageYOffset-window.screen.height/2)},e.handleContentToggleExpand=function(t){e.setState({collapsed:!t})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.question,o=t.question,r=o.id,i=o.title,c=o.type,s=o.created,u=o.answerCount,d=o.followerCount,b=o.isMuted,p=o.questionType,h=o.detail,O=o.commentCount,j=o.adminClosedComment,y=o.relationship,E=void 0===y?{}:y,N=o.annotationDetail,z=t.action,L=(t.isConcise,t.isAnonymousFollowing),P=t.lastreadTouchable,M=t.zaInfos,D=M.title,_=M.expand,V=M.follow,U=M.options,F=t.renderOptions,q=this.state,H=q.commentsShown,G=q.commentsAutoFocus,K=q.commentPattern,W=q.collapsed,Z={id:r,type:c},Q="/question/".concat(r);return Object(l.c)(x.e,{data:a,link:Q,lastreadTouchable:P,onRef:function(t){e.contentItem=t},title:Object(l.c)("div",{className:"QuestionItem-title",children:[Object(l.b)("a",Object.assign(Object.assign({href:Q,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-name":"Title"},D&&{"data-za-detail-view-id":D}),{},{children:i})),L&&Object(l.b)(f.a,{className:"QuestionItem-icon"}),"commercial"===p&&b&&Object(l.b)("span",{className:"QuestionItem-muteStatus",children:"待推广"})]}),children:[!W&&N&&Object(l.b)(C,{annotationDetail:N}),n===x.c.default&&Object(l.c)(x.d,{children:[Object(v.toDateTimeString)(s),"".concat(Object(g.formatNumber)(u)," 个回答"),"".concat(Object(g.formatNumber)(d)," 个关注")]}),n===x.c.interactive&&Object(l.c)(k.b,{data:a,html:h||"",excerpt:a.excerpt,limit:60,limitWithImage:60,truncateHTMLOptions:B,onToggleExpend:this.handleContentToggleExpand,zaIds:{expand:_},children:[z||Object(l.b)(I.a,Object.assign(Object.assign({},Z),{},{isFollowing:(E&&{}.hasOwnProperty.call(E,"isFollowing")?E:a).isFollowing,zaId:V})),[Object(l.b)(R.a,{onClick:this.handleCommentsShown,commentsShown:H,commentClosed:j,count:O},"comment"),Object(l.b)(S.a,Object.assign(Object.assign({},Z),{},{title:i,href:Q}),"share"),Boolean(u)&&Object(l.c)(A.a,{preset:"plain",to:Q,target:"_blank",children:[Object(l.b)(m,{style:{marginRight:"4px"},center:!0,text:!0}),Object(g.formatNumber)(u)," 个回答"]},"linkbutton"),F&&F((function(){return e.contentItem}),U),W&&N&&Object(l.b)(w.a,{annotationDetail:N})]]}),Object(l.b)(T.a,{parent:a,commentPattern:K,shown:H,autoFocus:G,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);z.propTypes={preset:u.a.oneOf(Object.keys(x.c)).isRequired,isAnonymousFollowing:u.a.bool,contentShown:u.a.bool,zaInfos:u.a.shape({title:u.a.number,expand:u.a.number,follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},z.contextTypes={currentUser:u.a.object},z.defaultProps={preset:x.c.default,zaInfos:{}};t.a=Object(E.b)((function(e){var t=e.question,n=e.trackCardShow,a=void 0===n||n;return{module:"QuestionItem",card:{content:{type:"Question",token:t.id.toString(),item_num:t.answerCount,comment_num:t.commentCount,follower_num:t.followerCount,publish_timestamp:1e3*t.created}},trackCardShow:a}}))(z)},1206:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(19),f=n(24),p=n(13),h=n.n(p),m=n(36),v=n(855),g=n(2214),O=n(35),j=n(178),y=n(447),C=n(2),w=n(5),x=Object(w.a)("live",["UPDATE_LIKED","UPDATE_COURSE_LIKED"]);var k=Object(w.a)("ebook",["FOLLOW","UNFOLLOW"]);var S=n(459),A=n(1622),R=n(465),T=n(30);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var E={ebook:"updateEBookVoters",live:"updateLiveLiked",live_course:"updateLiveCourseLiked",article:"updateArticleLike",promotion:"updatePromotionLike",pin:"updatePinsLike"},N=function(e){Object(r.a)(n,e);var t=I(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleToggleVote=e.context.authRequired((function(t){var n=e.props,a=n.liked,o=n.type,r=n.id,i=!a;O.a.trackEvent(t.target,{action:i?"Upvote":"UnUpvote",element:"Button"});var c=E[o];e.props[c](r,i)}),T.X.vote),e.handleClick=function(t){var n=e.props,a=n.disableAuth,o=n.handleToggleGuide,r=n.onClick;r&&r(t)||(a?o(t):e.handleToggleVote(t))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.liked,n=e.count,a=e.className,o=e.icon,r=void 0===o?"like":o,i=e.disabled;return Object(l.c)(m.c,{className:h()("LikeButton",{"is-active":t},a),onClick:this.handleClick,disabled:i,"aria-live":"polite",children:["thank"===r?Object(l.b)(v.a,{center:!0}):Object(l.b)(g.a,{center:!0})," ",Object(j.cnNiceNumber)(n).trim()]})}}]),n}(d.Component);N.contextTypes={authRequired:u.a.func},N.propTypes={type:u.a.oneOf(y.a).isRequired,id:u.a.oneOfType([u.a.number,u.a.string]).isRequired,icon:u.a.string,liked:u.a.bool,count:u.a.number};t.a=Object(b.compose)(Object(f.connect)(null,{updateEBookVoters:function(e){return function(t,n){var a=n().entities.ebooks[e],o=!(a.relationship||{}).voting;return t({API:{types:k.FOLLOW,method:o?"POST":"DELETE",endpoint:"v3/books/".concat(e,"/voters")},UPDATE:{request:{ebooks:Object(C.a)({},e,{relationship:Object.assign(Object.assign({},a.relationship),{},{voting:o}),voteupCount:a.voteupCount+(o?1:-1)})},failure:{ebooks:Object(C.a)({},e,a)}}})}},updateLiveLiked:function(e){return function(t,n){var a=n().entities.lives[e],o=!a.isLiked;return t({API:{types:x.UPDATE_LIKED,endpoint:"v3/lives/".concat(e,"/like"),method:o?"POST":"DELETE"},UPDATE:{request:{lives:Object(C.a)({},e,{isLiked:o,likedNum:a.likedNum+(o?1:-1)})},failure:{lives:Object(C.a)({},e,a)}}})}},updateLiveCourseLiked:function(e){return function(t,n){var a=n().entities.liveCourses[e],o=!a.isLiked;return t({API:{types:x.UPDATE_COURSE_LIKED,endpoint:"v3/lives/course/".concat(e,"/like"),method:o?"POST":"DELETE"},UPDATE:{request:{liveCourses:Object(C.a)({},e,{isLiked:o,likedNum:a.likedNum+(o?1:-1)})},failure:{liveCourses:Object(C.a)({},e,a)}}})}},updateArticleLike:S.f,updatePromotionLike:A.a,updatePinsLike:R.h}))(N)},1209:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var a=n(49),o=n(1),r=n(0),i=n(55),c=n(24),l=n(1030),s=n.n(l),u=n(1323),d=n(1039),b=n(46),f=n(1031),p=n(1003),h=n(1409),m=n(1710),v=n(1489),g=n(900),O=n(938),j=n(955),y=n(42),C=n(1631),w=function(e){var t=e.expanded,n=e.isVideoCoverFullSize;return e.renderFlag?Object(o.b)(f.CoCreationLabel,{mb:t||n?"8px":"4px"}):null};n(1632);function x(e){var t,n,l=e.zvideo,h=e.zvideo,x=h.id,k=h.description,S=void 0===k?"":k,A=h.title,R=h.author,T=h.isVisible,I=h.creationRelationship,E=h.attachedInfoBytes,N=e.lastreadTouchable,B=e.preset,z=void 0===B?"primary":B,L=e.onToggleExpand,P=e.renderOptions,M=e.couldShowHiddenSign,D=e.renderActionButtons,_=e.shouldAlwaysShowPlayer,V=e.truncateDisabled,U=e.limit,F=e.showMetaAfterPlayer,q=e.videoRef,H=e.alwaysShowVolumeButton;l.thumbnailExtraInfo&&(t=l.thumbnailExtraInfo.videoId,n=l.thumbnailExtraInfo.url),l.video&&(t=l.video.videoId,n=l.video.thumbnail);var G=Object(c.useSelector)((function(e){return s()(R)?e.entities.users[R]:R})),K=Object(b.o)(G),W=Object(r.useState)(!1),Z=Object(a.a)(W,2),Q=Z[0],Y=Z[1],J=Object(r.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),X=Object(a.a)(J,2),$=X[0],ee=X[1],te=Object(C.a)(z,Q,G,I),ne=Object(a.a)(te,1)[0],ae=K&&!T&&M,oe="https://www.zhihu.com/zvideo/".concat(x),re=t&&(_||Q),ie=Object(f.isCoCreateRelation)(I),ce=w({expanded:Q,isVideoCoverFullSize:_&&F,renderFlag:ie}),le=ie?140:200;return Object(o.c)(g.e,{className:"ZVideoItem",data:l,title:Object(o.c)(o.a,{children:[ae&&Object(o.c)("span",{className:"ZVideoItem-hiddenSign",children:[Object(o.b)(u.a,{text:!0,center:!0}),"隐藏"]}),Object(o.b)("a",{href:oe,target:"_blank",rel:"noopener noreferrer",children:A})]}),link:oe,meta:F?null:ne,expandedHeight:0,lastreadTouchable:N,"data-zop":JSON.stringify({authorName:null==G?void 0:G.name,itemId:x,title:A,type:"zvideo"}),children:[K&&(l.isReviewing||l.isUpdateReviewing)&&Object(o.b)(v.a,{}),re&&Object(o.c)(i.Box,{my:"16px",children:[Object(o.b)("div",{className:"ZVideoItem-video",css:{margin:"0px"},children:Object(o.b)(d.a,{ref:q,className:"ZVideoItem-player",type:"video",src:"https://".concat(y.a.videoHost,"/video/").concat(t,"?").concat(new URLSearchParams([["itemId",x],["itemType","zvideo"]]).toString()),iframeProps:{allowFullScreen:!0},griffithProps:{alwaysShowVolumeButton:H},zaProps:{type:"Zvideo",token:l.id,attachedInfo:E}})}),Q&&Object(o.b)(f.CreationRelationshipBar,{id:x,creationRelationship:I})]}),F&&ne,Object(o.b)(j.b,Object.assign(Object.assign({excerpt:Object(p.c)(S,le),html:S,cover:_?null:n,hasVideo:!_},U?{limit:U}:{}),{},{truncateDisabled:V,allowCollapseWithEmptyExcerpt:!0,expanded:Q,onToggleExpend:function(e){Y(e),L&&L(e)},data:Object.assign(Object.assign({},l),{},{id:x}),prefix:ce,children:Object(o.b)(m.a,{className:"ZVideoItem-toolbar",zvideo:l,author:G,commentsShown:$.commentsShown,onCommentButtonClick:function(e,t){return ee(t)},renderOptions:P,renderActionButtons:D})})),Object(o.b)(O.a,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:l,shown:$.commentsShown,commentPattern:$.commentPattern,autoFocus:$.autoFocus,onClose:function(){return ee(Object.assign(Object.assign({},$),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})}x.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var k=Object(c.connect)((function(e,t){return Object.assign(Object.assign({},t),{},{zvideo:Object.assign(Object.assign({},t.zvideo),{},{creationRelationship:Object(h.c)(t.zvideo)})})}))(x)},1210:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n(31),o=n.n(a),r=n(21),i=n.n(r),c=n(25),l=n.n(c),s=n(23),u=n.n(s),d=n(27),b=n.n(d),f=n(14),p=n.n(f),h=n(39),m=n.n(h),v=n(0),g=n(47),O=n(13),j=n.n(O),y=n(1283),C=n.n(y),w=n(89),x=n.n(w),k=n(7),S=["className","url","alt","threshold","thumbnail"];function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return b()(this,n)}}function R(e,t,n){var a=new Image;return a.addEventListener("load",t),a.onerror=n,a.src=e,a}var T=function(e){u()(n,e);var t=A(n);function n(){var e;i()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={thumbnailLoaded:!1,loaded:!1,vagued:!0,computedWidth:e.props.width,computedHeight:e.props.height},e.wrapperNode=null,e.hasLoaded=!1,e.loadThumbnail=function(){var t=e.props,n=t.onLoadImageFail,a=t.onLoadImageTimeout;e.thumbnail=R(e.props.thumbnail,e.handleThumbnailLoaded,(function(){n&&n({type:"thumbnail",url:e.props.thumbnail})})),a&&setTimeout((function(){e.thumbnail&&!e.thumbnail.complete&&a({type:"thumbnail",url:e.props.thumbnail})}),3e3)},e.loadImage=function(){var t=e.props,n=t.onLoadImageFail,a=t.onLoadImageTimeout;e.image=R(e.props.url,e.handleImageLoaded,(function(){n&&n({type:"image",url:e.props.url})})),a&&setTimeout((function(){e.image&&!e.image.complete&&a({type:"image",url:e.props.url})}),3e3)},e.handleObserve=function(t){t&&e.hasLoaded||t&&(e.hasLoaded=!0,e.loadThumbnail(),e.loadImage())},e.handleThumbnailLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"thumbnail",url:e.props.thumbnail});var n=e.state,a=n.computedWidth;if(!n.computedHeight){var o=e.thumbnail,r=o.naturalWidth,i=o.naturalHeight*(Number(a)/r);e.setState({computeHeight:i})}e.setState({thumbnailLoaded:!0})},e.handleImageLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"image",url:e.props.url}),e.setState({loaded:!0}),e.timeout=window.setTimeout((function(){return e.setState({vagued:!1})}),500)},e}return l()(n,[{key:"componentDidMount",value:function(){if(this.wrapperNode){var e=Object(g.findDOMNode)(this.wrapperNode),t=this.state,n=t.computedWidth,a=t.computedHeight;this.setState({computeWidth:n||e.offsetWidth,computeHeight:a||e.offsetHeight})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.thumbnail&&this.thumbnail.removeEventListener("load",this.handleThumbnailLoaded),this.image&&this.image.removeEventListener("load",this.handleImageLoaded)}},{key:"render",value:function(){var e=this,t=x()(this.props,["onLoadImageFail","onLoadImageTimeout","onLoadImageSuccess"]),n=t.className,a=t.url,r=t.alt,i=t.threshold,c=t.thumbnail,l=o()(t,S),s=this.state,u=s.thumbnailLoaded,d=s.loaded,b=s.vagued,f=s.computedWidth,p=s.computedHeight;if(!b)return Object(k.g)("img",m()({className:n,width:f,src:a,alt:r},l));var h=C.a;return Object(k.g)(h,{rootMargin:"".concat(i,"px 0px ").concat(i,"px 0px"),onChange:this.handleObserve,className:j()("VagueImage",n),ref:function(t){e.wrapperNode=t},style:Object.assign(Object.assign({},f&&{width:"".concat(f,"px")}),p&&{height:"".concat(p,"px")}),"data-src":a},Object(k.g)("div",{className:j()("VagueImage-mask",{"is-active":!d}),style:u?{backgroundImage:"url(".concat(c,")")}:{}}),d&&Object(k.g)("img",{className:"VagueImage-innerLarge",src:a,alt:r}))}}]),n}(v.Component);T.defaultProps={threshold:200};var I=T},1212:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1);function o(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,o=t.reasonDescription;return Object(a.b)("span",{className:"AnnotationTag",children:32300===n?"该内容已被标记":o})}},1213:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(3),d=n.n(u),b=n(96),f=n.n(b),p=n(415),h=n(161),m=n(422);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var g={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},O={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},j=function(e){Object(r.a)(n,e);var t=v(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).jumpToOAuthUrl=function(t){var n=e.props.redirectUrl,a=void 0===n?location.href:n,o=Object(m.c)(a),r=o.utm_source,i=o.utm_medium,c=f()(navigator.userAgent).isZhihu;location.href="zhihu"!==t?"https://www.zhihu.com/oauth/redirect/login/".concat(O[t],"?next=/oauth/account_callback&from=").concat(encodeURIComponent(a),"&utm_source=").concat(r,"&ref_source=").concat(i):c?"zhihu://signin?next=".concat(a):"https://www.zhihu.com/signin?next=".concat(a).concat(r?"?utm_source=".concat(r):"")},e.renderSignButtons=function(){var t=e.props.buttons;return"string"==typeof t?e.renderSingleSignButton({name:t}):t.map((function(t){return"string"==typeof t?e.renderSingleSignButton({name:t}):"object"==typeof t?e.renderSingleSignButton(t):null}))},e.renderSingleSignButton=function(t){var n=t.name,a=t.text,o=t.fill,r=t.color,i="#fff"===o||"#ffffff"===o;return Object.keys(g).includes(n)?Object(l.b)("button",{className:"SignInModal-button-".concat(n),style:{backgroundColor:o,borderColor:i?"#0f88eb":o,color:i?"#0f88eb":r},onClick:function(){e.jumpToOAuthUrl(n)},children:a||g[n]},n):null},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.urlScheme,a=this.props.title||"".concat(n?"打开 App 或":"","登录后继续操作");return Object(l.b)(h.b,{size:"small",className:"SignInModal",title:a,onClose:t,children:Object(l.b)(p.a,{module:"SignForm",moduleName:a,trackCardShow:!0,children:Object(l.c)("div",{className:"SignInModal-content",children:[n&&Object(l.b)(m.a,{className:"SignInModal-openInAppButton",href:n,children:"立即打开 App"}),this.renderSignButtons()]})})})}}]),n}(s.Component);j.propTypes={onClose:d.a.func.isRequired,urlScheme:d.a.string,redirectUrl:d.a.string,buttons:d.a.oneOfType([d.a.array,d.a.string])},j.defaultProps={buttons:["zhihu"]}},1214:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n(24),i=n(43),c=n(482),l=function(){return Object(a.b)("div",{className:"LabelContainer-loading"})};t.a=function(e){var t=e.useOldLabels,s=e.item,u=e.abnormalDetailProps,d=e.collapseReasonProps,b=e.showDeleteButton,f=e.inviter,p=s.type,h=s.id,m=s.isLabeled,v=Object(r.useDispatch)(),g=Object(r.useSelector)((function(e){return t||u||d?{}:b?{thankInviterInfo:f}:Object(c.c)(e,s)})),O=Object(i.e)((function(){return n.e(31).then(n.bind(null,2860))}));return Object(o.useEffect)((function(){m&&!g&&p&&h&&v(Object(c.e)(p,h))}),[v,p,h,m,g]),O?Object(a.b)(O,Object.assign({data:g},e)):m&&!t?Object(a.b)(l,{}):null}},1221:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return y}));var a=n(2),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(0),d=n(3),b=n.n(d),f=n(24),p=n(13),h=n.n(p),m=n(1125),v=n(46),g=n(112);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var j={all:"开放评论",censor:"预审评论",nobody:"关闭评论"},y={all:"允许任何人评论",follower:"允许关注我的人评论",censor:"评论由我筛选后显示",followee:"允许我关注的人评论",paid:"付费用户可评论",nobody:"关闭评论"},C=function(e){Object(i.a)(n,e);var t=O(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleClickOption=function(t){var n=e.props,a=n.isOrg,o=n.target,r=n.onChange,i=n.current;if(t!==i)if(o){var c=o.id;o.adminClosedComment?Object(g.b)("此内容无法更改评论权限",{theme:"red-ghost"}):a||"censor"!==t&&"censor"!==i?r(c,t):Object(g.a)("你确定要更改评论权限吗？",{content:"censor"===t?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then((function(){return r(c,t)})).catch((function(){return null}))}else r(t)},e.getCommentPermission=function(){var t=e.props.target,n=t&&"answer"===t.type&&"paid"===t.answerType;return Object.keys(y).filter((function(e){if("paid"!==e||n)return"follower"!==e||t&&"article"===t.type})).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(a.a)({},t,y[t]))}),{})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.isOrg,a=t.current,o=t.className,r=n?j:this.getCommentPermission();return Object(s.b)(u.Fragment,{children:Object.keys(r).map((function(t){return Object(s.b)(m.a,{onClick:function(){return e.handleClickOption(t)},className:h()("CommentPermission-item",o),checked:t===a,children:r[t]},t)}))})}}]),n}(u.Component);C.propTypes={current:b.a.string.isRequired,target:b.a.object,onChange:b.a.func.isRequired};t.c=Object(f.connect)((function(e){return{isOrg:Object(v.h)(e)}}))(C)},1228:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M2.224 21.667s4.24-1.825 4.788-2.056C15.029 23.141 22 17.714 22 11.898 22 6.984 17.523 3 12 3S2 6.984 2 11.898c0 1.86.64 3.585 1.737 5.013-.274.833-1.513 4.756-1.513 4.756zm5.943-9.707c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272zm7.583 0c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272z",fillRule:"evenodd"}))};i.defaultProps={name:"WeChat"},t.a=i},1229:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.439-1.673.309-1.673.309.596-7.519-5.692-6.329-5.692-6.329-.898-1.067-.029-1.711-.029-1.711zm4.131 6.985c-.661 1.01-1.377.126-1.376.126.205-3.179-2.396-2.598-2.396-2.598-.719-.765-.091-1.346-.091-1.346 4.882-.551 3.863 3.818 3.863 3.818zM5.317 7.519s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.159 0 0 .848 1.095-.191 2.649 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.411-5.71-4.207c-6.652.231-6.579 4.654-6.579 4.654.021.39.097 3.713 5.842 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.059-3.632 3.804-3.561c3.412.06 3.206 3.165 3.206 3.165s-.026 2.979-3.684 2.979c-3.288 0-3.326-2.583-3.326-2.583zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.551-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",fillRule:"evenodd"}))};i.defaultProps={name:"Weibo"},t.a=i},1243:function(e,t,n){"use strict";var a=n(28),o=n.n(a),r=n(31),i=n.n(r),c=n(39),l=n.n(c),s=n(214),u=n(0),d=n(74),b=n(36),f=n(122),p=n(7),h=["childItems","isMenuToggler","showTogglerIcon"];var m=function(e){return"undefined"!=typeof navigator&&/Mac/i.test(navigator.userAgent)?e.replace(/\+/g,""):e.replace("⌘","Ctrl").replace("⌥","Alt").replace("⇧","Shift")},v=function(e){return{background:e.colors.GBL01A,svg:{fill:e.colors.GBK99B},".togglerIcon":{borderLeftColor:e.colors.GBK99B},color:e.colors.GBK99B}},g=function(e){return{background:e.colors.GBK10A,svg:{fill:e.colors.GBL01A},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},O=function(e){return{svg:{fill:e.colors.GBL01A},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},j={name:"5barcq",styles:"width:24px;height:24px;position:relative;border-radius:4px;"},y=Object(u.forwardRef)((function(e,t){var n,a=e.icon,o=e.className,r=e.label,i=e.shortcut,c=e.isActive,u=e.firstLine,f=e.text,h=e.onClick,y=e.isMenuItem,C=void 0!==y&&y,w=e.sectionFirst,x=e.sectionLast,k=e.disabled,S=e.isMenuOpen,A=e.showTogglerIcon,R=e.isMenuToggler,T=e.menuItemText,I=u||!C,E=!u||C,N=!u||C,B=r&&r!==f&&r!==T||i,z=A&&Object(p.g)("div",{className:"togglerIcon",css:function(e){return Object.assign(Object.assign({position:"absolute"},u?{right:"-4px",bottom:"-4px"}:{right:"-1px",bottom:"-1px"}),{},{width:0,height:0,border:"4px solid transparent",borderLeft:"4px solid ".concat(e.colors.GBL05A),transform:"rotate(45deg)"})}});return Object(p.g)(d.a,l()({as:b.c,zaType:"Button",zaText:r,ref:t,preset:b.b.Plain,className:o,disabled:k,css:function(e){return{"&.Button.Button--plain":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?C?{padding:"4px 12px"}:{padding:"2px",margin:C?"0":"4px"}:Object.assign({},C?{padding:"10px 16px",textAlign:"left"}:{padding:"6px 16px 6px 12px"})),{},{fontWeight:e.fontWeights.bold,color:e.colors.GBL05A},C&&{width:"100%"}),{},{display:"flex",alignItems:"center"},N&&x&&{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}),N&&w&&{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}),(u||C)&&{borderRadius:"6px"}),c&&O(e)),{},{"&:hover":g(e)},S&&R&&Object.assign(Object.assign({},v(e)),{},{"&:hover":v(e)})),{},{"&:active":v(e)})}},"aria-label":r,"data-tooltip-position":C&&!u?"right":"bottom","data-tooltip-will-hide-on-click":!0},B&&{"data-tooltip":r+(i?" ".concat(m(i)):"")},{onClick:h}),I||u&&z?Object(p.g)("div",{css:j},I&&Object(p.g)(a,{css:function(e){return{color:e.colors.GBL05A}},center:!0}),u&&z):null,E&&Object(p.g)("span",{css:Object(s.a)(Object.assign(Object.assign({},(!C||u)&&{marginLeft:"4px"}),{},{width:"100%"}),"")},C?null!==(n=null!=T?T:f)&&void 0!==n?n:r:null!=f?f:r),!u&&z)}));t.a=function(e){var t=e.childItems,n=e.isMenuToggler,a=e.showTogglerIcon,r=i()(e,h),c=Object(u.useState)(!1),d=o()(c,2),b=d[0],m=d[1];if(n){if(0===t.length)return null;if(1===t.length)return Object(p.g)(y,l()({},r,t[0]));var v=Object(p.g)(y,l()({},r,{isMenuToggler:!0,isMenuOpen:b,showTogglerIcon:a}));return Object(p.g)(f.c,{toggler:v,onOpen:function(){return m(!0)},onClose:function(){return m(!1)},arrowed:!1,menuContainerClassName:"ToolbarV2Menu-container"},Object(p.g)("div",{css:Object(s.a)({display:e.firstLine?"flex":"block"},"")},t.map((function(t){return Object(p.g)(y,l()({key:t.label,isMenuItem:!0,firstLine:e.firstLine},t))}))))}return Object(p.g)(y,e)}},1269:function(e,t,n){},1272:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M2 6a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V6zm13.96 2.2l-5.008 5.008-2.651-2.652-1.768 1.768 4.42 4.42 6.776-6.777L15.96 8.2z",fillRule:"evenodd"}))};i.defaultProps={name:"CheckboxOn"},t.a=i},1273:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M5 6v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1zM2 6a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V6z"}))};i.defaultProps={name:"CheckboxOff"},t.a=i},1280:function(e,t,n){e.exports=n.p+"assets/background_blue.dc578fa3.svg"},1282:function(e,t,n){var a=n(641),o=n(212),r=n(367),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var l=null==n?0:r(n);return l<0&&(l=i(c+l,0)),a(e,o(t,3),l)}},1283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(1406);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,a;c(this,t);for(var o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.state={inView:!1},a.node=null,a.handleNode=function(e){a.node&&(0,i.unobserve)(a.node),a.node=e,a.observeNode(),a.props.innerRef&&a.props.innerRef(e)},a.handleChange=function(e){a.setState({inView:e}),a.props.onChange&&a.props.onChange(e)},l(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,i.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,i.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,i.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,a=e.rootMargin,o=e.rootId;(0,i.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:a},o)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,o=e.tag,i=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),c=this.state.inView;return r.createElement(o,a({},i,{ref:this.handleNode}),"function"==typeof n?n(c):null,"function"==typeof t?t(c):t)}}]),t}(r.Component);s.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=s},1284:function(e,t,n){"use strict";var a=n(1407),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,r,i,c,l,s,u=!1;t||(t={}),n=t.debug||!1;try{if(i=a(),c=document.createRange(),l=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(a){if(a.stopPropagation(),t.format)if(a.preventDefault(),void 0===a.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=o[t.format]||o.default;window.clipboardData.setData(r,e)}else a.clipboardData.clearData(),a.clipboardData.setData(t.format,e);t.onCopy&&(a.preventDefault(),t.onCopy(a.clipboardData))})),document.body.appendChild(s),c.selectNodeContents(s),l.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(c):l.removeAllRanges()),s&&document.body.removeChild(s),i()}return u}},1285:function(e,t,n){"use strict";var a=n(33),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(19),p=n(13),h=n.n(p),m=n(24),v=n(208),g=n(89),O=n.n(g),j=n(1382),y=n(56),C=n(30),w=["isMobile","column","avatar","avatarProps","noHoverCard","style","className","children"];function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var k=function(e){Object(i.a)(n,e);var t=x(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,o=t.column,r=o.title,i=o.imageUrl,c=o.id,l=t.avatar,u=t.avatarProps,d=t.noHoverCard,b=t.style,f=t.className,p=t.children,m=Object(a.default)(t,w),g=void 0===d?n:d;return e=l?Object(s.b)(v.a,Object.assign({url:i,alt:r},u)):p||r,g||(e=Object(s.b)(j.a,{toggler:e,id:c})),Object(s.b)("a",Object.assign(Object.assign({style:b,className:h()("ColumnLink",f),href:"".concat(C.F,"/column/").concat(c)},O()(m,["dispatch"])),{},{children:e}))}}]),n}(b.Component);k.propTypes={column:d.a.object.isRequired,avatar:d.a.bool,avatarProps:d.a.object,noHoverCard:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},k.defaultProps={avatar:!1},t.a=Object(f.compose)(Object(m.connect)((function(e){return{isMobile:Object(y.isMobileSelector)(e,{includeTablet:!0})}})))(k)},1286:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(55),f=n(139),p=n(178),h=n(1397),m=n(900),v=n(945),g=n(938),O=n(908),j=n(944),y=n(902),C=n(415);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var x=function(e){Object(r.a)(n,e);var t=w(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.favlist,o=t.favlist,r=o.id,i=o.type,c=o.title,s=o.updatedTime,u=o.answerCount,d=o.followerCount,C=o.isFollowing,w=o.isPublic,x=o.creator,k=void 0===x?{}:x,S=o.commentCount,A=t.status,R=t.action,T=t.lastreadTouchable,I=t.zaInfos,E=I.follow,N=I.options,B=t.renderOptions,z=this.state,L=z.commentsShown,P=z.commentsAutoFocus,M=z.commentPattern,D="/collection/".concat(r),_=Object(l.b)("a",{href:D,target:"_blank",rel:"noopener noreferrer",children:c});if(n===m.c.plain)return Object(l.b)(m.e,{data:a,link:D,title:_});var V={id:r,type:i};return n===m.c.default?Object(l.b)(m.e,{data:a,link:D,title:Object(l.c)(b.Flex,{alignItems:"center",children:[_,!w&&Object(l.b)(b.Text,{color:"GBL05A",ml:".3em",children:Object(l.b)(h.a,{center:!0,size:18})})]}),meta:A||Object(l.c)(m.d,{children:["".concat(Object(f.toDateString)(s)," 更新"),"".concat(Object(p.formatNumber)(u)," 条内容"),"".concat(Object(p.formatNumber)(d)," 人关注")]}),extra:R}):Object(l.c)(m.e,{data:a,link:D,onRef:function(t){e.contentItem=t},title:_,lastreadTouchable:T,children:[Object(l.c)(m.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"关注数："}),Object(p.formatNumber)(d)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"最后更新于："}),Object(f.toDateString)(s)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"作者："}),Object(l.b)(y.a,{user:k})]})]},"favlist-item-cells"),Object(l.c)(m.a,{children:[Object(l.b)(O.a,Object.assign(Object.assign({},V),{},{isFollowing:C,zaId:E})),Object(l.b)(v.a,{onClick:this.handleCommentsShown,commentsShown:L,count:S}),Object(l.b)(j.a,Object.assign(Object.assign({},V),{},{title:c,authorName:k&&k.name})),B&&B((function(){return e.contentItem}),N)]},"favlist-item-actions"),Object(l.b)(g.a,{parent:a,commentPattern:M,shown:L,autoFocus:P,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);x.propTypes={preset:u.a.oneOf(Object.values(m.c)),zaInfos:u.a.shape({follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},x.defaultProps={preset:m.c.default,zaInfos:{}},t.a=Object(C.b)((function(e){var t=e.favlist,n=e.trackCardShow,a=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:a}}))(x)},1287:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(417);function o(e){var t,n=e.isOrg,o=e.badgeV2,r=e.badge;if(!n)return!1;var i=Object(a.e)(o||r);return Boolean(null===(t=i.identity)||void 0===t?void 0:t.length)}},1288:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var a=["MEMBER_ANSWER_QUESTION","MEMBER_PUBLISH_EBOOK","MEMBER_CREATE_ARTICLE","MEMBER_ASK_QUESTION","MEMBER_CREATE_PIN","MEMBER_PUBLISH_LIVE_COURSE"],o=function(e){return a.includes(e.verb)},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.author.name;return n?"".concat(n,"：").concat(e):e}},1289:function(e,t,n){"use strict";var a=n(0),o=n(3),r=n.n(o),i=n(24),c=n(472);function l(e){var t=e.content,n=e.type,o=e.urlToken,r=Object(i.useDispatch)(),l=Object(a.useCallback)((function(){r(Object(c.a)({content:t,type:n,urlToken:o}))}),[r,t,n,o]),s=Object(i.useSelector)((function(e){return Object(c.c)(e,{type:n,urlToken:o})}));return Object(a.useEffect)((function(){s||l()}),[s,l]),null}l.propTypes={content:r.a.string.isRequired,type:r.a.oneOf(["answer","article"]).isRequired,urlToken:r.a.string.isRequired},t.a=l},1313:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),o=n(13),r=n.n(o);function i(e){var t=e.className;return Object(a.b)("span",{className:r()("ActivityItem-StickyMark",t),children:"置顶"})}},1317:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(19),d=n(24),b=n(3),f=n.n(b),p=n(36),h=n(87),m=n(161),v=n(1110),g=n(160),O=n(139),j=n(178),y=n(30),C=n(415),w=n(140),x=n(900),k=n(1285),S=n(908),A=n(944);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var T=function(e){Object(r.a)(n,e);var t=R(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showQuit:!1},e.onClose=function(){e.setState({showQuit:!1})},e.handleQuitButton=function(){e.setState({showQuit:!0})},e.handleQuitColumn=function(t,n){e.props.fetchQuitColumn(t,n),e.setState({showQuit:!1})},e}return Object(o.a)(n,[{key:"renderStatus",value:function(){var e=this.props,t=e.column,n=t.itemsCount,a=t.voteupCount,o=e.isProfile,r=e.urlToken,i=this.context.currentUser,c=r===(void 0===i?{}:i).urlToken;return Object(l.c)(x.d,{children:["".concat(Object(j.formatNumber)(n)," 篇内容"),"".concat(Object(j.formatNumber)(a)," 赞同"),o&&c&&this.renderProfileContent()]})}},{key:"renderMeta",value:function(){var e=this.props,t=e.preset,n=e.column.intro;return Object(l.b)("div",{className:"ColumnItem-meta",children:Object(l.c)(l.a,{children:[n,t===x.c.default&&this.renderStatus()]})})}},{key:"renderProfileContent",value:function(){var e=this,t=this.props,n=t.column,a=n.id,o=n.author,r=t.contributions,i=this.state.showQuit,c=o.urlToken===r.urlToken;return Object(l.c)(l.a,{children:[Object(l.b)(g.a,{toggler:Object(l.b)(p.c,{preset:"plain",icon:v.a}),placement:"top",className:"ColumnItem-more",arrowed:!0,children:c?Object(l.b)(p.c,{component:"a",preset:"plain",href:"".concat(y.F,"/column/").concat(a),className:"ColumnItem-botton",children:"管理专栏"}):Object(l.b)(p.c,{preset:"plain",className:"ColumnItem-botton",onClick:this.handleQuitButton,children:"退出专栏"})}),Object(l.b)(m.b,{onClose:this.onClose,title:"确定退出该专栏吗？",children:i&&Object(l.b)("div",{className:"ColumnAuthorsList-modal",children:Object(l.c)(h.a,{direction:"horizontal",children:[Object(l.b)(p.c,{onClick:function(){return e.onClose},children:"取消"}),Object(l.b)(p.c,{className:"ColumnPosts-confirmButton",onClick:function(){return e.handleQuitColumn(r.urlToken,a)},color:"blue",preset:"primary",children:"确定"})]})})})]})}},{key:"renderInteractiveContent",value:function(){var e=this,t=this.props,n=t.column,a=n.id,o=n.type,r=n.articlesCount,i=n.followers,c=n.lastArticle,s=n.isFollowing,u=n.author,d=n.title,b=t.zaInfos,f=b.follow,p=b.options,h=t.renderOptions,m={id:a,type:o},v=(c||{}).updated;return Object(l.c)(l.a,{children:[Object(l.c)(x.b,{className:"ContentItem-counts",children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"文章："}),Object(j.formatNumber)(r)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"最后更新于："}),Object(O.toRelativeString)(v)||"暂未更新"]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"关注者："}),i]})]}),Object(l.c)(x.a,{children:[Object(l.b)(S.a,Object.assign(Object.assign({},m),{},{isFollowing:s,zaId:f})),Object(l.b)(A.a,Object.assign(Object.assign({},m),{},{title:d,authorName:u&&u.name,href:"".concat(y.F,"/column/").concat(a)})),h&&h((function(){return e.contentItem}),p)]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.column,o=t.lastreadTouchable,r=Object(l.b)(k.a,{column:a,target:"_blank"});return Object(l.b)(x.e,{className:"ColumnItem",data:a,link:"".concat(y.F,"/column/").concat(a.id),onRef:function(t){return e.contentItem=t},title:r,meta:this.renderMeta(),lastreadTouchable:o,children:n===x.c.interactive&&this.renderInteractiveContent()})}}]),n}(s.Component);T.propTypes={preset:f.a.oneOf(Object.values(x.c)),isProfile:f.a.bool,zaInfos:f.a.shape({follow:f.a.number,options:f.a.number}),renderOptions:f.a.func},T.contextTypes={currentUser:f.a.object},T.defaultProps={preset:x.c.default,isProfile:!1,zaInfos:{}};t.a=Object(u.compose)(Object(C.b)((function(e){var t=e.column,n=e.trackCardShow,a=void 0===n||n;return{module:"ColumnItem",card:{content:{type:"Column",token:t.id,item_num:t.articlesCount,follower_num:t.followers,publish_timestamp:1e3*t.updated,author_member_hash_id:(t.author||{}).id}},trackCardShow:a}})),Object(d.connect)(null,{fetchQuitColumn:w.e}))(T)},1318:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n(13),i=n.n(r),c=n(414),l=n(478);t.a=function(e){var t=e.show,n=e.setModal,r=e.children,s=e.className,u=e.onCancel,d=e.hideIcon,b=e.maskClosable,f=void 0===b||b,p=function(){n?n(!1):u&&u()},h=Object(o.useRef)();return Object(o.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(l.a)(h.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),t?Object(a.b)("div",{className:s,children:Object(a.c)("div",{ref:h,children:[Object(a.b)("div",Object.assign({className:i()({"ModalExp-background":t})},f&&{onClick:p})),Object(a.c)("div",{className:i()("ModalExp-content",{"ModalExp-modalShow":t}),onClick:function(e){e.stopPropagation()},children:[!d&&Object(a.b)(c.a,{size:24,fill:"#d3d3d3",className:"ModalExp-closeIcon",onClick:p}),r]})]})}):null}},1319:function(e,t,n){"use strict";var a=n(49),o=n(0),r=n(106),i=n.n(r),c="function"==typeof ResizeObserver?function(e,t){var n=new ResizeObserver((function(e){return t(e[0].contentRect)}));return n.observe(e),function(){n.disconnect()}}:function(e,t){var n,a=function(){var a=e.getBoundingClientRect();!(n&&["left","top","width","height"].every((function(e){return n[e]===a[e]})))&&(n=a,t(a))},o=new(window.MutationObserver||window.WebKitMutationObserver)(i()(a,100));return o.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),a(),function(){o.disconnect()}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(o.useState)(e),n=Object(a.a)(t,2),r=n[0],i=n[1],l=Object(o.useState)(),s=Object(a.a)(l,2),u=s[0],d=s[1];return Object(o.useEffect)((function(){if(u)return c(u,i)}),[u]),[d,r]}},1322:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(926),f=n(178),p=n(416),h=n(1103),m=n(976);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(r.a)(n,e);var t=v(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,a=e.items,o=e.voteupCount,r=e.onLoad,i=e.text,c=e.isRewardList,s=e.notice,u=e.type,d=e.currentUser,v={getContainer:function(e){return e}};return Object(l.c)("div",{className:"VoterList",children:[Object(l.b)(h.a,{header:"".concat(Object(f.formatNumber)(o)," 人").concat(i||"赞同了")}),c&&s&&Object(l.b)("div",{className:"VoterList-description",children:Object(l.b)("p",{children:s})}),Object(l.b)(p.b,Object.assign(Object.assign({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:r,placeholder:Object(l.b)(p.a,{className:"List-item",withAvatar:!0})},v),{},{children:a&&a.map((function(e,t){return Object(l.b)(b.a,{children:Object(l.b)(m.a,{currentUser:d,user:e,isRewardList:c,meta:null,type:u,userLinkV2:!0})},"".concat(t,".").concat(e.urlToken))}))}))]})}}]),n}(d.Component);g.propTypes={isFetching:u.a.bool.isRequired,isDrained:u.a.bool.isRequired,items:u.a.array.isRequired,voteupCount:u.a.number.isRequired,text:u.a.string.isRequired,onLoad:u.a.func.isRequired,isRewardList:u.a.bool,type:u.a.string,currentUser:u.a.object};t.a=g},1323:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M17.007 11.504c0 .65-.13 1.26-.36 1.83l3 3.073S23 14.136 23 11.504C23 8.008 17.255 4 11.995 4c-1.4 0-2.741.25-3.982.701l2.161 2.16c.57-.23 1.18-.36 1.831-.36a5.004 5.004 0 0 1 5.002 5.003zM2.57 4.342l2.067 2.075C3.499 7.258 1 9.119 1 11.504c0 3.336 5.79 7.503 11.005 7.503 1.55 0 3.031-.3 4.382-.84l.42.42 2.125 2.118s.782.571 1.314 0-.074-1.305-.074-1.305L3.955 3.183s-.76-.742-1.385-.19c-.626.554 0 1.35 0 1.35zm4.963 4.96l1.55 1.552c-.05.21-.08.43-.08.65 0 1.66 1.341 3.001 3.002 3.001.22 0 .44-.03.65-.08l1.551 1.551c-.67.33-1.41.53-2.2.53a5.004 5.004 0 0 1-5.003-5.002c0-.79.2-1.53.53-2.201zm4.312-.78l3.151 3.152.02-.16c0-1.66-1.34-3.001-3.001-3.001l-.17.01z",opacity:".9",fillRule:"evenodd"}))};i.defaultProps={name:"EyeSlash"},t.a=i},1339:function(e,t,n){"use strict";var a=n(28);Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.getBlockType=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var o=["img","br"],r=/([\w|-]+)(?:="([^"]*)")?/;function i(e){var t={};if((e=e.trim()).length)for(var n,o=new RegExp(r.source,"g");n=o.exec(e);){var i=n.slice(1),c=a(i,2),l=c[0],s=c[1];t[l]=s}return t}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a(e,5),r=n[0],c=n[1],l=n[2],s=n[3],u=n[4],d="open";"/"===c?d="close":(o.includes(l)||"/"===u)&&(d="self-close");var b=t.parseAttrs?i(s):s;return{tagHTML:r,tagName:l,tagType:d,attrs:b}}function l(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t}function s(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"sup":return{type:"replace-self",content:""};case"invisible":return{type:"hide"};default:return null}}function u(e){return!!(e.h1||e.h2||e.h3||e.h4||e.h5||e.h6||e.blockquote||e.pre||e.img||e.sup||e["video-box"]||e["link-card"])||(e.br||0)+(e.p||0)+(e.li||0)>1}t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=i,t.parseTagGroup=c,t.parseTag=function(e,n){var a=t.TAG_RE.exec(e);if(a)return c(a,n)},t.getBlockType=l,t.truncateHTML=function(e){for(var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.endsWith,d=void 0===i?"…":i,b=r.placeholders,f=void 0===b?{}:b,p=[],h=[],m=[],v={},g={},O=new RegExp(t.TAG_RE.source,"g"),j=0,y=0,C=0,w=0,x=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.push(e),t||(j+=e.length),y+=e.length};n=O.exec(e);){var k=c(n,{parseAttrs:!0}),S=k.tagHTML,A=k.tagType,R=k.tagName,T="close"===A&&o.includes(R)?"invalid":l("close"!==A?k:h[h.length-1]),I=f[T]?{type:"replace",content:f[T]}:s(T);"close"!==A&&(v[T]=(v[T]||0)+1);var E=e.slice(y,n.index),N=E.length;if(j+N>=a&&0===C&&0===w){for(x(E.slice(0,a-j));m.length;){var B=m.pop();p.push("</".concat(B.tagName,">"))}break}0===C&&x(E,0!==w),"invalid"!==T&&("open"===A?h.push(k):"close"===A&&h.pop(),I?("replace"===I.type&&(0===C&&"close"!==A&&p.push(I.content),"open"===A?C++:"close"===A&&C--),0===C&&"replace-self"===I.type&&p.push(I.content),0===C&&"hide"===I.type&&("open"===A?w++:"close"===A&&w--,p.push(S))):0===C&&(p.push(S),"open"===A?m.push(k):"close"===A&&m.pop())),"video-box"!==T||g.type||"string"==typeof k.attrs||(g.type="video",g.url=k.attrs["data-poster"],g.id=k.attrs["data-lens-id"]),y=O.lastIndex}if(j<a){var z=e.slice(y).slice(0,a-j);x(z)}var L=j>a||j===a&&y<e.length||u(v);return{isTruncated:L,thumbnailInfo:g,content:"".concat(p.join("").trim().replace(/\s{2,}/g," ")).concat(L?d:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},1364:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(31),o=n.n(a),r=(n(0),n(1243)),i=n(7),c=["toolbarButton"];function l(e){var t=e.toolbarButton,n=void 0===t?r.a:t,a=o()(e,c);return Object(i.g)("div",null,Object(i.g)(n,a))}},1365:function(e,t,n){"use strict";var a=n(39),o=n.n(a),r=(n(0),n(2762)),i=n(327),c=n(7);t.a=function(e){var t=e.toolbarButton,n=void 0===t?i.a:t;return Object(c.g)("div",null,Object(c.g)(n,o()({label:e.isActive?"删除目录":"添加目录",shortcut:"⌘+⇧+0",icon:r.a},e)))}},1382:function(e,t,n){"use strict";var a=n(33),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(24),p=n(993),h=n(1059),m=n(2005),v=n(139),g=n(35),O=n(205),j=n(30),y=n(370),C=["toggler","column","id","isLoading","onRef"];function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var x=function(e){Object(i.a)(n,e);var t=w(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.dispatch,a=t.id;n(Object(y.b)(a))},e.track=function(){var t,n=e.props.column;e.hoverCardElement&&n&&(g.a.setModule(e.hoverCardElement,{module:"ColumnItem"},{card:{content:{type:"Column",token:n.id,item_num:n.articlesCount,follower_num:n.followers,publish_timestamp:1e3*n.updated,author_member_hash_id:null===(t=n.author)||void 0===t?void 0:t.id}}}),g.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.column,r=t.id,i=t.isLoading,c=t.onRef,l=Object(a.default)(t,C),u=o||{},d=u.title,b=u.intro,f=u.itemsCount,g=u.voteupCount,y=u.lastArticle,w=u.articlesCount,x=u.followers,k=y||{},S=k.title,A=k.created,R="".concat(j.F,"/column/").concat(r);return Object(s.c)(h.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(h.a,{title:Object(s.b)("a",{target:"_black",href:R,children:d})}),b,y&&Object(s.c)("div",{children:[Object(s.b)(m.a,{text:!0,center:!0})," 最后更新",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),S,Object(s.c)("span",{children:["（",Object(v.toRelativeString)(A),"）"]})]}),Object(s.b)("div",{children:Object(s.c)(p.a,{children:[Object(s.b)(p.a.Item,{tag:O.a,preset:"plain",a:!0,to:R,name:f>=0?"内容":"文章",value:null!=f?f:w}),Object(s.b)(p.a.Item,{tag:O.a,preset:"plain",a:!0,to:R,name:g>=0?"赞同":"关注",value:null!=g?g:x})]})})]}))}}]),n}(b.Component);x.contextTypes={currentUser:d.a.object},t.a=Object(f.connect)((function(e,t){var n=t.id,a=e.entities.columns,o=e.loading.local;return{column:a[n],isLoading:Boolean(o["column/".concat(n)])}}))(x)},1387:function(e,t,n){"use strict";var a=n(40),o=n(207),r=n(1388);e.exports=function(e){if(!Number.isInteger(e)&&e!==1/0||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");var t=[],n=0,i=function(){n--,t.length>0&&t.shift()()},c=function(){var e=o(a.mark((function e(t,o){var c,l,s,u,d=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n++,c=d.length,l=new Array(c>2?c-2:0),s=2;s<c;s++)l[s-2]=d[s];return u=r.apply(void 0,[t].concat(l)),o(u),e.prev=4,e.next=7,u;case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:i();case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(r,i){for(var l=arguments.length,s=new Array(l>2?l-2:0),u=2;u<l;u++)s[u-2]=arguments[u];t.push(c.bind.apply(c,[null,r,i].concat(s))),o(a.mark((function o(){return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve();case 2:n<e&&t.length>0&&t.shift()();case 3:case"end":return a.stop()}}),o)})))()},s=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return new Promise((function(t){return l.apply(void 0,[e,t].concat(n))}))};return Object.defineProperties(s,{activeCount:{get:function(){return n}},pendingCount:{get:function(){return t.length}},clearQueue:{value:function(){t.length=0}}}),s}},1388:function(e,t,n){"use strict";var a=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return new Promise((function(t){t(e.apply(void 0,n))}))};e.exports=a,e.exports.default=a},1390:function(e,t,n){var a=n(14);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1393:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(88),o=n(65);function r(e,t){Object(o.a)(2,arguments);var n=Object(a.a)(e),r=Object(a.a)(t);return n.getTime()<r.getTime()}},1395:function(e,t,n){e.exports=n.p+"assets/liukanshan_coin.29bf8333.svg"},1397:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M18 8c.1-3.308-2.592-6-5.9-6-3.308 0-6 2.692-6 6v2H5.002C4 10 4 11 4 11v9s0 2 2 2h12c2 0 2-1.97 2-1.97V11s0-1-1-1h-1V8zm-6-4c2.143.018 4.005 1.597 4 4v2H8V7.996C8.013 5.562 9.857 3.982 12 4z",fillRule:"evenodd"}))};i.defaultProps={name:"Lock"},t.a=i},1406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=r,t.unobserve=i,t.destroy=c;var a=new Map,o=new Map;function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},r=arguments[3],i=n.root,c=n.rootMargin,s=n.threshold||0;if(e&&t){var u=c?s.toString()+"_"+c:""+s.toString();i&&(u=r?r+"_"+u:null);var d=u?o.get(u):null;d||(d=new IntersectionObserver(l,n),u&&o.set(u,d));var b={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return a.set(e,b),d.observe(e),b}}function i(e){if(e){var t=a.get(e);if(t){var n=t.observerId,r=t.observer,i=n?o.get(n):r;i&&i.unobserve(e);var c=!1;n&&a.forEach((function(t,a){t&&t.observerId===n&&a!==e&&(c=!0)})),i&&!c&&(i.disconnect(),o.delete(n)),a.delete(e)}}}function c(){o.forEach((function(e){e.disconnect()})),o.clear(),a.clear()}function l(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio,o=e.target,r=a.get(o);if(r&&n>=0){var i=r.options,c=!1;Array.isArray(i.threshold)?c=i.threshold.some((function(e){return r.visible?n>e:n>=e})):void 0!==i.threshold&&(c=r.visible?n>i.threshold:n>=i.threshold),void 0!==t&&(c=c&&t),r.callback&&r.callback(c)}}))}t.default={observe:r,unobserve:i,destroy:c}},1407:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},1408:function(e,t,n){"use strict";function a(e){return e?"¥".concat(e/100):"免费"}n.d(t,"a",(function(){return a}))},1409:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(6),o=n(1124);function r(e){var t,n,r;return null!=e&&null!==(t=e.bizExt)&&void 0!==t&&t.creationRelationship?e.bizExt.creationRelationship:"string"==typeof(null==e||null===(n=e.creationRelationship)||void 0===n?void 0:n.renderJson)?Object(a.camelizeKeys)(null!==(r=Object(o.a)(e.creationRelationship.renderJson))&&void 0!==r?r:{}):e.creationRelationship}var i=r,c=r,l=r},1410:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(2),o=n(6),r=n(10),i=n(5),c=Object(i.a)("club",["GET","JOIN","LEAVE","UPDATE","REQUEST_JOIN"]),l=function(e){return{API:{types:c.GET,method:"GET",endpoint:"clubs/".concat(e),fetchOptions:{credentials:"include"}},schema:r.a.CLUB,meta:{id:e}}},s=function(e){return function(t){return t({API:{types:c.JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},meta:{id:e}}).then((function(){return t(l(e))}))}},u=function(e,t){return function(n){return n({API:{types:c.REQUEST_JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join_requests"),fetchOptions:{zsEncrypt:!0},body:Object(o.decamelizeKeys)({requestDetail:t})}}).then((function(){return n(l(e))}))}},d=function(e){return function(t,n){var o=n().entities.clubs[e],r=o.joinCount,i=o.isJoined,s=o.loginMask;return t({API:{types:c.LEAVE,method:"DELETE",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},UPDATE:{request:{clubs:Object(a.a)({},e,Object.assign({isJoined:!1},r&&{joinCount:r-1}))},failure:{clubs:Object(a.a)({},e,Object.assign({isJoined:i,loginMask:s},r&&{joinCount:r}))}},meta:{id:e}}).then((function(){return t(l(e))}))}}},1411:function(e,t,n){"use strict";var a=n(49),o=n(0),r=n(45),i=n.n(r);t.a=function(e){var t=Object(o.useState)((function(){return i.a.get(e)})),n=Object(a.a)(t,2),r=n[0],c=n[1];return[r,Object(o.useCallback)((function(t){i.a.set(e,t),c(t)}),[e])]}},1412:function(e,t,n){"use strict";t.a=function(){return!0}},1413:function(e,t,n){"use strict";t.a=function(e){return e.componentList.filter(Boolean).filter((function(e){var t=e.component;return Boolean(t)})).map((function(e){return e.component}))}},1414:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),o=n(55),r=n(43);function i(e){var t=Object(r.e)((function(){return n.e(33).then(n.bind(null,2651))}));return Object(a.b)(o.Box,Object.assign(Object.assign({my:"14px",css:{minHeight:20}},e),{},{children:t?Object(a.b)(t,{width:"70px",height:"20px",css:{display:"block"}}):null}))}},1415:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(42);function o(e,t,n){return"//".concat(a.a.wwwHost,"/vessay").concat(n?"/v2":"","/editor?type=").concat(e,"&id=").concat(t)}var r="vessay_v2_sdk",i="2"},1416:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c}));var a=n(5),o=Object(a.a)("bizVip",["OPEN_BIZ_VIP","QUERY_BIZ_VIP_STATUS","GET_COMMERCIAL_REPORT_INFO"]);function r(){return{API:{types:o.OPEN_BIZ_VIP,endpoint:"/commercial/vip",root:"https://bvip.zhihu.com/api/v1",method:"POST"}}}function i(e){return{API:{types:o.QUERY_BIZ_VIP_STATUS,endpoint:"/questions/".concat(e,"/answer-settings"),method:"GET"}}}function c(){return{API:{types:o.QUERY_BIZ_VIP_STATUS,endpoint:"/articles/settings",method:"GET"}}}},1417:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var a=n(42),o=function(e){var t=e.title,n=e.originTitle,o=e.source,r=e.sourceId,i=e.productTypeName,c=new URLSearchParams({title:t,originTitle:n,source:o,sourceId:r,productTypeName:i}).toString();return"".concat(a.a.protocol,"//").concat(a.a.wwwHost,"/selection/goods-editor?").concat(c)},r=function(e){var t=e.contentId,n=e.contentType,o=new URLSearchParams({contentId:t,contentType:n});return"".concat(a.a.protocol,"//").concat(a.a.wwwHost,"/selection/profit-selector?").concat(o)}},1418:function(e,t,n){"use strict";t.a={editableInit:"Editable.Init",editableEdit:"Editable.Edit",draftLoad:"DraftLoad",draftSave:"DraftSave",addAnswer:"AddAnswer"}},1419:function(e,t,n){var a=n(216),o=n(132);e.exports=function(e){return!0===e||!1===e||o(e)&&"[object Boolean]"==a(e)}},1420:function(e,t,n){"use strict";n.d(t,"useSpring",(function(){return We})),n.d(t,"useTransition",(function(){return Qe}));var a=n(95),o=n.n(a),r=n(53),i=n.n(r),c=n(31),l=n.n(c),s=n(28),u=n.n(s),d=n(39),b=n.n(d),f=n(1002),p=n.n(f),h=n(25),m=n.n(h),v=n(23),g=n.n(v),O=n(27),j=n.n(O),y=n(14),C=n.n(y),w=n(305),x=n.n(w),k=n(40),S=n.n(k),A=n(207),R=n.n(A),T=n(21),I=n.n(T),E=n(1144);n.d(t,"Globals",(function(){return E.b}));var N=n(0),B=n(1647),z=(n(1648),n(1649),["children"]);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=C()(e);if(t){var o=C()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return j()(this,n)}}function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function D(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return E.s.fun(e)?e.apply(void 0,n):e}var _=function(e,t){return!0===e||!!(t&&e&&(E.s.fun(e)?e(t):Object(E.y)(e).includes(t)))},V=function(e,t){return E.s.obj(e)?t&&e[t]:e},U=function(e,t){return!0===e.default?e[t]:e.default?e.default[t]:void 0},F=function(e){return e},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,n=H;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));var a,o={},r=P(n);try{for(r.s();!(a=r.n()).done;){var i=a.value,c=t(e[i],i);E.s.und(c)||(o[i]=c)}}catch(e){r.e(e)}finally{r.f()}return o},H=["config","onProps","onStart","onChange","onPause","onResume","onRest"],G={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function K(e){var t=function(e){var t={},n=0;if(Object(E.l)(e,(function(e,a){G[a]||(t[a]=e,n++)})),n)return t}(e);if(t){var n={to:t};return Object(E.l)(e,(function(e,a){return a in t||(n[a]=e)})),n}return Object.assign({},e)}function W(e){return e=Object(E.q)(e),E.s.arr(e)?e.map(W):Object(E.t)(e)?E.b.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Z(e){for(var t in e)return!0;return!1}function Q(e){return E.s.fun(e)||E.s.arr(e)&&E.s.obj(e[0])}function Y(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}function J(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}var X=Object.assign(Object.assign({},{tension:170,friction:26}),{},{mass:1,damping:1,easing:function(e){return e},clamp:!1}),$=function e(){I()(this,e),this.velocity=0,Object.assign(this,X)};function ee(e,t){if(E.s.und(t.decay)){var n=!E.s.und(t.tension)||!E.s.und(t.friction);!n&&E.s.und(t.frequency)&&E.s.und(t.damping)&&E.s.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var te=[],ne=function e(){I()(this,e),this.changed=!1,this.values=te,this.toValues=null,this.fromValues=te,this.config=new $,this.immediate=!1};function ae(e,t){var n=t.key,a=t.props,o=t.defaultProps,r=t.state,i=t.actions;return new Promise((function(t,c){var l,s,u,d=_(null!=(l=a.cancel)?l:null==o?void 0:o.cancel,n);if(d)h();else{E.s.und(a.pause)||(r.paused=_(a.pause,n));var b=null==o?void 0:o.pause;!0!==b&&(b=r.paused||_(b,n)),s=D(a.delay||0,n),b?(r.resumeQueue.add(p),i.pause()):(i.resume(),p())}function f(){r.resumeQueue.add(p),r.timeouts.delete(u),u.cancel(),s=u.time-E.w.now()}function p(){s>0?(u=E.w.setTimeout(h,s),r.pauseQueue.add(f),r.timeouts.add(u)):h()}function h(){r.pauseQueue.delete(f),r.timeouts.delete(u),e<=(r.cancelId||0)&&(d=!0);try{i.start(Object.assign(Object.assign({},a),{},{callId:e,cancel:d}),t)}catch(e){c(e)}}}))}var oe=function(e,t){return 1==t.length?t[0]:t.some((function(e){return e.cancelled}))?ce(e.get()):t.every((function(e){return e.noop}))?re(e.get()):ie(e.get(),t.every((function(e){return e.finished})))},re=function(e){return{value:e,noop:!0,finished:!0,cancelled:!1}},ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{value:e,finished:t,cancelled:n}},ce=function(e){return{value:e,cancelled:!0,finished:!1}};function le(e,t,n,a){var o=t.callId,r=t.parentId,i=t.onRest,c=n.asyncTo,l=n.promise;return r||e!==c||t.reset?n.promise=R()(S.a.mark((function s(){var u,d,b,f,p,h,m,v;return S.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(n.asyncId=o,n.asyncTo=e,u=q(t,(function(e,t){return"onRest"===t?void 0:e})),f=new Promise((function(e,t){return d=e,b=t})),p=function(e){var t=o<=(n.cancelId||0)&&ce(a)||o!==n.asyncId&&ie(a,!1);if(t)throw e.result=t,b(e),e},h=function(e,t){var r=new ue,i=new de;return R()(S.a.mark((function c(){var l,s;return S.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!E.b.skipAnimation){c.next=5;break}throw se(n),i.result=ie(a,!1),b(i),i;case 5:return p(r),(l=E.s.obj(e)?Object.assign({},e):Object.assign(Object.assign({},t),{},{to:e})).parentId=o,Object(E.l)(u,(function(e,t){E.s.und(l[t])&&(l[t]=e)})),c.next=11,a.start(l);case 11:if(s=c.sent,p(r),!n.paused){c.next=16;break}return c.next=16,new Promise((function(e){n.resumeQueue.add(e)}));case 16:return c.abrupt("return",s);case 17:case"end":return c.stop()}}),c)})))()},!E.b.skipAnimation){s.next=9;break}return se(n),s.abrupt("return",ie(a,!1));case 9:return s.prev=9,v=E.s.arr(e)?function(){var e=R()(S.a.mark((function e(t){var n,a,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=P(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=9;break}return o=a.value,e.next=7,h(o);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()(e):Promise.resolve(e(h,a.stop.bind(a))),s.next=13,Promise.all([v.then(d),f]);case 13:m=ie(a.get(),!0,!1),s.next=27;break;case 16:if(s.prev=16,s.t0=s.catch(9),!(s.t0 instanceof ue)){s.next=22;break}m=s.t0.result,s.next=27;break;case 22:if(!(s.t0 instanceof de)){s.next=26;break}m=s.t0.result,s.next=27;break;case 26:throw s.t0;case 27:return s.prev=27,o==n.asyncId&&(n.asyncId=r,n.asyncTo=r?c:void 0,n.promise=r?l:void 0),s.finish(27);case 30:return E.s.fun(i)&&E.w.batchedUpdates((function(){i(m,a,a.item)})),s.abrupt("return",m);case 32:case"end":return s.stop()}}),s,null,[[9,16,27,30]])})))():l}function se(e,t){Object(E.m)(e.timeouts,(function(e){return e.cancel()})),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var ue=function(e){g()(n,e);var t=L(n);function n(){return I()(this,n),t.call(this,"An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}return n}(x()(Error)),de=function(e){g()(n,e);var t=L(n);function n(){return I()(this,n),t.call(this,"SkipAnimationSignal")}return n}(x()(Error)),be=function(e){return e instanceof pe},fe=1,pe=function(e){g()(n,e);var t=L(n);function n(){var e;return I()(this,n),(e=t.apply(this,arguments)).id=fe++,e._priority=0,e}return m()(n,[{key:"priority",get:function(){return this._priority},set:function(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}},{key:"get",value:function(){var e=Object(B.e)(this);return e&&e.getValue()}},{key:"to",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E.b.to(this,t)}},{key:"interpolate",value:function(){Object(E.j)();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E.b.to(this,t)}},{key:"toJSON",value:function(){return this.get()}},{key:"observerAdded",value:function(e){1==e&&this._attach()}},{key:"observerRemoved",value:function(e){0==e&&this._detach()}},{key:"_attach",value:function(){}},{key:"_detach",value:function(){}},{key:"_onChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(E.d)(this,{type:"change",parent:this,value:e,idle:t})}},{key:"_onPriorityChange",value:function(e){this.idle||E.o.sort(this),Object(E.d)(this,{type:"priority",parent:this,priority:e})}}]),n}(E.a),he=Symbol.for("SpringPhase"),me=function(e){return(1&e[he])>0},ve=function(e){return(2&e[he])>0},ge=function(e){return(4&e[he])>0},Oe=function(e,t){return t?e[he]|=3:e[he]&=-3},je=function(e,t){return t?e[he]|=4:e[he]&=-5},ye=function(e){g()(n,e);var t=L(n);function n(e,a){var o;if(I()(this,n),(o=t.call(this)).animation=new ne,o.defaultProps={},o._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},o._pendingCalls=new Set,o._lastCallId=0,o._lastToId=0,o._memoizedDuration=0,!E.s.und(e)||!E.s.und(a)){var r=E.s.obj(e)?Object.assign({},e):Object.assign(Object.assign({},a),{},{from:e});E.s.und(r.default)&&(r.default=!0),o.start(r)}return o}return m()(n,[{key:"idle",get:function(){return!(ve(this)||this._state.asyncTo)||ge(this)}},{key:"goal",get:function(){return Object(E.q)(this.animation.to)}},{key:"velocity",get:function(){var e=Object(B.e)(this);return e instanceof B.c?e.lastVelocity||0:e.getPayload().map((function(e){return e.lastVelocity||0}))}},{key:"hasAnimated",get:function(){return me(this)}},{key:"isAnimating",get:function(){return ve(this)}},{key:"isPaused",get:function(){return ge(this)}},{key:"advance",value:function(e){var t=this,n=!0,a=!1,o=this.animation,r=o.config,i=o.toValues,c=Object(B.g)(o.to);!c&&Object(E.r)(o.to)&&(i=Object(E.y)(Object(E.q)(o.to))),o.values.forEach((function(l,s){if(!l.done){var u=l.constructor==B.b?1:c?c[s].lastPosition:i[s],d=o.immediate,b=u;if(!d){if(b=l.lastPosition,r.tension<=0)return void(l.done=!0);var f,p=l.elapsedTime+=e,h=o.fromValues[s],m=null!=l.v0?l.v0:l.v0=E.s.arr(r.velocity)?r.velocity[s]:r.velocity;if(E.s.und(r.duration))if(r.decay){var v=!0===r.decay?.998:r.decay,g=Math.exp(-(1-v)*p);b=h+m/(1-v)*(1-g),d=Math.abs(l.lastPosition-b)<.1,f=m*g}else{f=null==l.lastVelocity?m:l.lastVelocity;for(var O=r.precision||(h==u?.005:Math.min(1,.001*Math.abs(u-h))),j=r.restVelocity||O/10,y=r.clamp?0:r.bounce,C=!E.s.und(y),w=h==u?l.v0>0:h<u,x=Math.ceil(e/1),k=0;k<x&&(Math.abs(f)>j||!(d=Math.abs(u-b)<=O));++k){C&&(b==u||b>u==w)&&(f=-f*y,b=u),b+=1*(f+=1*((1e-6*-r.tension*(b-u)+.001*-r.friction*f)/r.mass))}}else{var S=1;r.duration>0&&(t._memoizedDuration!==r.duration&&(t._memoizedDuration=r.duration,l.durationProgress>0&&(l.elapsedTime=r.duration*l.durationProgress,p=l.elapsedTime+=e)),S=(S=(r.progress||0)+p/t._memoizedDuration)>1?1:S<0?0:S,l.durationProgress=S),f=((b=h+r.easing(S)*(u-h))-l.lastPosition)/e,d=1==S}l.lastVelocity=f,Number.isNaN(b)&&(console.warn("Got NaN while animating:",t),d=!0)}c&&!c[s].done&&(d=!1),d?l.done=!0:n=!1,l.setValue(b,r.round)&&(a=!0)}}));var l=Object(B.e)(this);if(n){var s=Object(E.q)(o.to);(l.setValue(s)||a)&&this._onChange(s),this._stop()}else a&&this._onChange(l.getValue())}},{key:"set",value:function(e){var t=this;return E.w.batchedUpdates((function(){t._stop(),t._focus(e),t._set(e)})),this}},{key:"pause",value:function(){this._update({pause:!0})}},{key:"resume",value:function(){this._update({pause:!1})}},{key:"finish",value:function(){var e=this;if(ve(this)){var t=this.animation,n=t.to,a=t.config;E.w.batchedUpdates((function(){e._onStart(),a.decay||e._set(n,!1),e._stop()}))}return this}},{key:"update",value:function(e){return(this.queue||(this.queue=[])).push(e),this}},{key:"start",value:function(e,t){var n,a=this;return E.s.und(e)?(n=this.queue||[],this.queue=[]):n=[E.s.obj(e)?e:Object.assign(Object.assign({},t),{},{to:e})],Promise.all(n.map((function(e){return a._update(e)}))).then((function(e){return oe(a,e)}))}},{key:"stop",value:function(e){var t=this,n=this.animation.to;return this._focus(this.get()),se(this._state,e&&this._lastCallId),E.w.batchedUpdates((function(){return t._stop(n,e)})),this}},{key:"reset",value:function(){this._update({reset:!0})}},{key:"eventObserved",value:function(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}},{key:"_prepareNode",value:function(e){var t=this.key||"",n=e.to,a=e.from;(null==(n=E.s.obj(n)?n[t]:n)||Q(n))&&(n=void 0),null==(a=E.s.obj(a)?a[t]:a)&&(a=void 0);var o={to:n,from:a};if(!me(this)){if(e.reverse){var r=[a,n];n=r[0],a=r[1]}a=Object(E.q)(a),E.s.und(a)?Object(B.e)(this)||this._set(n):this._set(a)}return o}},{key:"_update",value:function(e,t){var n=this,a=b()({},e),o=this.key,r=this.defaultProps;a.default&&Object.assign(r,q(a,(function(e,t){return/^on/.test(t)?V(e,o):e}))),Re(this,a,"onProps"),Te(this,"onProps",a,this);var i=this._prepareNode(a);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");var c=this._state;return ae(++this._lastCallId,{key:o,props:a,defaultProps:r,state:c,actions:{pause:function(){ge(n)||(je(n,!0),Object(E.n)(c.pauseQueue),Te(n,"onPause",ie(n,Ce(n,n.animation.to)),n))},resume:function(){ge(n)&&(je(n,!1),ve(n)&&n._resume(),Object(E.n)(c.resumeQueue),Te(n,"onResume",ie(n,Ce(n,n.animation.to)),n))},start:this._merge.bind(this,i)}}).then((function(e){if(a.loop&&e.finished&&(!t||!e.noop)){var o=we(a);if(o)return n._update(o,!0)}return e}))}},{key:"_merge",value:function(e,t,n){var a=this;if(t.cancel)return this.stop(!0),n(ce(this));var o=!E.s.und(e.to),r=!E.s.und(e.from);if(o||r){if(!(t.callId>this._lastToId))return n(ce(this));this._lastToId=t.callId}var i=this.key,c=this.defaultProps,l=this.animation,s=l.to,u=l.from,d=e.to,b=void 0===d?s:d,f=e.from,p=void 0===f?u:f;if(!r||o||t.default&&!E.s.und(b)||(b=p),t.reverse){var h=[p,b];b=h[0],p=h[1]}var m=!Object(E.u)(p,u);m&&(l.from=p),p=Object(E.q)(p);var v=!Object(E.u)(b,s);v&&this._focus(b);var g=Q(t.to),O=l.config,j=O.decay,y=O.velocity;(o||r)&&(O.velocity=0),t.config&&!g&&function(e,t,n){for(var a in n&&(ee(n=Object.assign({},n),t),t=Object.assign(Object.assign({},n),t)),ee(e,t),Object.assign(e,t),X)null==e[a]&&(e[a]=X[a]);var o=e.mass,r=e.frequency,i=e.damping;E.s.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*o,e.friction=4*Math.PI*i*o/r)}(O,D(t.config,i),t.config!==c.config?D(c.config,i):void 0);var C=Object(B.e)(this);if(!C||E.s.und(b))return n(ie(this,!0));var w=E.s.und(t.reset)?r&&!t.default:!E.s.und(p)&&_(t.reset,i),x=w?p:this.get(),k=W(b),S=E.s.num(k)||E.s.arr(k)||Object(E.t)(k),A=!g&&(!S||_(c.immediate||t.immediate,i));if(v){var R=Object(B.f)(b);if(R!==C.constructor){if(!A)throw Error("Cannot animate between ".concat(C.constructor.name," and ").concat(R.name,', as the "to" prop suggests'));C=this._set(k)}}var T=C.constructor,I=Object(E.r)(b),N=!1;if(!I){var z=w||!me(this)&&m;(v||z)&&(I=!(N=Object(E.u)(W(x),k))),Object(E.u)(O.decay,j)&&Object(E.u)(O.velocity,y)||(I=!0)}if(N&&ve(this)&&(l.changed&&!w?I=!0:I||this._stop(s)),!g&&((I||Object(E.r)(s))&&(l.values=C.getPayload(),l.toValues=Object(E.r)(b)?null:T==B.b?[1]:Object(E.y)(k)),l.immediate!=A&&(l.immediate=A,A||w||this._set(s)),I)){var L=l.onRest;Object(E.k)(Ae,(function(e){return Re(a,t,e)}));var P=ie(this,Ce(this,s));Object(E.n)(this._pendingCalls,P),this._pendingCalls.add(n),l.changed&&E.w.batchedUpdates((function(){var e;l.changed=!w,null==L||L(P,a),w?D(c.onRest,P):null==(e=l.onStart)||e.call(l,P,a)}))}w&&this._set(x),g?n(le(t.to,t,this._state,this)):I?this._start():ve(this)&&!v?this._pendingCalls.add(n):n(re(x))}},{key:"_focus",value:function(e){var t=this.animation;e!==t.to&&(Object(E.p)(this)&&this._detach(),t.to=e,Object(E.p)(this)&&this._attach())}},{key:"_attach",value:function(){var e=0,t=this.animation.to;Object(E.r)(t)&&(Object(E.c)(t,this),be(t)&&(e=t.priority+1)),this.priority=e}},{key:"_detach",value:function(){var e=this.animation.to;Object(E.r)(e)&&Object(E.x)(e,this)}},{key:"_set",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Object(E.q)(e);if(!E.s.und(a)){var o=Object(B.e)(this);if(!o||!Object(E.u)(a,o.getValue())){var r=Object(B.f)(a);o&&o.constructor==r?o.setValue(a):Object(B.h)(this,r.create(a)),o&&E.w.batchedUpdates((function(){t._onChange(a,n)}))}}return Object(B.e)(this)}},{key:"_onStart",value:function(){var e=this.animation;e.changed||(e.changed=!0,Te(this,"onStart",ie(this,Ce(this,e.to)),this))}},{key:"_onChange",value:function(e,t){t||(this._onStart(),D(this.animation.onChange,e,this)),D(this.defaultProps.onChange,e,this),p()(C()(n.prototype),"_onChange",this).call(this,e,t)}},{key:"_start",value:function(){var e=this.animation;Object(B.e)(this).reset(Object(E.q)(e.to)),e.immediate||(e.fromValues=e.values.map((function(e){return e.lastPosition}))),ve(this)||(Oe(this,!0),ge(this)||this._resume())}},{key:"_resume",value:function(){E.b.skipAnimation?this.finish():E.o.start(this)}},{key:"_stop",value:function(e,t){if(ve(this)){Oe(this,!1);var n=this.animation;Object(E.k)(n.values,(function(e){e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Object(E.d)(this,{type:"idle",parent:this});var a=t?ce(this.get()):ie(this.get(),Ce(this,null!=e?e:n.to));Object(E.n)(this._pendingCalls,a),n.changed&&(n.changed=!1,Te(this,"onRest",a,this))}}}]),n}(pe);function Ce(e,t){var n=W(t),a=W(e.get());return Object(E.u)(a,n)}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to,a=D(t);if(a){var o=!0!==a&&K(a),r=(o||e).reverse,i=!o||o.reset;return xe(Object.assign(Object.assign({},e),{},{loop:t,default:!1,pause:void 0,to:!r||Q(n)?n:void 0,from:i?e.from:void 0,reset:i},o))}}function xe(e){var t=e=K(e),n=t.to,a=t.from,o=new Set;return E.s.obj(n)&&Se(n,o),E.s.obj(a)&&Se(a,o),e.keys=o.size?Array.from(o):null,e}function ke(e){var t=xe(e);return E.s.und(t.default)&&(t.default=q(t)),t}function Se(e,t){Object(E.l)(e,(function(e,n){return null!=e&&t.add(n)}))}var Ae=["onStart","onRest","onChange","onPause","onResume"];function Re(e,t,n){e.animation[n]=t[n]!==U(t,n)?V(t[n],e.key):void 0}function Te(e,t){for(var n,a,o,r,i,c,l=arguments.length,s=new Array(l>2?l-2:0),u=2;u<l;u++)s[u-2]=arguments[u];null==(r=(o=e.animation)[t])||(n=r).call.apply(n,[o].concat(s)),null==(c=(i=e.defaultProps)[t])||(a=c).call.apply(a,[i].concat(s))}var Ie=["onStart","onChange","onRest"],Ee=1,Ne=function(){function e(t,n){I()(this,e),this.id=Ee++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),t&&this.start(Object.assign({default:!0},t))}return m()(e,[{key:"idle",get:function(){return!this._state.asyncTo&&Object.values(this.springs).every((function(e){return e.idle}))}},{key:"item",get:function(){return this._item},set:function(e){this._item=e}},{key:"get",value:function(){var e={};return this.each((function(t,n){return e[n]=t.get()})),e}},{key:"set",value:function(e){for(var t in e){var n=e[t];E.s.und(n)||this.springs[t].set(n)}}},{key:"update",value:function(e){return e&&this.queue.push(xe(e)),this}},{key:"start",value:function(e){var t=this.queue;return e?t=Object(E.y)(e).map(xe):this.queue=[],this._flush?this._flush(this,t):(Ve(this,t),Be(this,t))}},{key:"stop",value:function(e,t){if(e!==!!e&&(t=e),t){var n=this.springs;Object(E.k)(Object(E.y)(t),(function(t){return n[t].stop(!!e)}))}else se(this._state,this._lastAsyncId),this.each((function(t){return t.stop(!!e)}));return this}},{key:"pause",value:function(e){if(E.s.und(e))this.start({pause:!0});else{var t=this.springs;Object(E.k)(Object(E.y)(e),(function(e){return t[e].pause()}))}return this}},{key:"resume",value:function(e){if(E.s.und(e))this.start({pause:!1});else{var t=this.springs;Object(E.k)(Object(E.y)(e),(function(e){return t[e].resume()}))}return this}},{key:"each",value:function(e){Object(E.l)(this.springs,e)}},{key:"_onFrame",value:function(){var e=this,t=this._events,n=t.onStart,a=t.onChange,o=t.onRest,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,Object(E.m)(n,(function(t){var n=u()(t,2),a=n[0],o=n[1];o.value=e.get(),a(o,e,e._item)})));var c=!r&&this._started,l=i||c&&o.size?this.get():null;i&&a.size&&Object(E.m)(a,(function(t){var n=u()(t,2),a=n[0],o=n[1];o.value=l,a(o,e,e._item)})),c&&(this._started=!1,Object(E.m)(o,(function(t){var n=u()(t,2),a=n[0],o=n[1];o.value=l,a(o,e,e._item)})))}},{key:"eventObserved",value:function(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}E.w.onFrame(this._onFrame)}}]),e}();function Be(e,t){return Promise.all(t.map((function(t){return ze(e,t)}))).then((function(t){return oe(e,t)}))}function ze(e,t,n){return Le.apply(this,arguments)}function Le(){return(Le=R()(S.a.mark((function e(t,n,a){var o,r,i,c,l,s,u,d,b,f,p,h,m;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.keys,r=n.to,i=n.from,c=n.loop,l=n.onRest,s=n.onResolve,u=E.s.obj(n.default)&&n.default,c&&(n.loop=!1),!1===r&&(n.to=null),!1===i&&(n.from=null),(d=E.s.arr(r)||E.s.fun(r)?r:void 0)?(n.to=void 0,n.onRest=void 0,u&&(u.onRest=void 0)):Object(E.k)(Ie,(function(e){var a=n[e];if(E.s.fun(a)){var o=t._events[e];n[e]=function(e){var t=e.finished,n=e.cancelled,r=o.get(a);r?(t||(r.finished=!1),n&&(r.cancelled=!0)):o.set(a,{value:null,finished:t||!1,cancelled:n||!1})},u&&(u[e]=n[e])}})),b=t._state,n.pause===!b.paused?(b.paused=n.pause,Object(E.n)(n.pause?b.pauseQueue:b.resumeQueue)):b.paused&&(n.pause=!0),f=(o||Object.keys(t.springs)).map((function(e){return t.springs[e].start(n)})),p=!0===n.cancel||!0===U(n,"cancel"),(d||p&&b.asyncId)&&f.push(ae(++t._lastAsyncId,{props:n,state:b,actions:{pause:E.v,resume:E.v,start:function(e,n){p?(se(b,t._lastAsyncId),n(ce(t))):(e.onRest=l,n(le(d,e,b,t)))}}})),!b.paused){e.next=15;break}return e.next=15,new Promise((function(e){b.resumeQueue.add(e)}));case 15:return e.t0=oe,e.t1=t,e.next=19,Promise.all(f);case 19:if(e.t2=e.sent,h=(0,e.t0)(e.t1,e.t2),!c||!h.finished||a&&h.noop){e.next=26;break}if(!(m=we(n,c,r))){e.next=26;break}return Ve(t,[m]),e.abrupt("return",ze(t,m,!0));case 26:return s&&E.w.batchedUpdates((function(){return s(h,t,t.item)})),e.abrupt("return",h);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t){var n=Object.assign({},e.springs);return t&&Object(E.k)(Object(E.y)(t),(function(e){E.s.und(e.keys)&&(e=xe(e)),E.s.obj(e.to)||(e=Object.assign(Object.assign({},e),{},{to:void 0})),_e(n,e,(function(e){return De(e)}))})),n}function Me(e,t){Object(E.l)(t,(function(t,n){e.springs[n]||(e.springs[n]=t,Object(E.c)(t,e))}))}function De(e,t){var n=new ye;return n.key=e,t&&Object(E.c)(n,t),n}function _e(e,t,n){t.keys&&Object(E.k)(t.keys,(function(a){(e[a]||(e[a]=n(a)))._prepareNode(t)}))}function Ve(e,t){Object(E.k)(t,(function(t){_e(e.springs,t,(function(t){return De(t,e)}))}))}var Ue,Fe,qe=function(e){var t=e.children,n=l()(e,z),a=Object(N.useContext)(He),o=n.pause||!!a.pause,r=n.immediate||!!a.immediate;n=Object(E.B)((function(){return{pause:o,immediate:r}}),[o,r]);var i=He.Provider;return Object(N.createElement)(i,{value:n},t)},He=(Ue=qe,Fe={},Object.assign(Ue,Object(N.createContext)(Fe)),Ue.Provider._context=Ue,Ue.Consumer._context=Ue,Ue);qe.Provider=He.Provider,qe.Consumer=He.Consumer;var Ge=function(e){g()(n,e);var t=L(n);function n(){var e;return I()(this,n),(e=t.call(this,"return arguments.callee._call.apply(arguments.callee, arguments)")).current=[],e}return m()(n,[{key:"_call",value:function(e){Object(E.i)(),this.start(e)}},{key:"set",value:function(e){Object(E.k)(this.current,(function(t){return t.set(e)}))}},{key:"start",value:function(e){var t=this,n=[];return Object(E.k)(this.current,(function(a,o){if(E.s.und(e))n.push(a.start());else{var r=t._getProps(e,a,o);r&&n.push(a.start(r))}})),n}},{key:"update",value:function(e){var t=this;return Object(E.k)(this.current,(function(n,a){return n.update(t._getProps(e,n,a))})),this}},{key:"add",value:function(e){this.current.includes(e)||this.current.push(e)}},{key:"delete",value:function(e){var t=this.current.indexOf(e);~t&&this.current.splice(t,1)}},{key:"_getProps",value:function(e,t,n){return E.s.fun(e)?e(n,t):e}}]),n}(x()(Function));function Ke(e,t,n){var a=arguments,o=E.s.fun(t)&&t;o&&!n&&(n=[]);var r=Object(N.useMemo)((function(){return o||3==a.length?new Ge:void 0}),[]),c=Object(N.useRef)(0),l=Object(E.z)(),s=Object(N.useMemo)((function(){return{ctrls:[],queue:[],flush:function(e,t){var n=Pe(e,t);return c.current>0&&!s.queue.length&&!Object.keys(n).some((function(t){return!e.springs[t]}))?Be(e,t):new Promise((function(a){Me(e,n),s.queue.push((function(){a(Be(e,t))})),l()}))}}}),[]),u=i()(s.ctrls),d=[],b=Object(E.D)(e)||0,f=u.slice(e,b);function p(e,n){for(var a=e;a<n;a++){var r=u[a]||(u[a]=new Ne(null,s.flush)),i=o?o(a,r):t[a];i&&(d[a]=ke(i))}}Object(N.useMemo)((function(){u.length=e,p(b,e)}),[e]),Object(N.useMemo)((function(){p(0,Math.min(b,e))}),n);var h=u.map((function(e,t){return Pe(e,d[t])})),m=Object(N.useContext)(qe),v=Object(E.D)(m),g=m!==v&&Z(m);Object(E.A)((function(){c.current++,s.ctrls=u;var e=s.queue;e.length&&(s.queue=[],Object(E.k)(e,(function(e){return e()}))),Object(E.k)(f,(function(e){Y(e,r),e.stop(!0)})),Object(E.k)(u,(function(e,t){Me(e,h[t]),null==r||r.add(e),g&&e.start({default:m});var n=d[t];n&&(J(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),Object(E.C)((function(){return function(){Object(E.k)(s.ctrls,(function(e){return e.stop(!0)}))}}));var O=h.map((function(e){return Object.assign({},e)}));return r?[O,r]:O}function We(e,t){var n=E.s.fun(e),a=Ke(1,n?e:[e],n?t||[]:t),o=u()(a,2),r=u()(o[0],1),i=r[0],c=o[1];return n||2==arguments.length?[i,c]:i}Object(E.k)(["stop","pause","resume"],(function(e){Ge.prototype[e]=function(){var t=arguments;return Object(E.k)(this.current,(function(n){return n[e].apply(n,i()(t))})),this}}));var Ze="enter";function Qe(e,t,n){var a=arguments,o=t.reset,r=t.sort,i=t.trail,c=void 0===i?0:i,l=t.expires,s=void 0===l||l,u=t.onDestroyed,d=Object(N.useMemo)((function(){return 3==a.length?new Ge:void 0}),[]),b=Object(E.y)(e),f=[],p=Object(N.useRef)(null),h=o?null:p.current;Object(E.A)((function(){p.current=f})),Object(E.C)((function(){return function(){return Object(E.k)(p.current,(function(e){e.expired&&clearTimeout(e.expirationId),Y(e.ctrl,d),e.ctrl.stop(!0)}))}}));var m=Je(b,t,h),v=o&&p.current||[];Object(E.A)((function(){return Object(E.k)(v,(function(e){var t=e.ctrl,n=e.item,a=e.key;Y(t,d),D(u,n,a)}))}));var g=[];if(h&&Object(E.k)(h,(function(e,t){e.expired?(clearTimeout(e.expirationId),v.push(e)):~(t=g[t]=m.indexOf(e.key))&&(f[t]=e)})),Object(E.k)(b,(function(e,t){f[t]||(f[t]={key:m[t],item:e,phase:"mount",ctrl:new Ne},f[t].ctrl.item=e)})),g.length){var O=-1;Object(E.k)(g,(function(e,n){var a=h[n];~e?(O=f.indexOf(a),f[O]=Object.assign(Object.assign({},a),{},{item:b[e]})):t.leave&&f.splice(++O,0,a)}))}E.s.fun(r)&&f.sort((function(e,t){return r(e.item,t.item)}));var j=-c,y=Object(E.z)(),C=q(t),w=new Map;Object(E.k)(f,(function(e,n){var a,o,r=e.key,i=e.phase;if("mount"==i)a=t.enter,o=Ze;else{var l=m.indexOf(r)<0;if("leave"!=i)if(l)a=t.leave,o="leave";else{if(!(a=t.update))return;o="update"}else{if(l)return;a=t.enter,o=Ze}}if(a=D(a,e.item,n),!(a=E.s.obj(a)?K(a):{to:a}).config){var u=t.config||C.config;a.config=D(u,e.item,n,o)}var d=Object.assign(Object.assign({},C),{},{delay:j+=c,reset:!1},a);if(o==Ze&&E.s.und(d.from)){var b=E.s.und(t.initial)||h?t.from:t.initial;d.from=D(b,e.item,n)}var f=d.onResolve;d.onResolve=function(e){D(f,e);var t=p.current,n=t.find((function(e){return e.key===r}));if(n&&(!e.cancelled||"update"==n.phase)&&n.ctrl.idle){var a=t.every((function(e){return e.ctrl.idle}));if("leave"==n.phase){var o=D(s,n.item);if(!1!==o){var i=!0===o?0:o;if(n.expired=!0,!a&&i>0)return void(i<=2147483647&&(n.expirationId=setTimeout(y,i)))}}a&&t.some((function(e){return e.expired}))&&y()}};var v=Pe(e.ctrl,d);w.set(e,{phase:o,springs:v,payload:d})}));var x=Object(N.useContext)(qe),k=Object(E.D)(x),S=x!==k&&Z(x);Object(E.A)((function(){S&&Object(E.k)(f,(function(e){e.ctrl.start({default:x})}))}),[x]),Object(E.A)((function(){Object(E.k)(w,(function(e,t){var n=e.phase,a=e.springs,o=e.payload,r=t.ctrl;t.phase=n,null==d||d.add(r),J(r,o.ref),Me(r,a),S&&n==Ze&&r.start({default:x}),r[r.ref?"update":"start"](o)}))}),o?void 0:n);var A=function(e){return Object(N.createElement)(N.Fragment,null,f.map((function(t,n){var a=(w.get(t)||t.ctrl).springs,o=e(Object.assign({},a),t.item,t,n);return o&&o.type?Object(N.createElement)(o.type,Object.assign(Object.assign({},o.props),{},{key:E.s.str(t.key)||E.s.num(t.key)?t.key:t.ctrl.id,ref:o.ref})):o})))};return d?[A,d]:A}var Ye=1;function Je(e,t,n){var a=t.key,o=t.keys,r=void 0===o?a:o;if(null===r){var i=new Set;return e.map((function(e){var t=n&&n.find((function(t){return t.item===e&&"leave"!==t.phase&&!i.has(t)}));return t?(i.add(t),t.key):Ye++}))}return E.s.und(r)?e:E.s.fun(r)?e.map(r):Object(E.y)(r)}var Xe=function(e){g()(n,e);var t=L(n);function n(e,a){var r;I()(this,n),(r=t.call(this)).source=e,r.idle=!0,r._active=new Set,r.calc=E.f.apply(void 0,i()(a));var c=r._get(),l=Object(B.f)(c);return Object(B.h)(o()(r),l.create(c)),r}return m()(n,[{key:"advance",value:function(e){var t=this._get(),n=this.get();Object(E.u)(t,n)||(Object(B.e)(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&et(this._active)&&tt(this)}},{key:"_get",value:function(){var e=E.s.arr(this.source)?this.source.map(E.q):Object(E.y)(Object(E.q)(this.source));return this.calc.apply(this,i()(e))}},{key:"_start",value:function(){var e=this;this.idle&&!et(this._active)&&(this.idle=!1,Object(E.k)(Object(B.g)(this),(function(e){e.done=!1})),E.b.skipAnimation?(E.w.batchedUpdates((function(){return e.advance()})),tt(this)):E.o.start(this))}},{key:"_attach",value:function(){var e=this,t=1;Object(E.k)(Object(E.y)(this.source),(function(n){Object(E.r)(n)&&Object(E.c)(n,e),be(n)&&(n.idle||e._active.add(n),t=Math.max(t,n.priority+1))})),this.priority=t,this._start()}},{key:"_detach",value:function(){var e=this;Object(E.k)(Object(E.y)(this.source),(function(t){Object(E.r)(t)&&Object(E.x)(t,e)})),this._active.clear(),tt(this)}},{key:"eventObserved",value:function(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=Object(E.y)(this.source).reduce((function(e,t){return Math.max(e,(be(t)?t.priority:0)+1)}),0))}}]),n}(pe);function $e(e){return!1!==e.idle}function et(e){return!e.size||Array.from(e).every($e)}function tt(e){e.idle||(e.idle=!0,Object(E.k)(Object(B.g)(e),(function(e){e.done=!0})),Object(E.d)(e,{type:"idle",parent:e}))}E.b.assign({createStringInterpolator:E.g,to:function(e,t){return new Xe(e,t)}});E.o.advance},1462:function(e,t,n){"use strict";var a=n(49),o=n(206),r=n(15),i=n(16),c=n(77),l=n(17),s=n(18),u=n(9),d=n(1),b=n(3),f=n.n(b),p=n(0),h=n.n(p),m=n(24),v=n(19),g=n(41),O=n(13),j=n.n(O),y=n(209),C=n.n(y),w=n(1393),x=n(2799),k=n(2811),S=n(55),A=n(291),R=n(279),T=n(158),I=n(139),E=n(45),N=n.n(E),B=n(415),z=n(1127),L=n(161),P=n(36),M=n(980),D=n(35),_=n(1181),V=n(1636),U=n(1638),F=n(1715),q=n(491),H=n(499);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var K=function(e,t){var n=t?e.replace(/<.+?>/g,""):e;return Array.from(n).length},W=function(e,t,n){var a=K(e,n);if(0===a)return{ok:!1,message:null};var o=a-t;return o>0?{ok:!1,message:"已超过 ".concat(o," 个字")}:o>=-10?{ok:!0,message:"还可以输入 ".concat(-o," 个字")}:{ok:!0,message:null}};(function(e){Object(l.a)(n,e);var t=G(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).check="title"===e.props.type?function(e){return W(e,100)}:function(e){return W(e,1e5,!0)},e.state=e.check(e.props.content),e.compareState=function(t){var n=t.ok,a=t.message;return e.state.message!==a||e.state.ok!==n},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.onStatusChange(this.state.ok)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.onStatusChange,a=t.content;if(e.content!==a){var o=this.check(e.content);this.compareState(o)&&(n(o.ok),this.setState(o))}}},{key:"shouldComponentUpdate",value:function(e,t){return this.compareState(t)}},{key:"render",value:function(){var e=this.state,t=e.ok,n=e.message,a=j()("WriteIndex-LengthStatus",{"WriteIndex-LengthStatus-warning":!t});return n&&Object(d.b)("div",{className:a,children:n})}}]),n}(p.Component)).propTypes={content:f.a.string,type:f.a.oneOf(["content","title"]).isRequired,onStatusChange:f.a.func.isRequired};var Z=n(523),Q=n(121),Y=n(79),J=n(482),X=n(29),$=n(46),ee=n(56),te=n(431),ne=n(448),ae=n(1124),oe=n(204),re=n(87);function ie(e){var t=e.shown,n=e.onClose,a=Object(oe.b)().isAppleDevice;return Object(d.b)(re.b,{title:"帮助文档",closeButton:null,maskClosable:!1,hotKeyClosable:!1,css:{width:"auto"},children:t&&Object(d.c)(d.a,{children:[Object(d.c)("div",{className:"HelpDocument-wrapper",children:[Object(d.c)("div",{className:"HelpDocument-horizontal-section",children:[Object(d.c)("p",{className:"HelpDocument-section",children:["粗体：",a?"⌘+B":"Ctrl+B"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["斜体：",a?"⌘+I":"Ctrl+I"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["一级标题：",a?"⌘+⌥+1":"Ctrl+Alt+1"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["二级标题：",a?"⌘+⌥+2":"Ctrl+Alt+2"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["有序列表：",a?"⌘+⇧+L":"Ctrl+Shift+L"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["无序列表：",a?"⌘+L":"Ctrl+L"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["引用块：",a?"⌘+⇧+U":"Ctrl+Shift+U"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["代码块：",a?"⌘+⌥+C":"Ctrl+Alt+C"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["撤销：",a?"⌘+Z":"Ctrl+Z"]})]}),Object(d.c)("div",{className:"HelpDocument-horizontal-section",children:[Object(d.c)("p",{className:"HelpDocument-section",children:["添加目录：",a?"⌘+⌥+J":"Ctrl+Alt+J"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["插入注释：",a?"⌘+⌥+R":"Ctrl+Alt+R"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["插入分割线：",a?"⌘+⌥+S":"Ctrl+Alt+S"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["清除格式：",a?"⌘+\\":"Ctrl+\\"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["插入链接：",a?"⌘+K":"Ctrl+K"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["插入表格：",a?"⌘+⌥+T":"Ctrl+Alt+T"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["插入公式：",a?"⌘+⌥+E":"Ctrl+Alt+E"]}),Object(d.c)("p",{className:"HelpDocument-section",children:["重做：",a?"⌘+Y":"Ctrl+Y"]})]})]}),Object(d.b)(S.Box,{css:{textAlign:"center"},children:Object(d.b)(P.c,{preset:"primary",color:"blue",onClick:n,css:{width:"359px",margin:"25px auto 0"},children:"我知道了"})}),Object(d.b)(S.Box,{css:function(e){return{marginTop:"20px",textAlign:"center",fontSize:"12px",fontWeight:300,color:e.colors.GBL05A}},children:Object(d.b)("p",{children:"以上说明可能与您的系统快捷键冲突，以实际使用为准。"})})]})})}ie.propTypes={shown:f.a.bool.isRequired,onClose:f.a.func},ie.defaultProps={onClose:function(){}};var ce=n(33),le=n(64),se=n.n(le),ue=(n(2812),n(2794)),de=n(1338),be=n(1571),fe=n(74),pe=n(43),he=n(83),me=n(249),ve=n(210),ge=n(939),Oe=["isBottom"],je=function(e){var t=e.isBottom,n=Object(ce.default)(e,Oe);return Object(d.b)(fe.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:!0,css:function(e){return{cursor:"pointer",display:"flex",alignItems:"center",color:e.colors.GBL05A}}},n),{},{children:t?Object(d.c)(d.a,{children:[Object(d.b)(S.Text,{mr:"4px",fontSize:"14px",children:"回到顶部"}),Object(d.b)(de.a,{text:!0,fontSize:"16px"})]}):Object(d.c)(d.a,{children:[Object(d.b)(S.Text,{mr:"4px",fontSize:"14px",children:"发布设置"}),Object(d.b)(be.a,{text:!0,fontSize:"16px"})]})}))},ye=function(e){return Object(d.b)(S.Flex,Object.assign({height:"52px",css:function(e){return{justifyContent:"center",borderTop:"1px solid ".concat(e.colors.GBK09A),background:e.colors.GBK99C,WebkitFontSmoothing:"subpixel-antialiased"}}},e))},Ce=function(e){var t=e.children,n=e.hideScrollButton,o=Object(pe.a)(!1),r=Object(a.a)(o,2),i=r[0],c=r[1];return Object(p.useEffect)((function(){var e=function(){var e=document.documentElement;e.scrollTop+e.clientHeight>=e.scrollHeight-5?c.on():c.off()};return document.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[c]),Object(d.c)(d.a,{children:[Object(d.b)(S.Box,{height:"52px",css:{visibility:"hidden"}}),Object(d.b)(ye,{css:{position:"fixed",left:0,right:0,bottom:0},children:Object(d.c)(S.Flex,{height:"52px",alignItems:"center",mx:"auto",css:{width:"654px"},children:[!n&&Object(d.b)(je,{onClick:function(){Object(me.scrollTo)(window,{top:i?0:document.body.scrollHeight,behavior:"smooth"})},isBottom:i}),t]})})]})},we=function(e){var t=e.children,n=e.hideScrollButton,a=e.getContaner;return Object(d.b)(R.a,{bottom:!0,getStyle:function(){return{width:"1000px",bottom:0,maxWidth:"100vw"}},container:a,children:function(e){var o=!e.isFixed;return Object(d.b)(ye,{children:Object(d.c)(S.Flex,{width:"100%",height:"52px",alignItems:"center",mx:"auto",px:"20px",children:[!n&&Object(d.b)(je,{onClick:function(){if(o)Object(me.scrollTo)(window,{top:0,behavior:"smooth"});else{var e=null==a?void 0:a();if(e){var t=e.getBoundingClientRect().bottom+52;Object(me.scrollBy)(window,{top:t-document.documentElement.clientHeight,behavior:"smooth"})}}},isBottom:o}),t]})})}})};var xe=n(38),ke=n(954),Se=n(1183),Ae=n(1640),Re=n(1416),Te=["checked","onChange","text","id","disabled","shouldTrackClick","zaTextPrefix","zaText"],Ie=function(e){var t=e.required,n=e.name,a=e.title,o=e.helper,r=e.props,i=Object(he.f)();return Object(d.c)(S.Flex,Object.assign(Object.assign({as:"label",color:"GBK03A",mr:"3px",css:[{lineHeight:"38px",fontSize:"15px",fontWeight:"400",width:"110px"},!t&&{paddingLeft:"10px"}]},r),{},{children:[t&&Object(d.b)(S.Text,{"aria-label":"必填",color:"GRD03A",mt:"2px",mr:"4px",children:"*"}),n,o&&Object(d.b)(fe.a,{as:"button",zaType:"Button",zaText:"提示信息-".concat(n),css:function(e){return{color:e.colors.GBL05A}},onClick:function(){T.a.alert(Object(d.c)("div",{css:{paddingTop:"16px",h2:{paddingBottom:"20px",fontWeight:"bold",fontSize:"24px",textAlign:"center"},p:{textAlign:"left",fontSize:"15px",textIndent:"30px"},a:{textDecoration:"underline",color:i.colors.primary}},children:[Object(d.b)("h2",{children:a||n}),o]}),{text:{ok:"我知道了"}}).then(se.a,se.a)},children:Object(d.b)(ue.a,{css:{marginLeft:"4px"},center:!0,size:18})})]}))};function Ee(e){var t=e.checked,n=e.onChange,a=e.text,o=e.id,r=e.disabled,i=e.shouldTrackClick,c=e.zaTextPrefix,l=e.zaText,s=Object(ce.default)(e,Te),u=Object(fe.i)().trackEvent;return Object(d.c)(S.Flex,Object.assign(Object.assign({flex:1,alignItems:"center",as:"label",htmlFor:o,css:{flex:"0 0 auto",marginRight:"20px",cursor:"pointer"}},s),{},{children:[Object(d.b)(ge.a,{id:o,size:20,checked:t,onChange:Object(pe.d)((function(){i&&u({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:l||(c?"".concat(c,"-").concat(a):a)}}),n.apply(void 0,arguments)})),disabled:r}),Object(d.b)(S.Text,{ml:"4px",fontSize:"14px",color:"GBL05A",children:a})]}))}var Ne=function(e){return Object(d.b)(ve.b,Object.assign({css:{".Select-button":{width:"180px",height:"38px"},".Select-arrow":{marginLeft:"auto"}}},e))},Be=function(e){return Object(d.b)(ve.a,Object.assign({css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}}},e))},ze=[{type:!1,description:"非商业推广"},{type:!0,description:"商业推广"}],Le=function(e){var t=e.isReport,n=e.commercialPermissionInfo,o=e.setCommercialPermissionInfo,r=e.setIsReport,i=e.validate,c=Object(fe.i)().trackEvent,l=Object(pe.a)(!1),s=Object(a.a)(l,2),u=s[0],b=s[1];return Object(d.c)(d.a,{children:[Object(d.b)(Ne,{onChange:function(e){if(!i||i()){var t=ze.find((function(t){return t.type===e}));c({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"商业推广-".concat(null==t?void 0:t.description)}}),!0!==e||null!=n&&n.isCommercialVip?r(e):b.on()}},value:Boolean(t),children:ze.map((function(e){return Object(d.b)(Be,{css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}},value:e.type,text:e.description},e.type)}))}),Object(d.b)(Ae.a,{shown:u,toggle:b.toggle,onSuccess:function(){r(!0),o((function(e){return Object.assign(Object.assign({},e),{},{isCommercialVip:!0})}))},onFail:function(){r(!1)}})]})},Pe=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"商业推广",title:"商业内容推广",helper:Object(d.c)(d.a,{children:[Object(d.b)("p",{children:"商业内容是指，未经平台允许，用户以推广曝光为目的，发布含有产品售卖信息、牟利性外链等内容，或引导用户至第三方平台进行交易。"}),Object(d.b)("p",{children:"知乎提供了报备功能，创作者可以选择主动对包含商业推广的内容进行报备。对于包含商业推广但是未报备的内容，将按社区规范进行处理"}),Object(d.c)("p",{style:{marginTop:"10px"},children:["关于报备功能更多的信息，",Object(d.b)("a",{href:"https://www.zhihu.com/creator/explore/academy/rights/rights",target:"_blank",rel:"noreferrer noopener",children:"点击前往了解"})]})]})}),Object(d.b)(S.Box,{flex:"1",children:Object(d.b)(Le,Object.assign({},e))})]})},Me=function(e){var t=e.question,n=e.isAnonymous,o=e.updateDraftSettings,r=Object(m.useDispatch)(),i=Object(p.useState)(null),c=Object(a.a)(i,2),l=c[0],s=c[1],u=Object(p.useContext)(ke.a),b=u.updateFormData,f=(0,u.getFormData)().isReport,h=Object(pe.d)((function(e){b({isReport:e}),requestAnimationFrame(o)})),v=Object(pe.d)((function(){return!n||(r(Object(X.h)("已经启用匿名的内容不能进行商业推广声明","red")),!1)}));return Object(pe.i)((function(){r(Object(Re.b)(t.id)).then((function(e){var t=e.payload;s(t.commercialPermissionInfo)}))})),null!=l&&l.isShowTab?Object(d.b)(Pe,{isReport:Boolean(f),commercialPermissionInfo:l,setIsReport:h,setCommercialPermissionInfo:s,validate:v}):null},De=n(1734),_e=function(e){var t=e.question,n=e.isAnonymous,o=e.disabled,r=Object(pe.a)(!1),i=Object(a.a)(r,2),c=i[0],l=i[1];return Object(d.c)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(S.Flex,{height:"38px",children:[Object(d.b)(Ee,{checked:!n,text:"不启用匿名",onChange:l.on,id:"PublishPanel-Anonymous-0",disabled:o,shouldTrackClick:!0,zaTextPrefix:"匿名设置"}),Object(d.b)(Ee,{checked:n,text:"启用匿名",onChange:l.on,id:"PublishPanel-Anonymous-1",disabled:o,shouldTrackClick:!0,zaTextPrefix:"匿名设置"})]}),Object(d.b)(De.a,{question:t,shown:c,onClose:l.off})]})},Ve=function(e){var t=(0,Object(p.useContext)(ke.a).getFormData)().isReport;return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"匿名设置"}),Object(d.b)(_e,Object.assign({disabled:Boolean(t)},e))]})},Ue={type:"none",description:"无声明"},Fe=function(e){var t=e.reshipmentDisclaimers,n=e.setReshipmentDisclaimers,a=e.disclaimers,o=Object(fe.i)().trackEvent;return t=t||Ue,(a=JSON.parse(JSON.stringify(a||[]))).push(Ue),Object(d.b)(Ne,{onChange:function(e){var t=a.find((function(t){return t.type===e}));o({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"创作声明-".concat(t.description)}}),t&&n(t)},value:t.type,children:a.map((function(e){return Object(d.b)(Be,{value:e.type,text:e.description},e.type)}))})},qe=Object(p.forwardRef)((function(e,t){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"创作声明",helper:Object(d.c)(d.a,{children:[Object(d.b)("p",{children:"「创作声明」是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。"}),Object(d.b)("p",{children:"创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"})]})}),Object(d.b)(S.Box,{flex:"1",children:Object(d.b)(Fe,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),He=function(e){var t=e.question,n=e.updateDraftSettings,a=Object(p.useContext)(ke.a),o=a.getFormData,r=a.updateFormData,i=Object(m.useDispatch)(),c=Object(m.useSelector)((function(e){return e.question.disclaimers[t.id]})),l=o().disclaimerType,s=(null==c?void 0:c.find((function(e){return e.type===l})))||Ue,u=(null==c?void 0:c.length)>0;Object(pe.i)((function(){c||i(Object(Q.P)(t.id))}));var b=Object(pe.d)((function(e){r({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type}),requestAnimationFrame(n)}));return u?Object(d.b)(qe,{reshipmentDisclaimers:s,setReshipmentDisclaimers:b,disclaimers:c}):null},Ge=n(647),Ke=n(1096),We=function(e){var t=e.scheduledPublishAt,n=e.initialScheduledPublishAt,a=e.setUseScheduledPublish,o=Boolean(t),r=function(e){a(e)};return Object(d.c)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(S.Flex,{height:"38px",children:[Object(d.b)(Ee,{checked:!o,text:"不使用定时发布",onChange:function(){return r(!1)},id:"PublishPanel-scheduleLabel-0",shouldTrackClick:!0,zaTextPrefix:"定时发布"}),Object(d.b)(Ee,{checked:o,text:"使用定时发布",onChange:function(){r(!0),requestAnimationFrame((function(){Object(me.scrollBy)(window,{top:50,behavior:"smooth"})}))},id:"PublishPanel-scheduleLabel-1",shouldTrackClick:!0,zaTextPrefix:"定时发布"})]}),o&&n&&Object(d.b)(Ke.a,{value:t,min:n,max:Ge.a(n,7),onChange:function(e){a(!0,e)},css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",marginTop:"5px",".InputButton":{height:"38px"}}}})]})},Ze=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"定时发布"}),Object(d.b)(We,Object.assign({},e))]})},Qe=function(e){var t=e.disabled,n=e.updateDraftSettings,a=Object(p.useContext)(ke.a),o=a.updateFormData,r=(0,a.getFormData)().pushActivity,i=function(e){o({pushActivity:e}),requestAnimationFrame(n)};return Object(d.b)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:Object(d.c)(S.Flex,{height:"38px",children:[Object(d.b)(Ee,{checked:r,text:"开启推送",onChange:function(){i(!0)},id:"PublishPanel-PushToFollowers-0",disabled:t,shouldTrackClick:!0,zaTextPrefix:"推送给关注者"}),Object(d.b)(Ee,{checked:!r,text:"关闭推送",onChange:function(){T.a.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",text:{ok:"关闭推送"}}).then((function(){i(!1)})).catch((function(){}))},id:"PublishPanel-PushToFollowers-1",disabled:t,shouldTrackClick:!0,zaTextPrefix:"推送给关注者"})]})})},Ye=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"推送给关注者"}),Object(d.b)(Qe,Object.assign({},e))]})},Je=n(1748),Xe=n(460),$e=n(290),et=function(e){var t=e.question.id,n=e.isAnonymous,o=e.disabled,r=e.updateDraftSettings,i=Object(pe.a)(!1),c=Object(a.a)(i,2),l=c[0],s=c[1],u=Object(p.useContext)(ke.a),b=u.getFormData,f=u.updateFormData,h=Object(m.useDispatch)(),v=b().rewardTagline,g=Boolean(v),O=Object(pe.d)((function(e){f({rewardTagline:e}),requestAnimationFrame(r),h(Object(Xe.n)(t,!0)),s.off()}));return Object(d.c)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(S.Flex,{height:"38px",children:[Object(d.b)(Ee,{checked:g,text:"开启赞赏",onChange:function(){n?h(Object(X.h)("匿名回答无法开启赞赏，请先取消匿名","red")):s.on()},id:"PublishPanel-RewardSetting-0",disabled:o,shouldTrackClick:!0,zaTextPrefix:"赞赏设置"}),Object(d.b)(Ee,{checked:!g,text:"关闭赞赏",onChange:function(){f({rewardTagline:""}),requestAnimationFrame(r),h(Object(Xe.n)(t,!1))},id:"PublishPanel-RewardSetting-1",disabled:o,shouldTrackClick:!0,zaTextPrefix:"赞赏设置"})]}),l&&Object(d.b)(Je.a,{submitRewardText:O,onClose:s.off,tagline:v,edit:!1})]})},tt=function(e){var t=Object(m.useDispatch)(),n=Object(m.useSelector)((function(e){return e.switches})).isAnswerRewardable;return Object(p.useEffect)((function(){void 0===n&&t(Object($e.b)(["isAnswerRewardable"]))}),[t,n]),n?Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"赞赏设置"}),Object(d.b)(et,Object.assign({},e))]}):null},nt={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},at=function(e){var t=e.currentUser,n=e.updateDraftSettings,a=Object(fe.i)().trackEvent,o=Object(p.useContext)(ke.a),r=o.updateFormData,i=(0,o.getFormData)().reshipmentSettings;return Object(d.b)(Ne,{onChange:function(e){a({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"转载设置-".concat(nt[e])}}),"need_payment"!==e||t.caEnabled||window.open("/copyright/invite"),r({reshipmentSettings:e}),requestAnimationFrame(n)},value:i,children:Object.keys(nt).map((function(e){return"need_payment"===e&&t.isOrg?null:Object(d.b)(Be,{value:e,text:nt[e]},e)}))})},ot=Object(p.forwardRef)((function(e,t){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"转载设置"}),Object(d.b)(S.Box,{flex:"1",children:Object(d.b)(at,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),rt={all:"允许任何人评论",censor:"评论由我筛选后显示",nobody:"关闭评论"},it={all:"允许任何人评论",followee:"允许我关注的人评论",censor:"评论由我筛选后显示",nobody:"关闭评论"},ct=function(e){var t=e.updateDraftSettings,n=Object(fe.i)().trackEvent,a=Object(m.useSelector)($.h),o=Object(p.useContext)(ke.a),r=o.updateFormData,i=(0,o.getFormData)().commentPermission,c=a?rt:it;return Object(d.b)(Ne,{onChange:function(e){n({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"评论权限-".concat(c[e])}}),e!==i&&(r({commentPermission:e}),requestAnimationFrame(t))},value:i,children:Object.keys(c).map((function(e){return Object(d.b)(Be,{value:e,text:c[e]},e)}))})},lt=Object(p.forwardRef)((function(e,t){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"评论权限"}),Object(d.b)(S.Box,{flex:"1",children:Object(d.b)(ct,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),st=n(1154),ut=n(421),dt=n(1713),bt=function(e){var t=e.children;return"string"!=typeof t||t.trim().length?Object(d.b)(S.Text,{maxWidth:"292px",mr:"20px",css:[Object(he.d)(1)],children:t}):null},ft=function(e){var t=e.questionId,n=e.currentUser,a=Object(m.useSelector)((function(e){return e.question.bio})),o=Object(m.useSelector)((function(e){return e.topic.bios})),r=(a[t]||{result:{type:"headline"}}).result;return"topic"===r.type&&(r.bio=o[r.topic.id]||r.bio),r.bio&&"headline"!==r.type?Object(d.b)(bt,{children:r.bio}):n.headline?Object(d.b)(bt,{children:Object(d.b)(ut.a,{inline:!0,html:(r||{}).bio||n.headline})}):null},pt=function(e){var t=e.question,n=e.currentUser,o=Object(pe.a)(!1),r=Object(a.a)(o,2),i=r[0],c=r[1];return Object(d.c)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(S.Flex,{alignItems:"center",height:"100%",css:{cursor:"pointer"},onClick:c.on,children:[Object(d.b)(ft,{questionId:t.id,currentUser:n}),Object(d.c)(fe.a,{as:S.Flex,zaType:"Button",zaText:"一句话介绍-修改",color:"GBL01A",alignItems:"center",children:["修改",Object(d.b)(st.a,{css:{marginLeft:"2px"},size:16})]})]}),Object(d.b)(dt.a,{shown:i,question:t,onClose:c.off})]})},ht=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"一句话介绍"}),Object(d.b)(pt,Object.assign({},e))]})},mt=n(2800),vt=n(414),gt=n(1500),Ot=n(428),jt=function(e){var t,n,o=e.answer,r=Object(m.useDispatch)(),i=Object(te.q)(),c=null==o||null===(t=o.attachment)||void 0===t||null===(n=t.video)||void 0===n?void 0:n.campaign,l=Boolean(!(null!=c&&c.title)),s=Object(pe.a)(!1),u=Object(a.a)(s,2),b=u[0],f=u[1],h=Object(p.useState)([]),v=Object(a.a)(h,2),g=v[0],O=v[1];Object(pe.i)((function(){r(Object(Ot.l)()).then((function(e){var t=e.payload;O((null==t?void 0:t.data)||[])}))}));var j=Object(pe.d)((function(e){f.off(),r(Object(te.m)(e))})),y=Object(pe.d)((function(){r(Object(te.m)(null))})),C=l?"GBL01A":"GBL05A";return Object(d.c)(S.Flex,{color:"GBL05A",flex:"1",alignItems:"center",css:{fontSize:"14px"},children:[null!=i&&i.title?Object(d.c)(S.Flex,{alignItems:"center",px:"14px",height:"30px",color:C,css:function(e){return{borderRadius:"20px",background:e.colorMod(e.colors[C]).alpha(.1),cursor:"pointer"}},onClick:function(){l&&f.on()},children:[Object(d.b)(mt.a,{mr:4,size:20}),i.title,l&&Object(d.b)(vt.a,{text:!0,center:!0,size:6,css:{marginLeft:4},onClick:function(e){y(),e.stopPropagation()}})]}):Object(d.c)(fe.a,{as:S.Flex,zaType:"Button",zaText:"绑定活动-选择活动",height:"100%",alignItems:"center",color:"GBL01A",css:{cursor:l?"pointer":"not-allowed"},onClick:function(){l&&f.on()},children:[Object(d.b)(mt.a,{mr:4,size:20}),"选择活动"]}),Boolean(null==g?void 0:g.length)&&Object(d.b)(gt.a,{shown:b,onClose:f.off,defaultCampaignId:null==i?void 0:i.id,campaignList:g,onSubmit:j})]})},yt=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(Ie,{name:"绑定活动"}),Object(d.b)(jt,Object.assign({},e))]})},Ct=Object(g.withRouter)((function(e){var t,n=e.question,o=e.answer,r=e.isVideoAnswer,i=e.isReediting,c=e.draft,l=e.settings,s=e.location,u=e.scheduledPublishAt,b=e.initialScheduledPublishAt,f=e.canScheduledPublish,h=e.setUseScheduledPublish,v=e.className,g=e.updateDraftSettings,O=Object(m.useDispatch)(),j=Object(p.useContext)(ke.a).updateFormData,y=((null==s?void 0:s.query)||{}).push_activity,C=Object(m.useSelector)($.b),w=Object(p.useState)(!1),x=Object(a.a)(w,2),k=x[0],A=x[1];Object(pe.i)((function(){Promise.all([O(Object(xe.X)()),O(Object(xe.Y)(n.id)),o&&(l?Promise.resolve({payload:l}):O(Object(Y.y)(o.id)))].filter(Boolean)).then((function(e){var t,n,r=Object(a.a)(e,3),i=r[0],c=r[1],l=r[2];j(Object.assign(Object.assign(Object.assign(Object.assign({},Object(Se.c)(null===(t=i.payload)||void 0===t?void 0:t.settings)),o&&l&&Object.assign(Object.assign(Object.assign({},Object(Se.d)(l.payload)),function(e){var t;return{rewardTagline:(null==e||null===(t=e.rewardInfo)||void 0===t?void 0:t.tagline)||""}}(o)),function(e){var t,n,a,o,r="open"===(null==e||null===(t=e.disclaimerInfo)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.status);return{isDisclaimerChecked:r,disclaimerType:r?null==e||null===(a=e.disclaimerInfo)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.type:"none"}}(l.payload))),Object(Se.e)(null===(n=c.payload)||void 0===n?void 0:n.settings)),y&&{pushActivity:Boolean(Number(y))}))})).finally((function(){A(!0)}))}));var R=null==n||null===(t=n.relationship)||void 0===t?void 0:t.isAnonymous,T="show"===Object(ee.useAbParam)("gue_anonymous"),I=(n||{}).questionType,E=C&&!C.isOrg,N=E&&("normal"===I||"commercial"===I&&T||R)&&!r;return r&&i?null:k?Object(d.c)(S.Box,{pl:"10px",pr:"20px",width:"100%",bg:"GBK99A",css:{position:"relative"},className:v,children:[Object(d.b)(S.Box,{sx:{borderTop:"1px solid",borderColor:"GBK09A"},ml:"10px"}),Object(d.b)(S.Text,{color:"GBK03A",ml:"10px",pt:"24px",pb:"12px",css:{lineHeight:"24px",fontSize:"17px",fontWeight:"500"},children:"发布设置"}),N&&!i&&Object(d.b)(Ve,{question:n,isAnonymous:R}),!r&&Object(d.b)(He,{question:n,updateDraftSettings:g}),Object(d.b)(Me,{draft:c,question:n,isAnonymous:R,updateDraftSettings:g}),f&&Object(d.b)(Ze,{scheduledPublishAt:u,initialScheduledPublishAt:b,setUseScheduledPublish:h}),r&&Object(d.b)(yt,{answer:o}),!i&&E&&Object(d.b)(ht,{question:n,currentUser:C}),!i&&Object(d.b)(ot,{currentUser:C,updateDraftSettings:g}),!i&&Object(d.b)(lt,{updateDraftSettings:g}),!i&&!r&&Object(d.b)(Ye,{updateDraftSettings:g}),Object(d.b)(tt,{question:n,isAnonymous:R,updateDraftSettings:g})]}):null})),wt=n(1641),xt=n(946),kt=n(1743),St=n(1716),At=n(1744),Rt=n(1727),Tt=n(1730),It=n(1705),Et=n(1182),Nt=n(1642),Bt=Object(p.forwardRef)((function(e,t){var n=e.children,a=e.className;return Object(d.b)("div",{ref:t,css:{width:"100%",display:"flex",justifyContent:"center"},children:Object(d.b)("div",{className:j()("toolbarV3",a),css:{display:"flex",overflowX:"auto",padding:"10px 0 10px 20px",boxShadow:"0px -0.5px 0px 0px rgba(235, 235, 235, 1) inset"},onMouseDown:function(e){return e.preventDefault()},children:n})})})),zt=n(420),Lt=Object.assign;var Pt=function(e){return h.a.createElement(zt.a,Lt(Lt({width:"12",height:"12",viewBox:"0 0 12 12"},e),{className:"ZDI ZDI--ArrowDropdown12"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M5.76 7.68a.3.3 0 00.48 0l2.4-3.2A.3.3 0 008.4 4H3.6a.3.3 0 00-.24.48l2.4 3.2z",fillRule:"evenodd",clipRule:"evenodd"}))},Mt=function(e){return{background:e.colors.GBK10A,borderRadius:"4px"}},Dt=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},_t=Object(p.forwardRef)((function(e,t){var n=e.showTogglerIcon,a=e.isMenuOpen,o=e.icon,r=e.isActive,i=e.disabled,c=e.onClick,l=e.className,s=e.text,u=e.label,b=e.sectionIndex,f=e.buttonIndex,h=e.onButtonRectInfoGet,m=Object(p.useRef)(null);Object(p.useEffect)((function(){var e,t=(null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect()).right;t&&(null==h||h({label:u,sectionIndex:b,buttonIndex:f,right:t}))}),[b,f]);var v=n&&Object(d.b)("div",{className:"togglerIcon",css:{transform:"".concat(a?"rotate(180deg)":"rotate(0deg)"),fontSize:0,marginBottom:"2px"},children:Object(d.b)(Pt,{})});return Object(d.c)(fe.a,{as:P.c,zaType:"Button",zaText:u,ref:Object(pe.h)(t,m),preset:P.b.Plain,className:j()("ToolbarButton",l),disabled:i,css:function(e){return{"&.Button.Button--plain":Object.assign(Object.assign({marginRight:"20px",padding:"2px 4px",paddingRight:n?"1px":"4px",fontSize:"11px",color:e.colors.GBK03A,textAlign:"center",alignItems:"flex-end",display:"flex",whiteSpace:"nowrap"},r&&Dt(e)),{},{"&:hover":Mt(e)})}},"aria-label":u,onClick:c,children:[Object(d.c)("div",{css:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(d.b)(o,{center:!0}),Object(d.b)("span",{css:{width:"100%"},children:null!=s?s:u})]}),v]})}));_t.propTypes={icon:f.a.elementType.isRequired,label:f.a.string.isRequired,isActive:f.a.bool,disabled:f.a.bool,showTogglerIcon:f.a.bool,isMenuOpen:f.a.bool,className:f.a.string,text:f.a.string,shortcut:f.a.string,onClick:f.a.func,sectionIndex:f.a.number,buttonIndex:f.a.number,onButtonRectInfoGet:f.a.func},_t.defaultProps={isActive:!1,disabled:!1,isMenuOpen:!1,showTogglerIcon:!1,onClick:function(){}};var Vt=_t,Ut=n(122),Ft=n(63),qt=function(e){return{background:e.colors.GBK10A,".togglerIcon":{borderLeftColor:e.colors.GBL01A}}},Ht=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},Gt=Object(p.forwardRef)((function(e,t){var n=e.isActive,a=e.disabled,o=e.onClick,r=e.icon,i=e.text,c=e.label,l=e.onMouseEnter,s=e.onMouseLeave;return Object(d.c)(fe.a,{as:P.c,zaType:"Button",zaText:c,preset:P.b.Plain,"aria-label":c,disabled:a,css:function(e){return{"&.Button.Button--plain":Object.assign({padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px","&:hover":qt(e),"&:active":Ht(e)},n&&Ht(e))}},onClick:o,onMouseEnter:l,onMouseLeave:s,ref:t,children:[Object(d.b)(r,{center:!0,css:{marginRight:"4px"}}),null!=i?i:c]})}));Gt.propTypes={icon:f.a.elementType.isRequired,label:f.a.string.isRequired,isActive:f.a.bool,disabled:f.a.bool,className:f.a.string,text:f.a.string,shortcut:f.a.string,onClick:f.a.func,onMouseEnter:f.a.func,onMouseLeave:f.a.func},Gt.defaultTypes={isActive:!1,disabled:!1,onClick:function(){},onMouseEnter:function(){},onMouseLeave:function(){}};var Kt=Gt;function Wt(e,t,n){return!!n&&(null!=e&&e.children?e.children.find((function(e){return Wt(e,t,n)})):e.commandName?t(e.commandName,n)&&e:void 0)}function Zt(e,t,n){return!!n&&(null!=e&&e.children?e.children.some((function(e){return Zt(e,t,n)})):t(e.commandName,n))}function Qt(e){var t=e.items,n=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,r=e.editorState;return t.map((function(e){var t;if(!0===e.hide)return null;var i,c,l=Wt(e,a,r),s=!Zt(e,o,r);return null!=e&&null!==(t=e.children)&&void 0!==t&&t.length?Object(d.b)(Ut.c,{toggleEvent:"hover",placement:Ft.RIGHT,enterDelay:300,leaveDelay:300,toggler:Object(d.b)(Kt,{icon:null!==(i=null==l?void 0:l.icon)&&void 0!==i?i:e.icon,onClick:function(t){var a;null===(a=e.onClick)||void 0===a||a.call(e,t),e.commandName&&n(e.commandName)},label:e.label,isActive:!!l,disabled:s}),className:"ToolbarV3SubmenuButton",children:Object(d.b)(Qt,{items:e.children,onCommand:n,queryCommandState:a,queryCommandEnable:o,editorState:r})},e.label):Object(d.b)(Kt,{icon:null!==(c=null==l?void 0:l.icon)&&void 0!==c?c:e.icon,onClick:function(t){var a;null===(a=e.onClick)||void 0===a||a.call(e,t),e.commandName&&n(e.commandName)},label:e.label,isActive:!!l,disabled:s},e.label)}))}function Yt(e){var t=e.subMenu,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState,c=e.isActive,l=e.label,s=e.shortcut,u=e.disabled,b=e.onClick,f=e.icon,h=e.sectionIndex,m=e.buttonIndex,v=e.onButtonRectInfoGet,g=Object(p.useState)(!1),O=Object(a.a)(g,2),j=O[0],y=O[1],C=Object(d.b)(Vt,{isMenuToggler:!0,isMenuOpen:j,showTogglerIcon:!0,icon:f,isActive:c,disabled:u,shortcut:s,onClick:b,label:l,sectionIndex:h,buttonIndex:m,onButtonRectInfoGet:v});return Object(d.b)(Ut.c,{toggler:C,onOpen:function(){return y(!0)},onClose:function(){return y(!1)},arrowed:!1,menuContainerClassName:"ToolbarV3Menu-container",children:Object(d.b)(Qt,{items:t,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:i})})}function Jt(){return Object(d.b)("span",{className:"ToolbarDivider",css:function(e){return{height:"20px",borderRight:"1px solid",borderColor:e.colors.GBK09A,marginLeft:"-4px"}}})}function Xt(e){var t=e.items,n=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,r=e.editorState,i=e.showDivider,c=e.showRightSpace,l=e.replaceIconByOnlyChild,s=void 0===l||l,u=e.shouldHide,b=e.sectionIndex,f=e.onButtonRectInfoGet;return null!=u&&u(t)?null:Object(d.c)("div",{className:"toolbar-section",css:Object.assign({display:"flex",alignItems:"center"},c&&{marginRight:"16px"}),children:[t.filter((function(e){return!!e})).map((function(e,t){var i=e.Component,c=e.label,l=e.text,u=e.children,p=e.shortcut,h=e.commandName,m=e.onClick;if(!0===e.hide)return null;var v,g=Wt(e,a,r),O=!Zt(e,o,r),j=e.icon,y={label:c,icon:j,disabled:O,shortcut:p,isActive:!!g,text:l,sectionIndex:b,buttonIndex:t,onButtonRectInfoGet:f,onClick:function(e){null==m||m(e),h&&n(h)}};if((null==u?void 0:u.length)>1||!s&&(null==u?void 0:u.length)>0)j=(null==g?void 0:g.icon)||j,v=Yt,y=Object.assign(Object.assign({},y),{},{icon:j,onCommand:n,queryCommandState:a,queryCommandEnable:o,editorState:r,subMenu:u});else if(1===(null==u?void 0:u.length)&&s){v=Vt;var C=u[0],w=C.icon,x=C.label,k=C.text,S=C.shortcut,A=C.commandName;y=Object.assign(Object.assign({},y),{},{icon:w,label:x,text:k,shortcut:S,onClick:function(e){null==m||m(e),A&&n(A)}})}else v=Vt;return i?Object(d.b)(i,Object.assign({toolbarButton:v},y),e.label):Object(d.b)(v,Object.assign({},y),e.label)})),i&&Object(d.b)(Jt,{})]})}Qt.propTypes={items:f.a.arrayOf(f.a.oneOfType([f.a.object,f.a.bool])).isRequired,onCommand:f.a.func.isRequired,queryCommandState:f.a.func.isRequired,queryCommandEnable:f.a.func.isRequired,editorState:f.a.object.isRequired},Yt.propTypes={icon:f.a.elementType.isRequired,subMenu:f.a.arrayOf(f.a.oneOfType([f.a.object,f.a.bool])).isRequired,label:f.a.string.isRequired,onCommand:f.a.func.isRequired,queryCommandEnable:f.a.func.isRequired,queryCommandState:f.a.func.isRequired,editorState:f.a.object.isRequired,shortcut:f.a.string,disabled:f.a.bool,isActive:f.a.bool,onClick:f.a.func,sectionIndex:f.a.number,buttonIndex:f.a.number,onButtonRectInfoGet:f.a.func},Yt.defaultTypes={disabled:!1,isActive:!1,onClick:function(){}},Xt.propTypes={items:f.a.arrayOf(f.a.oneOfType([f.a.object,f.a.bool])).isRequired,onCommand:f.a.func.isRequired,queryCommandState:f.a.func.isRequired,queryCommandEnable:f.a.func.isRequired,shouldHide:f.a.func,editorState:f.a.object.isRequired,showDivider:f.a.bool.isRequired,showRightSpace:f.a.bool.isRequired,isMoreSection:f.a.bool,sectionIndex:f.a.number,replaceIconByOnlyChild:f.a.bool,onButtonRectInfoGet:f.a.func};var $t=Object(p.forwardRef)((function(e,t){var n=e.mainSections,a=e.moreSectionIsEmpty,o=e.setButtonRectInfo,r=e.onCommand,i=e.queryCommandState,c=e.queryCommandEnable,l=e.editorState;return Object(d.b)("div",{className:"mainArea",ref:t,css:{display:"flex",flexShrink:1},children:n.map((function(e,t,n){if(!e||!n)return null;var s=t===n.length-1&&!a;return e.items.length>0&&Object(d.b)(Xt,{sectionIndex:t,onButtonRectInfoGet:o,items:e.items,onCommand:r,queryCommandState:i,queryCommandEnable:c,editorState:l,showDivider:!s,showRightSpace:!s},e.sectionName)}))})})),en=Object(p.forwardRef)((function(e,t){var n=e.moreSections,a=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState;return Object(d.b)("div",{className:"moreArea",ref:t,css:{display:"flex"},children:n.map((function(e){return e?e.items.length>0&&Object(d.b)(Xt,{items:e.items,onCommand:a,queryCommandState:o,queryCommandEnable:r,editorState:i,showDivider:!0,showRightSpace:!0,replaceIconByOnlyChild:!1,shouldHide:function(e){return e.every((function(e){var t;return 0===(null==e||null===(t=e.children)||void 0===t?void 0:t.length)}))}},e.sectionName):null}))})})),tn=Object(p.forwardRef)((function(e,t){var n=e.fixSections,a=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState;return Object(d.b)("div",{className:"fixArea",ref:t,css:{display:"flex"},children:n.map((function(e,t,n){var c=t===n.length-1;return e.items.length>0&&Object(d.b)(Xt,{items:e.items,onCommand:a,queryCommandState:o,queryCommandEnable:r,editorState:i,showDivider:!c,showRightSpace:!c},e.sectionName)}))})})),nn=n(898),an=n(1319);function on(e){var t,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState,c=e.toolbarMainAreaData,l=e.toolbarMoreAreaData,s=e.toolbarFixtureAreaData,u=e.className,b=function(e){var t=e.toolbarMainAreaData,n=e.toolbarMoreAreaData,o=Object(p.useState)((function(){return[Object(nn.fromJS)(t),Object(nn.fromJS)(n)]})),r=Object(a.a)(o,2),i=r[0],c=r[1],l=Object(p.useState)(!1),s=Object(a.a)(l,2),u=s[0],d=s[1],b=Object(an.a)(),f=Object(a.a)(b,2),h=f[0],m=f[1],v=Object(p.useRef)(null),g=Object(p.useRef)(null),O=Object(p.useRef)(null),j=Object(p.useRef)(0),y=Object(pe.d)((function(e){e&&(v.current=e,j.current=e.offsetLeft)})),C=Object(p.useRef)([]),w=Object(pe.d)((function(e){var t=e.label,n=e.sectionIndex,a=e.buttonIndex,o=e.right;C.current.push({label:t,right:o,sectionIndex:n,buttonIndex:a}),C.current=C.current.sort((function(e,t){var n=e.sectionIndex,a=e.buttonIndex,o=t.sectionIndex,r=t.buttonIndex;return n>o?-1:n<o?1:a>r?-1:a<r?1:0}))})),x=Object(pe.d)((function(){var e,t,n,o=null==m?void 0:m.width,r=null==v||null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect().width,l=(null==g||null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect().width)||0,s=null==O||null===(n=O.current)||void 0===n?void 0:n.getBoundingClientRect().width;if(o&&r&&void 0!==l&&s){var u,b=o-l-s,f=null===(u=C.current)||void 0===u?void 0:u.find((function(e){var t=e.right;return b>t-j.current}));if(f){var p=f.sectionIndex,h=f.buttonIndex,y=p,w=h;p<3&&(y=3),(p<3||h<1)&&(w=1);var x=Object(a.a)(i,2),k=x[0],S=x[1],A=k.getIn([y,"items"]),R=S.getIn([0,"items",0,"children"]),T=A.concat(R),I=T.slice(0,w+1),E=T.slice(w+1),N=k.setIn([y,"items"],I),B=S.setIn([0,"items",0,"children"],E);c([N,B])}}d(!1)}));return Object(p.useEffect)((function(){c([Object(nn.fromJS)(t),Object(nn.fromJS)(n)]),d(!0)}),[t]),Object(p.useEffect)((function(){u&&x()}),[u]),Object(p.useEffect)((function(){d(!0)}),[m]),Object(pe.i)((function(){d(!0)})),{mainSections:i[0].toJS(),moreSections:i[1].toJS(),setToolbarRef:h,setMainAreaRef:y,moreAreaRef:g,fixAreaRef:O,setButtonRectInfo:w}}({toolbarMainAreaData:c,toolbarMoreAreaData:l}),f=b.mainSections,h=b.moreSections,m=b.setToolbarRef,v=b.setMainAreaRef,g=b.moreAreaRef,O=b.fixAreaRef,j=b.setButtonRectInfo;return Object(d.c)(Bt,{ref:m,className:u,children:[Object(d.b)($t,{ref:v,mainSections:f,moreSectionIsEmpty:0===(null===(t=h[0])||void 0===t?void 0:t.items[0].children.length),setButtonRectInfo:j,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:i}),Object(d.b)(en,{ref:g,queryCommandState:o,queryCommandEnable:r,editorState:i,onCommand:n,moreSections:h}),Object(d.b)(tn,{ref:O,fixSections:s,queryCommandEnable:r,queryCommandState:o,onCommand:n,editorState:i})]})}var rn=Object.assign;var cn=function(e){return h.a.createElement(zt.a,rn(rn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Undo24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M4.165 6.591l3.522-3.523a.75.75 0 011.06 1.061L6.494 6.384h6.155c3.924 0 7.029 2.69 7.029 6.687 0 2.017-.96 3.706-2.297 4.875-1.329 1.162-3.071 1.849-4.732 1.849H5.082a.75.75 0 010-1.5h7.566c1.269 0 2.666-.535 3.745-1.478 1.07-.935 1.784-2.233 1.784-3.746 0-3.064-2.325-5.187-5.53-5.187H6.494l2.255 2.255a.75.75 0 11-1.06 1.061L4.163 7.677a.748.748 0 010-1.086z"}))},ln=Object.assign;var sn=function(e){return h.a.createElement(zt.a,ln(ln({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Redo24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M19.454 6.6L15.92 3.07a.75.75 0 10-1.06 1.06l2.255 2.255H10.96c-3.924 0-7.029 2.69-7.029 6.687 0 2.017.96 3.706 2.297 4.875 1.329 1.162 3.071 1.849 4.733 1.849h7.565a.75.75 0 000-1.5H10.96c-1.27 0-2.667-.535-3.745-1.478-1.07-.935-1.785-2.234-1.785-3.746 0-3.064 2.325-5.187 5.53-5.187h6.155l-2.255 2.256a.75.75 0 101.06 1.06l3.536-3.535a.75.75 0 00-.003-1.064z"}))},un=Object.assign;var dn=function(e){return h.a.createElement(zt.a,un(un({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Eraser24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M6.956 17.185c.435.365.984.565 1.552.565h5.245c.572 0 1.114-.253 1.481-.69l4.929-5.874a2.415 2.415 0 00-.298-3.402l-5.11-4.288a2.415 2.415 0 00-3.402.298l-6.858 8.173a2.415 2.415 0 00.297 3.403l2.164 1.815zm1.552-.935a.915.915 0 01-.588-.214l-2.163-1.815a.915.915 0 01-.113-1.29l6.858-8.173a.915.915 0 011.29-.113L18.9 8.933a.915.915 0 01.113 1.289l-4.929 5.873a.434.434 0 01-.332.155H8.508z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{d:"M17 21.75a.75.75 0 100-1.5H5a.75.75 0 000 1.5h12z"}))},bn=Object.assign;var fn=function(e){return h.a.createElement(zt.a,bn(bn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Header24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M7.25 4a.75.75 0 10-1.5 0v17a.75.75 0 001.5 0v-8.25h9.5V21a.75.75 0 001.5 0V4a.75.75 0 00-1.5 0v7.25h-9.5V4z"}))},pn=Object.assign;var hn=function(e){return h.a.createElement(zt.a,pn(pn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Headingone24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M6 4a.75.75 0 00-1.5 0v17A.75.75 0 006 21v-8.16h8.565V21a.75.75 0 101.5 0V4a.75.75 0 00-1.5 0v7.34H6V4zm12.511 11.83h2.211l.048.007a.15.15 0 01.102.142v5.5l-.007.048a.15.15 0 01-.143.102h-1.166l-.047-.007a.15.15 0 01-.103-.143v-3.833l-.007-.07a.35.35 0 00-.343-.28h-.779l-.045-.006a.15.15 0 01-.102-.173l.234-1.167.02-.048a.15.15 0 01.127-.073z"}))},mn=Object.assign;var vn=function(e){return h.a.createElement(zt.a,mn(mn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Headingtwo24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M6 4a.75.75 0 10-1.5 0v17A.75.75 0 006 21v-8.16h8.565V21a.75.75 0 101.5 0V4a.75.75 0 00-1.5 0v7.34H6V4zm11.687 13.77c.078-1.146 1.051-1.86 2.393-1.86 1.332 0 2.4.853 2.4 1.823 0 .6-.232 1-1.007 1.71l-.955.79-.227.178h.29l1.751.008.047.008a.15.15 0 01.102.143v.99l-.007.048a.15.15 0 01-.143.103h-4.498l-.048-.008a.15.15 0 01-.102-.142v-.608l.007-.045a.15.15 0 01.051-.074l2.252-1.738.298-.235.242-.202c.393-.344.524-.555.527-.791.009-.497-.377-.85-.979-.85l-.134.007c-.52.049-.842.311-.888.778a.105.105 0 01-.106.104H17.82a.134.134 0 01-.132-.137z"}))},gn=Object.assign;var On=function(e){return h.a.createElement(zt.a,gn(gn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Bold24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M5.324 3.987a.75.75 0 01.75-.75h5.28c3.393 0 5.489 2.296 5.489 4.754 0 1.087-.235 2.386-1.024 3.431-.195.26-.42.496-.675.707.67.262 1.235.638 1.691 1.104.927.945 1.34 2.194 1.34 3.421a4.626 4.626 0 01-1.5 3.442c-1.016.933-2.503 1.493-4.423 1.493H6.074a.75.75 0 01-.75-.75V3.987zm1.5 7.718h4.914c1.541 0 2.392-.534 2.884-1.186.52-.689.721-1.622.721-2.528 0-1.532-1.323-3.254-3.99-3.254H6.824v6.968zm0 1.5h5.878c1.485 0 2.46.462 3.062 1.078.61.622.91 1.473.91 2.371a3.13 3.13 0 01-1.013 2.337c-.684.628-1.782 1.098-3.409 1.098H6.824v-6.884z",fillRule:"evenodd",clipRule:"evenodd"}))},jn=Object.assign;var yn=function(e){return h.a.createElement(zt.a,jn(jn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Ltalic24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M11.132 18.982h2.565a.75.75 0 010 1.5h-7a.75.75 0 010-1.5h2.906L12.34 5H9.418a.75.75 0 010-1.5h7a.75.75 0 010 1.5h-2.55l-2.736 13.982z"}))},Cn=Object.assign;var wn=function(e){return h.a.createElement(zt.a,Cn(Cn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--List24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M5.25 5A.75.75 0 016 4.25h12a.75.75 0 010 1.5H6A.75.75 0 015.25 5zM6 8.277a.75.75 0 100 1.5h8.5a.75.75 0 000-1.5H6zm0 10a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5H6zm0-4.027a.75.75 0 000 1.5h12a.75.75 0 000-1.5H6z"}))},xn=Object.assign;var kn=function(e){return h.a.createElement(zt.a,xn(xn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Orderedlist24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M4.539 4.1h2.21l.048.008a.15.15 0 01.103.142v5.5l-.008.047a.15.15 0 01-.142.103H5.584l-.048-.008a.15.15 0 01-.102-.142V5.917l-.007-.07a.35.35 0 00-.343-.28h-.78L4.26 5.56a.15.15 0 01-.102-.172l.234-1.167.018-.049a.15.15 0 01.13-.072zM3.105 15.96c.079-1.147 1.052-1.86 2.394-1.86 1.33 0 2.399.853 2.399 1.822 0 .6-.232 1.001-1.007 1.71l-.955.791-.226.177H6l1.75.009.048.007a.15.15 0 01.102.143v.991l-.008.047a.15.15 0 01-.142.103H3.251l-.047-.008a.15.15 0 01-.103-.142v-.608l.007-.045a.15.15 0 01.051-.073l2.252-1.739.299-.234.241-.202c.394-.345.524-.556.527-.792.01-.497-.376-.85-.978-.85l-.134.007c-.521.049-.843.311-.889.778a.105.105 0 01-.105.104H3.237a.134.134 0 01-.132-.136zm7.145-6.933a.75.75 0 01.75-.75h8.5a.75.75 0 010 1.5H11a.75.75 0 01-.75-.75zm.75 9.25a.75.75 0 100 1.5h8.5a.75.75 0 000-1.5H11zM10.25 5a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H11a.75.75 0 01-.75-.75zm.75 9.25a.75.75 0 000 1.5h10.5a.75.75 0 000-1.5H11z"}))},Sn=Object.assign;var An=function(e){return h.a.createElement(zt.a,Sn(Sn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Unorderedlist24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M3.014 7a3 3 0 116 0 3 3 0 01-6 0zm3-1.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{d:"M10.25 5a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H11a.75.75 0 01-.75-.75zM11 8.277a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5H11zm0 10a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5H11zm0-4.027a.75.75 0 000 1.5h10.5a.75.75 0 000-1.5H11z"}),h.a.createElement("path",{d:"M6.014 14a3 3 0 100 6 3 3 0 000-6zm-1.5 3a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z",fillRule:"evenodd",clipRule:"evenodd"}))},Rn=Object.assign;var Tn=function(e){return h.a.createElement(zt.a,Rn(Rn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--ToolBarVipCatalog"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M5.288 4.5h13.424c.159 0 .288.112.288.25v1c0 .138-.13.25-.288.25H5.288C5.13 6 5 5.888 5 5.75v-1c0-.138.13-.25.288-.25zM5 11.25a.25.25 0 01.25-.25h13.5a.25.25 0 01.25.25v1a.25.25 0 01-.25.25H5.25a.25.25 0 01-.25-.25v-1zm13.712 6.25H5.288c-.159 0-.288.112-.288.25v1c0 .138.13.25.288.25h13.424c.159 0 .288-.112.288-.25v-1c0-.138-.13-.25-.288-.25z",fillRule:"evenodd",clipRule:"evenodd"}))},In=Object.assign;var En=function(e){return h.a.createElement(zt.a,In(In({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Blockquote24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M9.728 5.023a.75.75 0 01-.35 1c0 .001 0 0 0 0l-.002.002-.012.005a4.39 4.39 0 00-.25.132 9.644 9.644 0 00-.671.407c-.54.358-1.124.83-1.484 1.341-.453.646-.805 1.208-1.054 1.914-.198.56-.339 1.239-.388 2.147h3.53a1.95 1.95 0 011.95 1.95v4.1a1.95 1.95 0 01-1.95 1.95h-3.3a1.75 1.75 0 01-1.75-1.75v-5.5c0-1.426.175-2.493.493-3.395.318-.902.765-1.598 1.242-2.278.52-.74 1.288-1.335 1.881-1.729a11.14 11.14 0 011.085-.633l.02-.01.005-.002.002-.001h.001l.31.644-.31-.645a.75.75 0 011.002.351zm-4.23 8.448v4.75c0 .138.111.25.25.25h3.3a.45.45 0 00.45-.45v-4.1a.45.45 0 00-.45-.45h-3.55zm12.879-7.447h-.002l-.01.006a4.344 4.344 0 00-.25.132 9.658 9.658 0 00-.672.407c-.54.358-1.125.83-1.484 1.341-.453.646-.805 1.208-1.054 1.914-.198.56-.339 1.239-.388 2.147h3.53a1.95 1.95 0 011.95 1.95v4.1a1.95 1.95 0 01-1.95 1.95h-3.3a1.75 1.75 0 01-1.75-1.75v-5.5c0-1.426.175-2.493.493-3.395.318-.902.764-1.598 1.242-2.278.52-.74 1.288-1.335 1.881-1.729a11.127 11.127 0 011.085-.633l.02-.01.005-.002.002-.001h.001l.326.675-.326-.676a.75.75 0 01.65 1.352zm-3.88 7.447v4.75c0 .138.112.25.25.25h3.3a.45.45 0 00.45-.45v-4.1a.45.45 0 00-.45-.45h-3.55z",fillRule:"evenodd",clipRule:"evenodd"}))},Nn=Object.assign;var Bn=function(e){return h.a.createElement(zt.a,Nn(Nn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Divider24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M6.75 6a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h3a.75.75 0 01.75.75zm0 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h3a.75.75 0 01.75.75zm6.75.75a.75.75 0 000-1.5h-3a.75.75 0 000 1.5h3zM14.25 6a.75.75 0 01-.75.75h-3a.75.75 0 010-1.5h3a.75.75 0 01.75.75zM21 18.75a.75.75 0 000-1.5h-3a.75.75 0 000 1.5h3zM21.75 6a.75.75 0 01-.75.75h-3a.75.75 0 010-1.5h3a.75.75 0 01.75.75zM21 12.75a.75.75 0 000-1.5H3a.75.75 0 000 1.5h18z"}))},zn=Object.assign;var Ln=function(e){return h.a.createElement(zt.a,zn(zn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Code24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M13.394 4.041a.75.75 0 01.592.88l-2.977 15.214a.75.75 0 01-1.472-.288l2.977-15.214a.75.75 0 01.88-.592zM8.03 6.47a.75.75 0 010 1.06L3.56 12l4.47 4.47a.75.75 0 11-1.06 1.06l-5-5a.75.75 0 010-1.06l5-5a.75.75 0 011.06 0zm7.94 0a.75.75 0 011.06 0l5 5a.75.75 0 010 1.06l-5 5a.75.75 0 11-1.06-1.06L20.44 12l-4.47-4.47a.75.75 0 010-1.06z",fillRule:"evenodd",clipRule:"evenodd"}))},Pn=Object.assign;var Mn=function(e){return h.a.createElement(zt.a,Pn(Pn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Reference24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M2.647 17.828a2.415 2.415 0 002.415 2.415H7a.75.75 0 000-1.5H5.062a.915.915 0 01-.915-.915V6.173c0-.506.41-.915.915-.915H7a.75.75 0 000-1.5H5.062a2.415 2.415 0 00-2.415 2.415v11.655zM17 18.743a.75.75 0 000 1.5h1.938a2.415 2.415 0 002.415-2.415V6.173a2.415 2.415 0 00-2.416-2.415H17a.75.75 0 000 1.5h1.938c.505 0 .915.41.915.915v11.655c0 .505-.41.915-.916.915H17zM10.5 7.25a.75.75 0 000 1.5h1.25V16a.75.75 0 001.5 0V8.5c0-.69-.56-1.25-1.25-1.25h-1.5z"}))},Dn=Object.assign;var _n=function(e){return h.a.createElement(zt.a,Dn(Dn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Image24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M5.416 3.004A2.415 2.415 0 003.001 5.42v7.42a.75.75 0 001.5 0V5.42c0-.505.41-.915.915-.915h13.169c.505 0 .915.41.915.915v13.162c0 .505-.41.915-.915.915H5.416a.915.915 0 01-.915-.915V17.42h.462a8.52 8.52 0 004.883-1.538l1.678-1.173a7.02 7.02 0 014.023-1.267h1.533a.75.75 0 000-1.5h-1.533a8.52 8.52 0 00-4.883 1.537l-1.678 1.174a7.02 7.02 0 01-4.023 1.267h-.657c-.72 0-1.305.584-1.305 1.305v1.356a2.415 2.415 0 002.415 2.415h13.169A2.415 2.415 0 0021 18.58V5.419a2.415 2.415 0 00-2.415-2.415H5.416z"}),h.a.createElement("path",{d:"M8.918 6.52a2.417 2.417 0 100 4.834 2.417 2.417 0 000-4.834zm-.917 2.417a.917.917 0 111.834 0 .917.917 0 01-1.834 0z",fillRule:"evenodd",clipRule:"evenodd"}))},Vn=Object.assign;var Un=function(e){return h.a.createElement(zt.a,Vn(Vn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Video24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M14.34 12.291a.347.347 0 000-.583L11.056 9.56c-.237-.155-.555.012-.555.292v4.298c0 .28.318.447.555.291l3.286-2.149z"}),h.a.createElement("path",{d:"M2.647 17.827a2.415 2.415 0 002.415 2.415h13.875a2.415 2.415 0 002.415-2.415V6.172a2.415 2.415 0 00-2.415-2.415H5.063a2.415 2.415 0 00-2.415 2.415v11.655zm2.415.915a.915.915 0 01-.915-.915V6.172c0-.505.41-.915.915-.915h13.875c.506 0 .915.41.915.915v11.655c0 .506-.41.915-.915.915H5.063z",fillRule:"evenodd",clipRule:"evenodd"}))},Fn=Object.assign;var qn=function(e){return h.a.createElement(zt.a,Fn(Fn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Link24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M5.327 18.696a3.005 3.005 0 010-4.25l2.608-2.608a.75.75 0 00-1.06-1.06l-2.608 2.607a4.505 4.505 0 106.37 6.371l2.608-2.607a.75.75 0 10-1.06-1.06l-2.608 2.607a3.005 3.005 0 01-4.25 0zm5.428-11.799a.75.75 0 101.061 1.06l2.665-2.664a3.005 3.005 0 014.25 4.25l-2.665 2.664a.75.75 0 001.06 1.06l2.665-2.664a4.505 4.505 0 00-6.371-6.37l-2.665 2.664z"}),h.a.createElement("path",{d:"M16.078 9.013a.75.75 0 00-1.06-1.06l-7.072 7.07a.75.75 0 001.061 1.061l7.071-7.07z"}))},Hn=Object.assign;var Gn=function(e){return h.a.createElement(zt.a,Hn(Hn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Income24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M10.836 10.522a.75.75 0 10-1.114 1.003l1.607 1.786v.462h-1.5a.75.75 0 000 1.5h1.5v1.75a.75.75 0 001.5 0v-1.75h1.5a.75.75 0 000-1.5h-1.5v-.462l1.607-1.786a.75.75 0 10-1.115-1.003l-1.242 1.38-1.243-1.38z"}),h.a.createElement("path",{d:"M6.97 2.766a.75.75 0 00-.658 1.107l1.58 2.916c-3.376 1.37-5.37 4.385-5.37 7.66 0 2.253.992 4.176 2.707 5.518 1.702 1.33 4.078 2.065 6.85 2.065 2.771 0 5.147-.735 6.849-2.065 1.715-1.342 2.707-3.265 2.707-5.519 0-3.315-2.1-6.371-5.544-7.72l1.581-2.848a.75.75 0 00-.655-1.114H6.97zm2.66 4.08l-1.4-2.58h7.512l-1.398 2.52a.75.75 0 00.448 1.084c3.374.973 5.343 3.708 5.343 6.578 0 1.775-.766 3.27-2.131 4.337-1.38 1.079-3.406 1.747-5.925 1.747-2.52 0-4.546-.668-5.925-1.747-1.366-1.068-2.132-2.562-2.132-4.337 0-2.847 1.868-5.53 5.166-6.527a.75.75 0 00.442-1.075z",fillRule:"evenodd",clipRule:"evenodd"}))},Kn=Object.assign;var Wn=function(e){return h.a.createElement(zt.a,Kn(Kn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Formula24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M3.313 4.7A.75.75 0 014 4.25h9a.75.75 0 010 1.5H5.713l4.838 5.241a.75.75 0 01.035.978L5.56 18.25H13a.75.75 0 010 1.5H4a.75.75 0 01-.586-1.218l5.598-6.997-5.563-6.026a.75.75 0 01-.136-.81zm12.251 6.69a.75.75 0 011.046.174l1.89 2.646 1.89-2.646a.75.75 0 111.22.872L19.422 15.5l2.188 3.064a.75.75 0 01-1.22.872L18.5 16.79l-1.89 2.646a.75.75 0 11-1.22-.872l2.188-3.064-2.188-3.064a.75.75 0 01.174-1.046z"}))},Zn=Object.assign;var Qn=function(e){return h.a.createElement(zt.a,Zn(Zn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Table24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M5.063 20.242a2.415 2.415 0 01-2.415-2.415V6.174a2.415 2.415 0 012.415-2.415h13.875a2.415 2.415 0 012.415 2.415v11.655a2.415 2.415 0 01-2.415 2.415H5.063zm-.915-2.415c0 .506.41.915.915.915h6.188V12.75H4.148v5.078zm0-6.577h7.103V5.258H5.063a.915.915 0 00-.915.915v5.077zm8.603 1.5v5.992h6.187c.505 0 .915-.41.915-.915V12.75H12.75zm7.102-1.5H12.75V5.258h6.188c.505 0 .915.41.915.915v5.077z",fillRule:"evenodd",clipRule:"evenodd"}))},Yn=Object.assign;var Jn=function(e){return h.a.createElement(zt.a,Yn(Yn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Cloud24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M10.836 6.355a4.072 4.072 0 00-4.016 4.757.75.75 0 01-.772.874 2.902 2.902 0 00-3.03 2.9 2.902 2.902 0 002.9 2.902h.001l11.142-.035h.003a3.753 3.753 0 10-3.53-5.033.75.75 0 01-1.41-.512A5.255 5.255 0 0122.318 14a5.253 5.253 0 01-5.252 5.253h-.001l-11.142.035H5.92a4.402 4.402 0 01-.655-8.757v-.103a5.572 5.572 0 019.85-3.57.75.75 0 11-1.15.961 4.062 4.062 0 00-3.128-1.464z",fillRule:"evenodd",clipRule:"evenodd"}))},Xn=Object.assign;var $n=function(e){return h.a.createElement(zt.a,Xn(Xn({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--NavigationBarMore"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M4.25 10.5a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5a.75.75 0 01.75-.75h1.5zm8.75 0a.5.5 0 01.5.5v2a.5.5 0 01-.5.5h-2a.5.5 0 01-.5-.5v-2a.5.5 0 01.5-.5h2zm8.25 0a.75.75 0 01.75.75v1.5a.75.75 0 01-.75.75h-1.5a.75.75 0 01-.75-.75v-1.5a.75.75 0 01.75-.75h1.5z",fillRule:"evenodd",clipRule:"evenodd"}))},ea=Object.assign;var ta=function(e){return h.a.createElement(zt.a,ea(ea({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Folderplus24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M4.415 5.632a.915.915 0 00-.915.915v10.52c0 .505.41.914.915.914h8.413a.75.75 0 010 1.5H4.415A2.415 2.415 0 012 17.066V6.547a2.415 2.415 0 012.415-2.415h4.081c.716 0 1.394.318 1.853.866l1.09 1.304a.915.915 0 00.701.328h6.428a2.415 2.415 0 012.415 2.415v1.954a.75.75 0 01-1.5 0V9.045a.915.915 0 00-.915-.915H12.14a2.415 2.415 0 01-1.853-.866L9.198 5.96a.915.915 0 00-.702-.328h-4.08z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{d:"M15.55 16.789a.75.75 0 01.75-.75H22a.75.75 0 010 1.5h-5.7a.75.75 0 01-.75-.75z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{d:"M19.15 20.389a.75.75 0 01-.75-.75v-5.7a.75.75 0 011.5 0v5.7a.75.75 0 01-.75.75z",fillRule:"evenodd",clipRule:"evenodd"}))},na=Object.assign;var aa=function(e){return h.a.createElement(zt.a,na(na({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Column24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M7.505 6.36a.75.75 0 01.736-.61h7.518c.36 0 .67.256.736.61l1.599 8.39H5.906l1.599-8.39zm-3.239 8.985a.753.753 0 00-.016.155v2a2.25 2.25 0 002.25 2.25h11a2.25 2.25 0 002.25-2.25v-2a.749.749 0 00-.016-.155l-1.765-9.266a2.25 2.25 0 00-2.21-1.829H8.24a2.25 2.25 0 00-2.21 1.829l-1.765 9.266zm13.984.905v1.25a.75.75 0 01-.75.75h-11a.75.75 0 01-.75-.75v-1.25h12.5zM8.25 12a.75.75 0 01.75-.75h6a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75zM10 7.75a.75.75 0 000 1.5h4a.75.75 0 000-1.5h-4z",fillRule:"evenodd",clipRule:"evenodd"}))},oa=Object.assign;var ra=function(e){return h.a.createElement(zt.a,oa(oa({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Clock24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M13.924 15.48a.75.75 0 001.152-.96l-2.326-2.791V8a.75.75 0 00-1.5 0v4a.75.75 0 00.174.48l2.5 3z"}),h.a.createElement("path",{d:"M12 3a9 9 0 100 18 9 9 0 000-18zm-7.5 9a7.5 7.5 0 1115 0 7.5 7.5 0 01-15 0z",fillRule:"evenodd",clipRule:"evenodd"}))},ia=n(2793),ca=n(1365),la=n(1364),sa=[{sectionName:"moreArea",minLength:2,priority:2,items:[{label:"更多",icon:$n,children:[]}]}];function ua(e){var t,n=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,r=e.editorState,i=e.toolbarMainAreaData,c=e.toolbarMoreAreaData,l=e.toolbarFixtureAreaData,s=e.className;return Object(d.c)(Bt,{className:s,css:{".ToolbarButton.Button.Button--plain":{marginRight:"6px"},".ToolbarDivider":{marginLeft:"0",paddingLeft:"2px"},".toolbar-section":{marginRight:"12px"},".fixArea .toolbar-section":{marginRight:"0px"},"&.toolbarV3":{paddingLeft:"10px"}},children:[Object(d.b)($t,{mainSections:i,moreSectionIsEmpty:0===(null===(t=c[0])||void 0===t?void 0:t.items[0].children.length),onCommand:n,queryCommandState:a,queryCommandEnable:o,editorState:r}),Object(d.b)(en,{queryCommandState:a,queryCommandEnable:o,editorState:r,onCommand:n,moreSections:c}),Object(d.b)(tn,{fixSections:l,queryCommandEnable:o,queryCommandState:a,onCommand:n,editorState:r})]})}var da=function(e){var t=e.editorState,n=e.onCommand,a=e.queryCommandEnable,o=e.queryCommandState,r=e.showUserProfitButton,i=e.isVideoAnswer,c=e.onInsertVideoClick,l=e.draftPage,s=e.className,u=e.onNeedHelp,b=e.useMediumEditor,f=Object(p.useMemo)((function(){return function(e){var t=e.showProfit,n=e.onInsertVideoClick,a=e.isVideoAnswer;return[{sectionName:"operation",minLength:3,priority:1,items:[{icon:cn,priority:2,label:"撤销",commandName:"undo",shortcut:"⌘+Z"},{icon:sn,label:"重做",priority:1,commandName:"redo",shortcut:"⌘+Y"},{icon:dn,label:"清除格式",priority:3,commandName:"clear-format",shortcut:"⌘+\\"}]},{sectionName:"style",minLength:4,priority:2,items:[{icon:fn,label:"标题",priority:1,children:[{icon:hn,label:"一级标题",commandName:"toggle-block-type-header-two",shortcut:"⌘+⌥+1"},{icon:vn,label:"二级标题",commandName:"toggle-block-type-header-three",shortcut:"⌘+⌥+2"}]},{icon:On,label:"加粗",commandName:"toggle-inline-style-BOLD",priority:2,shortcut:"⌘+B"},{icon:yn,label:"斜体",commandName:"toggle-inline-style-ITALIC",priority:3,shortcut:"⌘+I"}]},{sectionName:"blockType",minLength:6,priority:4,items:[{icon:wn,label:"列表",priority:1,children:[{icon:kn,label:"有序列表",commandName:"toggle-block-type-ordered-list-item",shortcut:"⌘+⇧+L"},{icon:An,label:"无序列表",commandName:"toggle-block-type-unordered-list-item",shortcut:"⌘+L"}]},{Component:ca.a,icon:Tn,label:"目录",commandName:"toggle-catalog",shortcut:"⌘+⌥+J",priority:2},{icon:En,label:"引用",commandName:"toggle-block-type-blockquote",shortcut:"⌘+⇧+U",priority:3},{icon:Bn,label:"分割线",commandName:"insert-divider",shortcut:"⌘+⌥+S",priority:4},{icon:Ln,label:"代码块",commandName:"toggle-block-type-code-block",shortcut:"⌘+⌥+C",priority:5},{icon:Mn,label:"注释",commandName:"insert-reference",shortcut:"⌘+⌥+R",priority:6}]},{sectionName:"advanced",minLength:2,priority:3,items:[{Component:la.a,icon:_n,label:"图片",commandName:"insert-image-from-library",priority:7},!a&&{label:"视频",icon:Un,priority:6,onClick:function(){null==n||n()}},{label:"链接",icon:qn,commandName:"insert-link",priority:5,shortcut:"⌘+K"},t&&!a&&{label:"收益",icon:Gn,commandName:"toggle-user-profit-modal",priority:4},{label:"公式",icon:Wn,commandName:"insert-formula",priority:3,shortcut:"⌘+⌥+E"},!a&&{label:"表格",icon:Qn,commandName:"insert-table",priority:2,shortcut:"⌘+⌥+T"},{label:"附件",icon:Jn,commandName:"insert-file-from-baidu-wangpan",priority:1}].filter(Boolean)}]}({showProfit:r,onInsertVideoClick:c,isVideoAnswer:i})}),[r,c,i]),h=Object(p.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.draftPage,n=e.onNeedHelp;return[{sectionName:"fixArea",minLength:2,priority:2,items:[Object.assign({label:"文档",icon:ta},t?{children:[{icon:ta,label:"文档",commandName:"insert-doc"},{icon:aa,label:"草稿箱",onClick:function(){location.href=t}}]}:{commandName:"insert-doc"}),{label:"历史版本",icon:ra,commandName:"toggle-draft-history-modal"},{label:"帮助",icon:ia.a,onClick:function(){n()}}]}]}({draftPage:l,onNeedHelp:u})}),[l,u]),m=b?ua:on;return Object(d.b)(m,{editorState:t,onCommand:n,queryCommandEnable:a,queryCommandState:o,toolbarMainAreaData:f,toolbarMoreAreaData:sa,toolbarFixtureAreaData:h,className:s})},ba=n(1639),fa=n(963),pa=Object.assign;var ha,ma,va=function(e){return h.a.createElement(zt.a,pa(pa({width:"16",height:"16",viewBox:"0 0 16 16"},e),{className:"ZDI ZDI--Close16"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M12.543 2.397a.25.25 0 01.354 0l.707.707a.25.25 0 010 .353L9.06 8l4.543 4.543a.25.25 0 010 .354l-.707.707a.25.25 0 01-.354 0L8 9.06l-4.543 4.543a.25.25 0 01-.353 0l-.707-.707a.25.25 0 010-.354L6.94 8 2.397 3.457a.25.25 0 010-.353l.707-.707a.25.25 0 01.353 0L8 6.94l4.543-4.543z",fillRule:"evenodd",clipRule:"evenodd"}))},ga=n(1056),Oa=function(e){var t=e.children,n=e.className;return Object(d.b)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},ja=function(e){var t=e.question,n=e.onClose,o=e.getContainer,r=t.title,i=t.detail,c=Object(p.useState)(null),l=Object(a.a)(c,2),s=l[0],u=l[1];return Object(d.c)(S.Box,{css:{overflow:"hidden",width:"326px",maxWidth:"326px"},children:[Object(d.b)(R.a,{getStyle:function(){var e=o();return e?{top:85,left:e.getBoundingClientRect().left}:{top:85}},offset:85,container:o,children:Object(d.c)(S.Box,{css:{width:"326px",maxWidth:"326px"},pl:"16px",children:[Object(d.c)(S.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"60px",alignItems:"center"},children:[Object(d.b)(Oa,{css:{fontSize:"18px",lineHeight:"24px"},children:"问题描述"}),Object(d.b)(fe.a,{zaType:"Image",zaAction:"Unknown",zaText:"关闭问题详情",as:va,css:{marginLeft:"auto",padding:"16px"},onClick:n})]}),Object(d.c)(S.Box,{bg:"GBK99A",px:"16px",css:{minHeight:"340px",maxHeight:"460px",overflow:"auto"},onClick:function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&u(t)},children:[Object(d.b)(Oa,{css:{fontSize:"16px",lineHeight:"22px",marginBottom:"10px",marginTop:"10px"},children:r}),Object(d.b)(ga.a,{itemProp:"text",tag:"span",html:i})]})]})}),s&&Object(d.b)(fa.a,{img:s,onClose:function(){return u(null)}})]})},ya=function(e){var t=e.question,n=e.onClick,a=t.title,o=t.excerpt;return Object(d.b)(S.Box,{bg:"GBK99A",css:{padding:"20px 64px 0"},children:Object(d.c)(Oa,{css:function(e){return{paddingBottom:"20px",borderBottom:"1px solid ".concat(e.colors.GBK09A)}},children:[a,o&&Object(d.c)(fe.a,{as:"button",zaType:"Button",zaText:!0,onClick:n,shouldTrackShow:!0,css:function(e){return{color:e.colors.GBL05A,lineHeight:"14px",fontSize:"14px",fontWeight:"normal",display:"inline-flex",alignItems:"center"}},children:["问题描述",Object(d.b)(be.a,{size:16})]})]})})},Ca=n(1418),wa=n(1417);n(1644);function xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var ka="questionDetail",Sa=function(e){Object(l.a)(n,e);var t=xa(n);function n(e,a){var i;Object(r.a)(this,n),(i=t.call(this,e,a)).editableReady=function(){var e=i.props,t=e.reporter,n=e.draft;t.reportSuccess(Ca.a.editableInit),n&&t.reportSuccess(Ca.a.draftLoad)},i.onCompositionStart=function(){i.composition=!0,i.syncDraft.cancel()},i.onCompositionEnd=function(){i.composition=!1,i.prevValue&&i.syncDraft(i.prevValue),i.prevValue=null},i.onChangeContent=function(e){i.loggingDeltaTime||(i.loggingDeltaTime=!0,i.startCompositionTime=Math.floor((new Date).getTime()/1e3)),i.hasEdited=!0,i.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),i.composition?i.prevValue=e:i.syncDraft(e)},i.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var a=n.getRangeAt(0).cloneRange();a.collapse(t);var o=a.getBoundingClientRect();if(0===o.height){var r=a.commonAncestorContainer;1===r.nodeType&&(o=r.getBoundingClientRect())}if(0!==o.height){var i=o.bottom-(window.innerHeight-117);i>0&&window.scrollBy(0,i)}}},i.onDeleteDraftModalShow=function(){i.setState({deleteDraftModalShown:!0})},i.onDeleteDraft=function(){var e=i.props,t=e.isReediting,n=e.activeTabKey;t||(n===_.a.videoAnswer?i.editable.clearAllContent():i.editable.reset(),i.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),i.deleteDraft();var a=i.props.onDeleteDraft;a&&a()},i.onDeleteDraftModalHide=function(){i.setState({deleteDraftModalShown:!1})},i.checkVideoSectionReady=function(e){if(!e)return T.a.alert("没有上传视频，请上传后提交",{title:"无视频"}),!1;var t=e.videoId,n=e.isOriginal;if(t){if("zvideo"===e.type&&null==n)return T.a.alert("没有视频类型，请选择视频为原创或转载后提交",{title:"无视频类型"}),!1}else{var a=i.editable.checkVideoStatus();if(a.isUploading)return T.a.alert("视频上传中，请上传完成后提交",{title:"视频上传中"}),!1;if(a.hasError)return T.a.alert("视频上传失败，请重新上传后提交",{title:"上传失败"}),!1}return!0},i.checkEditorContentReady=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading"),!1):i.editable.hasImage("upload")?(i.handleError("image-uploading"),!1):i.editable.hasImage("error")||i.editable.hasVideo("error")&&!i.editable.hasVideo("error-review")?(T.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"}),!1):!i.editable.hasVideo("error-review")&&!i.editable.hasVideo("censor")||(T.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"}),!1)},i.getSubmitData=function(e,t,n){var a,o=i.state.scheduledPublishAt,r=i.props,l=r.answer,s=r.disclaimers,u=r.settings,b=r.isReediting,f={content:t},p=(0,r.getFormData)(),h=p.isDisclaimerChecked,m=p.disclaimerType,v=p.rewardTagline,g=p.pushActivity,O=p.commentPermission,j=p.reshipmentSettings,y=p.isReport;if(!b){var C=i.props.currentUser.caEnabled?"need_payment":"allowed";f.reshipmentSettings=j||C,f.commentPermission=O||"all"}if(f.rewardSetting={canReward:Boolean(v),tagline:v},e)return{content:t,attachment:n,rewardSetting:f.rewardSetting,reshipmentSettings:f.reshipmentSettings,commentPermission:f.commentPermission};if(s&&s.length&&(!l||u)&&(f.disclaimerStatus=h?"open":"close",f.disclaimerType=m||"none"),f.commercialReportInfo={isReport:!!y},f.isReport=!!y,o){if(D.a.trackEvent(Object(c.a)(i),{action:"Click",id:5733,name:"回答"}),w.a(o,x.a(new Date,30)))return void T.a.alert(Object(d.b)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});f.publishAt=Math.floor(o/1e3)+0}return void 0!==g&&(f.pushActivity=g),null!=n&&n.bizExt&&(f.bizExt=Object(ae.a)(n.bizExt)),f.tableOfContentsEnabled=i.editable.hasCatalog(),Object.assign(f,null===(a=i.editable)||void 0===a?void 0:a.getExtraPluginData()),f},i.canSubmit=function(){var e,t,n=null===(e=i.editable)||void 0===e?void 0:e.toHTML(),a=i.isVideoAnswer?null===(t=i.editable)||void 0===t?void 0:t.getAttachment():null;return i.isVideoAnswer?Boolean(a||n):Boolean(n)},i.handleSubmit=function(){var e=i.props.reporter;e.reportRequest(Ca.a.addAnswer);try{var t,n=i.props,a=n.draft,o=n.isReediting,r=n.onSubmit,l=n.question.id,s=n.currentUser,u=n.onCancel;if(!i.editable)return u(),void e.reportSuccess(Ca.a.addAnswer);if(!i.canSubmit())return void e.reportSuccess(Ca.a.addAnswer);var d=i.editable.toHTML(),b=i.isVideoAnswer?i.editable.getAttachment():null==a?void 0:a.attachment;if(i.isVideoAnswer&&!i.checkVideoSectionReady(b))return void e.reportSuccess(Ca.a.addAnswer);if(!i.checkEditorContentReady())return void e.reportSuccess(Ca.a.addAnswer);var f=i.getSubmitData(i.isVideoAnswer,d,Object.assign(Object.assign({},b),{},{campaign_id:null===(t=i.props.campaign)||void 0===t?void 0:t.id}));Promise.resolve(r(f)).then((function(){e.reportSuccess(Ca.a.addAnswer)})).then((function(){D.a.trackCardShow(null,{id:7879}),o||D.a.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(l),author_member_hash_id:s.id}]}}],status:{result:"Success",event:{action:"Submit"}}})})).catch((function(t){var n;t.status&&"5"!==(null===(n=t.status)||void 0===n?void 0:n.toString()[0])||e.reportFail(Ca.a.addAnswer,t),o||D.a.trackEvent(Object(c.a)(i),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}));var p=o?"Edit":"Answer";"Answer"===p&&D.a.trackEvent(Object(c.a)(i),{id:4930}),D.a.trackEvent(Object(c.a)(i),{action:p,is_intent:!1})}catch(t){throw e.reportFail(Ca.a.addAnswer,t),t}},i.validateBeforeCancel=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading-draft"),!1):!i.editable.hasImage("upload")||(i.handleError("image-uploading-draft"),!1)},i.onCancel=function(){var e=i.props.onCancel;i.validateBeforeCancel()&&(i.hasEdited&&i.syncDraftImmediately(),e&&e())},i.onFocus=function(){"org"===i.props.question.questionType&&i.shouldAnswerOrgQuestionModalShow&&i.handleAnswerOrgQuestionModalShow(),i.setState({focusing:!0})},i.onSelectText=function(e){i.setState({selectedText:e.replace(/\s/g,"")})},i.onLoadStart=function(){i.setState({loadingShown:!0})},i.onLoadEnd=function(){i.setState({loadingShown:!1})},i.handleInsertZVideo=function(){i.setState({showInsertableVideoUploader:!0})},i.getAllInviters=function(){var e=i.props,t=e.question;return(0,e.fetchAllInviters)(t.id)},i.getToolbarSidePlugins=function(){return null},i.getToolbarMenuPlugins=function(){var e=i.state.scheduledPublishAt;return Object(d.b)(p.Fragment,{children:i.canUseScheduledPublish&&Object(d.c)(A.c,{onClick:function(){i.setUseScheduledPublish(!e),D.a.trackEvent(Object(c.a)(i),{action:"Click",id:5730,name:"回答"})},children:[Object(d.b)(k.a,{text:!0}),e?"取消定时发布":"定时发布"]})})},i.setUseScheduledPublish=function(e,t){if(e)if(t)i.setState({scheduledPublishAt:t});else{var n=x.a(new Date,30);i.setState({initialScheduledPublishAt:n,scheduledPublishAt:n})}else T.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then((function(){i.setState({scheduledPublishAt:void 0}),D.a.trackEvent(Object(c.a)(i),{action:"Click",id:5737,name:"回答"})})).catch((function(){D.a.trackEvent(Object(c.a)(i),{action:"Click",id:5736,name:"回答"})})),D.a.trackCardShow(Object(c.a)(i),{id:5735,name:"回答"})},i.getEditorState=function(){return i.editable.state.editorState?i.editable.state.editorState:i.editable.getEditorState()},i.toggleFullscreen=function(){var e,t,n;i.validateBeforeCancel()&&(i.hasEdited?i.syncDraftImmediately().finally((function(){var e,t,n;Object(Se.f)(i.props.question.id,null===(e=i.props.answer)||void 0===e?void 0:e.id),null===(t=(n=i.props).onCancel)||void 0===t||t.call(n)})):(Object(Se.f)(i.props.question.id,null===(e=i.props.answer)||void 0===e?void 0:e.id),null===(t=(n=i.props).onCancel)||void 0===t||t.call(n)))},i.handleUploadStart=function(){i.setState({isUploading:!0})},i.handleUploadEnd=function(){i.setState({isUploading:!1})},i.handleUploadError=function(e,t){switch(t){case"video":i.handleError("video-upload-error");break;case"image":i.handleError("image-upload-error",e)}},i.handleAnswerOrgQuestionModalShow=function(){i.setState({answerModalShown:!0}),i.shouldAnswerOrgQuestionModalShow=!1},i.handleAnswerModalHide=function(){i.setState({answerModalShown:!1})},i.updateDraftSettings=function(){i.hasSettingsChange=!0,i.syncDraft()},i.syncDraftImmediately=i.props.reporter.recordError(Ca.a.draftSave,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.state.content,n=i.props,a=n.reporter,o=n.draft,r=i.state.lastUpdatedTime,l=t.toHTML(),s=Math.floor(Date.now()/1e3);e=!r||i.startCompositionTime-r>180?s-i.startCompositionTime:s-r,i.setState({isTyping:!1});var u,d=i.props.answer,b=(d=void 0===d?{}:d).attachment;u=i.videoAnswerEditable||"zvideo"===(null==b?void 0:b.type)?"video_answer":"video"===(null==b?void 0:b.type)?"video_answer_v2":"normal";var f=i.isVideoAnswer?t.getAttachment():null==o?void 0:o.attachment,p=i.hasSettingsChange||(i.isVideoAnswer?Boolean(f||l):Boolean(l));i.hasSettingsChange=!1;var h=i.getDraftSettings(i.isVideoAnswer);return p?i.updateDraft(l,e,u,f,h).then((function(e){var t;null!=e&&null!==(t=e.payload)&&void 0!==t&&t.updatedTime&&i.setState({lastUpdatedTime:e.payload.updatedTime}),i.loggingDeltaTime=!1,a.reportSuccess(Ca.a.draftSave),D.a.trackEvent(Object(c.a)(i),{action:"AutoSave"})}),(function(e){throw a.reportFail(Ca.a.draftSave,e),e})).finally((function(){delete i.startCompositionTime})):(a.reportSuccess(Ca.a.draftSave),Promise.resolve(i.deleteDraft()))})),i.syncDraft=Object(z.a)(i.syncDraftImmediately,2e3),i.getDraftSettings=function(e){var t=i.props,n=t.answer,a=t.disclaimers,o=t.settings,r=t.isReediting,c={},l=(0,t.getFormData)(),s=l.isDisclaimerChecked,u=l.disclaimerType,d=l.rewardTagline,b=l.pushActivity,f=l.commentPermission,p=l.reshipmentSettings,h=l.isReport;if(!r){var m=i.props.currentUser.caEnabled?"need_payment":"allowed";c.reshipmentSettings=p||m,c.commentPermission=f||"all"}return c.canReward=Boolean(d),c.tagline=d,e||(a&&a.length&&(!n||o)&&(c.disclaimerStatus=s?"open":"close",c.disclaimerType=u||"none"),c.commercialReportInfo={is_report:!!h},void 0!==b&&(c.pushActivity=b)),c},i.updateDraft=function(){for(var e=i.props,t=e.question.id,n=e.draft,a=e.addDraft,o=e.updateDraft,r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return n?o.apply(void 0,[t].concat(c)):a.apply(void 0,[t].concat(c))},i.focus=function(){i.editable&&i.editable.focus()},i.hasVideo=function(){return!!i.editable&&i.editable.hasVideo()},i.hasADLinkCard=function(){return!!i.editable&&i.editable.hasADLinkCard()},i.hasFeeConsultCard=function(){return!!i.editable&&i.editable.hasFeeConsultCard()},i.hasMCNLinkCard=function(){return!!i.editable&&i.editable.hasMCNLinkCard()},i.hasCommercialReport=function(){var e=i.props.getFormData().commercialReportInfo;return null==e?void 0:e.isReport},i.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;i.setState({commentPermission:n})},i.handleReshipmentSettings=function(e){"need_payment"!==e||i.props.currentUser.caEnabled||window.open("/copyright/invite"),i.setState({reshipmentSettings:e})},i.handleError=function(e,t){Object(ne.b)(e,t,i.props.showNotification)},i.handleBeforeVideoUpload=function(){var e=i.props.question;return!e.relationship||!e.relationship.isAnonymous},i.handleReverted=function(e){i.editable.resetWithValue(e.draft.content)},i.getDraftStatus=function(){var e=i.props.draft,t=i.state,n=t.isTyping,a=t.dateNow;return e?e.updating||n?"草稿保存中…":e.updated&&a<1e3*e.updatedTime+6e4?"草稿已保存":e.updateFailed?Object(d.b)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):C()(ha||(ha=Object(o.a)(["草稿保存于",""])),Object(I.toRelativeString)(e.updatedTime)):""},i.handleEditGGRCard=function(e){var t=e.type,n=e.payload,a=i.state.mcnEditingGood,o=i.props.updateLinkCard;"goodsEditor/submitNewGoodsInfo"!==t?"goodsEditor/closeGoodsEditor"!==t||i.setState({mcnEditingGood:null}):o(Object.assign(Object.assign({},a),{},{title:null==n?void 0:n.title})).finally((function(){i.setState({mcnEditingGood:null}),i.editable.handleCommand("edit-mcn-link-card:".concat(a.id))}))},i.shouldShowProfit=function(){return i.props.showUserProfitButton&&!i.isVideoAnswer},i.createEditorPlugins=function(){var e,t,n;return[Object(St.a)({type:"question",id:i.props.question.id,draftType:null!==(e=i.props.answer)&&void 0!==e&&e.id?"answer":void 0,draftId:null===(t=i.props.answer)||void 0===t?void 0:t.id,syncDraft:i.syncDraft}),Object(Tt.a)({getshowldShowToolbarButton:function(){return!i.isVideoAnswer},getAllInviters:i.getAllInviters,inviterQuery:i.props.inviterQuery,getInitialThankInviterInfo:function(){return i.props.thankInviterInfo}}),Object(At.a)({shouldDisabled:function(){return i.props.question.relationship.isAnonymous},shouldShow:function(){return i.shouldShowProfit()},getContentInfo:function(){var e;return{type:"answer",id:null===(e=i.props.answer)||void 0===e?void 0:e.id}}}),Object(Rt.a)(),Object(It.a)({sourceType:"answer",sourceId:null===(n=i.props.question)||void 0===n?void 0:n.id})]},i.renderRichInput=function(){var e=i.props,t=e.answer,n=(t=void 0===t?{}:t).attachment,a=e.answer,o=e.question,r=e.isReediting,c=e.isPuQuestion,l=e.draft,s=e.defaultValue,u=i.state,b=u.toolbarMenuAttention,f=u.scheduledPublishAt,p=u.initialScheduledPublishAt,h="".concat(r?"修改":"写","回答...");if("commercial"===o.questionType&&!c){h="这是一个「".concat("品牌提问","」，请在回答前了解：「").concat("品牌提问","」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。")}i.isVideoAnswer&&(h="详细介绍下视频（选填）");var m,v=i.videoAnswerEditable||"video_answer"===(null==l?void 0:l.type)||"zvideo"===(null==n?void 0:n.type);if(l)m=null==l?void 0:l.attachment;else if("zvideo"===(null==n?void 0:n.type))m=n.zvideo;else if("video"===(null==n?void 0:n.type)){var g;m=Object.assign(Object.assign({},null===(g=n.video)||void 0===g?void 0:g.videoInfo),{},{videoId:n.attachmentId})}var O={ref:function(e){return i.editable=e},answer:a,question:o,toolbarMenuAttention:b,scheduledPublishAt:f,initialScheduledPublishAt:p,placeholder:h,draft:l,defaultValue:s,isLegacyVideoAnswer:v,defaultVideo:m,videoAnswerEditable:i.videoAnswerEditable,videoAnswerPublished:i.videoAnswerPublished,editableReady:i.editableReady,handleChangeContent:i.onChangeContent,handleAfterChangeContent:i.onAfterChangeContent,handleFocusWithAuth:i.onFocus,handleSelectText:i.onSelectText,handleSubmit:i.handleSubmit,handleError:i.handleError,handleLoadStart:i.onLoadStart,handleLoadEnd:i.handleLoadEnd,handleUploadStart:i.handleUploadStart,handleUploadEnd:i.handleUploadEnd,handleUploadError:i.handleUploadError,handleBeforeVideoUpload:i.handleBeforeVideoUpload,handleMCNLinkCardEdit:function(e,t){i.setState({mcnEditingGood:t})},isVideoAnswer:i.isVideoAnswer,handleInsertZVideo:i.handleInsertZVideo,getToolbarSidePlugins:i.getToolbarSidePlugins,createEditorPlugins:i.createEditorPlugins,getToolbarMenuPlugins:i.getToolbarMenuPlugins,getEditorBeforePlugins:i.getEditorBeforePlugins,setUseScheduledPublish:i.setUseScheduledPublish,allowToolbar:!1,onAnyChange:i.handleAnyChange};return Object(d.b)(Nt.a,Object.assign({},O))},i.handleAnyChange=function(e){var t=e.editorState;i.setState({editorState:t})},i.handleKeyCommand=function(e){if(!i.editable)return"not-handled";var t=i.editable.handleKeyCommand(e);return"toggle-catalog"===e&&requestAnimationFrame((function(){i.forceUpdate()})),t},i.queryCommandEnable=function(e,t){return!!i.editable&&i.editable.queryCommandEnable(e,t)},i.queryCommandState=function(e,t){return!!i.editable&&i.editable.queryCommandState(e,t)},i.toggleHelpDocumentModal=function(){i.setState({showHelpDocumentModal:!i.state.showHelpDocumentModal})},i.getRightAreaContainer=function(){return i.rightAreaContainer};var l=i.props,s=l.defaultValue,u=l.draft,b=u?u.editableContent:s,f=u?u.updatedTime:0;return i.state={draft:b,content:{toHTML:function(){return b}},isEmpty:!b,isTyping:!1,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:f,showInsertableVideoUploader:!1,mcnEditingGood:null,initialScheduledPublishAt:void 0,scheduledPublishAt:void 0,thankInviterInfo:e.thankInviterInfo||e.inviterFromNotification,editorState:null,showHelpDocumentModal:!1,rightArea:null},i.hasEdited=!1,i}return Object(i.a)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting,a=e.activeTabKey;return t&&t.autoSendingCreations&&a===_.a.textAnswer&&!n}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.reporter,o=t.draft,r=t.question.id;(0,t.getBio)(r),n.reportRequest(Ca.a.editableInit),o&&n.reportRequest(Ca.a.draftLoad),this.shouldAnswerOrgQuestionModalShow=!V.a.getKnown();var i=this.props,c=i.fillCurrentUserIfNeeded,l=i.getUserProfitPermission,s=c(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);l(),Promise.resolve(s).then((function(){q.a.getActionsByNames(["a_draft_history",e.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then((function(t){var n=Object(a.a)(t,1)[0];n&&(e.setState({toolbarMenuAttention:n.description}),q.a.markAsShown(n),"auto_pub_answer"===n.guide_name&&D.a.trackCardShow(e,{id:5738}))})),D.a.trackCardShow(e,{id:5729,name:"回答"})})),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return window.name="",e.state.isUploading||e.composition||e.syncDraft.pending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval((function(){return e.setState({dateNow:Date.now()})}),6e4),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus,hasVideo:this.hasVideo,hasADLinkCard:this.hasADLinkCard,hasMCNLinkCard:this.hasMCNLinkCard,hasFeeConsultCard:this.hasFeeConsultCard,toggleFullscreen:this.toggleFullscreen,hasCommercialReport:this.hasCommercialReport,hasEditorContent:function(){return!e.state.isEmpty}})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.reporter,a=this.state,o=e.currentUser,r={};a.reshipmentSettings||void 0===o.caEnabled||(r.reshipmentSettings=o.caEnabled?"need_payment":"allowed"),a.commentPermission||void 0===o.lastCommentPermission||(r.commentPermission=o.lastCommentPermission),Object.keys(r).length&&this.setState(r),this.draftLoaded||this.state.draft||this.props.draft||!e.draft||(n.wrapAutoRecord(Ca.a.draftLoad,(function(){var n=e.draft.editableContent;n&&(t.setState({draft:n,isEmpty:!n,content:{toHTML:function(){return n}}}),t.editable&&!t.editable.toHTML()&&t.editable.resetWithValue(n))}))(),this.draftLoaded=!0)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,a=n.focusing,o=n.thankInviterInfo,r=this.props,i=r.tagline,c=r.inviterFromNotification;if(i){var l=N.a.get("rewardNotication");a&&!l&&(this.setState({rewardNotication:!1}),N.a.set("rewardNotication",!0),this.timeout=setTimeout((function(){t.setState({rewardNotication:!0})}),2e3))}o||!c||e.inviterFromNotification||this.setState({thankInviterInfo:c})}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getCloneContent",value:function(){return this.getEditorState().getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,a=e.deleteDraft;if(n)return a(t.id)}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.isReediting,a=t.useMediumEditor,r=t.draft,i=this.state,c=i.content,l=i.scheduledPublishAt,s=n&&this.isVideoAnswer,u=c.toHTML()||"",b=a?we:Ce;return Object(d.c)(b,{hideScrollButton:s,getContaner:function(){return e.form},children:[Object(d.b)(S.Text,{color:"GBL05A",fontSize:"14px",ml:s?"0":"24px",children:C()(ma||(ma=Object(o.a)(["正文字数：","字"])),K(u,!0))}),Object(d.b)(S.Text,{color:"GBL05A",fontSize:"14px",ml:"auto",children:this.getDraftStatus()}),a&&n&&Object(d.b)(P.c,{zaType:"Button",zaText:!0,color:"grey",preset:"secondary",css:{marginLeft:"24px"},onClick:this.onCancel,children:r?"保存草稿并离开":"取消"}),Object(d.b)(wt.a,{canSubmit:this.canSubmit(),handleSubmit:this.handleSubmit,isReediting:n,scheduledPublishAt:l,type:"answer",css:{marginLeft:"24px"}})]})}},{key:"videoAnswerPublished",get:function(){var e=this.props.answer,t=(e=void 0===e?{}:e).attachment;return["zvideo","video"].includes(null==t?void 0:t.type)}},{key:"videoAnswerEditable",get:function(){return this.props.activeTabKey===_.a.videoAnswer}},{key:"isVideoAnswer",get:function(){return this.videoAnswerPublished||this.videoAnswerEditable}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.isReediting,o=t.answer,r=(o=void 0===o?{}:o).answerType,i=t.question,c=t.currentUser,l=t.answer,s=t.draft,u=t.settings,b=t.activeTabKey,f=t.useMediumEditor,p=t.showUserProfitButton,h=this.state,m=h.deleteDraftModalShown,v=h.showInsertableVideoUploader,g=h.mcnEditingGood,O=h.editorState,y=h.showHelpDocumentModal,C=h.initialScheduledPublishAt,w=h.scheduledPublishAt,x=h.rightArea,k=f?{offset:52,container:function(){return e.form}}:{getStyle:function(){return{width:"100%",top:0,left:0}}};return Object(d.c)(B.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(i.id),author_member_hash_id:c.id},children:[Object(d.c)("form",{ref:function(t){e.form=t},className:j()("AnswerForm",n),onSubmit:function(e){return e.preventDefault()},noValidate:!0,css:[{borderBottom:"none"},f?{".AnswerForm-editor .Catalog.isCatalogV2":{width:"140px",marginLeft:"-164px"}}:{".AnswerForm-editor .Catalog.isCatalogV2":{marginLeft:"-260px"}}],children:[Object(d.c)("div",{children:[Object(d.b)(ba.a,{editorFrom:f?"answer-pc-editor-modified":"answer-pc-editor-full"}),this.editable&&Object(d.b)(R.a,Object.assign(Object.assign({},k),{},{children:Object(d.b)("div",{css:function(e){return{display:"flex",justifyContent:"center",margin:"0px auto",background:e.colors.GBK99A}},children:Object(d.b)(da,{editorState:O,onCommand:this.handleKeyCommand,queryCommandEnable:this.queryCommandEnable,queryCommandState:this.queryCommandState,showUserProfitButton:p,isVideoAnswer:this.isVideoAnswer,onInsertVideoClick:this.handleInsertZVideo,onNeedHelp:this.toggleHelpDocumentModal,useMediumEditor:f},b)})})),Object(d.c)("div",{css:function(e){return[{position:"relative",".Editable":{paddingTop:"1px",minHeight:"calc(100vh - 120px)"}},f?{width:"694px",margin:"0 auto",background:e.colorMod(e.colors.GBK10C).alpha(.45),".Editable-content":{paddingBottom:"62px"}}:{width:"782px",margin:"20px auto",".AnswerForm-editor .RichText--editable":{paddingLeft:64,paddingRight:64}}]},children:[Object(d.b)("div",{css:{position:"absolute",top:0,bottom:0,left:"100%",width:"calc((100vw - 100%)/2 - 20px)"},ref:function(t){return e.rightAreaContainer=t},children:x===ka&&Object(d.b)(ja,{question:i,onClose:function(){e.setState({rightArea:null})},getContainer:this.getRightAreaContainer})}),!f&&Object(d.b)(ya,{question:i,onClick:function(){return e.setState({rightArea:ka})}}),Object(d.b)("div",{css:{minHeight:"calc(100vh - 120px)"},children:this.renderRichInput()}),Object(d.b)(Ct,{question:i,answer:l,isVideoAnswer:this.isVideoAnswer,isReediting:a,setUseScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,initialScheduledPublishAt:C,scheduledPublishAt:w,draft:s,settings:u,css:!f&&{paddingLeft:"54px",paddingRight:"64px"},updateDraftSettings:this.updateDraftSettings})]})]}),"org"===i.questionType&&Object(d.b)(V.a,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===i.questionType&&Object(d.b)(U.a,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),Object(d.b)(xt.a,{title:"清除草稿",subtitle:a?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:m,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),v&&Object(d.b)(F.a,{show:v,onClose:function(){return e.setState({showInsertableVideoUploader:!1})},onZVideoSubmit:function(t){e.setState({showInsertableVideoUploader:!1}),e.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(t)))},onVideoSubmit:function(t){e.setState({showInsertableVideoUploader:!1}),e.editable.handleCommand("insert-video-card",t)}}),Object(d.b)(L.b,{className:"AnswerForm-MCNEditor",title:"编辑商品",onClose:function(){e.setState({mcnEditingGood:null})},children:Boolean(g)&&Object(d.b)(M.a,{className:"AnswerForm-MCNEditorIframe",src:Object(wa.a)({title:g.title,originTitle:g.originTitle,source:g.source,sourceId:g.sourceId,productTypeName:g.productTypeName}),onMessage:this.handleEditGGRCard})}),Object(d.b)(ie,{shown:y,onClose:function(){return e.toggleHelpDocumentModal()}}),Object(d.b)(kt.a,{onClose:function(){window.location.href="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(l.id)},shown:"slideshow"===r})]}),this.renderFooter()]})}}]),n}(p.Component);Sa.propTypes={activeTabKey:f.a.string,question:f.a.object,isReediting:f.a.bool,defaultValue:f.a.string,getFormData:f.a.func,reporter:f.a.object},Sa.defaultProps={isReediting:!1};var Aa={addDraft:Q.b,updateDraft:Q.lb,deleteDraft:Q.j,showNotification:X.h,fillCurrentUserIfNeeded:$.e,updateSettingsDisclaimer:Y.M,loadLabel:J.e,getUserProfitPermission:H.b,updateLinkCard:Z.b,fetchAllInviters:Q.o,getBio:Q.q};t.a=Object(v.compose)(g.withRouter,Object(m.connect)((function(e,t){var n,a,o=e.entities,r=o.questions,i=o.drafts,c=void 0===i?{}:i,l=e.question,s=t.location.query.inviter,u=Object(te.b)(e),d=Object($.b)(e),b=Object(Q.d)(e,t.question.id),f=s&&(null==b||null===(n=b.find)||void 0===n?void 0:n.call(b,(function(e){return e.id===s}))),p=c["question_".concat(t.question.id)];return{campaign:u,question:r[t.question.id]||t.question,draft:p,currentUser:d,isPuQuestion:Boolean(l&&l.brand&&l.brand.isPuQuestion),disclaimers:l.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null,showUserProfitButton:e.userProfit.permission.visible,thankInviterInfo:null===(a=Object(J.c)(e,t.answer))||void 0===a?void 0:a.thankInviterInfo,allInviters:b,inviterQuery:s,inviterFromNotification:f,isOffice:Object(ee.isOfficeSelector)(e)}}),Aa),ke.b,Et.e)(Sa)},1465:function(e,t,n){"use strict";n.d(t,"a",(function(){return pt})),n.d(t,"b",(function(){return mt}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n.n(s),d=n(19),b=n(24),f=n(3),p=n.n(f),h=n(13),m=n.n(h),v=n(35),g=n(1110),O=n(36),j=n(122),y=n(74),C=n(948),w=n(1633),x=function(e){var t=e.className,n=void 0===t?"":t,a=e.extra,o=void 0===a?{}:a,r=o.ua,i=void 0===r?{}:r,c=o.isVip,l=void 0!==c&&c,s="https://www.zhihu.com/settings/filter";return u.a.createElement(y.b,{block:"KfeCollection-FeedBlockEntry"},u.a.createElement(y.a,{zaType:"Button",extra:{link:{url:s}},onClick:function(){l?Object(w.a)(s,i):C.a.show()},zaText:"设置屏蔽关键词",shouldTrackShow:!0},u.a.createElement("div",{className:m()("KfeCollection-FeedBlockEntry-root",n)},u.a.createElement("div",{className:"KfeCollection-FeedBlockEntry-title"},"设置屏蔽关键词"),u.a.createElement("img",{className:"KfeCollection-FeedBlockEntry-img",src:"https://pic3.zhimg.com/v2-e5f10c5bc3593ca097cb7bfc5502d9b9.png"}))))};x.propTypes={className:p.a.string,extra:p.a.shape({ua:p.a.object,isVip:p.a.bool}).isRequired};var k=x,S=n(1204),A=n(1317),R=n(1736),T=n(1286),I=n(1741),E=n(1723),N=n(138),B=n(178),z=n(900),L=n(955),P=n(1206),M=n(944),D=n(415),_=n(1408);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var U=function(e){Object(r.a)(n,e);var t=V(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.liveCourse,o=t.liveCourse,r=o.id,i=o.type,c=o.subject,s=o.courseMemberCount,u=o.liveCount,d=o.price,b=o.promotionPrice,f=o.headImageMobile,p=o.likedNum,h=o.isLiked,m=o.description,v=o.speakers,g=void 0===v?[]:v,O=t.lastreadTouchable,j=t.renderOptions,y=t.zaIds.options,C="/lives/courses/".concat(r);if(n!==z.c.interactive)return Object(l.b)(z.e,{data:a,link:C,title:Object(l.b)("a",{href:C,target:"_blank",rel:"noopener noreferrer",children:c})});Boolean(g.length)&&"".concat(g[0].member.name).concat(g.length>1?"等":"","的私家课 · ").concat(u," 节课");var w={id:r,type:i};return Object(l.c)("div",{className:"LiveCourseItem",children:[f&&Object(l.b)("a",{className:"LiveCourseItem-cover",href:C,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:Object(N.imgUrl)(f,"640w"),srcSet:"".concat(Object(N.imgUrl)(f,"r")," 2x"),alt:c})}),Object(l.b)(z.e,{data:a,link:C,title:Object(l.b)("a",{href:C,target:"_blank",rel:"noopener noreferrer",children:c}),lastreadTouchable:O,children:Object(l.c)(L.b,{excerpt:"",limit:60,limitWithImage:60,html:m||"",data:a,extra:Object(l.c)(z.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"参与人数："}),Object(B.formatNumber)(s)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"课程节数："}),Object(B.formatNumber)(u)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"特价："}),"number"==typeof b?Object(l.c)("span",{className:"LiveItem-price",children:[Object(_.a)(b),Object(l.b)("del",{children:Object(_.a)(d)})]}):Object(_.a)(d)]})]}),children:[Object(l.b)(P.a,Object.assign(Object.assign({},w),{},{liked:h,count:p,icon:"thank"})),Object(l.b)(M.a,Object.assign(Object.assign({},w),{},{url:C,title:c})),j&&j((function(){return e.contentItem}),y)]})})]})}}]),n}(s.Component);U.propTypes={preset:p.a.oneOf(Object.values(z.c)),renderOptions:p.a.func,zaIds:p.a.object},U.defaultProps={zaIds:{}};var F=Object(D.b)((function(e){var t=e.liveCourse,n=e.trackCardShow,a=void 0===n||n;return{module:"LiveCourseItem",card:{content:{type:"LiveCourse",id:t.id}},trackCardShow:a}}))(U),q=n(1200),H=n(1209),G=n(49),K=n(1030),W=n.n(K),Z=n(46),Q=n(1003),Y=n(1710),J=n(1489),X=n(938),$=n(1414),ee=n(1631),te=n(42),ne=(n(1632),n(1039));function ae(e){var t=e.target,n=e.target,a=n.id,o=n.attachment.url,r=n.description,i=n.title,c=n.author,u=n.thumbnailExtraInfo,d=n.isReviewing,f=n.isUpdateReviewing,p=e.lastreadTouchable,h=e.preset,m=void 0===h?"primary":h,v=e.onToggleExpand,g=e.renderOptions,O=e.renderActionButtons,j=e.toggleUninterest,y=u||{},C=y.videoId,w=y.url,x=Object(b.useSelector)((function(e){return W()(c)?e.entities.users[c]:c})),k=Object(Z.o)(x),S=Object(s.useState)(!1),A=Object(G.a)(S,2),R=A[0],T=A[1],I=Object(s.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),E=Object(G.a)(I,2),N=E[0],B=E[1],P=Object(ee.a)(m,R,x),M=Object(G.a)(P,1)[0];return Object(l.c)(z.e,{className:"ZVideoItem",data:t,title:Object(l.b)("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:i}),link:o,meta:M,expandedHeight:0,lastreadTouchable:p,"data-zop":JSON.stringify({authorName:null==x?void 0:x.name,itemId:a,title:i,type:"zvideo"}),children:[k&&(d||f)&&Object(l.b)(J.a,{}),R&&C&&Object(l.b)("div",{className:"ZVideoItem-video",children:Object(l.b)(ne.a,{className:"ZVideoItem-player",type:"video",src:"https://".concat(te.a.videoHost,"/video/").concat(C,"?").concat(new URLSearchParams([["itemId",a],["itemType","zvideo"]]).toString()),iframeProps:{allowFullScreen:!0},zaProps:{token:a}})}),R&&Object(l.b)($.a,{}),Object(l.b)(L.b,{excerpt:Object(Q.c)(r),html:r,cover:w,hasVideo:!0,truncateDisabled:!0,allowCollapseWithEmptyExcerpt:!0,expanded:R,onToggleExpend:function(e){T(e),v&&v(e)},children:Object(l.b)(Y.a,{className:"ZVideoItem-toolbar",zvideo:t,author:x,commentsShown:N.commentsShown,onCommentButtonClick:function(e,t){return B(t)},renderOptions:g,renderActionButtons:O,toggleUninterest:j})}),Object(l.b)(X.a,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:t,shown:N.commentsShown,commentPattern:N.commentPattern,autoFocus:N.autoFocus,onClose:function(){return B(Object.assign(Object.assign({},N),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})}ae.defaultProps={renderOptions:function(){return[null]}};var oe=ae,re=n(7);function ie(e,t,n){return t&&n?function(t,a){var o=e.relationship,r=(o=void 0===o?{}:o).isAuthor,i={toggler:Object(l.b)(O.c,{preset:"plain",className:"OptionsButton",icon:g.a,"aria-label":"更多"}),reversed:!0,onOpen:function(){return function(e,t){v.a.trackEvent(e,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))}(t(),a)},menuClassName:"ItemOptions-selfMenu",itemClassName:"ItemOptions-selfMenuItem"};if(!r)return Object(re.e)(j.c,Object.assign(Object.assign({},i),{},{key:"options"}),n({itemClassName:"ItemOptions-selfMenuItem",getContainer:t}))}:null}var ce=n(30),le=n(190),se=n(1032),ue=n(205);function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var be=function(e){Object(r.a)(n,e);var t=de(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.eventcard,a=n.linkTitle,o=n.linkUrl,r=n.title,i=n.eventUrl,c=n.extraInfo,s=n.content,u=n.bannerUrl,d=t.eventcard,b=t.lastreadTouchable,f=t.renderOptions,p=t.zaIds.options;return Object(l.c)("div",{className:"EventcardItem",children:[u&&Object(l.b)("a",{className:"EventcardItem-cover",href:i,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:u,srcSet:"".concat(u," 2x"),alt:r})}),Object(l.c)(z.e,{data:d,link:i,onRef:function(t){e.contentItem=t},title:Object(l.b)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:r}),lastreadTouchable:b,children:[Object(l.b)("div",{className:"EventcardItem-content",children:s}),Object(l.c)(z.a,{children:[Boolean(a)&&Object(l.b)(ue.a,{a:!0,color:"blue",to:o,children:a}),Object(l.b)("span",{children:c}),f&&f((function(){return e.contentItem}),p)]})]})]})}}]),n}(s.Component);be.propTypes={preset:p.a.oneOf(Object.values(z.c)),zaIds:p.a.object,renderOptions:p.a.func};var fe=Object(D.b)((function(e){var t=e.trackCardShow;return{module:"EventItem",trackCardShow:void 0===t||t}}))(be),pe=n(2114),he=n(1570);var me=function(e){var t=e.question,n=e.lastreadTouchable,a=e.renderOptions,o=e.zaInfos,r=t.id,i=t.title,c=t.content,u=t.excerpt,d=t.viewCount,b=t.answerCount,f=t.recReason,p=o.options,h=o.title,m=o.expand,v=Object(s.useState)(!0),g=Object(G.a)(v,2),O=g[0],j=g[1],y=Object(s.useState)(null),C=Object(G.a)(y,2),w=C[0],x=C[1];return Object(l.c)("div",{className:"TopstoryQuestionAskItem",children:[Object(l.c)("div",{className:"TopstoryQuestionAskItem-hint",children:[Object(l.b)(pe.a,{center:!0}),f]}),Object(l.b)(z.e,{data:t,title:Object(l.b)("a",Object.assign(Object.assign({href:"/question/".concat(r),target:"_blank",rel:"noopener noreferrer"},h&&{"data-za-detail-view-id":h}),{},{children:i})),lastreadTouchable:n,onRef:x,children:Object(l.c)(L.b,{html:c,excerpt:u,limit:60,limitWithImage:60,zaIds:{expand:m},onToggleExpend:function(){return j(!O)},children:[Object(l.c)(ue.a,{className:"TopstoryQuestionAskItem-writeAnswerButton",preset:"outline",color:"blue",to:"/question/".concat(r,"?write"),target:"_blank","data-za-detail-view-id":5121,"data-za-detail-view-action":"Answer",children:[Object(l.b)(he.a,{}),"写回答"]}),Object(l.c)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[Object(B.formatNumber)(d)," 次浏览"]}),Object(l.c)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[Object(B.formatNumber)(b)," 个回答"]}),a&&a((function(){return w}),p)]})})]})},ve=n(1571),ge=n(449);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}function je(e){return e.closest(".TopstoryItem").querySelector(".ContentItem")}var ye=function(e){Object(r.a)(n,e);var t=Oe(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleToggleUninterest=function(){var t=e.props,n=t.zaIgnoreId,a=t.getContainer,o=e.props,r=o.item,i=r.id,c=r.type,l=r.ad,s=r.isUninterest,u=o.toggleUninterest,d=o.type,b="feed_advert"===c;b&&Object(le.c)(l.closeTrack);var f=b?je(e.el):a();return v.a.trackEvent(f,Object.assign({action:s?"UnIgnore":"Ignore",element:"Button",is_intent:!0},n&&{id:n})),u(i,d)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.ua,a=t.isVip,o=Object(l.b)(j.b,{className:this.props.itemClassName,onClick:this.handleToggleUninterest,onRef:function(t){e.el=t},children:"不感兴趣"}),r=Object(l.b)(j.b,{className:"TopstoryItem-menuItem",onClick:this.props.authRequired((function(){})),children:Object(l.b)(k,{extra:{ua:n,isVip:a}})});return"feed_advert"===this.props.item.type?Object(l.c)(j.c,{className:"TopstoryItem-rightButton",toggler:Object(l.c)(O.c,{onRef:function(t){e.el=t},className:"TopstoryItem-advertButton",preset:"plain",children:["广告",Object(l.b)(ve.a,{center:!0})]}),children:[Object(l.b)(j.b,{className:"TopstoryItem-menuItem",onClick:this.handleToggleUninterest,children:"不感兴趣"}),Object(l.b)(j.b,{className:"TopstoryItem-menuItem",tag:"a",target:"_blank",href:"/promotion-intro",children:"知乎广告介绍"}),r]}):Object(l.c)(s.Fragment,{children:[o,r]})}}]),n}(s.Component);ye.propTypes={zaIgnoreId:p.a.number,getContainer:p.a.func};var Ce=Object(b.connect)(null,{toggleUninterest:ge.q})(ye),we=n(999),xe=n(139),ke=n(1126),Se=n(924),Ae=n(902),Re=n(1480),Te=n(1288),Ie=n(86),Ee=Object.assign;var Ne=function(e){return u.a.createElement(Ie.a,Ee({width:"40",height:"40",viewBox:"0 0 40 40"},e),u.a.createElement("path",{d:"M20 12c6.904 0 12.5 5.596 12.5 12.5S26.904 37 20 37c-6.903 0-12.5-5.596-12.5-12.5S13.097 12 20 12zm0 16.826l3.222 2.061c.76.486 1.218.165 1.016-.72l-.886-3.892 2.867-2.572c.677-.608.494-1.165-.413-1.241l-3.734-.314-1.467-3.693c-.334-.841-.876-.841-1.21 0l-1.467 3.693-3.734.314c-.917.077-1.092.631-.413 1.24l2.867 2.573-.886 3.891c-.202.886.253 1.209 1.016.721L20 28.826zM29.525 3a1 1 0 01.79 1.612l-4.336 5.6a1 1 0 01-.79.388h-.446a1 1 0 01-.853-.479l-3.792-6.208A.6.6 0 0120.61 3h8.915zm-8.692 6.043a1 1 0 01-.83 1.557h-5.468a1 1 0 01-.81-.413l-4.06-5.6A1 1 0 0110.476 3h5.772a1 1 0 01.83.443l3.756 5.6z"}))},Be=function(e){return"FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"===e?{labelInfo:{foregroundColor:{alpha:1,group:"GYL02A"},backgroundColor:{alpha:.08,group:"GYL02A"},text:"专业",type:"recognition"},extra:{customIcon:Ne,customIconClassName:"FeedSource-recognizeIcon"}}:null},ze=n(2),Le=n(1285),Pe=n(982),Me=n(1746),De=/({})/,_e={people:{Component:Ae.a,type:"user"},topic:{Component:Pe.a},column:{Component:Le.a},roundtable:{Component:Me.a}},Ve=function(e){var t=e.actors,n=e.template,a=t.slice(0,5);return Object(l.b)(we.CJKSpace,{children:n.split(De).map((function(e){return"{}"===e?a.map((function(e,t){if(!_e[e.type])return Object(l.c)("span",{children:[e.title,t<a.length-1&&"、"]},e.id);var n=_e[e.type],o=n.Component,r=n.type,i=void 0===r?e.type:r,c=Object.assign(Object(ze.a)({},i,e),"people"===e.type&&{noBadge:!0});return Object(l.c)("span",{children:[Object(l.b)(o,Object.assign(Object.assign({},c),{},{children:e.name||e.title})),t<a.length-1&&"、"]},e.id)})):e}))})},Ue=/{}/,Fe=["pin","answer","article"],qe=["FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"],He=function(e,t){var n=e.feed,a=n.actionTextTpl,o=void 0===a?"":a,r=n.createdTime,i=n.actors,c=void 0===i?[]:i,s=n.verb,u=void 0===s?"":s,d=u.includes("MEMBER")&&1e3*r<=Date.now()&&Object(xe.toRelativeString)(r);if(Object(Te.b)(n)){var b=c[0],f=o.replace(Ue,"");return Object(l.b)("div",{className:"FeedSource",children:Object(l.c)("div",{className:"FeedSource-firstline",children:[Object(l.c)(we.CJKSpace,{children:[Object(l.b)(Ae.a,{user:b,noHoverCard:!1,badgeProps:{css:{margin:"0 .3em"}},children:b.name}),f]}),d&&[Object(l.b)(ke.a,{},"bull"),d]]})})}return Object(l.c)("div",{className:"FeedSource",children:[Object(l.c)("div",{className:"FeedSource-firstline",children:[Object(l.b)(Ve,{actors:c,template:o}),qe.includes(u)&&Object(l.b)(Re.a,Object.assign(Object.assign({},Be(u)),{},{className:"FeedSource-labelIcon"})),d&&[Object(l.b)(ke.a,{},"bull"),d]]}),n.target&&Fe.includes(n.target.type)&&Object(l.b)(Se.a,{className:"FeedSource-byline",author:n.target.author,preset:"plain",extra:!1})]})};He.contextTypes={currentUser:p.a.object};var Ge=He,Ke=n(989),We=n(1478),Ze=n(4),Qe=n(131),Ye=n.n(Qe),Je=n(1212),Xe=Ye()((function(e){return e.findIndex((function(e){return"annotation"===e.name}))}),(function(e){return e.map((function(e){return e.name})).join("-")})),$e=Object(l.b)(Je.a,{annotationDetail:{showOuter:!0,reasonDescription:"品牌提问"}},"BrandQuestion");var et=[function(e,t){var n=e.componentList,a=t.item.target,o=t.tabType;if(!Boolean("recommend"===o&&a.question&&"commercial"===a.question.questionType))return e;var r=Xe(n);if(n[r].component){var i=Object(Ze.a)(n);return i[r]={name:"annotation",component:$e},Object.assign(Object.assign({},e),{},{componentList:i})}return e}],tt=n(6),nt=n(1012);var at=function(e){var t=e.node,n=e.data,a=void 0===n?{}:n;return Object(s.useEffect)((function(){if(t&&a){var e=Object(tt.camelizeKeys)(a).viewXTracks,n=void 0===e?[]:e;Object(nt.g)(t,n)}}),[t,a]),null},ot=n(897),rt=n(75),it=n(1124),ct=n(181),lt=function(e){return null==e?void 0:e.forEach((function(e){return Object(rt.e)(e,{})}))};function st(e){var t=e.promotionExtra,n=e.children,a=Object(s.useRef)(null),o=Object(s.useMemo)((function(){return Object(it.a)(t)}),[t]);Object(s.useEffect)((function(){o&&(lt(o.impression_tracks),Object(ot.onViewedOnce)(a.current,(function(){return lt(o.view_tracks)})))}),[o]);var r=Object(s.useCallback)((function(){o&&lt(o.click_tracks)}),[o]);return Object(l.c)("div",{ref:a,children:[Object(l.b)(ct.a,{children:Object(l.b)(at,{data:o,node:a.current})}),"function"==typeof n?n(r):n]})}st.propTypes={promotionExtra:p.a.string.isRequired,children:p.a.oneOfType([p.a.func,p.a.any]).isRequired};function ut(e){var t,n=e.item,a=e.tabType,o=e.isFollowTab,r=e.preset,i=e.hasAuthorBeforeContent,c=e.handleExpand,u=e.renderIgnoreButton,d=n.actionTextTpl,b=n.actors,f=n.target,p=n.promotionExtra,h=function(e){var t;if(2===(null===(t=e.attachment)||void 0===t?void 0:t.type)){var n=e.attachment,a=n.parentTitle,o=n.isComplete,r=n.parentContentToken,i=n.parentPlayCount,c=n.parentVoteupCount,l=n.splitStart,s={videoId:e.thumbnailExtraInfo.videoId,zvideoId:r,title:a,playCount:i,voteupCount:c,isComplete:o,startTime:l};return Object.assign(Object.assign({},e),{},{videoAnswerData:s})}return e}(f),m="recommend"===a,v=Object(l.b)(Ke.a,Object.assign(Object.assign({answer:h},i&&{formatContent:Te.a}),{},{action:o&&"{}赞同了回答"===d&&"voted",actor:null==b?void 0:b[0],preset:r,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,renderExtraOptions:u,onToggleExpand:c,zaInfos:se.c,renderActionButtons:(t={tabType:a,item:n},function(e){var n=et.reduce((function(e,n){return n(e,t)}),e);return Object(We.b)(n)}),hideCommercialInviteLabel:!0,shouldAlwaysShowPlayer:m,isRecommend:m}));return p?Object(l.b)(st,{promotionExtra:p,children:function(e){return Object(s.cloneElement)(v,{trackPromotionClick:e})}}):v}ut.propTypes={item:p.a.object.isRequired,tabType:p.a.oneOf(["recommend","follow"]),isFollowTab:p.a.bool,preset:p.a.string,hasAuthorBeforeContent:p.a.bool,handleExpand:p.a.func,renderIgnoreButton:p.a.func};var dt=n(1062);function bt(e){var t=e.item,n=e.isFollowTab,a=e.preset,o=e.hasAuthorBeforeContent,r=e.handleExpand,i=e.renderOptions,c=t.actionTextTpl,u=t.actors,d=t.target,b=t.promotionExtra,f=Object(l.b)(dt.a,Object.assign(Object.assign({article:d},o&&{formatContent:Te.a}),{},{action:n&&("{}赞了文章"===c||"{}赞同了文章"===c)&&"voted",actor:null==u?void 0:u[0],preset:a,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,zaInfos:se.c,onToggleExpand:r,renderOptions:i}));return b?Object(l.b)(st,{promotionExtra:b,children:function(e){return Object(s.cloneElement)(f,{trackPromotionClick:e})}}):f}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}bt.propTypes={item:p.a.object.isRequired,isFollowTab:p.a.bool,preset:p.a.string,hasAuthorBeforeContent:p.a.bool,handleExpand:p.a.func,renderOptions:p.a.func};var pt={question:"question",answer:"answer",question_ask:"question_ask",article:"article",column:"column",collection:"collection",roundtable:"roundtable",live_course:"live_course",live:"live",ebook:"ebook",pin:"pin",eventcard:"eventcard",zvideo:"zvideo"},ht=function(e){Object(r.a)(n,e);var t=ft(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={preset:"special-plain",hasAuthorBeforeContent:"recommend"===e.props.type,limitProps:{}},e.handleExpand=function(t){var n=e.props.type;e.setState({preset:"recommend"===n&&t?"plain":"special-plain",hasAuthorBeforeContent:"recommend"===n&&!t})},e.handleToggleUninterest=function(t){var n=e.props,a=n.item.id,o=n.toggleUninterest,r=n.type;return v.a.trackEvent(t,{id:se.c.ignore,action:"Ignore",element:"Button",is_intent:!0}),o(a,r)},e.renderZVideoOptions=function(t,n){return[Object(l.c)(j.c,{toggler:Object(l.b)(O.c,{preset:"plain",className:"OptionsButton",icon:g.a,"aria-label":"更多"}),children:[Object(l.b)(j.b,{className:"ZVideoToolbar-menuItem",children:Object(l.b)(O.c,{preset:"plain",onClick:e.handleToggleUninterest,label:"不感兴趣"})}),Object(l.b)(j.b,{className:"TopstoryItem-menuItem",onClick:e.context.authRequired((function(){})),children:Object(l.b)(k,{extra:{ua:t,isVip:n}})})]},"options")]},e.renderItem=function(t,n){var a,o=e.props.ua,r=e.context.currentUser,i=((null==r?void 0:r.vipInfo)||{}).isVip,c=t.target,s=t.actor,u=t.actionTextTpl,d=e.state,b=d.preset,f=d.hasAuthorBeforeContent,p="follow"===n,h="recommend"===n,m=h?function(a){return Object(l.b)(Ce,Object.assign({type:n,item:t,zaIgnoreId:se.c.ignore,ua:o,isVip:i,authRequired:e.context.authRequired},a))}:void 0,v=m?ie(c,r,m):void 0;switch(c.type){case pt.question:return Object(l.b)(S.a,{preset:z.c.interactive,question:c,trackCardShow:!1,lastreadTouchable:!0,zaInfos:se.c,renderOptions:v});case pt.question_ask:return Object(l.b)(me,{question:c,lastreadTouchable:!0,zaInfos:se.c,renderOptions:v});case pt.answer:return Object(l.b)(ut,{item:t,tabType:n,isFollowTab:p,preset:b,hasAuthorBeforeContent:f,handleExpand:e.handleExpand,renderIgnoreButton:m});case pt.article:return Object(l.b)(bt,{item:t,isFollowTab:p,preset:b,hasAuthorBeforeContent:f,handleExpand:e.handleExpand,renderOptions:v});case pt.column:return Object(l.b)(A.a,{preset:z.c.interactive,column:c,trackCardShow:!1,lastreadTouchable:!0,zaInfos:se.c,renderOptions:v});case pt.collection:return Object(l.b)(T.a,{preset:z.c.interactive,favlist:c,trackCardShow:!1,lastreadTouchable:!0,zaInfos:se.c,renderOptions:v});case pt.roundtable:return Object(l.b)(I.a,{preset:z.c.interactive,roundtable:c,trackCardShow:!1,lastreadTouchable:!0,zaInfos:se.c});case pt.live_course:return Object(l.b)(F,{liveCourse:c,preset:z.c.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:v,zaIds:se.c});case pt.live:return Object(l.b)(E.a,{live:c,preset:z.c.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:v,zaIds:se.c});case pt.ebook:return Object(l.b)(R.a,{ebook:c,preset:z.c.interactive,trackCardShow:!1,lastreadTouchable:!0});case pt.pin:return Object(l.b)(q.a,{action:"{}赞了想法"===u&&"voted",actor:s,pin:c,preset:"plain",trackCardShow:!1,lastreadTouchable:!0});case pt.zvideo:return 1===(null===(a=c.attachment)||void 0===a?void 0:a.type)?Object(l.b)(oe,{target:c,preset:b,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(o,i)},lastreadTouchable:!0}):Object(l.b)(H.a,{zvideo:c,preset:b,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(o,i)},lastreadTouchable:!0,shouldAlwaysShowPlayer:h,showMetaAfterPlayer:h});case pt.eventcard:return Object(l.b)(fe,{trackCardShow:!1,eventcard:c,lastreadTouchable:!0,renderOptions:v,zaIds:se.c});default:return null}},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.type,a=e.className;return t.target.isDelete?null:Object(l.c)("div",{className:m()("Feed",a),children:["follow"===n&&Object(l.b)(Ge,{feed:t}),this.renderItem(t,n)]})}}]),n}(s.PureComponent);ht.propTypes={item:p.a.object.isRequired,type:p.a.oneOf(["recommend","follow"]),className:p.a.string},ht.contextTypes={currentUser:p.a.object,authRequired:p.a.func};var mt=Object(d.compose)(Object(b.connect)((function(e){return{ua:e.env.userAgent}})),Object(D.b)((function(e){var t=e.item,n=t.id,a=t.attachedInfo,o=t.target,r=t.target,i=r.id,c=r.type,l=t.dataZaIndex;return{module:"FeedItem",index:String(void 0===l?0:l),isAd:!1,attachedInfoBytes:a,card:{card_type:"Feed",feed_id:n,has_image:Boolean(o.thumbnailExtraInfo&&"image"===o.thumbnailExtraInfo.type),has_video:Boolean(o.thumbnailExtraInfo&&"video"===o.thumbnailExtraInfo.type),content:Object.assign(Object.assign({type:ce.ab[c]},Object(le.a)(c,i)),{},{video_id:o.thumbnailExtraInfo&&o.thumbnailExtraInfo.videoId})},view:{id:2743},trackCardShow:!0}})))(ht)},1467:function(e,t,n){"use strict";var a=n(4),o=n(49),r=n(1),i=n(0),c=n.n(i),l=n(24),s=n(13),u=n.n(s),d=n(64),b=n.n(d),f=n(2799),p=n(35),h=n(74),m=n(43),v=n(415),g=n(2794),O=n(854),j=n(2800),y=n(414),C=n(26),w=function(e){return c.a.createElement(C.a,e,c.a.createElement("path",{d:"M18.175 15.761c0 .104-.101.207-.203.207H9.265v-2.065L4 17.103 9.265 20.2v-2.065h8.707c1.215 0 2.228-1.032 2.228-2.27V10.6h-2.025v5.161zm-12.15-7.37c0-.204.101-.306.202-.306h8.708v2.043L20.2 7.064 14.935 4v2.043H6.228C5.013 6.043 4 7.063 4 8.39V13.6h2.025V8.391z"}))};w.defaultProps={name:"Sync"};var x=w,k=n(1471),S=n(36),A=n(157),R=n(210),T=n(939),I=n(158),E=n(1135),N=n(141),B=n.n(N),z=n(1096),L=n(19);var P=n(473),M=n(428),D=n(29),_=n(1016),V=n(500),U=n(87);var F=function(e){var t=e.handleConfirm;return Object(r.c)(U.b,{title:"什么是「联合创作」",closeButton:null,children:[Object(r.b)("div",{children:"知乎鼓励视频作者引用图文作者的优质图文内容进行视频联合创作。视频审核成功后，平台会以私信的方式告知图文作者。若图文作者同意升级为联合创作，引用关系会变为联合创作关系。在原图文内容下会展示联合创作的视频，同时图文作者会在他的个人主页下发布视频。"}),Object(r.b)(U.a,{direction:"horizontal",children:Object(r.b)(S.c,{preset:"primary",color:"blue",onClick:t,children:"我知道了"})})]})},q=n(55),H=n(86),G=Object.assign;var K=function(e){return c.a.createElement(H.a,G({width:"12",height:"12",fill:"none",viewBox:"0 0 12 12"},e),c.a.createElement("rect",{width:"10",height:"10",x:"1",y:"1",stroke:"#D3D3D3",rx:"1.5",strokeWidth:"2"}))},W=Object.assign;var Z=function(e){return c.a.createElement(H.a,W({width:"12",height:"12",fill:"none",viewBox:"0 0 12 12"},e),c.a.createElement("path",{fill:"#06F",d:"M0 2a2 2 0 012-2h8a2 2 0 012 2v8a2 2 0 01-2 2H2a2 2 0 01-2-2V2zm5.136 6.608l.214.214 4.276-4.277-.707-.707-3.574 3.574-2.138-2.138-.707.707 2.632 2.632.004-.005z",fillRule:"evenodd",clipRule:"evenodd"}))};var Q=function(e){var t=e.handleCancel,n=e.handleAgree,a=Object(i.useState)(!1),c=Object(o.a)(a,2),l=c[0],s=c[1];return Object(r.c)(U.b,{title:"联合创作协议",closeButton:null,color:"GBK02A",children:[Object(r.b)(q.Box,{mb:"24px",children:"知乎鼓励视频作者引用图文作者的优质图文内容进行视频联合创作。视频审核成功后，平台会以私信的方式告知图文作者。若图文作者同意升级为联合创作，引用关系会变为联合创作关系。在原图文内容下会展示联合创作的视频，同时图文作者会在他的个人主页下发布视频。"}),Object(r.c)(q.Flex,{fontSize:"14px",lineHeight:"24px",alignItems:"center",children:[l?Object(r.b)(Z,{css:{paddingRight:"11px"},onClick:function(){return s(!1)}}):Object(r.b)(K,{css:{paddingRight:"11px"},onClick:function(){return s(!0)}}),"我已充分阅读并同意",Object(r.b)(q.Text,{display:"inline-block",color:"GBL01A",css:{cursor:"pointer"},onClick:function(){return window.open("/term/coopcreation","_blank")},children:"《联合创作用户协议》"})]}),Object(r.c)(U.a,{direction:"horizontal",children:[Object(r.b)(S.c,{onClick:t,children:"取消"}),Object(r.b)(S.c,{preset:"primary",color:"blue",onClick:n,disabled:!l,children:"同意"})]})]})},Y=n(246),J=n(42),X=Object.assign;var $=function(e){return c.a.createElement(H.a,X({width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},e),c.a.createElement("path",{fill:"#121212",d:"M2.333 2.667a1 1 0 100 2 1 1 0 000-2zm2.334 5a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1zm0 4a1 1 0 011-1h8a1 1 0 010 2h-8a1 1 0 01-1-1zm-3.334-4a1 1 0 112 0 1 1 0 01-2 0zm1 3a1 1 0 100 2 1 1 0 000-2zm2.334-7a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1z",fillRule:"evenodd",clipRule:"evenodd"}),c.a.createElement("mask",{id:"id-801532647-a",style:{maskType:"alpha"},width:"14",height:"11",x:"1",y:"2",maskUnits:"userSpaceOnUse"},c.a.createElement("path",{fill:"#fff",d:"M2.333 2.667a1 1 0 100 2 1 1 0 000-2zm2.334 5a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1zm0 4a1 1 0 011-1h8a1 1 0 010 2h-8a1 1 0 01-1-1zm-3.334-4a1 1 0 112 0 1 1 0 01-2 0zm1 3a1 1 0 100 2 1 1 0 000-2zm2.334-7a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1z",fillRule:"evenodd",clipRule:"evenodd"})),c.a.createElement("g",{mask:"url(#id-801532647-a)"},c.a.createElement("path",{fill:"#8590A6",d:"M0 0h16v16H0z"})))},ee="https://".concat(J.a.wwwHost,"/image-text-cite?").concat(new URLSearchParams({source:"upload-video"}));var te=function(e){var t=e.handleCancel,n=e.handleConfirm,a=e.handleChange,o=e.link;return Object(r.c)(q.Box,{px:"24px",mt:"68px",children:[Object(r.b)(A.a,{multiline:!0,placeholder:"粘贴你想引用的内容链接",rows:7,css:{height:"180px !important",width:"100%",margin:"12px 0",paddingTop:"12px"},onChange:a,value:o}),Object(r.c)(h.a,{extra:{link:{url:ee}},zaAction:"OpenUrl",zaText:"cite_image_text_go_list",zaType:"Button",as:S.c,preset:"plain",onClick:function(){return window.open(ee,"_blank")},children:[Object(r.b)($,{css:{marginRight:"8px",verticalAlign:"middle"}}),"可视化图文内容库"]}),Object(r.c)(U.a,{direction:"horizontal",children:[Object(r.b)(S.c,{onClick:t,children:"取消"}),Object(r.b)(h.a,{zaText:"cite_image_text_stick_click",zaType:"Button",as:S.c,preset:"primary",color:"blue",onClick:function(){return n(o)},disabled:!o,children:"确认"})]})]})},ne=n(416),ae=n(923),oe=n(83),re=n(30);var ie=function(e){var t=e.handleSelect,n=Object(l.useSelector)((function(e){return e.zvideos.collectData})),a=n.list,o=void 0===a?[]:a,c=n.isFetching,s=n.isEnd,u=void 0!==s&&s,d=n.next,b=Object(l.useDispatch)();return Object(i.useEffect)((function(){b(Object(M.e)())}),[b]),Object(r.b)(r.a,{children:c||o.length>0?Object(r.c)(ne.b,{onLoad:function(){b(Object(M.e)(d))},isLoading:c,isDrained:u,css:{flex:"1",overflow:"auto",marginTop:"68px"},getContainer:function(e){return e},placeholder:Object(r.b)(ne.a,{className:"List-item"}),children:[Object(r.b)(q.Text,{lineHeight:"25px",mb:"8px",px:"24px",color:"#1A1A1A",children:"以下为可引用的内容"}),o.map((function(e,n){var a=e.target,o=a.type,i=a.id,c=a.author,l=c.avatarUrl,s=c.name,u=c.description,d=a.title,b=a.question,f=(b=void 0===b?{}:b).title,p=a.excerpt,m="article"===o?d:f;return Object(r.b)(h.b,{content:{token:String(i),type:re.ab[o]},children:Object(r.c)(h.a,{view:{elementLocation:{card:{index:n}}},shouldTrackShow:!0,zaType:"Card",as:q.Box,onClick:function(){return t({type:o,id:i})},css:{borderRadius:"6px",padding:"8px 24px",boxShadow:"inset 0px -0.5px 0px #EBEBEB","&:hover":{background:"rgba(0, 102, 255, 0.08)",cursor:"pointer"}},children:[Object(r.c)(q.Flex,{fontSize:"14px",pb:"7px",alignItems:"center",children:[Object(r.b)(q.Image,{src:l,sx:{borderRadius:2},height:18,width:18,mr:"8px"}),Object(r.b)(q.Text,{color:"GBK03A",fontWeight:"600",children:s}),u&&Object(r.b)(q.Text,{color:"GBK04A",fontWeight:"600",children:"，"}),Object(r.b)(q.Text,{color:"GBK04A",css:Object.assign({flex:1},Object(oe.d)(1)),children:u})]}),Object(r.b)(q.Text,{color:"GBK02A",fontWeight:"600",fontSize:"15px",children:m}),Object(r.b)(q.Text,{fontSize:"14px",lineHeight:"25px",color:"#1A1A1A",children:p})]})},n)}))]}):Object(r.b)(ae.a.EI1,{image:"noCollection",content:"你还没有收藏可引用的内容"})})},ce=[{title:"粘贴链接",key:"sticky"},{title:"我的收藏夹",key:"collect"}];var le=function(e){var t=e.handleCancel,n=e.handleSelect,a=Object(i.useState)("sticky"),c=Object(o.a)(a,2),s=c[0],u=c[1],d=Object(i.useState)(""),b=Object(o.a)(d,2),f=b[0],p=b[1],h=Object(m.d)((function(e){p(e.target.value)})),v=Object(l.useDispatch)(),g=Object(m.d)((function(e){"sticky"===s?v(Object(M.c)(e)).then((function(e){var t=e.payload,n=t.canReference,a=t.contentType,o=t.contentId;return n?v(Object(M.i)({type:a,id:o})):Promise.reject()})).then((function(e){var t=e.payload;n(t)})).catch((function(){v(Object(D.h)("此内容不可引用","red"))})):"collect"===s&&v(Object(M.i)(e)).then((function(e){var t=e.payload;n(t)}))}));return Object(r.b)(U.b,{closeButton:null,css:{height:"416px",width:"536px"},size:"fullPage",children:Object(r.c)(q.Box,{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",children:["sticky"===s&&Object(r.b)(te,{link:f,handleChange:h,handleCancel:t,handleConfirm:g}),"collect"===s&&Object(r.b)(ie,{handleSelect:g}),Object(r.b)(Y.b,{css:{display:"flex",justifyContent:"center",borderBottom:"0",paddingTop:"10px",position:"absolute",width:"100%"},children:ce.map((function(e){var t=e.title,n=e.key;return Object(r.b)(Y.a,{onClick:function(){return u(n)},children:Object(r.b)(q.Box,{css:function(e){return{color:s===n?e.colors.GBK02A:e.colors.GBL05A,fontWeight:600,fontSize:"15px",lineHeight:"30px",position:"relative","&:hover":{cursor:"pointer"},"&::after":s===n?{content:"''",position:"absolute",top:"46px",left:"50%",transform:"translateX(-50%)",height:"4px",width:"36px",background:e.colors.GBL01A,borderRadius:"29px"}:{}}},children:t})},n)}))})]})})},se=n(1500),ue=n(876),de=n(1410),be=n(217);function fe(e){var t=e.club,n=t.id,a=t.name,o=t.description,i=t.avatar,c=t.isJoined,l=t.joinType,s=t.postCount,u=t.allowSync,d=e.selected,b=e.onSelect,f=e.handleJoinButtonClick;return Object(r.c)("div",{className:"VideoSyncToClubModalItem",children:[Object(r.c)(q.Flex,{css:{width:"calc(100% - ".concat(c?20:92,"px)")},children:[Object(r.b)("img",{src:i,className:"VideoSyncToClubModalItem-avatar",alt:""}),Object(r.c)("div",{className:"VideoSyncToClubModalItem-info",role:"button",tabIndex:0,onClick:b,children:[Object(r.b)("div",{className:"VideoSyncToClubModalItem-title Highlight",dangerouslySetInnerHTML:{__html:a}}),Object(r.b)("div",{className:"VideoSyncToClubModalItem-description Highlight",dangerouslySetInnerHTML:{__html:o}}),Object(r.c)("div",{className:"VideoSyncToClubModalItem-data",children:[s,"条内容"]})]})]}),c?Object(r.b)(T.a,{checked:d,onChange:b,size:16,disabled:!u}):Object(r.b)(S.c,{preset:"secondary",color:"blue",onClick:function(){return f(n,l)},children:"all"===l?"加入圈子":"申请加入"})]})}var pe=function(e){var t=e.shown,n=e.onClose,a=e.selectedClub,c=e.onSelectClub,s=Object(i.useState)(a),u=Object(o.a)(s,2),d=u[0],b=u[1],f=Object(i.useState)(""),p=Object(o.a)(f,2),h=p[0],m=p[1],v=Object(i.useState)(""),g=Object(o.a)(v,2),O=g[0],j=g[1],C=Object(l.useSelector)((function(e){return e.club.explore.candidateSyncClubs})),w=Object(l.useSelector)((function(e){var t;return(null===(t=e.search)||void 0===t?void 0:t.clubentityByQuery[O])||{isFetching:!1,isDrained:!1,ids:[]}})),x=w.isFetching,k=w.isDrained,R=w.ids,T=Object(l.useSelector)((function(e){return e.entities})),E=T.searchClub,N={data:R.filter((function(e){return Boolean(e)})).map((function(e){var t=E[e]||{},n=t.object;return Object.assign(Object.assign({},t),{},{object:(T.clubs||{})[n]})})),isLoading:x,paging:{isEnd:k}},B=Object(l.useDispatch)();Object(i.useEffect)((function(){a||b(null)}),[a]);var z=Object(i.useRef)(null),L=Object(i.useCallback)((function(){return z.current.parentElement}),[z]),P=function(){null!=z&&z.current&&(z.current.parentElement.scrollTop=0)},M=Object(i.useCallback)((function(e){var t=e.target.value;m(t),O&&!t&&(j(""),P())}),[O]),D=Object(l.useSelector)((function(e){var t;return null===(t=e.search)||void 0===t?void 0:t.nextOffset.clubentityByQuery})),_=Object(i.useCallback)((function(e){B(Object(be.o)(Object.assign({type:"clubentity",query:e},O===e?D:{limit:10,offset:0})))}),[D,O,B]),F=Object(i.useCallback)((function(e){P(),O!==e&&(_(e),j(e))}),[O,_]),H=Object(i.useCallback)((function(e){13===e.keyCode&&h.trim()&&(document.activeElement.blur(),F(h.trim()))}),[h,F]),G=Object(i.useCallback)((function(){O?_(h):B(Object(V.b)())}),[B,h,O,_]),K=O?N:C,W=K.data,Z=void 0===W?[]:W,Q=K.paging,Y=(Q=void 0===Q?{}:Q).isEnd,J=K.isLoading,X=function(e,t){"all"===t?B(Object(de.a)(e)).then((function(){B(Object(V.b)(!0))})):window.open("https://www.zhihu.com/club/".concat(e),"_blank")},$=Object(r.c)("div",{className:"VideoSyncToClubModal-Empty",children:[Object(r.b)("img",{alt:"",className:"VideoSyncToClubModal-Empty--Image",src:"https://pic4.zhimg.com/80/v2-111b363c733ca84c2fd2044eca77503b_hd.png"}),Object(r.b)("div",{className:"VideoSyncToClubModal-Empty--Text",children:"暂时没有找到「".concat(O,"」的相关圈子")})]}),ee=Object(r.b)(ne.b,{getContainer:L,onLoad:G,isLoading:Boolean(J),placeholder:Object(r.b)(ne.a,{className:"List-item"}),isDrained:Boolean(Y),className:"VideoSyncToClubModal-list",children:Object(r.c)(q.Box,{height:"100%",ref:z,children:[Z.map((function(e){var t=O?Object.assign(Object.assign({},e.object),{},{id:e.object.id,avatar:e.object.avatarUrl,postCount:e.object.clubPostCount}):e;return Object(r.b)(fe,{club:t,selected:(null==d?void 0:d.id)===t.id,onSelect:function(){t.isJoined&&(t.allowSync?b((null==d?void 0:d.id)===t.id?null:t):I.a.alert("无法同步到取消关联主站的圈子。"))},handleJoinButtonClick:X},t.id)})),Y&&Object(r.b)("div",{className:"VideoSyncToClubModal-list--notMore",children:"没有更多内容"})]})});return Object(r.b)(U.b,{title:"选择圈子",size:"large",onClose:n,maskClosable:!1,children:t&&Object(r.c)(r.a,{children:[Object(r.b)(A.a,{className:"VideoSyncToClubModal-search",value:h,placeholder:"搜索圈子",before:Object(r.b)(ue.a,{size:16,className:"VideoSyncToClubModal-search--icon"}),after:Boolean(h)&&Object(r.b)(y.a,{size:12,onClick:function(){m(""),j(""),P()},className:"VideoSyncToClubModal-search--icon"}),onChange:M,onKeyUp:H}),O&&O===N.preSearchText&&0===Z.length?$:ee,Object(r.c)(U.a,{direction:"horizontal",children:[Object(r.b)(S.c,{onClick:n,children:"返回"}),Object(r.b)(S.c,{preset:"primary",color:"blue",onClick:function(){c(d)},disabled:!d,children:"确定"})]})]})})},he=n(294),me=n(431),ve=n(1482),ge=n(1411),Oe=n(1412),je=n(1732),ye=function(e){var t=e.defaultVideo,a=e.title,c=e.description,s=e.active,u=t.id,d=Object(l.useDispatch)(),b=Object(i.useRef)(),f=Object(i.useState)(0),p=Object(o.a)(f,2),v=p[0],g=p[1],O=Object(ge.a)("zvideo_contribution_form:should_hide_tooltip"),j=Object(o.a)(O,2),y=j[0],C=j[1],w=Object(i.useState)(!1),x=Object(o.a)(w,2),k=x[0],S=x[1],A=Object(i.useState)(!1),R=Object(o.a)(A,2),T=R[0],I=R[1],E=Object(me.o)(u).answer,N=(E=void 0===E?{}:E).canContribute,B=void 0!==N&&N,z=Object(me.p)(u),L=Object(m.e)((function(){return n.e(43).then(n.bind(null,2869))})),P=Object(Oe.a)(),M=Object(i.useCallback)((function(){a?(d(Object(me.l)(null)),S(!0),I(!1)):d(Object(D.h)("输入标题后才可以投稿哦"))}),[a,d]),_=Object(i.useCallback)((function(){S(!0),I(!0)}),[]);return Object(i.useEffect)((function(){d(Object(me.h)(u,"edit"))}),[d,u]),Object(i.useEffect)((function(){var e,n;t.file?(n=t.file,new Promise((function(e,t){try{var a=document.createElement("video");a.preload="metadata",a.onloadedmetadata=function(){URL.revokeObjectURL(a.src),e(Math.floor(1e3*a.duration))},a.onerror=t,a.src=URL.createObjectURL(n)}catch(e){t(e)}}))).then((function(e){d(Object(me.g)({zvideoId:u,duration:e})),g(e)})):(null!==(e=t.video)&&void 0!==e&&e.duration&&g(parseInt(1e3*t.video.duration)),d(Object(me.g)({zvideoId:u})))}),[t,d,u]),Object(m.l)((function(){return C(!0)}),!y&&B&&s?5e3:null),B||z.length?Object(r.c)(h.b,{block:"Contribution",children:[Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)(h.e,{ref:b,zaType:"Block",className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--top",children:"投稿问题"}),Object(r.b)(he.a,{placement:"top-left",isOpen:s&&!y,target:b.current,css:{".Popover-arrow":{transform:"translate(-35px, 0)"}},children:"投稿到问题，让更多人看到你的视频"}),Object(r.c)("div",{children:[Object(r.b)("div",{css:function(e){return{color:e.colors.GBK06A,fontSize:13,marginBottom:8,marginTop:4,lineHeight:"15px"}},children:"投稿到问题可以获得更多曝光哦～"}),Object(r.b)(ve.a,{zvideoId:u,showCreateButton:!0,onAdd:M,onSelect:_})]})]}),Boolean(L)&&!P?Object(r.b)(L,{show:k,defaultVideo:t,title:a,description:c,duration:v,closeAfterEdit:T,onClose:function(){return S(!1)}}):Object(r.b)(je.a,{show:k,defaultVideo:t,title:a,description:c,duration:v,closeAfterEdit:T,onClose:function(){return S(!1)},isProduce:!0})]}):null},Ce=[{value:"original",label:"原创"},{value:"reprint",label:"转载"}],we="https://pic2.zhimg.com/v2-feb96045745dac939aa2a900c6d6845d.jpg",xe=[{name:"answer",id:1},{name:"article",id:2}];var ke,Se=(ke=xe,function(e){var t=e.citeId,n=e.citeType;return{reference:{referenceType:n&&ke.find((function(e){return e.name===n})).id||0,referenceContentToken:t?String(t):"0"}}}),Ae=function(e){return function(t){return t?e.find((function(e){return e.id===t})).name:null}}(xe),Re=n(1751),Te=n(56).useAbParam,Ie=function(){return"1"===Te("video_point")};t.a=function(e){var t,c,s,d,C,w,N,U,q,H,G,K,W,Z,Y,J,X,$,ee=e.className,te=e.defaultVideo,ne=e.defaultCampaignId,ae=e.status,oe=e.checkFormValid,ie=e.onRemove,ce=e.onSubmit,ue=e.isEditing,de=e.shouldShowScheduledPublish,be=e.active,fe=e.citeType,he=e.citeId,me=Object(i.useState)([]),ve=Object(o.a)(me,2),ge=ve[0],Oe=ve[1],je=Ie(),xe=Object(i.useState)(null),ke=Object(o.a)(xe,2),Te=ke[0],Ee=ke[1],Ne=Object(i.useState)(!1),Be=Object(o.a)(Ne,2),ze=Be[0],Le=Be[1],Pe=Object(i.useState)(!1),Me=Object(o.a)(Pe,2),De=Me[0],_e=Me[1],Ve=Ae(null==te||null===(t=te.reference)||void 0===t?void 0:t.referenceType),Ue=Object(i.useState)({citeType:Ve||fe||null,citeId:(null==te||null===(c=te.reference)||void 0===c?void 0:c.referenceContentToken)||he||null}),Fe=Object(o.a)(Ue,2),qe=Fe[0],He=Fe[1],Ge=Object(i.useState)(!1),Ke=Object(o.a)(Ge,2),We=Ke[0],Ze=Ke[1],Qe=Object(i.useState)(!1),Ye=Object(o.a)(Qe,2),Je=Ye[0],Xe=Ye[1],$e=Object(i.useState)(!1),et=Object(o.a)($e,2),tt=et[0],nt=et[1],at=f.a(new Date,30),ot=Object(i.useState)(!1),rt=Object(o.a)(ot,2),it=rt[0],ct=rt[1],lt=Object(i.useState)(at),st=Object(o.a)(lt,2),ut=st[0],dt=st[1],bt=($=function(e){return e.zvideos.tagoreCategory},Object(l.useSelector)($,l.shallowEqual)),ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(l.useDispatch)(),o=Array.isArray(e),r=o?e:[e];return Object(i.useMemo)((function(){return o?r.map((function(e){return Object(L.bindActionCreators)(e,n)})):Object(L.bindActionCreators)(r[0],n)}),[n].concat(Object(a.a)(r),Object(a.a)(t)))}([M.g,M.z,M.q,M.r,M.o,M.l,D.h,M.t,M.i,M.f,M.h,M.a]),pt=Object(o.a)(ft,12),ht=pt[0],mt=pt[1],vt=pt[2],gt=pt[3],Ot=pt[4],jt=pt[5],yt=pt[6],Ct=pt[7],wt=pt[8],xt=pt[9],kt=pt[10],St=pt[11],At=Object(l.useSelector)((function(e){return e.zvideos.videoSource})),Rt=Object(i.useState)((null==te?void 0:te.title)||""),Tt=Object(o.a)(Rt,2),It=Tt[0],Et=Tt[1],Nt=Object(i.useState)(null!==(s=null==te?void 0:te.description)&&void 0!==s?s:""),Bt=Object(o.a)(Nt,2),zt=Bt[0],Lt=Bt[1],Pt=Object(i.useState)(null!==(d=null==te||null===(C=te.category)||void 0===C||null===(w=C.firstLevel)||void 0===w?void 0:w.id)&&void 0!==d&&d),Mt=Object(o.a)(Pt,2),Dt=Mt[0],_t=Mt[1],Vt=bt.find((function(e){return e.data.id===Dt})),Ut=Object(i.useState)(null!==(N=null==te||null===(U=te.category)||void 0===U||null===(q=U.secondLevel)||void 0===q?void 0:q.id)&&void 0!==N&&N),Ft=Object(o.a)(Ut,2),qt=Ft[0],Ht=Ft[1];Object(i.useEffect)((function(){xt().then((function(e){var t=e.payload.canRef,n=void 0!==t&&t;return Le(n),n?kt():(He({citeId:null,citeType:null}),Promise.reject())})).then((function(e){var t=e.payload.agreeState;_e(t)})).catch(b.a)}),[]);var Gt=function(e){var t=e.author,n=t.avatarUrl,a=t.name,o=e.type,r={headPhoto:n,name:a};if("article"===o){var i=e.imageUrl,c=e.title;r.contentPhoto=i,r.title=c}if("answer"===o){var l=e.question.title,s=e.thumbnailInfo,u=void 0===s?{}:s,d=B()(u,"thumbnails[0].url",null);d&&(r.contentPhoto=d),r.title=l}return r};Object(i.useEffect)((function(){var e=qe.citeId,t=qe.citeType;e&&t&&wt({type:t,id:e}).then((function(e){var t=e.payload||{};Ee(Gt(t))}))}),[]),Object(i.useEffect)((function(){bt.length||vt()}),[bt,vt]);var Kt=Object(i.useState)(Boolean(null==te||null===(H=te.category)||void 0===H||null===(G=H.firstLevel)||void 0===G?void 0:G.id)||Boolean(null==te||null===(K=te.category)||void 0===K||null===(W=K.secondLevel)||void 0===W?void 0:W.id)),Wt=Object(o.a)(Kt,2),Zt=Wt[0],Qt=Wt[1],Yt=Object(m.c)((function(e){gt(e).then((function(e){var t=e.payload.data[0];t&&(_t(t.firstLevel.id),Ht(t.secondLevel.id))}))}),300);Object(i.useEffect)((function(){Zt||Yt({title:It,type:"zvideo",content:zt})}),[It,zt,Zt,Yt]);var Jt=Object(i.useState)(null!==(Z=null==te?void 0:te.topics)&&void 0!==Z?Z:[]),Xt=Object(o.a)(Jt,2),$t=Xt[0],en=Xt[1],tn=Object(i.useState)(Boolean(null==te||null===(Y=te.topics)||void 0===Y?void 0:Y.length)),nn=Object(o.a)(tn,2),an=nn[0],on=nn[1],rn=Object(i.useState)(!1),cn=Object(o.a)(rn,2),ln=cn[0],sn=cn[1],un=Object(m.c)((function(e){Ot(e).then((function(e){var t=e.payload.data;t.length&&en(t)}))}),300);Object(i.useEffect)((function(){!an&&Dt&&qt&&un({type:"zvideo",text:It,firstLevelCategoryId:Dt,secondLevelCategoryId:qt,limit:6})}),[It,Dt,qt,an,un]);var dn=Object(i.useState)(null==te?void 0:te.imageUrl),bn=Object(o.a)(dn,2),fn=bn[0],pn=bn[1],hn=Object(i.useCallback)((function(e){return pn(e)}),[pn]);Object(i.useEffect)((function(){(!fn&&null!=te&&te.imageUrl||fn===we&&null!=te&&te.imageUrl&&te.imageUrl!==we)&&pn(te.imageUrl)}),[fn,te]);var mn=Object(i.useState)(null==te?void 0:te.zvideoType),vn=Object(o.a)(mn,2),gn=vn[0],On=vn[1],jn="published"===(null==te?void 0:te.zvideoState);Object(i.useEffect)((function(){if(At.isLoaded&&te.queryVideoId){var e;if(It||Et(At.title||""),!$t.length)en(null!==(e=At.topics)&&void 0!==e?e:[]);gn||On(At.zvideoType)}}),[At,It,$t,gn,te]);var yn=Object(i.useState)(null==te?void 0:te.campaign),Cn=Object(o.a)(yn,2),wn=Cn[0],xn=Cn[1],kn=Object(i.useState)(!1),Sn=Object(o.a)(kn,2),An=Sn[0],Rn=Sn[1],Tn=Object(i.useState)(!1),In=Object(o.a)(Tn,2),En=In[0],Nn=In[1],Bn=Object(i.useState)([]),zn=Object(o.a)(Bn,2),Ln=zn[0],Pn=zn[1],Mn=Boolean(null==Ln?void 0:Ln.length)&&!wn,Dn="published"===(null==te?void 0:te.zvideoState);Object(i.useEffect)((function(){jt().then((function(e){var t=e.payload;Pn(t.data)}))}),[jt]),Object(i.useEffect)((function(){var e=null==Ln?void 0:Ln.find((function(e){return e.id===ne}));!e||An||wn||xn(e)}),[ne,Ln,An,wn]);var _n=Object(m.c)((function(e,t){mt(e,t)}),300);Object(i.useEffect)((function(){te.id&&_n(te.id,Object.assign(Object.assign({title:It,description:zt,category:{firstLevel:Dt||void 0,secondLevel:qt||void 0},zvideoType:gn,topicIds:$t.map((function(e){return e.id||e.urlToken})),campaignId:(null==wn?void 0:wn.id)||"0",imageUrl:fn,isVisible:!0},Se(qe)),{},{chapters:ge}))}),[te.id,It,zt,Dt,qt,gn,$t,wn,fn,_n,qe,ge]);var Vn=Object(m.c)((function(e){return ht(e).then((function(e){var t,n,a,o,r,i,c,l,s=e.payload;s&&(!It&&Et(s.title),!fn&&s.imageUrl&&pn(s.imageUrl),!zt&&Lt(null!==(t=s.description)&&void 0!==t?t:""),!Dt&&_t(null!==(n=null===(a=s.category)||void 0===a||null===(o=a.firstLevel)||void 0===o?void 0:o.id)&&void 0!==n&&n),!qt&&Ht(null!==(r=null===(i=s.category)||void 0===i||null===(c=i.secondLevel)||void 0===c?void 0:c.id)&&void 0!==r&&r),(null==$t||!$t.length)&&en(null!==(l=s.topics)&&void 0!==l?l:[]),!gn&&On(s.zvideoType),!wn&&xn(s.campaign))}))}),300);Object(i.useEffect)((function(){te.id&&Vn(te.id)}),[te,Vn]);var Un=Object(l.useDispatch)(),Fn=Object(l.useSelector)((function(e){return e.club.explore.joinedClubs})),qn=(null==Fn||null===(J=Fn.data)||void 0===J?void 0:J.length)>0,Hn=Object(i.useState)(!1),Gn=Object(o.a)(Hn,2),Kn=Gn[0],Wn=Gn[1],Zn=Object(i.useState)(!1),Qn=Object(o.a)(Zn,2),Yn=Qn[0],Jn=Qn[1],Xn=Object(i.useState)(null),$n=Object(o.a)(Xn,2),ea=$n[0],ta=$n[1];Object(i.useEffect)((function(){Fn||Un(Object(V.c)())}),[Un,Fn]),Object(i.useEffect)((function(){ue&&te.id&&Ct(te.id).then((function(e){null!=e&&e.payload&&(ta(e.payload),Wn(!0))}))}),[ue,te,Ct]);var na=Boolean(te.id),aa=["uploading","uploadError"].includes(ae),oa=Object(m.d)((function(){St().then((function(e){var t=e.payload.success;void 0!==t&&t&&(Xe(!1),nt(!0),_e(!0))}))})),ra=Object(m.d)((function(e){Oe(Object(a.a)(e))})),ia=Object(m.e)((function(){return n.e(30).then(n.bind(null,2847))}));return Object(r.b)(h.b,{block:"VideoUploadForm",content:{type:"Zvideo",id:te.id},children:Object(r.c)(h.e,{zaType:"Block",className:u()("VideoUploadForm",ee),children:[Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required VideoUploadForm-itemTitle--topBelow",children:"封面"}),Object(r.c)("div",{className:"VideoUploadForm-imageContainer",children:[!aa&&Object(r.b)("img",{className:"VideoUploadForm-image",src:fn||we,alt:""}),aa&&Object(r.b)("div",{className:"VideoUploadForm-uploadStatus",children:"uploading"===ae?"视频上传中":"视频上传失败"}),Object(r.b)("div",{className:"VideoUploadForm-duration",children:Object(_.a)(null===(X=te.video)||void 0===X?void 0:X.duration)}),Object(r.b)(k.a,{triggerClassName:"VideoUploadForm-imageEditButton",useCoverCrop:!1,originVideo:te.file,onVideoPosterChange:hn,zvideoId:te.id,id:te.videoId})]})]}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"标题"}),Object(r.b)(A.a,{className:"VideoUploadForm-input",value:It,onChange:function(e){Et(e.target.value)},placeholder:"输入视频标题",large:!0,after:Object(r.b)("div",{className:"VideoUploadForm-itemLimit",children:"".concat(It.length,"/").concat(40)})}),It.length<5&&Object(r.c)("div",{className:"VideoUploadForm-itemError",children:["最少输入 ",5," 个字"]}),It.length>40&&Object(r.c)("div",{className:"VideoUploadForm-itemError",children:["已超出 ",It.length-40," 个字"]})]}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--topBelow",children:"简介"}),Object(r.b)(A.a,{className:"VideoUploadForm-input VideoUploadForm-input--multiline",value:zt,onChange:function(e){Lt(e.target.value)},placeholder:"填写视频简介，让更多人找到你的视频",multiline:!0,large:!0,rows:4,after:Object(r.b)("div",{className:"VideoUploadForm-itemLimit VideoUploadForm-itemLimit--multiline",children:"".concat(zt.length,"/").concat(300)})}),zt.length>300&&Object(r.c)("div",{className:"VideoUploadForm-itemError VideoUploadForm-itemError--multiline",children:["已超出 ",zt.length-300," 个字"]})]}),na&&Object(r.b)(ye,{defaultVideo:te,title:It,description:zt,active:be}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"所属领域"}),Object(r.c)("div",{className:"VideoUploadForm-selectContainer",children:[Object(r.c)(R.b,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:Dt,onChange:function(e){_t(e),Ht(!1),Qt(!0)},children:[!Vt&&Object(r.b)(R.a,{value:!1,text:"选择领域"},"all"),bt.map((function(e){var t=e.data;return Object(r.b)(R.a,{value:t.id,text:t.name},t.id)}))]}),Vt&&Object(r.c)(R.b,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:qt,onChange:function(e){Ht(e),Qt(!0)},children:[Object(r.b)(R.a,{value:!1,text:"选择领域"},"all"),Vt.children.map((function(e){var t=e.data;return Object(r.b)(R.a,{value:t.id,text:t.name},t.id)}))]})]})]}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required VideoUploadForm-itemTitle--topic",children:"绑定话题"}),Object(r.b)(P.a,{className:"VideoUploadForm-topicInput",value:$t,onChange:function(e){en(e),on(!0)},max:6,actived:ln,onToggleActived:function(){return sn(!ln)}})]}),je&&Object(r.b)(Re.b,{zvideo_id:te.id,defaultVideo:te,children:Object(r.b)(Re.a.Consumer,{children:function(e){return e.canUse&&Object(r.b)(ia,{onSubmit:ra,knowledges:ge,defaultVideo:te})}})}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"视频类型"}),Object(r.c)("div",{className:"VideoUploadForm-typeContainer",children:[Object(r.b)("div",{className:u()("VideoUploadForm-radioContainer",{"VideoUploadForm-radioContainer--disabled":jn}),children:Ce.map((function(e){return Object(r.c)("label",{className:"VideoUploadForm-radioLabel",children:[Object(r.b)(T.a,{className:"VideoUploadForm-radio",size:16,checked:e.value===gn,onChange:function(){On(e.value)},disabled:jn}),e.label]},e.value)}))}),"reprint"===gn&&Object(r.b)("div",{className:"VideoUploadForm-typeHint",children:"请确保转载视频符合版权使用规范，如被举报侵权，视频将会被删除"})]})]}),ze&&Object(r.c)("div",{className:"VideoUploadForm-item",css:{alignItems:"flex-start"},children:[Object(r.c)("div",{className:"VideoUploadForm-itemTitle",children:[Object(r.b)("span",{css:{marginRight:"4px",verticalAlign:"middle"},children:"联合创作"}),Object(r.b)(g.a,{size:16,fill:"#8590A6",css:{verticalAlign:"middle",cursor:"pointer"},onClick:function(){return Ze(!0)}})]}),Te?Object(r.b)(h.b,{content:{token:String(qe.citeId),type:re.ab[qe.citeType]},children:Object(r.c)(h.e,{zaType:"Card",view:{elementLocation:{card:{index:0}}},children:[Object(r.b)("div",{css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",lineHeight:"14px",marginBottom:"13px",textAlign:"right"}},children:Object(r.b)(S.c,{onClick:function(){"published"!==(null==te?void 0:te.zvideoState)?(Ee(null),He({citeId:null,citeType:null})):yt("视频已发布，无法删除引用内容","red")},css:{padding:"0",lineHeight:"1",border:"none"},children:"删除"})}),Object(r.c)("div",{css:function(e){return{width:"400px",padding:"12px 12px 12px 15px",background:e.colors.GBK10C,borderRadius:"3px",display:"flex",justifyContent:"space-between"}},children:[Object(r.c)("div",{children:[Object(r.b)("div",{css:function(e){return{color:e.colors.GBK03A,fontSize:"14px",lineHeight:"18px",marginBottom:"13px",fontWeight:"500"}},children:Te.title}),Object(r.c)("div",{children:[Object(r.b)("img",{css:{width:"16px",height:"16px",borderRadius:"50%",verticalAlign:"middle",objectFit:"cover"},src:Te.headPhoto,alt:""}),Object(r.b)("span",{css:function(e){return{fontSize:"13px",lineHeight:"18px",color:e.colors.GBK03A,marginLeft:"8px",verticalAlign:"middle"}},children:Te.name})]})]}),Te.contentPhoto&&Object(r.b)("img",{css:{width:"95px",height:"65px",borderRadius:"5px",objectFit:"cover"},src:Te.contentPhoto,alt:""})]})]})}):Object(r.b)(h.a,{zaText:"cite_image_text_content_click",zaType:"Button",as:S.c,onClick:function(){De?nt(!0):Xe(!0)},css:{lineHeight:"30px"},icon:O.a,preset:"plain",color:"blue",children:"引用图文内容"})]}),de&&Object(r.c)("div",{className:"VideoUploadForm-item VideoUploadForm-scheduledPublish",children:[Object(r.b)("span",{className:"VideoUploadForm-itemTitle",children:"定时发布"}),Object(r.b)(E.a,{className:"VideoUploadForm-scheduledPublish--switch",checked:it,onChange:function(e){return ct(e.target.checked)}}),it&&Object(r.c)(r.a,{children:[Object(r.b)(z.a,{className:"VideoUploadForm-scheduledPublish--timePicker",value:ut,min:at,onChange:function(e){dt(Date.parse(e))}}),Object(r.b)(g.a,{className:"VideoUploadForm-scheduledPublish--tooltip",size:18,"data-tooltip":"时间需至少设置在30分钟以后","aria-label":"时间需至少设置在30分钟以后","data-tooltip-position":"top"})]})]}),(Mn&&!Dn||wn)&&Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle",children:"绑定活动"}),Mn&&!Dn&&Object(r.c)("div",{role:"button",tabIndex:0,className:"VideoUploadForm-feature",onClick:function(){Nn(!0),Rn(!0)},children:[Object(r.b)(j.a,{className:"VideoUploadForm-featureIcon",size:20}),Object(r.b)("div",{className:"VideoUploadForm-featureName",children:"绑定活动"})]}),wn&&Object(r.c)("div",{className:u()("VideoUploadForm-feature",{"VideoUploadForm-feature--disabled":Dn}),children:[Object(r.b)(y.a,{text:!0,center:!0,size:6,css:{marginRight:4},onClick:function(){xn(null)}}),Object(r.b)(S.c,{preset:"plain",color:"blue",onClick:function(){Nn(!0),Rn(!0)},disabled:Dn,children:wn.title})]})]}),(qn||ea)&&!it&&Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle",children:"同步圈子"}),qn&&!ea&&Object(r.b)(v.a,{view:{id:8602},card:{content:{type:"Zvideo"}},trackCardShow:!0,children:Object(r.c)("div",{role:"button",tabIndex:0,className:"VideoUploadForm-feature",onClick:function(){Jn(!0)},children:[Object(r.b)(x,{className:"VideoUploadForm-featureIcon",size:20}),Object(r.b)("div",{className:"VideoUploadForm-featureName",children:"同步到圈子"})]})}),ea&&Object(r.b)(v.a,{view:{id:8603},card:{content:{id:ea.id,type:"Zvideo"}},trackCardShow:!0,children:Object(r.c)("div",{className:u()("VideoUploadForm-feature",{"VideoUploadForm-feature--disabled":Kn}),children:[Object(r.b)(y.a,{text:!0,center:!0,size:6,css:{marginRight:4},onClick:function(){ta(null)}}),Object(r.b)("span",{role:"button",tabIndex:0,dangerouslySetInnerHTML:{__html:ea.name},onClick:function(){Kn?I.a.alert("暂不支持修改已同步的圈子"):Jn(!0)}})]})})]}),Object(r.c)("div",{className:"VideoUploadForm-buttonGroup",children:[Object(r.b)(v.a,{module:"Content",card:{content:{type:"Zvideo",token:te.id}},children:Object(r.b)(h.a,{zaText:!0,zaType:"Button",zaBlock:"PublishVideo",zaAction:"Save",as:S.c,className:"VideoUploadForm-submitButton",preset:"primary",color:"blue",disabled:"uploadError"===ae,onClick:function(e){var t=function(e,t){var n=e.title,a=e.description,o=e.categoryFirstLevel,r=e.categorySecondLevelId,i=e.topics,c=e.zvideoType;if(!n)return"视频标题至少 ".concat(5," 个字");if(n.length<5)return"视频标题至少 ".concat(5," 个字");if(n.length>40)return"视频标题最多 ".concat(40," 个字");if(a.length>300)return"视频描述最多 ".concat(300," 个字");if(!o)return"请选择所属领域";if(!r)return"请选择所属二级领域";if(!i.length)return"请绑定话题";if(!c)return"请选择类型";if(t){var l=t();if(l)return l}}({title:It,description:zt,categoryFirstLevel:Vt,categorySecondLevelId:qt,topics:$t,zvideoType:gn},oe);if(t)return yt(t,"red");p.a.trackEvent(e.target,{id:7038,action:"Upload"},{button:{text:it?"定时发布":"发布视频"}});var n=Object.assign(Object.assign({id:te.id,videoId:te.videoId,title:It,description:zt,category:{firstLevel:Dt,secondLevel:qt},zvideoType:gn,topicIds:$t.map((function(e){return e.id||e.urlToken})),campaignId:null==wn?void 0:wn.id,clubId:null==ea?void 0:ea.id,imageUrl:fn,publishAt:ut},Se(qe)),{},{chapters:ge});ce(n,it)},children:it?"定时发布":"发布视频"})}),Object(r.b)(h.a,{zaText:!0,zaType:"Button",zaBlock:"CancelPublishVideo",zaAction:"Close",as:S.c,preset:"secondary",color:"blue",onClick:ie,children:"取消发布"})]}),Boolean(null==Ln?void 0:Ln.length)&&Object(r.b)(se.a,{shown:En,onClose:function(){Nn(!1)},defaultCampaignId:null==wn?void 0:wn.id,campaignList:Ln,onSubmit:function(e){Nn(!1),xn(e)}}),qn&&Object(r.b)(pe,{shown:Yn,onClose:function(){return Jn(!1)},selectedClub:ea,onSelectClub:function(e){ta(e),Jn(!1)}}),We&&Object(r.b)(F,{handleConfirm:function(){Ze(!1)}}),Je&&Object(r.b)(Q,{handleAgree:oa,handleCancel:function(){return Xe(!1)}}),tt&&Object(r.b)(le,{handleCancel:function(){return nt(!1)},handleSelect:function(e){var t=e.id,n=e.type,a=void 0===n?"":n;Ee(Gt(e)),He({citeId:t,citeType:a}),nt(!1)}})]})})}},1478:function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return I}));var a=n(1413),o=n(1),r=n(15),i=n(16),c=n(17),l=n(18),s=n(9),u=n(4),d=n(0),b=n(19),f=n(3),p=n.n(f),h=n(24),m=n(89),v=n.n(m),g=n(35),O=n(74),j=n(855),y=n(36),C=(n(122),n(79)),w=n(419),x=n(245),k=n(30);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var A={answer:p.a.object.isRequired,renderThankButtonText:p.a.func,zaInfo:p.a.number},R=[].concat(Object(u.a)(Object.keys(A)),["updateAnswerThank"]),T=function(e){Object(c.a)(n,e);var t=S(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).buttonRef=Object(d.createRef)(),e.handleUpdateThanked=e.context.authRequired((function(){var t=e.props,n=t.answer,a=n.id,o=n.relationship,r=(o=void 0===o?{}:o).isThanked,i=t.zVideoId,c=t.updateAnswerThank,l=t.zaInfo,s=!r;g.a.trackEvent(e.buttonRef.current,Object.assign({action:s?"Thank":"UnThank",element:"Button"},l&&{id:l})),c(a,s,{zVideoId:i})}),k.X.thank),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,a=t.renderThankButtonText,r=t.disabled,i=n.relationship,c=(i=void 0===i?{}:i).isThanked,l=v()(this.props,R),s=a(n);return Object(o.c)(d.Fragment,{children:[Object(o.b)(x.c,{keyMap:{LIKE:"l"},handlers:{LIKE:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}}),Object(o.b)(O.a,Object.assign({as:y.c,zaType:"Button",zaAction:c?"UnLike":"Like",zaText:!0,onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:j.a,label:s,disabled:r,"aria-live":"polite"},l))]})}}]),n}(d.Component);T.contextTypes={authRequired:p.a.func},T.propTypes=A,T.defaultProps={renderThankButtonText:function(e){var t=e.relationship;return(t=void 0===t?{}:t).isThanked?"取消喜欢":"喜欢"}};var I=Object(b.compose)(Object(h.connect)(null,{updateAnswerThank:C.K}),Object(w.a)(null))(T)},1480:function(e,t,n){"use strict";var a=n(2),o=n(1),r=n(13),i=n.n(r),c=n(2808),l=n(419),s=n(871),u=n(2801),d=n(2802),b=n(874),f=n(2803),p=n(2804),h=n(2805),m=n(2806),v=n(2807),g={online_roundtable:s.a,relevant:u.a,editor_recommendation:d.a,roundtable:s.a,special:b.a,weekly:f.a,daily:p.a,professional:h.a,zhizhi_plan_recommend:m.a,zhizhi_plan_edu_recommend:m.a,zhizhi_plan_baby_recommend:m.a,zhizhi_plan_acg_recommend:m.a,zhizhi_plan_outing_recommend:m.a,zhizhi_plan_rumour_deny:v.a,zhizhi_plan:m.a},O={alpha:1,group:"GYL02A"},j={alpha:.08,group:"GYL02A"},y={brand_special:c.a},C=Object.assign(Object.assign({},g),{},{COMMERCIAL_ICONS:y}),w=function(e){return"GBL07A"===(e||O).group?"commercial":"positive"},x=function(e){return"GBL07A"===(e||j).group?"commercial":"positive"},k=function(e){return"recognition"===e?"professional":e};t.a=Object(l.a)(null)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,r=void 0===n?{}:n,c=e.className;if(!t)return null;var l=t.type,s=t.text,u=t.foregroundColor,d=t.backgroundColor,b=r.customIcon,f=r.customIconClassName,p=w(u),h=x(d),m=b||C[k(l)];return m?Object(o.c)("span",{className:i()("Label-icon","Label-iconColor--".concat(p),Object(a.a)({},"Label-iconColor--".concat(h,"Background"),d),c),children:[Object(o.b)(m,{center:!0,className:i()("Label-iconImg",f)}),s]}):null}))},1482:function(e,t,n){"use strict";var a=n(4),o=n(49),r=n(1),i=n(43),c=n(24),l=n(55),s=n(74),u=n(854),d=n(158),b=n(64),f=n.n(b),p=n(431),h=n(1411),m=n(2),v=n(0),g=n.n(v),O=n(83),j=n(160),y=n(952),C=n(1412),w=n(86),x=Object.assign;var k=function(e){return g.a.createElement(w.a,x({width:"18",height:"18",fill:"none",viewBox:"0 0 18 18"},e),g.a.createElement("path",{fill:"#F1403C",d:"M9 18A9 9 0 109 0a9 9 0 000 18zm2.829-12.89a.25.25 0 01.353 0l.707.708a.25.25 0 010 .354L10.061 9l2.828 2.828a.25.25 0 010 .354l-.707.707a.25.25 0 01-.354 0L9 10.061l-2.828 2.828a.25.25 0 01-.354 0l-.707-.707a.25.25 0 010-.354L7.94 9 5.111 6.172a.25.25 0 010-.354l.707-.707a.25.25 0 01.353 0L9 7.94l2.829-2.83z",fillRule:"evenodd",clipRule:"evenodd"}))},S=function(e){var t=e.className,n=e.index,a=void 0===n?0:n,o=e.selected,i=e.onClick,c=e.onDelete,u=e.item,d=e.item,b=d.status,f=d.startTime,p=d.endTime,h=d.target,g=(h=void 0===h?{}:h).parentObject.title,w=0===b,x=Object(v.useMemo)((function(){return"".concat(Object(y.b)(f/1e3)," - ").concat(Object(y.b)(p/1e3))}),[f,p]),S=Object(C.a)(),A=Object(r.c)(s.a,Object.assign(Object.assign({zaType:"Card",zaText:g,view:{elementLocation:{card:{index:a}}},as:l.Box,role:"button",className:t,width:"173px",height:"70px",color:"GBK03A",p:"8px",pb:"0",lineHeight:"normal"},w&&{onClick:i}),{},{css:function(e){var t;return{border:"1px solid ".concat(o?"transparent":w?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK09A),boxShadow:o?"inset 0 0 0 2px ".concat(e.colors.GBL01A):"none",borderRadius:"4px",backgroundColor:S?e.colors.GBK99C:"inherit",":hover":(t={background:w?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK10A},Object(m.a)(t,".".concat("ContributionItem-deleteButton"),{visibility:"visible"}),Object(m.a)(t,"cursor",w?"pointer":"not-allowed"),t),position:"relative"}},children:[Object(r.c)(l.Flex,Object.assign(Object.assign({},w&&{color:"GBL01A"}),{},{fontSize:"11px",fontWeight:"600",alignItems:"center",justifyContent:"space-between",children:[!S&&Object(r.b)(l.Box,{children:x}),Object(r.b)(s.a,{zaBlock:"Delete",zaText:"删除投稿",zaType:"Button",as:l.Box,role:"button",className:"ContributionItem-deleteButton",onClick:function(e){e.stopPropagation(),null==c||c(u)},css:{cursor:"pointer",visibility:"hidden",position:"absolute",right:"-9px",top:"-9px"},children:Object(r.b)(k,{size:18})})]})),Object(r.b)(l.Box,{mt:"4px",fontSize:"13px",css:[Object(O.d)(2),{wordBreak:"break-all"}],children:g})]}));return Object(r.b)(s.b,{block:"VideoAnswerItem",children:w?A:Object(r.b)(j.a,{toggler:A,placement:"top",arrowed:!0,toggleEvent:"hover",children:Object(r.b)(l.Box,{fontSize:"12px",p:"8px",children:"已投稿问题仅支持在回答详情页编辑"})})})},A=function(e){var t=e.className,n=e.onClick,a=e.totalCount,i=e.currentCount,c=Object(h.a)("zvideo_contribution_form:should_hide_new_tag"),d=Object(o.a)(c,2),b=d[0],f=d[1];return Object(r.c)(s.a,{zaType:"Button",zaAction:"",zaBlock:"AddVideoAnswer",zaText:"添加问题",as:l.Flex,className:t,role:"button",width:"173px",height:"70px",flexDirection:"column",color:"GBL01A",alignItems:"center",justifyContent:"center",onClick:function(e){b||f(!0),null==n||n(e)},css:function(e){return Object.assign({position:"relative",cursor:"pointer",borderRadius:"3px",border:"1px solid ".concat(e.colorMod(e.colors.GBL01A).alpha(.08)),":hover":{background:e.colorMod(e.colors.GBL01A).alpha(.08)},overflow:"hidden"},!b&&{"::after":{content:'"NEW"',position:"absolute",top:"0",right:"0",color:e.colors.GRD03A,fontSize:"8px",fontWeight:"600",width:"28px",height:"17px",lineHeight:"17px",textAlign:"center",background:e.colorMod(e.colors.GRD03A).alpha(.08),borderBottomLeftRadius:"3px"}})},children:[Object(r.b)(u.a,{size:12}),Object(r.b)(l.Box,{fontSize:"14px",fontWeight:"500",mt:"1px",children:i&&a?"继续添加 (".concat(i,"/").concat(a,")"):"添加问题"})]})};t.a=function(e){var t=e.zvideoId,n=e.showCreateButton,o=void 0!==n&&n,s=e.showSelect,u=void 0!==s&&s,b=e.onAdd,h=e.onSelect,m=e.isProduce,v=Object(c.useDispatch)(),g=Object(p.r)(),O=Object(p.p)(t);if(m)O.reverse();else{var j=O.filter((function(e){return 2===e.status})),y=O.filter((function(e){return 2!==e.status}));y.reverse(),O=[].concat(Object(a.a)(y),Object(a.a)(j))}var C=Object(p.o)(t).answer,w=(C=void 0===C?{}:C).canContribute,x=void 0!==w&&w,k=C.totalCount,R=void 0===k?0:k,T=O.length,I=Object(i.d)((function(e){v(Object(p.l)(e.id)),v(Object(p.f)(e.id)),null==h||h(e)})),E=Object(i.d)((function(e){d.a.confirm(Object(r.b)(l.Box,{textAlign:"center",children:"已编辑的投稿内容不会被保存"}),{title:Object(r.b)(l.Box,{ml:"23px",children:"确定删除该视频投稿？"}),text:{ok:"确认删除",cancel:"继续编辑"}}).then((function(){if(e.status&&0!==e.status){var n=e.target.object.id;n&&v(Object(p.d)(t,e.id,n))}else v(Object(p.e)(t,e.id));v(Object(p.l)(null))}),f.a)}));return Object(r.b)(l.Flex,{flexWrap:"wrap",ml:"-8px",children:Object(r.c)(r.a,{children:[" ",O.map((function(e){return Object(r.b)(S,{selected:u&&(null==g?void 0:g.id)===e.id,onClick:function(){return I(e)},onDelete:function(){return E(e)},item:e,css:{marginLeft:"8px",marginTop:"8px"}},e.id)})),x&&T<R&&o&&Object(r.b)(A,{onClick:b,currentCount:T,totalCount:R,css:{marginLeft:"8px",marginTop:"12px"}})]})})}},1489:function(e,t,n){"use strict";var a=n(1),o=n(13),r=n.n(o),i=n(1397);t.a=function(e){var t=e.className;return Object(a.c)("div",{className:r()("Reviewing",t),children:[Object(a.c)("div",{className:"Reviewing-top",children:[Object(a.b)(i.a,{size:16}),Object(a.b)("span",{className:"Reviewing-tip",children:"内容审核中"})]}),Object(a.b)("div",{className:"Reviewing-text",children:"内容将在审核通过后自动发布"})]})}},1496:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(77),i=n(17),c=n(18),l=n(9),s=n(1),u=n(0),d=n(3),b=n.n(d),f=n(35),p=n(456),h=n(897),m=n(924);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=v(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={expanded:!0},e.handleTitleClick=function(t){f.a.trackEvent(Object(r.a)(e),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(t)},e.renderHeader=function(){var t=e.props,n=t.title,a=t.url,o=t.author;return Object(s.c)("div",{className:"AbstractCard-header",children:[Object(s.c)("div",{className:"AbstractCard-desc",children:[Object(s.b)("span",{role:"button",tabIndex:0,className:"AbstractCard-title",onClick:function(){return e.handleTitleClick(a,n)},children:n}),Object(s.b)("span",{className:"AbstractCard-source",children:e.abstractSourceInfo})]}),Object(s.b)(m.a,{zaId:6120,className:"AbstractCard-author",author:o,preset:"plain"})]})},e.renderContent=function(){var t=e.props,n=t.content,a=t.member.name,o=t.theme;return Object(s.c)("div",{className:"AbstractCard-content",children:[Object(s.b)("div",{className:"AbstractCard-text AbstractCard-text--".concat(o),children:n}),Object(s.b)("div",{className:"AbstractCard-tip",children:Object(s.c)("span",{className:"AbstractCard-info",children:[a," 摘录于 ",e.createdFormat]})})]})},e}return Object(o.a)(n,[{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return Object(p.a)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}},{key:"componentDidMount",value:function(){Object(h.onViewedOnce)(this.node,(function(){f.a.trackCardShow(null,{id:6118})}))}},{key:"render",value:function(){var e=this;return Object(s.c)("div",{className:"AbstractCard",ref:function(t){e.node=t},children:[this.renderHeader(),this.renderContent()]})}}]),n}(u.Component);g.propTypes={title:b.a.string.isRequired,url:b.a.string.isRequired,author:b.a.object,member:b.a.object,content:b.a.string.isRequired,created:b.a.number,theme:b.a.string.isRequired};t.a=g},1500:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n(87),c=n(36),l=n(939);function s(e){var t=e.campaign,n=e.selected,a=e.onSelect,r=t.title,i=t.description;return Object(o.c)("div",{className:"VideoContributableCampaignModalCampaign",children:[Object(o.c)("div",{role:"button",tabIndex:0,className:"VideoContributableCampaignModalCampaign-info",onClick:a,children:[Object(o.b)("div",{className:"VideoContributableCampaignModalCampaign-title",children:r}),Object(o.b)("div",{className:"VideoContributableCampaignModalCampaign-description",children:i})]}),Object(o.b)(l.a,{checked:n,onChange:a,size:16})]})}t.a=function(e){var t=e.shown,n=e.onClose,l=e.defaultCampaignId,u=e.campaignList,d=e.onSubmit,b=Object(r.useState)((function(){return l?u.find((function(e){return e.id===l})):null})),f=Object(a.a)(b,2),p=f[0],h=f[1];return Object(o.b)(i.b,{title:"选择活动",size:"large",onClose:n,children:t&&Object(o.c)(o.a,{children:[Object(o.b)("div",{className:"VideoContributableCampaignModal-list",children:u.map((function(e){return Object(o.b)(s,{campaign:e,selected:(null==p?void 0:p.id)===e.id,onSelect:function(){h((null==p?void 0:p.id)===e.id?null:e)}},e.id)}))}),Object(o.c)(i.a,{direction:"horizontal",children:[Object(o.b)(c.c,{onClick:n,children:"返回"}),Object(o.b)(c.c,{preset:"primary",color:"blue",onClick:function(){d(p)},children:"确定"})]})]})})}},1606:function(e,t,n){e.exports=n.p+"assets/liukanshan_paper.d98ba9b2.svg"},1607:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(88),o=n(65);function r(e){Object(o.a)(1,arguments);var t=Object(a.a)(e),n=t.getDay();return n}},1608:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(88),o=n(65);function r(e){var t,n;if(Object(o.a)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(a.a)(e);(void 0===n||n>t||isNaN(t))&&(n=t)})),n||new Date(NaN)}},1609:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(88),o=n(65);function r(e){var t,n;if(Object(o.a)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(a.a)(e);(void 0===n||n<t||isNaN(t))&&(n=t)})),n||new Date(NaN)}},1610:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M13.8 4.903h-3.6v.943c0 .314-.082.609-.228.864H13.8V4.903zm3.6 0h2.85c.414 0 .75.333.75.735v.337a.742.742 0 0 1-.75.735H17.4V4.903zm-10.8 0H3.75a.742.742 0 0 0-.75.735v.337c0 .404.336.735.75.735h3.082a1.721 1.721 0 0 1-.232-.864v-.943zM3 9.252c0-.407.335-.735.75-.735h16.5c.414 0 .75.33.75.737v10.274a.742.742 0 0 1-.75.736H3.75A.74.74 0 0 1 3 19.53V9.252zm4.5 1.975v1.807h1.8v-1.807H7.5zm0 4.516v1.807h1.8v-1.807H7.5zm3.6 0v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zm-3.6-4.516v1.807h1.8v-1.807h-1.8zm3.6 0v1.807h1.8v-1.807h-1.8zM7.5 4.893c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893zm7.2 0c0-.494.4-.893.9-.893.497 0 .9.4.9.893V6.72c0 .494-.4.894-.9.894a.898.898 0 0 1-.9-.894V4.893z"}))};i.defaultProps={name:"Calendar"},t.a=i},1611:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(88),o=n(65);function r(e,t){Object(o.a)(2,arguments);var n=Object(a.a)(e),r=Object(a.a)(t);return n.getTime()>r.getTime()}},1621:function(e,t,n){},1622:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),o=n(29),r=n(5),i=Object(r.a)("promotion",["LIKE"]);function c(e){return function(t,n){var r=n().entities.promotions[e]||{},c=r.voteupCount,l=r.voting,s=l?0:1;return t({API:{types:i.LIKE,endpoint:"v3/promotions/".concat(e,"/voters"),query:{voting:s},method:"POST"},UPDATE:{request:{promotions:Object(a.a)({},e,{voteupCount:c+(l?-1:1),voting:s})},success:function(t){return{promotions:Object(a.a)({},e,t)}},failure:{promotions:Object(a.a)({},e,r)}},NOTIFICATION:{failure:o.a}})}}},1623:function(e,t,n){},1624:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),o=n(55),r=n(83),i=function(e){var t=Object(r.f)();return Object(a.b)(o.Flex,Object.assign(Object.assign({width:"58px",height:"20px",bg:Object(r.b)(t.colors.GYL01A).alpha(.08),color:t.colors.GYL01A,alignItems:"center",justifyContent:"center",css:{fontWeight:"normal",fontSize:12,borderRadius:4,overflow:"hidden"}},e),{},{children:"联合创作"}))}},1625:function(e,t){},1626:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),o=n(43),r=n(181),i=function(e){var t=e.zvideo,n=t.id,a=t.imageUrl,o=t.author,r=t.video,i=t.playCount,c=t.voteupCount,l=e.stats,s=l.memberCount,u=l.count;return{zvideoId:n,thumbnail:a,duration:r.duration,avatarUrl:o.avatarUrl,userName:o.name,memberCount:s,videoCount:u,playCount:i,voteupCount:c}};function c(e){var t=e.coCreationRefBy,r=e.referenceRefBy,c=e.type,l=Boolean(t),s=!l&&Boolean(r),u=Object(o.e)((function(){return n.e(36).then(n.bind(null,2693))}));if(l){if(u){var d=i(t),b=d.zvideoId,f=d.thumbnail,p=d.duration,h=d.avatarUrl,m=d.userName,v=d.memberCount,g=d.videoCount,O=d.playCount,j=d.voteupCount;return Object(a.b)(u.CoCreationCard,{zaContentId:b,thumbnail:f,duration:p,avatarUrl:h,userName:m,isMultiMember:v>1,videoCount:g,playCount:O,voteupCount:j,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(b),showSingleVideoUI:!0})}return Object(a.b)("div",{css:{height:82}})}if(s){if(u){var y=i(r),C=y.zvideoId,w=y.avatarUrl,x=y.userName,k=y.memberCount;return Object(a.b)(u.ReferenceCard,{type:c,zaContentId:C,avatarUrl:w,userName:x,isMultiMember:k>1,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(C),showSingleVideoUI:!0})}return Object(a.b)("div",{css:{height:44}})}return null}function l(e){return Object(a.b)(r.a,{replacement:null,children:Object(a.b)(c,Object.assign({},e))})}},1627:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),o=n(55),r=n(924),i=n(1087),c=function(e){var t=e.mainAuthor,n=e.subAuthor,i=function(e){return"plain"===e||"special-plain"===e}(e.preset);return Object(a.c)(o.Flex,{mt:"10px",children:[Object(a.b)(r.a,Object.assign(Object.assign({},i&&{preset:"plain"}),{},{author:t,coCreationAuthorDescriptionText:"视频作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1,css:{marginRight:i?16:30}})),Object(a.b)(r.a,Object.assign(Object.assign({},i&&{preset:"plain"}),{},{author:n,coCreationAuthorDescriptionText:"图文作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1}))]})};function l(e,t,n,o){var r=Object(i.b)(t,n),l=Object(i.c)(n);return o&&Object(a.b)(c,{preset:e,mainAuthor:r,subAuthor:l},"coCreateAuthors")}},1628:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n(74),i=n(36),c=n(178),l=n(55),s=l.Box,u=l.Flex;t.a=function(e){var t=e.className,n=e.index,l=void 0===n?0:n,d=e.onSelect,b=e.selected,f=void 0!==b&&b,p=e.item,h=p.title,m=p.followCount,v=p.commentCount,g=p.visitCount,O=p.highlight,j=Object(o.useMemo)((function(){return[m,v,g].every((function(e){return"number"==typeof e}))?["".concat(Object(c.niceNumber)(m)," 关注"),"".concat(Object(c.niceNumber)(v)," 评论"),"".concat(Object(c.niceNumber)(g)," 浏览")].join(" · "):null}),[m,v,g]);return Object(a.c)(r.a,{zaBlock:"QuestionItem",zaType:"Card",zaText:j,view:{elementLocation:{card:{index:l}}},as:u,py:"12px",alignItems:"start",className:t,children:[Object(a.c)(s,{flex:"1",children:[Object(a.b)(s,{fontSize:"15px",fontWeight:"500",dangerouslySetInnerHTML:{__html:(null==O?void 0:O.title)||h},css:function(e){return{wordBreak:"break-all",em:{fontStyle:"inherit",color:e.colors.GYL01A}}}}),j&&Object(a.b)(s,{mt:"3px",color:"GBL05A",fontSize:"14px",children:j})]}),f?Object(a.b)(i.c,{preset:"secondary",color:"blue",css:{cursor:"unset"},children:"已选择"}):Object(a.b)(i.c,{onClick:d,color:"blue",css:{padding:"0 9px",marginLeft:"20px"},children:"选择问题"})]})}},1629:function(e,t,n){"use strict";var a=n(1),o=n(55),r=n(64),i=n.n(r),c=n(74),l=n(43),s=n(157),u=n(36),d=n(158),b=n(1628);t.a=function(e){var t=e.isEditing,n=e.onSubmit,r=e.onCancel,f=e.selectedQuestion,p=e.value,h=e.onChange,m=Object(l.d)((function(){n()})),v=Object(l.d)((function(){p?d.a.confirm(Object(a.b)(o.Box,{textAlign:"center",children:t?"已编辑的投稿内容不会被保存":"当前输入的投稿内容不会被保存"}),{title:Object(a.b)(o.Box,{ml:"23px",children:t?"确定取消当前修改":"确定返回选择其他问题？"}),text:{ok:t?"取消修改":"确定返回",cancel:t?"继续编辑":"继续投稿"}}).then(r,i.a):r()}));return Object(a.c)(c.b,{block:"AnswerEditor",children:[Object(a.b)(b.a,{selected:!0,item:f,css:{padding:"0 20px",marginTop:"24px"}}),Object(a.b)(c.a,{zaType:"Input",zaAction:"Answer",as:o.Box,px:"20px",mt:"17px",flex:"1",children:Object(a.b)(s.a,{autoFocus:!0,maxLength:"150000",value:p,onChange:function(e){h(e.target.value)},css:{width:"100%",height:"100%!important",textarea:{height:"100%"}},multiline:!0,placeholder:"针对问题介绍下视频（选填）"})}),Object(a.c)(o.Flex,{height:"82px",justifyContent:"space-between",alignItems:"center",px:"20px",css:{button:{width:"236px"}},children:[Object(a.b)(c.a,{zaType:"Button",zaAction:"Close",zaText:!0,as:u.c,onClick:v,children:t?"取消修改":"返回选择"}),Object(a.b)(c.a,{zaType:"Button",zaAction:"Save",zaText:!0,as:u.c,onClick:m,preset:"primary",color:"blue",children:t?"提交修改":"添加投稿"})]})]})}},1630:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z",fillRule:"evenodd"}))};i.defaultProps={name:"TriangleDown"},t.a=i},1631:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n(924),c=n(1031),l=function(e){return"plain"===e||"special-plain"===e},s=l,u=function(e){return"special-plain"===e};t.a=function(e,t,n){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=Object(r.useMemo)((function(){var t;if(Object(c.isCoCreateRelation)(d)){var a=!u(e);t=Object(c.renderDualAuthor)(e,n,d,a)}else t=!u(e)&&Object(o.b)(i.a,Object.assign(Object.assign({},s(e)&&{preset:"plain"}),{},{author:n,userLinkV2:!0}),"authorInfo");return l(e)?[t,null]:[[t,null],null]}),[d,e,n]),f=Object(a.a)(b,2),p=f[0],h=f[1];return[p,h]}},1632:function(e,t,n){},1633:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(66);function o(e,t){t.ZhihuHybrid?a.a.dispatch("base/openURL",{url:e}):window.location.href=e}},1634:function(e,t,n){"use strict";var a=n(49),o=n(47),r=n(0),i=n(43);t.a=function(e){var t=e.disabled,n=e.children,c=Object(r.useState)(null),l=Object(a.a)(c,2),s=l[0],u=l[1];return Object(i.i)((function(){u(document.querySelector("#AnswerFormPortalContainer"))})),t?n:Boolean(s)&&Object(o.createPortal)(n,s)}},1635:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(49),o=n(1),r=n(0),i=n(43),c=n(55),l=n(2220),s=n(294),u=n(45),d=n.n(u),b=n(74);function f(e){var t=e.handleClick,n=e.useMediumEditor,u=Object(r.useRef)(null),f=Object(i.a)(!1),p=Object(a.a)(f,2),h=p[0],m=p[1];return Object(i.i)((function(){n&&(new Date>16444224e5||d.a.get("AnswerFullScreenEntryGuide::shown")||(d.a.set("AnswerFullScreenEntryGuide::shown",!0),requestAnimationFrame((function(){m.on(),setTimeout((function(){m.off()}),3e3)}))))})),Object(o.c)(o.a,{children:[Object(o.c)(b.a,{as:c.Flex,zaAction:"Unknown",zaText:"全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",pr:"20px",lineHeight:"55px",css:{cursor:"pointer"},onClick:function(){m.off(),t&&t()},ref:u,children:[Object(o.b)(c.Text,{mr:"10px",children:"全屏编辑"}),Object(o.b)(l.a,{text:!0,center:!0})]}),Object(o.b)(s.a,{placement:"bottom",isOpen:h,target:u.current,isFixed:!0,children:"全屏样式升级，创作效率更高"})]})}},1636:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(36),d=n(161),b=n(45),f=n.n(b);n(1637);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e){Object(r.a)(n,e);var t=p(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleHide=function(){f.a.set("AnswerOrg::know",!0),e.props.onClose()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(l.b)(d.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n,children:t&&Object(l.c)("div",{children:[Object(l.c)("ul",{className:"AnswerModal-list",children:[Object(l.b)("li",{children:"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"}),Object(l.b)("li",{children:"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"}),Object(l.b)("li",{children:"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。"})]}),Object(l.b)("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank",children:"了解更多"}),Object(l.c)(d.a,{direction:"horizontal",children:[Object(l.b)(u.c,{onClick:this.handleHide,children:"不再显示"}),Object(l.b)(u.c,{color:"blue",preset:"primary",onClick:n,children:"知道了"})]})]})})}}],[{key:"getKnown",value:function(){return f.a.get("AnswerOrg::know")}}]),n}(s.Component)},1637:function(e,t,n){},1638:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(36),d=n(87),b=n(45),f=n.n(b);n(1637);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e){Object(r.a)(n,e);var t=p(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleHide=function(){f.a.set("AnswerBrand::know",!0),e.props.onClose()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(l.b)(d.b,{title:"品牌提问规则",subtitle:"这是一个「品牌提问」，请在回答前了解：",onClose:n,children:t&&Object(l.c)("div",{children:[Object(l.b)("p",{children:"「品牌提问」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。"}),Object(l.b)("a",{className:"AnswerModal-moreLink",href:"/introduction/brand_question",target:"_blank",children:"了解品牌提问"}),Object(l.c)(d.a,{direction:"horizontal",children:[Object(l.b)(u.c,{onClick:this.handleHide,children:"知道了，继续回答"}),Object(l.b)(u.c,{color:"blue",preset:"primary",onClick:n,children:"取消"})]})]})})}}],[{key:"getKnown",value:function(){return f.a.get("AnswerBrand::know")}}]),n}(s.Component)},1639:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(49),o=n(1),r=n(0),i=n(55),c=n(414),l=n(1021),s=n(74),u=n(45),d=n.n(u),b=n(994),f=n(282),p=n(43),h="showEvaluatePanelTimer",m="isShowEvaluatePanel",v=function(e){return Object(o.b)(s.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"关闭nps",css:{position:"absolute",top:"11px",right:"11px"}},e),{},{children:Object(o.b)(c.a,{width:"16",height:"16"})}))},g=function(e){return Object(o.b)(i.Box,{css:{textAlign:"right"},children:Object(o.b)(s.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"提交nps",css:function(e){return{color:e.colors.GBL01A,fontSize:"12px"}}},e),{},{children:"确认提交"}))})},O=function(e){return Object(o.b)(s.a,Object.assign({as:"button",zaType:"Button",css:function(e){return{width:"25px",display:"inline-block",textAlign:"center",lineHeight:"25px",background:e.colors.GBK10A,borderRadius:"2px",color:e.colors.GBK06A,marginRight:"2px",cursor:"pointer","&:hover":{background:e.colors.GBK09A}}}},e))};function j(e){var t=e.editorFrom,n=e.storageKey,c=void 0===n?"":n,u=Object(r.useState)(""),j=Object(a.a)(u,2),y=j[0],C=j[1],w=Object(r.useState)("10"),x=Object(a.a)(w,2),k=x[0],S=x[1],A=Object(r.useState)(""),R=Object(a.a)(A,2),T=R[0],I=R[1],E=Object(r.useRef)(),N=Object(b.a)(),B=Object(f.b)(),z=Object(p.d)((function(e){B("https://api.zhihu.com/slytherin/fallback/".concat(t),{method:"POST",body:{score:e,content:T}})}));return Object(r.useEffect)((function(){var e=(new Date).getTime()>d.a.get(h+c);!d.a.get(m+c)||e?(C(""),setTimeout((function(){C("0"),d.a.set(m+c,"1"),d.a.set(h+c,(new Date).getTime()+5184e6),E.current=setTimeout((function(){C("")}),6e4)}),6e5)):C("")}),[c]),""===y?null:Object(o.b)(s.b,{block:"editorEvaluatePanel",children:Object(o.b)(s.e,{zaText:"nps展示",zaType:"Block",children:Object(o.c)(i.Box,{css:function(e){return{width:"310px",position:"fixed",bottom:"72px",right:"110px",background:e.colors.GBK99A,padding:"20px",boxShadow:"0px 1px 3px rgba(26, 26, 26, 0.1)",zIndex:"101"}},children:[Object(o.b)(v,{onClick:function(){C("")}}),"0"===y&&Object(o.c)(i.Box,{children:[Object(o.b)(i.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A}},children:"亲爱的创作者，感谢您对知乎内容的贡献"}),Object(o.b)(i.Box,{css:function(e){return{fontSize:"13px",color:e.colors.GBK06A,marginTop:"10px",marginBottom:"20px"}},children:"请选择您对编辑器的满意度，以帮助我们更好的服务于您的创作体验"}),Object(o.b)(i.Box,{className:"evaluate-box",children:[1,2,3,4,5,6,7,8,9,10].map((function(e,t){return Object(o.b)(O,{zaText:"打分-".concat(e),onClick:function(){clearTimeout(E.current),e<=6?C("1"):e>6&&(C(""),N({text:"感谢您的反馈",delay:2e3}),z(e)),S(e)},children:e},t)}))}),Object(o.c)(i.Flex,{justifyContent:"space-between",css:function(e){return{color:e.colors.GBK03A,marginTop:"15px",fontSize:"11px",lineHeight:"12px"}},children:[Object(o.b)("span",{role:"img","aria-label":"不满意",children:"不满意👎"}),Object(o.b)("span",{role:"img","aria-label":"满意",children:"满意👍"})]})]}),"1"===y&&Object(o.c)(i.Box,{children:[Object(o.b)(i.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A,marginBottom:"10px"}},children:"请写下您的意见或建议"}),Object(o.b)(i.Box,{children:Object(o.b)(l.a,{className:"Appeal-TextArea",rows:7,placeholder:"请写下您的建议...",css:{width:"270px",height:"85px"},value:T,onChange:function(e){I(e.target.value)}})}),Object(o.b)(i.Box,{css:{textAlign:"right"},children:Object(o.b)(g,{onClick:function(){C(""),z(k),N({text:"感谢您的反馈",delay:1e3})}})})]})]})})})}},1640:function(e,t,n){"use strict";var a=n(49),o=n(33),r=n(1),i=n(0),c=n(24),l=n(55),s=n(74),u=n(87),d=n(943),b=n(29),f=n(1416),p=["shown","toggle","onSuccess","onFail"];t.a=function(e){var t=e.shown,n=e.toggle,h=e.onSuccess,m=e.onFail,v=Object(o.default)(e,p),g=Object(c.useDispatch)(),O=Object(i.useState)(!0),j=Object(a.a)(O,2),y=j[0],C=j[1],w=Object(s.i)().trackEvent;return Object(r.b)(u.b,Object.assign(Object.assign({title:"商业内容推广",subtitle:"",onClose:function(){w({eventType:"Click",action:"Unknown",elementLocation:{text:"开通商业会员弹窗关闭"}}),n()}},v),{},{children:t&&Object(r.c)("div",{children:[Object(r.b)(l.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:"报备后，将自动为您开通「知享」试用版，符合商业内容规范的内容可以正常曝光"}),Object(r.c)(l.Flex,{flexDirection:"inherit",flexWrap:"nowrap",alignItems:"center",style:{marginTop:"10px"},children:[Object(r.b)(d.a,{onChange:function(){C(!y)},type:"checkbox",checked:y}),Object(r.c)(l.Text,{ml:"4px",children:["我已阅读并同意",Object(r.b)(l.Link,{href:"https://bvip.zhihu.com/agreement",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"《知享用户协议》"})]})]}),Object(r.b)("button",{disabled:!y,onClick:function(){g(Object(f.a)()).then((function(e){var t,n=e.payload;if(n.isSuccess)return h(),void g(Object(b.h)("开通成功"));m(),g(Object(b.h)((null==n||null===(t=n.err)||void 0===t?void 0:t.msg)||"开通失败","red"))})).catch((function(e){var t;m(),g(Object(b.h)((null==e||null===(t=e.err)||void 0===t?void 0:t.msg)||"开通失败","red"))})),n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"},!y&&{cursor:"not-allowed"}]},children:"确认并开通"})]})}))}},1641:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var a=n(1),o=n(55),r=n(856),i=n(74),c=n(36),l=function(e){var t=e.canSubmit,n=e.handleSubmit,o=e.isReediting,r=e.scheduledPublishAt,l=e.type,s=e.className;return Object(a.b)(i.a,{as:c.c,zaText:!0,zaType:"Button",zaAction:"Unknown",width:86,height:34,lineHeight:"34px",textAlign:"center",fontSize:14,color:c.a.Blue,preset:c.b.Primary,css:{borderRadius:3,cursor:t?"pointer":"not-allowed",opacity:t?1:.3},onClick:n,className:s,children:o?"提交修改":r?"定时发送":"发布".concat("answer"===l?"回答":"文章")})};function s(e){var t=e.type,n=e.textCount,i=e.draftStatus,c=e.removeDraft,s=e.handleSubmit,u=e.isReediting,d=e.scheduledPublishAt,b=e.onCancelEdit,f=e.draft,p=e.canSubmit,h=e.isFullScreen;return Object(a.c)(o.Flex,Object.assign(Object.assign({justifyContent:"space-between",alignItems:"center",p:"10px 20px",width:"100%"},h&&{mx:"auto",maxWidth:688}),{},{bg:"GBK99A",css:function(e){return{boxShadow:"0 -1px 3px ".concat(e.colorMod(e.colors.GBK02B).alpha(.12))}},children:[Object(a.c)(o.Flex,{alignItems:"center",children:[Object(a.b)(l,{canSubmit:p,handleSubmit:s,isReediting:u,scheduledPublishAt:d,type:t}),u&&Object(a.b)(o.Text,{color:"GBL07A",ml:"10px",onClick:b,css:{cursor:"pointer"},children:f?"保存草稿并离开":"取消"})]}),Object(a.c)(o.Text,{fontSize:14,color:"GBL05A",children:[n?"共 ".concat(n," 字"):"",n&&i?"，":"",i,i&&Object(a.b)(r.a,{text:!0,center:!0,css:{marginLeft:8,cursor:"pointer"},onClick:c})]})]}))}},1642:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n(3),i=n.n(r),c=n(13),l=n.n(c),s=n(647),u=n(35),d=n(1154),b=n(74),f=n(291),p=n(30),h=n(1096),m=n(1179),v=n(1643),g=n.n(v),O=n(56),j=n(1182),y=n(463),C=n(1418),w=function(e,t){var n=e.answer,r=e.isToolbarSticky,i=e.isFullscreen,c=e.toolbarMenuAttention,v=e.scheduledPublishAt,w=e.initialScheduledPublishAt,x=e.placeholder,k=e.draft,S=e.defaultValue,A=e.isLegacyVideoAnswer,R=e.defaultVideo,T=e.question,I=e.videoAnswerEditable,E=e.videoAnswerPublished,N=e.editableReady,B=e.handleChangeContent,z=e.handleAfterChangeContent,L=e.handleFocusWithAuth,P=e.handleSelectText,M=e.handleSubmit,D=e.handleError,_=e.handleLoadStart,V=e.handleLoadEnd,U=e.handleUploadStart,F=e.handleUploadEnd,q=e.handleUploadError,H=e.handleBeforeVideoUpload,G=e.handleMCNLinkCardEdit,K=e.isVideoAnswer,W=e.handleInsertZVideo,Z=e.getToolbarSidePlugins,Q=e.getToolbarMenuPlugins,Y=e.createEditorPlugins,J=e.getEditorBeforePlugins,X=e.setUseScheduledPublish,$=e.allowToolbar,ee=void 0===$||$,te=e.onAnyChange,ne="1"!==Object(O.useAbParam)("alg_vid_cover"),ae=Object(o.useRef)(null);return Object(a.b)(j.a,{name:C.a.editableEdit,children:Object(a.b)(b.b,{block:i?"FullScreen":"",children:Object(a.b)(y.a,{className:l()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:r}),ref:t,hideImageToolbar:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:ee,allowUploadDocument:!0,allowVideoTitleChange:!K,allowReference:!0,allowImageEditor:!0,allowZVideo:!K,allowTable:!K,allowCatalog:!K,catalogEnabled:Object(m.a)(n,"answer"),useCatalogV2:!0,autoCalcCatalogShouldShow:!0,allowHeaderThree:!1,allowToolbarSticky:!i,toolbarStickyOffset:p.i,onInsertZVideo:W,getToolbarSidePlugins:Z,getToolbarMenuPlugins:Q,getEditorBeforePlugins:J,toolbarMenuAttention:c,createEditorPlugins:Y,toolbarProps:{menuCallout:v&&w&&Object(a.c)(f.b,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){X(!1),u.a.trackEvent(t,{action:"Click",id:5734,name:"回答"})},children:["发布时间：",Object(a.b)(h.a,{onRef:ae,value:w,min:w,max:s.a(w,7),onChange:function(e,t){X(!0,e),u.a.setModule(ae.current,{module:"Unknown",module_name:t.date?"日期":t.hours?"小时":t.minutes?"分钟":void 0}),u.a.trackEvent(ae.current,{action:"Click",id:5731,name:"回答"})}}),Object(a.c)("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"},children:[Object(a.b)(d.a,{text:!0,center:!0})," 管理待发布内容"]})]})},minRows:6,placeholder:x,defaultValue:k?k.editableContent:S,videoAnswerEditable:I,videoAnswerPublished:E,isLegacyVideoAnswer:A,defaultVideo:R,onReady:N,onChange:B,onAfterChange:z,onFocus:L,onSelectText:P,onSubmit:M,onError:D,onLoadStart:_,onLoadEnd:V,onUploadStart:U,onUploadEnd:F,onUploadError:q,onBeforeVideoUpload:H,logo:g.a,location:T.title,editingContentType:"answer",onMCNLinkCardEdit:G,useV2Feature:!0,useEditableV2:!0,useImageOperationV2:!0,onAnyChange:te,mustAlgorithmCover:ne})})})};w.propTypes={isToolbarSticky:i.a.bool.isRequired,answer:i.a.object.isRequired,isFullscreen:i.a.bool.isRequired,toolbarMenuAttention:i.a.string,scheduledPublishAt:i.a.number,initialScheduledPublishAt:i.a.number,placeholder:i.a.string.isRequired,draft:i.a.object,defaultValue:i.a.string,isLegacyVideoAnswer:i.a.bool,defaultVideo:i.a.object,question:i.a.object,videoAnswerEditable:i.a.bool,videoAnswerPublished:i.a.bool,editableReady:i.a.func.isRequired,handleChangeContent:i.a.func.isRequired,handleAfterChangeContent:i.a.func.isRequired,handleFocusWithAuth:i.a.func.isRequired,handleSelectText:i.a.func.isRequired,handleSubmit:i.a.func.isRequired,handleError:i.a.func.isRequired,handleLoadStart:i.a.func.isRequired,handleLoadEnd:i.a.func.isRequired,handleUploadStart:i.a.func.isRequired,handleUploadEnd:i.a.func.isRequired,handleUploadError:i.a.func.isRequired,handleBeforeVideoUpload:i.a.func.isRequired,handleMCNLinkCardEdit:i.a.func.isRequired,isVideoAnswer:i.a.bool.isRequired,handleInsertZVideo:i.a.func.isRequired,getToolbarSidePlugins:i.a.func.isRequired,createEditorPlugins:i.a.func.isRequired,getToolbarMenuPlugins:i.a.func.isRequired,getEditorBeforePlugins:i.a.func.isRequired,setUseScheduledPublish:i.a.func.isRequired},t.a=Object(o.forwardRef)(w)},1643:function(e,t,n){e.exports=n.p+"assets/logo.804f083e.png"},1644:function(e,t,n){},1645:function(e,t,n){"use strict";var a=n(33),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(0),d=n(19),b=n(3),f=n.n(b),p=n(24),h=n(89),m=n.n(h),v=n(29),g=n(290),O=n(79),j=n(30),y=n(1100),C=["answer","voteDownReason","opposeRightStatusIsOn"];function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var x=function(e,t){var n=e.entities.questions[t.answer.question.id];return n&&n.voteDownReason},k={loadSwitches:g.b,showNotification:v.h,updateAnswerVote:O.L,getVoteDownReason:O.k,selectVoteDownReason:O.D,setOpposeRightStatus:g.e},S=function(e){Object(i.a)(n,e);var t=w(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleVote=e.context.authRequired((function(t){var n=e.props,a=n.answer;(0,n.updateAnswerVote)(a.id,t,{cardType:a.cardType})}),j.X.vote),e.handleLoadVoteDownReason=function(){var t=e.props,n=t.answer;(0,t.getVoteDownReason)(n.id,n.question.id)},e.handleSelectVoteDownReason=function(t){var n=e.props,a=n.answer,o=n.selectVoteDownReason,r=n.showNotification;o(a.id,t.reasonId).then((function(e){r(e.payload.message)}))},e.handleSetShowVoteDownReason=function(t){(0,e.props.setOpposeRightStatus)(t)},e}return Object(r.a)(n,[{key:"shouldShowVoteDownMenu",get:function(){return Boolean(!this.props.disabled&&this.context.currentUser)}},{key:"componentDidMount",value:function(){var e=this.props.loadSwitches;this.shouldShowVoteDownMenu&&e(["opposeRight"])}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.voteDownReason,o=e.opposeRightStatusIsOn,r=Object(a.default)(e,C);return Object(s.b)(y.a,Object.assign({count:t.voteupCount,voting:t.relationship&&t.relationship.voting,isOwner:t.relationship&&t.relationship.isAuthor,isShowVoteDownMenu:this.shouldShowVoteDownMenu&&o,onVote:this.handleVote,voteDownReason:n,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason},m()(r,Object.keys(k))))}}]),n}(u.Component);S.contextTypes={currentUser:f.a.object,authRequired:f.a.func},t.a=Object(d.compose)(Object(p.connect)((function(e,t){return{voteDownReason:x(e,t),opposeRightStatusIsOn:Object(g.d)(e)}}),k))(S)},1646:function(e,t,n){"use strict";n.d(t,"animated",(function(){return M}));var a=n(25),o=n.n(a),r=n(28),i=n.n(r),c=n(21),l=n.n(c),s=n(23),u=n.n(s),d=n(27),b=n.n(d),f=n(14),p=n.n(f),h=n(31),m=n.n(h),v=n(1420);n.o(v,"useSpring")&&n.d(t,"useSpring",(function(){return v.useSpring})),n.o(v,"useTransition")&&n.d(t,"useTransition",(function(){return v.useTransition}));var g=n(47),O=n(1144),j=n(1647),y=["style","children","scrollTop","scrollLeft"],C=["x","y","z"],w=["scrollTop","scrollLeft"];function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return b()(this,n)}}var k=/^--/;function S(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||k.test(e)||R.hasOwnProperty(e)&&R[e]?(""+t).trim():t+"px"}var A={};var R={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T=["Webkit","Ms","Moz","O"];R=Object.keys(R).reduce((function(e,t){return T.forEach((function(n){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(n,t)]=e[t]})),e}),R);var I=/^(matrix|translate|scale|rotate|skew)/,E=/^(translate)/,N=/^(rotate|skew)/,B=function(e,t){return O.s.num(e)&&0!==e?e+t:e},z=function e(t,n){return O.s.arr(t)?t.every((function(t){return e(t,n)})):O.s.num(t)?t===n:parseFloat(t)===n},L=function(e){u()(n,e);var t=x(n);function n(e){var a=e.x,o=e.y,r=e.z,c=m()(e,C);l()(this,n);var s=[],u=[];return(a||o||r)&&(s.push([a||0,o||0,r||0]),u.push((function(e){return["translate3d(".concat(e.map((function(e){return B(e,"px")})).join(","),")"),z(e,0)]}))),Object(O.l)(c,(function(e,t){if("transform"===t)s.push([e||""]),u.push((function(e){return[e,""===e]}));else if(I.test(t)){if(delete c[t],O.s.und(e))return;var n=E.test(t)?"px":N.test(t)?"deg":"";s.push(Object(O.y)(e)),u.push("rotate3d"===t?function(e){var t=i()(e,4),a=t[0],o=t[1],r=t[2],c=t[3];return["rotate3d(".concat(a,",").concat(o,",").concat(r,",").concat(B(c,n),")"),z(c,0)]}:function(e){return["".concat(t,"(").concat(e.map((function(e){return B(e,n)})).join(","),")"),z(e,t.startsWith("scale")?1:0)]})}})),s.length&&(c.transform=new P(s,u)),t.call(this,c)}return n}(j.a),P=function(e){u()(n,e);var t=x(n);function n(e,a){var o;return l()(this,n),(o=t.call(this)).inputs=e,o.transforms=a,o._value=null,o}return o()(n,[{key:"get",value:function(){return this._value||(this._value=this._get())}},{key:"_get",value:function(){var e=this,t="",n=!0;return Object(O.k)(this.inputs,(function(a,o){var r=Object(O.q)(a[0]),c=e.transforms[o](O.s.arr(r)?r:a.map(O.q)),l=i()(c,2),s=l[0],u=l[1];t+=" "+s,n=n&&u})),n?"none":t}},{key:"observerAdded",value:function(e){var t=this;1==e&&Object(O.k)(this.inputs,(function(e){return Object(O.k)(e,(function(e){return Object(O.r)(e)&&Object(O.c)(e,t)}))}))}},{key:"observerRemoved",value:function(e){var t=this;0==e&&Object(O.k)(this.inputs,(function(e){return Object(O.k)(e,(function(e){return Object(O.r)(e)&&Object(O.x)(e,t)}))}))}},{key:"eventObserved",value:function(e){"change"==e.type&&(this._value=null),Object(O.d)(this,e)}}]),n}(O.a);v.Globals.assign({batchedUpdates:g.unstable_batchedUpdates,createStringInterpolator:O.g,colors:O.e});var M=Object(j.d)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;var n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,a=t.style,o=t.children,r=t.scrollTop,i=t.scrollLeft,c=m()(t,y),l=Object.values(c),s=Object.keys(c).map((function(t){return n||e.hasAttribute(t)?t:A[t]||(A[t]=t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})))}));for(var u in void 0!==o&&(e.textContent=o),a)if(a.hasOwnProperty(u)){var d=S(u,a[u]);"float"===u?u="cssFloat":k.test(u)?e.style.setProperty(u,d):e.style[u]=d}s.forEach((function(t,n){e.setAttribute(t,l[n])})),void 0!==r&&(e.scrollTop=r),void 0!==i&&(e.scrollLeft=i)},createAnimatedStyle:function(e){return new L(e)},getComponentProps:function(e){e.scrollTop,e.scrollLeft;return m()(e,w)}}).animated},1647:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return L})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return w})),n.d(t,"h",(function(){return C}));var a=n(28),o=n.n(a),r=n(1002),i=n.n(r),c=n(23),l=n.n(c),s=n(27),u=n.n(s),d=n(14),b=n.n(d),f=n(21),p=n.n(f),h=n(25),m=n.n(h),v=n(1144),g=n(0);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return u()(this,n)}}var j=Symbol.for("Animated:node"),y=function(e){return e&&e[j]},C=function(e,t){return Object(v.h)(e,j,t)},w=function(e){return e&&e[j]&&e[j].getPayload()},x=function(){function e(){p()(this,e),C(this,this)}return m()(e,[{key:"getPayload",value:function(){return this.payload||[]}}]),e}(),k=function(e){l()(n,e);var t=O(n);function n(e){var a;return p()(this,n),(a=t.call(this))._value=e,a.done=!0,a.durationProgress=0,v.s.num(a._value)&&(a.lastPosition=a._value),a}return m()(n,[{key:"getPayload",value:function(){return[this]}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e,t){return v.s.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}},{key:"reset",value:function(){var e=this.done;this.done=!1,v.s.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(x),S=function(e){l()(n,e);var t=O(n);function n(e){var a;return p()(this,n),(a=t.call(this,0))._string=null,a._toString=Object(v.f)({output:[e,e]}),a}return m()(n,[{key:"getValue",value:function(){var e=this._string;return null==e?this._string=this._toString(this._value):e}},{key:"setValue",value:function(e){if(v.s.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!i()(b()(n.prototype),"setValue",this).call(this,e))return!1;this._string=null}return!0}},{key:"reset",value:function(e){e&&(this._toString=Object(v.f)({output:[this.getValue(),e]})),this._value=0,i()(b()(n.prototype),"reset",this).call(this)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(k),A={dependencies:null},R=function(e){l()(n,e);var t=O(n);function n(e){var a;return p()(this,n),(a=t.call(this)).source=e,a.setValue(e),a}return m()(n,[{key:"getValue",value:function(e){var t={};return Object(v.l)(this.source,(function(n,a){var o;(o=n)&&o[j]===o?t[a]=n.getValue(e):Object(v.r)(n)?t[a]=Object(v.q)(n):e||(t[a]=n)})),t}},{key:"setValue",value:function(e){this.source=e,this.payload=this._makePayload(e)}},{key:"reset",value:function(){this.payload&&Object(v.k)(this.payload,(function(e){return e.reset()}))}},{key:"_makePayload",value:function(e){if(e){var t=new Set;return Object(v.l)(e,this._addToPayload,t),Array.from(t)}}},{key:"_addToPayload",value:function(e){var t=this;A.dependencies&&Object(v.r)(e)&&A.dependencies.add(e);var n=w(e);n&&Object(v.k)(n,(function(e){return t.add(e)}))}}]),n}(x),T=function(e){l()(n,e);var t=O(n);function n(e){return p()(this,n),t.call(this,e)}return m()(n,[{key:"getValue",value:function(){return this.source.map((function(e){return e.getValue()}))}},{key:"setValue",value:function(e){var t=this.getPayload();return e.length==t.length?t.some((function(t,n){return t.setValue(e[n])})):(i()(b()(n.prototype),"setValue",this).call(this,e.map(I)),!0)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(R);function I(e){return(Object(v.t)(e)?S:k).create(e)}function E(e){var t=y(e);return t?t.constructor:v.s.arr(e)?T:Object(v.t)(e)?S:k}var N=function(e,t){var n=!v.s.fun(e)||e.prototype&&e.prototype.isReactComponent;return Object(g.forwardRef)((function(a,r){var i=Object(g.useRef)(null),c=n&&Object(g.useCallback)((function(e){i.current=function(e,t){e&&(v.s.fun(e)?e(t):e.current=t);return t}(r,e)}),[r]),l=function(e,t){var n=new Set;A.dependencies=n,e.style&&(e=Object.assign(Object.assign({},e),{},{style:t.createAnimatedStyle(e.style)}));return e=new R(e),A.dependencies=null,[e,n]}(a,t),s=o()(l,2),u=s[0],d=s[1],b=Object(v.z)(),f=function(){var e=i.current;n&&!e||!1===(!!e&&t.applyAnimatedValues(e,u.getValue(!0)))&&b()},p=new B(f,d),h=Object(g.useRef)();Object(v.A)((function(){var e=h.current;h.current=p,Object(v.k)(d,(function(e){return Object(v.c)(e,p)})),e&&(Object(v.k)(e.deps,(function(t){return Object(v.x)(t,e)})),v.w.cancel(e.update))})),Object(g.useEffect)(f,[]),Object(v.C)((function(){return function(){var e=h.current;Object(v.k)(e.deps,(function(t){return Object(v.x)(t,e)}))}}));var m=t.getComponentProps(u.getValue());return Object(g.createElement)(e,Object.assign(Object.assign({},m),{},{ref:c}))}))},B=function(){function e(t,n){p()(this,e),this.update=t,this.deps=n}return m()(e,[{key:"eventObserved",value:function(e){"change"==e.type&&v.w.write(this.update)}}]),e}();var z=Symbol.for("AnimatedComponent"),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.applyAnimatedValues,a=void 0===n?function(){return!1}:n,o=t.createAnimatedStyle,r=void 0===o?function(e){return new R(e)}:o,i=t.getComponentProps,c=void 0===i?function(e){return e}:i,l={applyAnimatedValues:a,createAnimatedStyle:r,getComponentProps:c},s=function e(t){var n=P(t)||"Anonymous";return(t=v.s.str(t)?e[t]||(e[t]=N(t,l)):t[z]||(t[z]=N(t,l))).displayName="Animated(".concat(n,")"),t};return Object(v.l)(e,(function(t,n){v.s.arr(e)&&(n=P(t)),s[n]=s(t)})),{animated:s}},P=function(e){return v.s.str(e)?e:e&&v.s.str(e.displayName)?e.displayName:v.s.fun(e)&&e.name||null}},1648:function(e,t){},1649:function(e,t){},1650:function(e,t,n){},1651:function(e,t,n){},1652:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(40),o=n.n(a),r=n(207),i=n.n(r),c=n(0),l=n(74),s=n(985),u=n(1749),d=function(){var e=Object(l.i)().trackEvent;return Object(c.useCallback)(function(){var t=i()(o.a.mark((function t(n){var a,r,i,c,l,d,b,f,p,h,m,v,g,O,j;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.element,r=n.id,i=n.url,c=n.source,l=n.scenes,d=void 0===l?s.b.Content:l,b=n.utmInfo,f=void 0===b?{}:b,p=n.appSchemaIos,h=n.appSchemaAndroid,m=n.isOpenPopup,v=void 0!==m&&m,g=n.extraInfo,O=void 0===g?{}:g,j=n.onClick,Object(u.a)({element:a,id:r,url:i,source:c,scenes:d,utmInfo:f,appSchemaIos:p,appSchemaAndroid:h,isOpenPopup:v,extraInfo:O,trackEvent:e,onClick:j});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}},1704:function(e,t,n){"use strict";n.d(t,"a",(function(){return Me})),n.d(t,"b",(function(){return fn}));var a=n(1),o=n(24),r=n(0),i=n.n(r),c=n(3),l=n.n(c),s=n(13),u=n.n(s),d=n(204),b=n(83),f=n(40),p=n.n(f),h=n(207),m=n.n(h),v=n(66),g=function(){var e=m()(p.a.mark((function e(t,n,a){var o,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(e){return{state:-1,message:e}},r=function(e){return{state:0,data:e}},t.Android&&t.Zhihu){e.next=4;break}return e.abrupt("return",o("「先用后付」激活仅支持安卓端内哦"));case 4:return e.prev=4,e.next=7,v.a.supportsAction("payment/activePayScore");case 7:if(!e.sent){e.next=17;break}return e.next=11,Object(v.a)("payment/activePayScore").dispatch({sku_id:n||"",type:a||0});case 11:if(!(null==(i=e.sent)?void 0:i.orderId)){e.next=14;break}return e.abrupt("return",r(i));case 14:throw new Error("激活获取订单号失败");case 17:return e.abrupt("return",o("当前客户端版本不支持，请升级后重试 ~"));case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(4),e.abrupt("return",o(e.t0.errMsg||e.t0.message||"激活失败，请稍后重试"));case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t,n,a){return e.apply(this,arguments)}}(),O=n(21),j=n.n(O),y=n(25),C=n.n(y),w=n(95),x=n.n(w),k=n(23),S=n.n(k),A=n(27),R=n.n(A),T=n(14),I=n.n(T),E=n(897),N=n(892),B=n(35),z=n(74),L=n(52),P=n(28),M=n.n(P),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){var n=e[t];return null!=n&&"".concat(t,"=").concat(encodeURIComponent(n))})).filter(Boolean).join("&")},_=function(e){if(!e)return{};var t=e.match(/\?([^#]+)/)||[],n=M()(t,2)[1];return n?n.split("&").reduce((function(e,t){var n=t.split("="),a=M()(n,2),o=a[0],r=a[1];return e[o]=decodeURIComponent(r),e}),{}):{}},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=D(Object.assign(Object.assign({},_(e)),t));return n?/\?([^#]+)/.test(e)?e.replace(/\?([^#]+)/,"?".concat(n)):/(#[\w]+)$/.test(e)?e.replace(/(#[\w]+)$/,"?".concat(n,"$1")):"".concat(e,"?").concat(n):e};function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var o=I()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return R()(this,n)}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=function(e){S()(n,e);var t=U(n);function n(e){var a;return j()(this,n),a=t.call(this,e),F(x()(a),"handleClick",(function(e,t){var n=a.props.onClick;B.a.trackEvent(a.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),"function"==typeof n&&n(a.node),a.unlisten=v.a.listen("base/viewDidAppear",(function(){var e=a.props.popupCallback;e&&e(),a.unlisten&&a.unlisten()}))})),F(x()(a),"handleQuery",(function(e){var t=a.props.extra,n=((void 0===t?{}:t)||{}).ua,o=void 0===n?{}:n;if((null==o?void 0:o.Mobile)&&!(null==o?void 0:o.Zhihu)){var r,i,c=Object(L.parse)(null===(r=window)||void 0===r||null===(i=r.location)||void 0===i?void 0:i.search.substring(1));if("svipgrowth"===(c||{}).utm_medium){var l=encodeURIComponent(Object(L.stringify)(c));a.setState({url:V(e,{growth_ref_url:l})})}}})),a.state={url:""},a}return C()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.btnInfo;if(t){var n=t.btnText,a=t.link;this.setState({url:a}),this.handleQuery(a),v.a.dispatch("vip/preloadVIPHybridPopup",{url:a}),Object(E.onViewedOnce)(this.node,(function(){B.a.trackCardShow(e.node,{id:4241,name:n},{link:{url:a,anchor:n}})}))}}},{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,a=t.zaInfo,o=void 0===a?{}:a,r=t.className,c=this.state.url;if(!n)return null;var l=n.btnText;return i.a.createElement("div",{className:u()("KfeCollection-PurchaseBtn",r)},i.a.createElement("div",{className:"KfeCollection-PurchaseBtn-mask"}),i.a.createElement(z.b,{block:"textLink",content:Object.assign({},o||{})},i.a.createElement(z.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:c}}},i.a.createElement("a",{className:"KfeCollection-PurchaseBtn-HybridLink",href:c,target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick(c,l)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement("span",{className:"KfeCollection-PurchaseBtn-text"},l)," ",i.a.createElement(N.a,{className:"KfeCollection-PurchaseBtn-ArrowRight"})))))}}]),n}(i.a.Component);q.propTypes={popupCallback:l.a.func};var H=q,G=n(47),K=n(64),W=n.n(K),Z=n(949);function Q(e){var t=e.zaInfo,n=void 0===t?{}:t,a=e.btnInfo,o=void 0===a?{}:a,c=e.picsInfo,l=void 0===c?{}:c,s=e.className,d=e.onClick,b=e.popupCallback,f=e.theme,p=e.isMobile,h=e.extra,m=void 0===h?{}:h,g=o.btnText,O=o.link,j=Object(r.useState)(O),y=M()(j,2),C=y[0],w=y[1],x=l.pcPic,k=l.dayPic,S=l.nightPic,A=Object(r.useRef)(),R=(m||{}).ua,T=void 0===R?{}:R,I=Object(r.useMemo)((function(){return p?"dark"===f?S:k:x}),[p,f,x,S,k]),E=null;return Object(r.useEffect)((function(){if(p&&!(null==T?void 0:T.Zhihu)){var e,t,n=Object(L.parse)(null===(e=window)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.search.substring(1));if("svipgrowth"===(n||{}).utm_medium){var a=encodeURIComponent(Object(L.stringify)(n));w(V(O,{growth_ref_url:a}))}}}),[p,null==T?void 0:T.Zhihu,O]),Object(r.useEffect)((function(){return function(){E&&E()}}),[E]),i.a.createElement("div",{className:u()("KfeCollection-VipBenefitsCard",s)},i.a.createElement(z.b,{block:"vipBenefitsCard",content:Object.assign(Object.assign({},n),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer})},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:C}}},i.a.createElement("a",{className:"KfeCollection-VipBenefitsCard-HybridLink",href:C,target:"_blank",rel:"noopener noreferrer",onClick:function(){B.a.trackEvent(A.current,{id:4240,action:"OpenUrl",name:g},{link:{url:C,anchor:g}}),"function"==typeof d&&d(A.current),E=v.a.listen("base/viewDidAppear",(function(){b&&b(),E&&E()}))},ref:A,"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[n]}})},I&&i.a.createElement("img",{className:"KfeCollection-VipBenefitsCard-pic",src:I})))))}Q.propTypes={zaInfo:l.a.object,btnInfo:l.a.object,popupCallback:l.a.func,onClick:l.a.func,className:l.a.string,theme:l.a.string.isRequired,isMobile:l.a.bool.isRequired,picsInfo:l.a.object.isRequired};var Y=Q,J=n(138);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var o=I()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return R()(this,n)}}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee="dark",te="light",ne=function(e){S()(n,e);var t=X(n);function n(e){var a;return j()(this,n),a=t.call(this,e),$(x()(a),"handleClick",(function(e,t){var n=a.props.onClick;B.a.trackEvent(a.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),n&&n({target:a.node})})),$(x()(a),"handleQuery",(function(e){var t=a.props.extra,n=((void 0===t?{}:t)||{}).ua,o=void 0===n?{}:n;if((null==o?void 0:o.Mobile)&&!(null==o?void 0:o.Zhihu)){var r,i,c=Object(L.parse)(null===(r=window)||void 0===r||null===(i=r.location)||void 0===i?void 0:i.search.substring(1));"svipgrowth"===(c||{}).utm_medium&&a.setState({url:V(e,c)})}})),a.state={url:""},a}return C()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.goodsCard.body.link;this.setState({url:t}),Object(E.onViewedOnce)(this.node,(function(){B.a.trackCardShow(e.node,{id:4241,name:"课程"},{link:{url:t,anchor:"课程"}})})),this.handleQuery(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.zaInfo,o=void 0===a?{}:a,r=t.goodsCard,c=t.className,l=n===ee,s=this.state.url,d=r.header,b=d.title,f=d.subTitle,p=r.body,h=p.title,m=p.cover,v=p.coverLabel,g=p.desc,O=p.label,j=p.vipNote,y=r.catalog;return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV2",c),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement("h1",{className:"KfeCollection-GoodsCardV2-header"},"".concat(b).concat(f?" · ".concat(f):"")),i.a.createElement(z.b,{content:Object.assign(Object.assign({},o),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"oldSkuCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:s}}},i.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV2-content",onClick:function(){return e.handleClick(s,h)},ref:function(t){return e.node=t}},i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover"},i.a.createElement("img",{className:u()("KfeCollection-GoodsCardV2-cover-img",{"KfeCollection-GoodsCardV2-cover-img--dark":l}),src:Object(J.imgUrl)(m,{size:"200x0"})}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover-label"},v)),i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-detail"},i.a.createElement("div",null,i.a.createElement("h2",{className:"KfeCollection-GoodsCardV2-detail-title"},h),g&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-desc"},g),i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-label"},O)),i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:j}}))))),y&&y.length>0&&i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalog"},"章节目录",i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalogSectionList"},y.map((function(e){var t=e.manuscriptUrl,n=e.sectionId,a=e.title;return i.a.createElement(z.a,{zaType:"Text",key:n,zaBlock:"catalog",extra:{link:{url:t}},zaAction:"OpenUrl"},i.a.createElement("a",{className:"KfeCollection-GoodsCardV2-catalogSectionItem",href:t,target:"_blank",rel:"noopener noreferrer",key:n,"data-za-detail-view-id":7500,"data-za-extra":JSON.stringify({button:{text:a}})},a,i.a.createElement(N.a,{className:"KfeCollection-GoodsCardV2-catalogSectionItemIcon"})))}))))))}}]),n}(i.a.Component);$(ne,"propTypes",{theme:l.a.oneOf([ee,te]),onClick:l.a.func,extra:l.a.object}),$(ne,"defaultProps",{theme:te});var ae=ne,oe=n(36),re=n(2761),ie=function(e){return-1===e.indexOf("?")?"".concat(e,"?entry=qa"):"".concat(e,"&entry=qa")};function ce(e){var t=e.header,n=void 0===t?{}:t,a=e.onClick,o=n.title,r=n.subTitle,c=n.link;return i.a.createElement("a",{href:ie(c),target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV3-header",onClick:function(e){return a&&a(e)}},i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerTitle"},o),i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerSubTitle"},i.a.createElement("div",null,r),i.a.createElement(re.a,{className:"KfeCollection-GoodsCardV3-headerIcon"})))}var le=function(e){var t=Object(r.useRef)(),n=e.className,a=e.zaInfo,o=void 0===a?{}:a,c=e.goodsCard,l=e.shelvesInfo,s=e.onBookshelfButtonClick,d=void 0===s?W.a:s,b=e.theme,f=void 0===b?"light":b,p=e.onClick,h=c.header,m=c.body,v=c.body,g=v.title,O=v.cover,j=v.coverLabel,y=v.link,C=v.desc,w=v.label,x=v.vipNote,k=v.icons,S=v.heatNote,A=Object(z.i)().trackEvent;Object(r.useEffect)((function(){Object(E.onViewedOnce)(t.current,(function(){B.a.trackCardShow(t.current,{id:8467,name:m.title},{button:{text:h.title}})}))}),[m,h]);var R=Object(r.useCallback)((function(e){B.a.trackEvent(e.target,{id:8468,action:"OpenUrl",name:m.title},{link:{url:h.link},button:{text:h.title}}),A({action:"OpenUrl",eventType:"Click",elementLocation:{text:h.title,block:{blockText:"newSkuCardHeader"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:h.link}})}),[m,h,A]),T=Object(r.useCallback)((function(e){B.a.trackEvent(e.target,{id:8469,action:"OpenUrl",name:m.title},{link:{url:m.link},button:{text:h.title}}),p&&p(e)}),[m,h,p]),I=Object(r.useCallback)((function(e){var t=(null==l?void 0:l.whetherInShelf)?"去书架查看":"加入书架",n=(null==l?void 0:l.whetherInShelf)?"OpenUrl":"Collect",a={url:m.link};B.a.trackEvent(e.target,{id:8294,action:"OpenUrl",name:m.title},{link:a,button:{text:t}}),A({action:n,eventType:"Click",elementLocation:{type:"Button",text:t}},(null==l?void 0:l.whetherInShelf)?{link:{url:"https://www.zhihu.com/xen/market/vip/vip-recommend"}}:null),d(e)}),[m,d,l,A]);return i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV3",n),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement(ce,{header:h,onClick:R}),i.a.createElement(z.b,{content:Object.assign(Object.assign({},o),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"newSkuCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:y}}},i.a.createElement("a",{href:ie(y),target:"_blank",rel:"noopener noreferrer",className:u()("KfeCollection-GoodsCardV3-content","KfeCollection-GoodsCardV3-content--topHeader"),onClick:T,ref:t},i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-cover"},i.a.createElement("img",{className:"KfeCollection-GoodsCardV3-coverVip",src:"light"===f?null==k?void 0:k.leftTopDayIcon:null==k?void 0:k.leftTopNightIcon,alt:""}),i.a.createElement("img",{className:u()("KfeCollection-GoodsCardV3-coverImage"),src:Object(J.imgUrl)(O,{size:"200x0"})}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-coverLabel"},j)),i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-detail"},g&&i.a.createElement("h2",{className:"KfeCollection-GoodsCardV3-detailTitle"},g),C&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailDescription"},C),w&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailLabel"},w),S?i.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailHeatNote"},S):x&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailVipNote",dangerouslySetInnerHTML:{__html:x}}),l&&i.a.createElement(oe.c,{className:"KfeCollection-GoodsCardV3-bookshelfButton",preset:"plain",color:"grey",onClick:I},l.whetherInShelf?"去书架查看":"加入书架",i.a.createElement(N.a,{text:!0,center:!0})))))))},se=function(e){return e?-1===e.indexOf("?")?"".concat(e,"?entry=qa"):"".concat(e,"&entry=qa"):""};var ue=function(e){var t=e.className,n=e.nextSectionInfo,a=e.zaInfo,o=void 0===a?{}:a,c=e.theme,l=void 0===c?"light":c,s=n.title,b=n.content,f=n.url,p=n.skuUrl,h=n.voteNum,m=n.isShowVote,v=n.trackNum,g=n.skuName,O="dark"===l,j=Object(z.i)().trackEvent,y=se(f),C=Object(r.useRef)(),w=Object(r.useState)(!1),x=M()(w,2),k=x[0],S=x[1],A=Object(d.b)(),R=!s||!f||0===v;Object(r.useEffect)((function(){if(C.current&&b){var e=C.current.clientWidth,t=document.createElement("p");t.style="visibility:hidden;position:absolute;left:-9999px;top:-9999px;width:".concat(e,"px;line-height:21px;font-size:13px;"),t.innerText=b.replace(/[\r\n]/g,""),document.body.appendChild(t);var n=t.clientHeight>63;S(n),document.body.removeChild(t)}}),[C,b]);var T=Object(r.useCallback)((function(){j({action:"OpenUrl",eventType:"Click",elementLocation:{text:s,block:{blockText:"StoryCardTitle"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:f}})}),[s,j,f]),I=Object(r.useCallback)((function(){j({action:"OpenUrl",eventType:"Click",elementLocation:{block:{blockText:"StoryCardButton"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:p}})}),[p,j]);return i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV4",{"KfeCollection-GoodsCardV4-dark":O},t),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-guide"},i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideBefore"},"来自盐选专栏"),i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideTitle"},"《".concat(g)),i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideAfter"},"》")),R?null:i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-wrapper"},i.a.createElement("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV4-header",onClick:T},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-title"},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-titleText"},"继续阅读下一篇：".concat(s)),i.a.createElement(re.a,{className:"KfeCollection-GoodsCardV4-headerIcon"})),i.a.createElement("img",{className:"KfeCollection-GoodsCardV4-vipIcon",src:"https://pic3.zhimg.com/v2-f5928a79b2f62c93db2536548602bd43.png?source=6a64a727"})),i.a.createElement(z.b,{content:Object.assign(Object.assign({},o),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"StoryCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:f}}},i.a.createElement("a",{href:y,target:"_blank",rel:"noopener noreferrer"},b?i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-contentWrapper".concat(A.iOS?" KfeCollection-GoodsCardV4-iosContent":"")},i.a.createElement("p",{className:"KfeCollection-GoodsCardV4-content",ref:C},b),k&&m&&i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-endorse"},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-mask"}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-ellipsis"},"..."),i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-endorseText"},h))):null))),i.a.createElement("a",{className:"KfeCollection-GoodsCardV4-bottom",target:"_blank",rel:"noopener noreferrer",href:se(p),onClick:I},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-bottomText"},"查看本专栏全部",i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-num"},v),"篇",i.a.createElement(N.a,{className:"KfeCollection-GoodsCardV4-arrowRight",text:!0,center:!0})))))},de=n(870);function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var o=I()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return R()(this,n)}}var fe,pe,he,me=function(e){S()(n,e);var t=be(n);function n(){return j()(this,n),t.apply(this,arguments)}return C()(n,[{key:"render",value:function(){var e=this.props,t=e.total,n=e.value,a=Math.floor(Math.round(2*n)/2),o=Math.round(2*n)%2,r=t-a-o;return i.a.createElement("div",{className:"KfeCollection-Rating"},Array.from({length:a}).map((function(e,t){return i.a.createElement("div",{className:"KfeCollection-Rating-star",key:"full-".concat(t)},i.a.createElement(de.a,null))})),Boolean(o)&&i.a.createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--half",key:"half"},i.a.createElement(de.a,null),i.a.createElement(de.a,null)),Array.from({length:r}).map((function(e,t){return i.a.createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--empty",key:"empty-".concat(t)},i.a.createElement(de.a,null))})))}}]),n}(i.a.Component);he={value:5,total:5},(pe="defaultProps")in(fe=me)?Object.defineProperty(fe,pe,{value:he,enumerable:!0,configurable:!0,writable:!0}):fe[pe]=he;var ve=me,ge=n(1633),Oe=["Live","RemixAlbum","RemixInstabook"],je={Live:"Live 讲座","课程":"盐选专栏"},ye={"漫画":"节","课程":"节",Live:"节","讲书":"节","杂志":"篇","电子书":"篇","盐选专栏":"篇"};var Ce=function(e){var t=e.goodsCard,n=e.zaInfo,a=void 0===n?{}:n,o=e.isMobile,c=e.theme,l=void 0===c?"light":c,s=e.resourceType,u=t.header,b=void 0===u?{}:u,f=t.body,p=void 0===f?{}:f,h=b.skuTitle,m=b.brandImage,v=p.title,g=p.coverLabel,O=p.link,j=p.activeLink,y=p.vipNote,C=p.icons,w=p.cover,x=p.preface,k=p.introduce,S=p.trackNum,A=p.score,R=p.activeText,T=p.contentType,I=Object(z.i)().trackEvent,E=Object(d.b)(),B=!o&&Oe.includes(T)?O:j,L=Object(r.useCallback)((function(){Object(ge.a)(se(B),E)}),[B,E]),P=Object(r.useCallback)((function(){I({action:"OpenUrl",eventType:"Click",elementLocation:{block:{blockText:"".concat(s,"_button")},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:O}}),Object(ge.a)(se(O),E)}),[O,E,s,I]),D=function(){return i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentWrapper"},w&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentLeft"},i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverVip",src:"light"===l?null==C?void 0:C.leftTopDayIcon:null==C?void 0:C.leftTopNightIcon}),i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverImg",src:w}),(null==C?void 0:C.centerIcon)&&i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverBtn",src:C.centerIcon}),g&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-coverLabel"},je[g]||g)),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentRight"},i.a.createElement("div",null,!x&&v&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentTitle"},v),x&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentPreface"},x),x&&A?i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentStar"},i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-score"},A),i.a.createElement(ve,{value:+A/2})):k&&k.length?i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentIntro"},k.map((function(e){return i.a.createElement("div",{key:e,className:"KfeCollection-GoodsCardNew-contentIntroItem"},e)}))):null),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentBottom"},y?i.a.createElement("p",{className:"KfeCollection-GoodsCardNew-vipNote",dangerouslySetInnerHTML:{__html:y}}):i.a.createElement("div",null),R&&i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-readBtn"},R,i.a.createElement(N.a,{text:!0,center:!0})))))};return i.a.createElement("section",{className:"KfeCollection-GoodsCardNew","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-guide"},i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-guideBefore"},"以上回答来自"),m&&i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-brandImg"},"「",m,"」"),g&&i.a.createElement("span",null,g)),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-wrapper"},function(){var e,t;if(/《.+》/.test(h)){var n,a=h.split("《"),o=M()(a,2);e=o[0],t=null===(n=t=o[1])||void 0===n?void 0:n.substring(0,t.length-1)}return i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-header"},e&&t?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-headerBefore"},e),i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-headerName"},"《".concat(t)),i.a.createElement("span",null,"》")):i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-headerTitle"},h))}(),i.a.createElement(z.b,{content:Object.assign(Object.assign({},a),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"".concat(s,"_card")},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:B}}},i.a.createElement("a",{onClick:L,rel:"noopener noreferrer"},D()))),i.a.createElement("a",{className:"KfeCollection-GoodsCardNew-bottom",rel:"noopener noreferrer",onClick:P},i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-bottomText"},"查看本",g.replace("盐选",""),"全部",i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-num"},S),ye[g]||"篇",i.a.createElement(N.a,{className:"KfeCollection-GoodsCardNew-arrowRight",text:!0,center:!0})))))};function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var o=I()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return R()(this,n)}}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(e){S()(n,e);var t=we(n);function n(){var e;j()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),xe(x()(e),"handleObserve",(function(t){var n=e.props.logPaidAnswerProgress;t.forEach((function(t){if(0!==t.intersectionRatio){var a=t.target;e.observer.unobserve(a),n&&n("card")}}))})),xe(x()(e),"renderVipCard",(function(){var t=e.props,n=t.hasPurchased,a=t.result,o=void 0===a?{}:a,r=t.theme,c=t.isMobile,l=t.onBookshelfButtonClick,s=void 0===l?W.a:l,u=o.zaInfo,d=o.className,b=o.nextSectionInfo,f=o.goodsCard,p=o.abParam,h=o.resourceType,m=o.shelvesInfo;return b?i.a.createElement(ue,{nextSectionInfo:b,zaInfo:u,theme:r,className:d}):f?"1"===(null==p?void 0:p.storyCard)?i.a.createElement(Ce,{isMobile:c,goodsCard:f,zaInfo:u,theme:r,resourceType:h}):i.a.createElement(le,{goodsCard:f,zaInfo:u,hasPurchased:n,shelvesInfo:n?m:null,onBookshelfButtonClick:s,theme:r,className:d}):null})),e}return C()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.hasPurchased,a=t.logPaidAnswerProgress;n&&a&&"undefined"!=typeof window&&window.IntersectionObserver&&(this.target=Object(G.findDOMNode)(this),this.observer=new window.IntersectionObserver(this.handleObserve,{threshold:[.1]}),setTimeout((function(){e.observer.observe(e.target)})))}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.unobserve(this.target)}},{key:"render",value:function(){var e=this.props,t=e.hasPurchased,n=e.result,a=void 0===n?{}:n,o=e.theme,r=e.className,c=e.isMobile,l=e.logPaidAnswerProgress,s=e.extra,u=void 0===s?{}:s,d=a.goodsCard,b=a.zaInfo,f=a.btnInfo,p=a.abParam,h=a.benefitsPics,m=a.popupCallback,v="1"===(null==p?void 0:p.benefitsPicsShow);return t?this.renderVipCard():v?i.a.createElement(Y,{btnInfo:f,zaInfo:b||{},picsInfo:h||{},popupCallback:m,theme:o,isMobile:c||!1,onClick:l,extra:u}):d?i.a.createElement(ae,{goodsCard:d,zaInfo:b,className:r,extra:u}):null}}]),n}(i.a.Component);xe(ke,"propTypes",{result:l.a.object.isRequired,theme:l.a.string,hasPurchased:l.a.bool,onBookshelfButtonClick:l.a.func,logPaidAnswerProgress:l.a.func,extra:l.a.object}),xe(ke,"defaultProps",{result:{goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}}});var Se=ke;function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var o=I()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return R()(this,n)}}var Re=function(e){S()(n,e);var t=Ae(n);function n(){return j()(this,n),t.apply(this,arguments)}return C()(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.url,a=e.zaInfo,o=void 0===a?{}:a;return t&&n?i.a.createElement("div",{className:"KfeCollection-TextLink"},i.a.createElement("div",{className:"KfeCollection-TextLink-mask"}),i.a.createElement(z.b,{block:"textLinkV2",content:Object.assign({},o||{})},i.a.createElement(z.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:n}}},i.a.createElement("a",{className:"KfeCollection-TextLink-HybridLink",href:n,target:"_blank",rel:"noopener noreferrer","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement("span",{className:"KfeCollection-TextLink-text"},t)," ",i.a.createElement(N.a,{className:"KfeCollection-TextLink-ArrowRight"}))))):null}}]),n}(i.a.Component);Re.propTypes={zaInfo:l.a.object,text:l.a.string.isRequired,url:l.a.string.isRequired};var Te=Re;function Ie(e){var t=e.paidContent,n=void 0===t?{}:t,a=e.hasPurchased,o=e.className,c=e.popupCallback,l=e.onLogPaidAnswerProgress,s=e.handleBookshelfButtonClick,f=e.onPayScoreCallback,p=n.resourceType,h=n.btnInfo,m=n.zaInfo,v=n.advertorialInfo||{},O=v.text,j=v.url,y=Object(b.f)().isDarkMode,C=void 0!==y&&y,w=Object(d.b)(),x=Object(r.useRef)(null);return function(e,t,n,a,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{threshold:[.6]},c=Object(r.useRef)(!0),l=t&&e&&e.Zhihu&&e.Android&&"undefined"!=typeof window&&window.IntersectionObserver&&a&&a.current,s=Object(r.useCallback)((function(t){Array.isArray(t)&&t.length&&t[0].isIntersecting&&l&&c.current&&(c.current=!1,g(e,n,0).then((function(e){"function"==typeof o&&o(e)})))}),[o,l,n,e]);Object(r.useEffect)((function(){if(l){var e=new window.IntersectionObserver(s,i),t=a.current;return setTimeout((function(){e&&e.observe(t)}),0),function(){e.unobserve(t)}}}),[l,s,a,i])}(w,!a&&"function"==typeof f&&20!==p,n.id,x,(function(e){return f(e)})),20===p&&O&&j?i.a.createElement(Te,{text:O,url:j}):i.a.createElement("div",{className:u()("KfeCollection-PaidAnswerFooter",o),ref:x},!a&&i.a.createElement(H,{btnInfo:h,zaInfo:m||{},popupCallback:c,extra:{ua:w},onClick:l}),i.a.createElement(Se,{isMobile:w.Mobile,extra:{ua:w},isDarkMode:C,result:n,hasPurchased:a,onBookshelfButtonClick:s,theme:C?"dark":"light",popupCallback:c,logPaidAnswerProgress:l}))}Ie.propTypes={paidContent:l.a.object.isRequired,hasPurchased:l.a.bool.isRequired,className:l.a.string,popupCallback:l.a.func,onLogPaidAnswerProgress:l.a.func,handleBookshelfButtonClick:l.a.func,onPayScoreCallback:l.a.func};var Ee=Ie,Ne=n(419),Be=n(79);function ze(e){var t=e.id,n=e.children,a=Object(r.useRef)(),i=Object(o.useDispatch)();return Object(r.useEffect)((function(){var e=a.current;if(t&&e){var n=e instanceof Element?e:Object(G.findDOMNode)(e);n&&Object(E.onViewedOnce)(n,(function(){return i(Object(Be.z)(t))}))}}),[i,t]),Object(r.cloneElement)(n,{ref:a})}ze.propTypes={id:l.a.oneOfType([l.a.number,l.a.string]).isRequired};var Le=Object(Ne.a)(null)(ze);function Pe(e){var t,n=e.answer,r=(Object(o.useSelector)((function(e){return Object(Be.A)(e,null==n?void 0:n.id)}))||{}).result;if(!r)return null;var i=null==n||null===(t=n.paidInfo)||void 0===t?void 0:t.hasPurchased;return Object(a.c)(a.a,{children:[Object(a.b)(Le,{id:n.id,children:Object(a.b)("div",{})}),Object(a.b)(Ee,{hasPurchased:i,paidContent:r})]})}var Me=Object(Ne.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(a.b)(Pe,{answer:t}):null}));function De(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ve=function(e){return function(e){if(!window)return null;try{var t=document.createElement("div");t.innerHTML=e;var n,a=Array.from(t.childNodes),o=M()(a,3),r=o[0].nodeValue,i=o[1],c=i.innerText,l=i.attributes,s=o[2].nodeValue,u={},d=De(l);try{for(d.s();!(n=d.n()).done;){var b=n.value;u[b.name]=b.value}}catch(e){d.e(e)}finally{d.f()}return r&&c&&s?{prefixText:r,content:c,status:s,linkInfo:{name:"a",attr:u}}:null}catch(e){return null}}(e)},Ue=function(e){var t=e.content;t=void 0===t?[]:t;var n=M()(t,2),a=n[0],o=n[1],r=e.className,c=e.onClick;return i.a.createElement("div",{className:u()("KfeCollection-CertainEndEllipsis",r),onClick:c},i.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-start"},a),i.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-end"},o))},Fe=function(e){var t=e.contentName,n=e.fallbackContent,a=e.onClick,o=Object(r.useMemo)((function(){return Ve(t)}),[t]);if(null===o)return n;var c=o.prefixText,l=o.content,s=o.status,u=o.linkInfo,d=u.name,b=i.a.createElement(i.a.Fragment,null,c,i.a.createElement(d,u.attr,l.slice(0,-1))),f=i.a.createElement(i.a.Fragment,null,i.a.createElement(d,u.attr,l.slice(-1)),s);return i.a.createElement(Ue,{onClick:a,content:[b,f],className:"KfeCollection-PaidContentNameCertainEndEllipsis"})};var qe=function(e){var t=e.introCard,n=e.RichTextComponent,a=e.className,o=e.zaInfo,r=void 0===o?{}:o,c=e.handleTrack,l=e.extra,s=void 0===l?{}:l,d=t.statement,b=t.description,f=t.contentName,p=t.authorDesc,h=s.isNewStyle,m=s.isMobile,v=Object(z.i)().trackEvent,g=function(e,t){var n=e.target,a=e.target,o=a.text,r=a.href,i=5325===t?"userName":"bookTitle";"A"===a.tagName&&(B.a.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:o},link:{url:r}}),v({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Text",block:{blockText:i}}},{link:{url:r}})),c&&c(e,r)},O=function(e){return h?"".concat(e,m?"-newStyle-mobile":"-newStyle-pc"):e};return i.a.createElement("section",{className:u()(O("KfeCollection-IntroCard"),a),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[r]}})},!h&&i.a.createElement(i.a.Fragment,null,!!d&&i.a.createElement("p",null,d),!!b&&i.a.createElement("p",null,b),(!!d||!!b)&&i.a.createElement("p",{className:"KfeCollection-IntroCard-spacing"})),i.a.createElement(Fe,{contentName:f,onClick:function(e){return g(e,5326)},fallbackContent:i.a.createElement("p",{onClick:function(e){return g(e,5326)},className:O("KfeCollection-IntroCard-contentName"),dangerouslySetInnerHTML:{__html:f}})}),n?i.a.createElement(n,{className:O("KfeCollection-IntroCard-authorDesc"),html:p,onClick:function(e){return g(e,5325)}}):i.a.createElement("p",{onClick:function(e){return g(e,5325)},className:O("KfeCollection-IntroCard-authorDesc"),dangerouslySetInnerHTML:{__html:p}}))},He=n(1009),Ge=n(1236),Ke=function(e){return i.a.createElement(Ge.a,Object.assign({viewBox:"0 0 140 43"},e),i.a.createElement("defs",null,i.a.createElement("rect",{id:"zhimg_ic_primelabel_01@2x-a",width:"70",height:"30",x:"0",y:"0"})),i.a.createElement("g",{fillRule:"evenodd",transform:"translate(0 -6)"},i.a.createElement("path",{fillRule:"nonzero",d:"M80.0023638,2.63706979 L129.732029,30.638653 C135.976314,34.154746 139.822785,40.6523917 139.822785,47.6843672 L139.822785,103.687744 C139.822785,110.719509 135.976314,117.217365 129.732029,120.733248 L80.0023638,148.734831 C73.758079,152.250924 66.0649216,152.250924 59.8206368,148.734831 L10.0909714,120.733248 C3.84668657,117.217365 -7.10542736e-14,110.719509 -7.10542736e-14,103.687744 L-7.10542736e-14,47.6843672 C-7.10542736e-14,40.6523917 3.84668657,34.154746 10.0909714,30.638653 L59.8206368,2.63706979 C66.0649216,-0.879023264 73.758079,-0.879023264 80.0023638,2.63706979 Z M62.8214584,21.9369801 L62.4917192,22.1167713 L25.9257887,42.6512656 C21.4364336,45.1724346 18.6325361,49.7839786 18.5101354,54.8082708 L18.5059568,55.1514561 L18.5059568,96.2205991 C18.5059568,101.262635 21.2100909,105.930346 25.6223198,108.545528 L25.9257887,108.720635 L62.4917192,129.25513 C66.9737863,131.772206 72.4710741,131.832136 77.0014851,129.434921 L77.3312243,129.25513 L113.897155,108.720635 C118.38651,106.199617 121.190256,101.587929 121.31265,96.5637746 L121.316828,96.2205991 L121.316828,55.1514561 C121.316828,50.1092692 118.612846,45.4417025 114.200623,42.826383 L113.897155,42.6512656 L77.3312243,22.1167713 C72.8491571,19.5996952 67.3518694,19.5397648 62.8214584,21.9369801 Z M69.2442049,35.8512397 L88.2394468,68.1217272 L103.868354,54.7872625 L103.868354,94.6758324 C103.868354,97.7547043 101.333778,100.250689 98.2071383,100.250689 L40.2839921,100.24974 C37.1573717,100.249699 34.6227848,97.7537776 34.6227848,94.674925 L34.6227848,54.7872625 L50.2512033,68.1217272 L69.2442049,35.8512397 Z",mask:"url(#zhimg_ic_primelabel_01@2x-b)",opacity:".54"})))};Ke.defaultProps={name:"PrivilegeLabel"};var We=Ke,Ze=function(e){var t=e.data,n=e.className,a=e.extra,o=t||{},r=o.vipText,c=o.worthText,l=o.cardColor,s=void 0===l?0:l,d=a||{},b=d.isNewStyle,f=d.isMobile,p=function(e){return b?"".concat(e,f?"-newStyle-mobile":"-newStyle-pc"):e};return 0===s?null:i.a.createElement("div",{className:u()(p("KfeCollection-Privilege"),n)},i.a.createElement(He.a,{className:p("KfeCollection-Privilege-vipIcon")}),i.a.createElement("div",{className:p("KfeCollection-Privilege-content")},i.a.createElement("span",{className:"KfeCollection-Privilege-vipText"},r),i.a.createElement("span",null," ".concat(c))),!b&&i.a.createElement(We,{className:"KfeCollection-Privilege-label"}))},Qe=function(e){var t=e.data,n=e.className,a=e.extra,o=t||{},r=o.worthText,c=o.cardColor,l=void 0===c?0:c,s=a||{},d=s.isNewStyle,b=s.isMobile;return 2!==l?null:i.a.createElement("div",{className:u()(d?b?"KfeCollection-OrdinaryLabel-newStyle-mobile":"KfeCollection-OrdinaryLabel-newStyle-pc":"KfeCollection-OrdinaryLabel",n)},i.a.createElement("div",{className:"KfeCollection-OrdinaryLabel-content"},r))},Ye=n(31),Je=n.n(Ye),Xe=n(414),$e=n(1338),et=n(1571),tt=(n(2810),n(2808),n(2813),n(2800),n(871)),nt=n(2801),at=n(2802),ot=n(874),rt=n(2803),it=n(2804),ct=n(2805),lt=n(2806),st=n(2807),ut=(n(1111),n(891),n(214)),dt=n(55),bt=n(80),ft=n.n(bt),pt=n(7),ht=["params","onRequestOpen","extra","as"],mt=function(e){return/^(\w+:)?\/\//.test(e)?e:location.origin+e},vt=function(e,t){var n=t.params,a=t.onRequestOpen,o=Object(d.b)();return function(t){var r=e.href,i=e.onClick;if(i&&i(t),!t.defaultPrevented&&r){var c=function(e,t){if(!t)return e;var n=e.split("#"),a=M()(n,2),o=a[0],r=a[1],i=o+(o.includes("?")?"&":"?")+t;return r?i+"#"+r:i}(mt(r),n);if((null==o?void 0:o.ZhihuHybrid)||(null==o?void 0:o.Zhihu))return t.preventDefault(),void v.a.dispatch("base/openURL",{url:c});(null==a?void 0:a({ua:o,url:c}))&&t.preventDefault()}}},gt=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:Boolean(e),extra:ft()({link:{get url(){return mt(e)}}},n)}},Ot=Object(r.forwardRef)((function(e,t){var n=e.params,a=e.onRequestOpen,o=e.extra,r=e.as,i=void 0===r?dt.Link:r,c=Je()(e,ht);return Object(pt.g)(z.c,Object.assign({as:i},gt(c.href,{extra:o}),c,{ref:t,onClick:vt(c,{params:n,onRequestOpen:a})}))})),jt=n(43),yt=n(2222),Ct=n(1184),wt=n.n(Ct),xt=["onRef"];function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var o=I()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return R()(this,n)}}var St="top",At=Object.freeze({__proto__:null,LEFT:"left",RIGHT:"right",TOP:St,BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_BOTTOM:"right-bottom"}),Rt=[St,"bottom"],Tt=["left","right"];function It(e,t,n,a){var o,r,i,c,l,s=a.split("-"),u=M()(s,2),d=u[0],b=u[1],f=(r=(o=t).top,i=o.bottom,c=o.left,l=o.right,{top:Math.max(r,0),bottom:Math.min(Math.max(i,0),window.innerHeight),left:Math.max(c,0),right:Math.min(Math.max(l,0),window.innerWidth)}),p={},h={},m=d;if(Rt.includes(d)){var v,g,O=f.right-n.width,j=f.left;if("left"===b?(v=e.left,g=j):"right"===b?(v=e.right-n.width,g=O):(v=e.left+e.width/2-n.width/2,g=j),h.left=O>j?v<j?j:v<O?v:O:g,e.width<=n.width){var y=e.left+e.width/2;p.left=y-h.left}else p.left=n.width/2;"bottom"===d&&e.bottom+n.height>f.bottom&&e.top-n.height>f.top&&(m=St),d===St&&e.bottom+n.height<f.bottom&&e.top-n.height<f.top&&(m="bottom");var C=m===St?[n.height,e.top-n.height]:[0,e.bottom],w=M()(C,2);p.top=w[0],h.top=w[1]}if(Tt.includes(d)){var x,k,S=f.bottom-n.height,A=f.top;if(b===St?(x=e.top,k=A):"bottom"===b?(x=e.bottom-n.height,k=S):(x=e.top+e.height/2-n.height/2,k=A),h.top=S>A?x<A?A:x<S?x:S:k,e.width<=n.width){var R=e.top+e.height/2;p.top=R-h.top}else p.top=n.height/2;"right"===d&&e.right+n.width>f.right&&e.left-n.width>f.left&&(m="left"),"left"===d&&e.right+n.width<f.right&&e.left-n.width<f.left&&(m="right");var T="left"===m?[n.width,e.left-n.width]:[0,e.right],I=M()(T,2);p.left=I[0],h.left=I[1]}return{arrowStyle:p,targetContainerStyle:h,placement:m}}var Et=function(e){return Object(pt.g)("svg",Object.assign({width:"26",height:"10",viewBox:"0 0 26 10"},e),Object(pt.g)("path",{d:"M0 0h26v1c-4.498 0-9 9-13 9S4.5 1 0 1V0z",fillRule:"evenodd"}))},Nt={top:{width:"32px",height:"16px",marginTop:"-5px",transform:"translate(-50%, 0)","&::after":{left:"50%",top:"-8px"}},bottom:{width:"32px",height:"16px",marginTop:"3px",transform:"translate(-50%, -100%) rotate(180deg)","&::after":{left:"50%",bottom:"-8px"}},left:{width:"16px",height:"32px",marginLeft:"-5px",transform:"translate(0, -50%) rotate(-90deg)","&::after":{left:"-8px",top:"50%"}},right:{width:"16px",height:"32px",marginLeft:"6px",transform:"translate(-100%, -50%) rotate(90deg)","&::after":{right:"-8px",top:"50%"}}},Bt={top:{marginTop:"-16px"},bottom:{marginTop:"16px"},left:{marginLeft:"-16px"},right:{marginRight:"16px"}},zt={top:{transformOrigin:"bottom center",marginTop:"-8px"},bottom:{marginTop:"8px"},left:{transformOrigin:"right center",marginLeft:"-16px"},right:{marginLeft:"16px"}},Lt=i.a.forwardRef((function(e,t){var n=e.withArrow,a=e.arrowStyle,o=e.placement,r=e.fixed,i=e.style,c=e.children,l=Object(b.f)();return Object(pt.g)("div",{key:"popoverContent",ref:t,css:Object(ut.a)({position:"absolute",background:l.colors.GBK99C,borderRadius:"4px",zIndex:203,boxShadow:"rgba(0, 0, 0, 0.16) 0 0 20px 0"},";label:PopoverContent;"),style:Object.assign(Object.assign(Object.assign(Object.assign({},zt[o]),n&&Bt[o]),r&&{position:"fixed"}),i)},n&&Object(pt.g)(Et,{css:Object(ut.a)({position:"absolute",overflow:"hidden",pointerEvents:"none",fill:i.backgroundColor||l.colors.GBK99C,"&:after":{content:'""',position:"absolute",boxSizing:"border-box",width:"24px",height:"24px",margin:"-12px",fill:i.backgroundColor||l.colors.GBK99C,transform:"rotate(45deg)",pointerEvents:"auto"}},";label:PopoverContent;"),style:Object.assign(Object.assign({},Nt[o]),a)}),"function"==typeof c?c(e):c)})),Pt=Object(yt.animated)(Lt),Mt=function(e){S()(n,e);var t=kt(n);function n(e){var a;return j()(this,n),a=t.call(this,e),"undefined"!=typeof document&&(a.element=document.createElement("div")),a}return C()(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.element),delete this.element}},{key:"render",value:function(){if(this.element){var e=this.props,t=e.onRef,n=Je()(e,xt);return Object(G.createPortal)(Object(pt.g)("div",Object.assign({ref:t},n)),this.element)}return null}}]),n}(r.Component),Dt=function(e){var t,n,a=e.renderChildren,o=e.children,i=e.transitionProps,c=e.springProps,l=e.onAfterEnter,s=e.onAfterLeave,u=Object(r.useState)(!1),d=M()(u,2),b=d[0],f=d[1],p=!!o,h=Object(yt.useSpring)((function(){return c.from})),m=M()(h,2),v=m[0],g=m[1],O=(t=o,n=Object(r.useRef)(),Object(r.useEffect)((function(){t&&(n.current=t)})),n.current),j=Object(yt.useTransition)(p,Object.assign(Object.assign({},i),{},{onRest:function(e,t){e.finished&&t.item&&2===e.value.p&&(s&&s(),f(!1))}}));return Object(r.useEffect)((function(){p?(f(!0),g(c.enter)):g(c.leave)}),[p]),Object(r.useLayoutEffect)((function(){b&&l&&l()}),[b]),b?Object(pt.g)(Mt,null,j((function(e,t){return t?a({transitionStyles:e,springStyles:v,item:p?o:O}):null}))):null},_t=wt()(.25,.1,.25,1),Vt={from:{opacity:0},enter:{opacity:1,config:{duration:200,easing:_t}},leave:{opacity:0,config:{duration:300,easing:_t}}},Ut=function(e){var t=e.isOpen,n=e.arrowed,a=e.fixed,o=e.globalClose,i=e.target,c=e.container,l=e.boundary,s=e.placement,u=e.listenResize,b=e.customStyle,f=e.backgroundColor,p=e.transitionProps,h=e.springProps,m=e.customPosition,v=e.onClose,g=e.onAfterLeave,O=e.children,j=Object(r.useState)(s),y=M()(j,2),C=y[0],w=y[1],x=Object(r.useState)({}),k=M()(x,2),S=k[0],A=k[1],R=Object(r.useState)({}),T=M()(R,2),I=T[0],E=T[1],N=Object(r.useRef)(null),B=Object(d.b)(),z=Object(jt.d)((function(){var e=function(e){var t=e.target,n=e.container,a=e.placement,o=e.fixed,r=e.boundary,i=e.element,c=e.customPosition;if(i&&t){var l=t instanceof HTMLElement?t:Object(G.findDOMNode)(t),s=document.body;n&&(s=n instanceof HTMLElement?n:Object(G.findDOMNode)(n));var u=(c||It)(l.getBoundingClientRect(),function(){var e,t,n,a,o,r,i,c,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,u=l.getElement,d=l.padding,b=void 0===d?0:d,f=l.getBoundaryInfo;if("object"==typeof b&&(o=b.top||0,r=b.bottom||0,i=b.left||0,c=b.right||0),f)return f();var p={};u?p=u():s&&(p=s);var h=p.getBoundingClientRect(),m=h.top,v=h.right,g=h.bottom,O=h.left;return{top:m+(null!==(e=o)&&void 0!==e?e:b),right:v-(null!==(t=c)&&void 0!==t?t:b),bottom:g-(null!==(n=r)&&void 0!==n?n:b),left:O+(null!==(a=i)&&void 0!==a?a:b)}}(r,s),i.getBoundingClientRect(),a);return o||(u.targetContainerStyle.left+=window.pageXOffset,u.targetContainerStyle.top+=window.pageYOffset),u}}({target:i,container:c,placement:C,fixed:a,boundary:l,element:N.current,customPosition:m});if(e){var t=e.placement,n=e.targetContainerStyle,o=e.arrowStyle;w(t),A(n),E(o)}}));Object(r.useEffect)((function(){t&&z()}),[t]),Object(r.useLayoutEffect)((function(){if(u)return window.addEventListener("resize",z),function(){window.removeEventListener("resize",z)}}),[]);var L=Object(jt.d)((function(e){var n;t&&(!document.body.contains(e.target)||(null==N||null===(n=N.current)||void 0===n?void 0:n.contains(e.target))||(null==i?void 0:i.contains(e.target))||v&&v())}));Object(r.useEffect)((function(){return o&&(B.Mobile?document.addEventListener("touchstart",L):document.addEventListener("click",L)),o&&function(){B.Mobile?document.removeEventListener("touchstart",L):document.removeEventListener("click",L)}}),[o,B,L]);var P=Object(jt.d)((function(){w(s),g()})),D=Object(r.useCallback)((function(e){var t=e.transitionStyles,o=e.springStyles,r=e.item;return Object(pt.g)(Pt,{key:"popover",ref:N,withArrow:n,arrowStyle:I,placement:C,fixed:a,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},S),t),o),"function"==typeof b?b(C):b),f&&{backgroundColor:f}),onMounted:z},r)}),[n,I,C,a,S,b,f,z]);return Object(pt.g)(Dt,{renderChildren:D,transitionProps:p,springProps:h,onAfterEnter:z,onAfterLeave:P},t&&O)};Ut.propTypes={isOpen:l.a.bool,arrowed:l.a.bool,fixed:l.a.bool,globalClose:l.a.bool,placement:l.a.oneOf(Object.values(At)),listenResize:l.a.bool,container:l.a.object,boundary:l.a.shape({getElement:l.a.func,padding:l.a.oneOfType([l.a.number,l.a.object]),getBoundaryInfo:l.a.func}),transitionProps:l.a.shape({from:l.a.object.isRequired,enter:l.a.object.isRequired,leave:l.a.object.isRequired,config:l.a.oneOfType([l.a.object,l.a.func])}),springProps:l.a.shape({from:l.a.object.isRequired,enter:l.a.object.isRequired,leave:l.a.object.isRequired}),customStyle:l.a.oneOfType([l.a.object,l.a.func]),backgroundColor:l.a.string,customPosition:l.a.func,onClose:l.a.func,onAfterLeave:l.a.func},Ut.defaultProps={isOpen:!1,arrowed:!0,fixed:!1,globalClose:!1,placement:"top",listenResize:!0,transitionProps:{from:{transform:"translateY(10px)",p:1},enter:{transform:"translateY(0px)",p:0},leave:{transform:"translateY(0px)",p:2},config:function(e){return e?{tension:380,friction:20}:{duration:300}}},springProps:Vt,onClose:l.a.func,onAfterLeave:W.a};var Ft=Ut,qt=["color","iconUrl","icon","name","subText","linkText","link","expandable","isExpanded","showDeleteButton","onDelete","onClick","style","css"],Ht=["children","placement","onClick","onPopoverClosed"],Gt=["answerCollapsed","answerAbnormal","commercial","thanksForInviting","positive","bluebook","annotation","disclaimer","adPromotion","campaign","limit"],Kt={GOLDEN:{bg:"GYL02A",color:"GYL02A",colorNoAlpha:!0},BLUE:{bg:"GBL01A",color:"GBL07A"},PURPLE:{bg:"GRD07A",color:"GRD07A"},GREY:{bg:"GBK10A",color:"GBK06A",bgNoAlpha:!0,colorNoAlpha:!0}},Wt=function(e){var t=e.bg,n=e.color,a=e.bgNoAlpha,o=e.colorNoAlpha,r=Object(b.f)(),i=r.colors,c=r.colorMod;return{bg:a?i[t]:c(i[t]).alpha(.08),color:o?i[n]:c(i[n]).alpha(.72)}};var Zt={name:"2q0wp1-Label",styles:"flex:0 0 auto;;label:Label;"},Qt={name:"2q0wp1-Label",styles:"flex:0 0 auto;;label:Label;"},Yt={name:"18mqqn8-Label",styles:"flex:0 0 auto;cursor:pointer;;label:Label;"},Jt={name:"zzd7cz-Label",styles:"margin:0 -4px;flex:0 0 auto;;label:Label;"},Xt=i.a.forwardRef((function(e,t){var n=e.color,a=void 0===n?Kt.BLUE:n,o=e.iconUrl,r=e.icon,i=e.name,c=e.subText,l=e.linkText,s=e.link,u=e.expandable,f=e.isExpanded,p=e.showDeleteButton,h=e.onDelete,m=e.onClick,v=e.style,g=e.css,O=Je()(e,qt),j=Object(d.b)().Mobile,y=Object(b.f)().fontWeights,C=Wt(a),w=C.bg,x=C.color,k=s&&!u?Ot:"div",S=null,A=null;return p?A=Xe.a:u?S=f?$e.a:et.a:s&&(S=N.a),Object(pt.g)(k,Object.assign({ref:t,css:Object(ut.a)(Object.assign({flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"flex-start",background:w,padding:"0 8px",height:j?28:30,borderRadius:j?14:15,textDecoration:"none",fontSize:j?13:14,lineHeight:j?"16px":"18px",color:x,overflow:"hidden"},g),";label:Label;")},s&&{href:s},{style:Object.assign({cursor:S?"pointer":"default"},v),onClick:m},O),o?Object(pt.g)("img",{src:Object(J.imgUrl)(o,"m"),height:j?16:19,width:j?16:19,alt:"",css:Zt}):Boolean(r)&&Object(pt.g)(r,{fill:x,size:j?17:20,css:Qt}),Object(pt.g)(dt.Flex,{overflow:"hidden",flex:"0 1 auto",mx:"4px"},Object(pt.g)(dt.Text,{flexShrink:0,fontWeight:y.bold,mt:j?"1px":0},i)),Boolean(c||l)&&Object(pt.g)(dt.Text,{flex:"0 0 auto",display:"flex",alignItems:"center",mt:j?"1px":0,mr:"4px"},c||l),Boolean(A)&&Object(pt.g)(A,{fill:x,size:18,onClick:h,css:Yt}),Boolean(S)&&Object(pt.g)(S,{fill:x,size:j?23:26,css:Jt}))}));Xt.displayName="Label";tt.a,nt.a,at.a,tt.a,ot.a,ot.a,rt.a,it.a,ct.a,lt.a,lt.a,lt.a,lt.a,lt.a,st.a,lt.a;var $t={online_roundtable:"圆桌收录",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌收录",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",professional:"专业",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划",zhizhi_plan_baby_recommend:"致知计划",zhizhi_plan_acg_recommend:"致知计划",zhizhi_plan_outing_recommend:"致知计划",zhizhi_plan_rumour_deny:"专业辟谣",zhizhi_plan:"致知计划",science_seeking_truth_recommend:"科学求真"},en=(Object.assign(Object.assign({},$t),{},{weekly:"知乎周刊收录",daily:"知乎日报收录"}),i.a.forwardRef((function(e,t){var n=e.children,a=e.placement,o=void 0===a?"bottom":a,c=e.onClick,l=e.onPopoverClosed,s=Je()(e,Ht),u=Object(b.f)(),f=Object(r.useRef)(),p=Object(r.useState)(!1),h=M()(p,2),m=h[0],v=h[1],g=Object(r.useRef)(),O=Object(d.b)().Mobile,j=Boolean(n),y=Object(jt.d)((function(e){f.current=function(e,t){return e?("function"==typeof e?e(t):e.current=t,t):t}(t,e)})),C=Object(jt.d)((function(e){c&&c(e),j&&v(!m)})),w=Object(jt.d)((function(){g.current&&clearTimeout(g.current),j&&!m&&v(!0)})),x=Object(jt.d)((function(){g.current=setTimeout((function(){v(!1)}),100)}));return Object(pt.g)(i.a.Fragment,null,Object(pt.g)(Xt,Object.assign({},s,{ref:y,expandable:j,isExpanded:m,onClick:C},!O&&{onMouseOver:w,onMouseLeave:x})),j&&Object(pt.g)(Ft,{isOpen:m,arrowed:!0,globalClose:!0,listenResize:!0,target:f.current,placement:o,boundary:{padding:16},customStyle:{borderRadius:"8px",boxShadow:"0 -3px 10px 0 rgba(0, 0, 0, 0.1)"},backgroundColor:u.colors.GBK99C,onClose:x,onAfterLeave:l},Object(pt.g)("div",{onMouseOver:w,onMouseLeave:x},n)))})));en.displayName="ExpandableLabel";var tn=function(e){var t=e.color,n=void 0===t?Kt.GREY:t,a=e.icon,o=e.name,r=e.subText,c=e.moreLink,l=e.renderMoreIcon,s=e.description,u=Object(d.b)().Mobile,b=Wt(n).color,f=null;return f=c&&l?Object(pt.g)(i.a.Fragment,null,r,Object(pt.g)(Ot,{href:c,css:Object(ut.a)({marginLeft:r?4:0,textDecoration:"none",color:"inherit"},";label:PopoverContent;")},l)):r,Object(pt.g)(dt.Box,{py:"8px",maxWidth:u?"calc(100vw - 34px)":"400px"},Object(pt.g)(Xt,{color:n,icon:a,name:o,subText:f,css:Object(ut.a)({height:u?32:36,borderRadius:0,background:"none"},";label:PopoverContent;")}),Boolean(s)&&Object(pt.g)(dt.Text,{lineHeight:u?"16px":"18px",fontSize:u?"13px":"14px",color:b,mx:"12px",mb:"8px"},s))},nn=function(e){var t=e.disclaimerInfo,n=t.excerpt,a=t.description,o=t.subDescription,r=n?"创作声明":a,i=n&&"内容".concat(n);return Object(pt.g)(en,{name:r,subText:i},Object(pt.g)(tn,{color:Kt.BLUE,name:r,subText:i,description:o}))};var an={name:"pf9kc0-Labels",styles:"& > div, & > a{margin-right:8px;margin-bottom:8px;};label:Labels;"},on=function(e){var t=e.answerCollapsed,n=e.answerAbnormal,a=e.commercial,o=e.thanksForInviting,r=e.positive,i=e.bluebook,c=e.annotation,l=e.disclaimer,s=e.adPromotion,u=e.campaign,d=e.limit,b=void 0===d?2:d,f=Je()(e,Gt);if(!(t||n||a||o||r||i||c||l||s||u))return null;var p=[t||n,a||o||s||i,r,c||l,u].filter(Boolean).slice(0,b);return Object(pt.g)(dt.Flex,Object.assign({flexDirection:"row",flexWrap:"wrap",pt:"8px",css:an},f),p.map((function(e,t){return Object(pt.g)("div",{key:t},e)})))};on.propTypes={answerCollapsed:l.a.node,answerAbnormal:l.a.node,commercial:l.a.node,thanksForInviting:l.a.node,bluebook:l.a.node,positive:l.a.node,annotation:l.a.node,disclaimer:l.a.node,adPromotion:l.a.node,campaign:l.a.node};var rn=function(e){var t=e.ua,n=void 0===t?{}:t,a=e.isDarkMode,o=void 0!==a&&a,r=e.isFixed,c=void 0!==r&&r;return i.a.createElement("div",{className:c?"KfeCollection-FabledStatement-fixed":"KfeCollection-FabledStatement"},i.a.createElement(b.a,{isDarkMode:o,ua:n},i.a.createElement(d.a.Provider,{value:n},i.a.createElement(nn,{disclaimerInfo:{excerpt:"包含虚构创作",description:"创作声明",subDescription:"内容中的情节存在虚构加工，仅供参考"}}))))};function cn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var o=I()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return R()(this,n)}}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sn=function(e){S()(n,e);var t=cn(n);function n(){return j()(this,n),t.apply(this,arguments)}return C()(n,[{key:"render",value:function(){var e=this.props,t=e.result,n=t.introCard,a=t.vipWorthInfo,o=t.isFabled,r=void 0!==o&&o,c=t.abParam,l=e.extra,s=l.ua,u=void 0===s?{}:s,d=l.isDarkMode,b=(a||{}).cardColor,f={isNewStyle:"1"===(c||{}).paTopLabel,isMobile:Boolean(u.Mobile)},p=f.isNewStyle&&!f.isMobile&&0!==b;return i.a.createElement("div",{className:"KfeCollection-AnswerTopCard-Container"},i.a.createElement("div",{className:p?"KfeCollection-AnswerTopCard-FlexContainer":""},2===b?i.a.createElement(Qe,{data:a,extra:f}):i.a.createElement(Ze,{data:a,className:f.isNewStyle?"":"KfeCollection-AnswerTopCard-Privilege",extra:f}),r&&f.isNewStyle&&i.a.createElement(rn,{ua:u,isDarkMode:d,isFixed:p})),Boolean(n)&&i.a.createElement("div",null,i.a.createElement(qe,{introCard:n,extra:f})))}}]),n}(i.a.Component);ln(sn,"propTypes",{className:l.a.string,result:l.a.object.isRequired}),ln(sn,"defaultProps",{result:{articleDesc:{},vipWorthInfo:{},goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}},extra:{ua:{}}});var un=sn,dn=n(56),bn=function(e){var t=e.answer,n=Object(o.useSelector)((function(e){return Object(Be.A)(e,null==t?void 0:t.id)}))||{},i=n.isRequesting,c=n.error,l=n.result,s=Boolean(!i&&!c&&!l),u=Object(o.useDispatch)();Object(r.useEffect)((function(){s&&u(Object(Be.w)(t.id))}),[s,u,t.id]);var d=Object(o.useSelector)(dn.uaSelector),f=Object(b.f)().isDarkMode;return Object(a.b)(un,{result:l,extra:{ua:d,isDarkMode:f}})},fn=Object(Ne.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(a.b)(bn,{answer:t}):null}))},1705:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n.n(o),i=n(937),c=n(100),l=n(973),s=n(49),u=n(3),d=n.n(u),b=n(43),f=n(87),p=n(74),h=n(2),m=n(33),v=n(55),g={LOCAL:{type:"local",name:"上传图片"},EMOTICON:{type:"emoticon",name:"表情包"},PUBLIC:{type:"public",name:"网络素材"},PRIVATE:{type:"private",name:"个人素材"},LATEST:{type:"latest",name:"最近使用"}},O=Object.values(g),j=Object.keys(g).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(h.a)({},t,g[t].type))}),{}),y=(Object.keys(g).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(h.a)({},g[t].type,g[t].name))}),{}),{ALL:{type:"all",name:"全部"},STATIC:{type:"static",name:"普通图片"},DYNAMIC:{type:"dynamic",name:"动图"}}),C=Object.values(y),w=(Object.keys(y).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(h.a)({},t,y[t].type))}),{}),Object.keys(y).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(h.a)({},y[t].type,y[t].name))}),{}),["active"]),x=function(e){var t=e.active,n=Object(m.default)(e,w);return Object(a.b)(p.a,Object.assign({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",color:"GBK03A",shouldTrackShow:!0,css:function(e){return[{marginRight:"20px",lineHeight:"50px",fontSize:"15px",cursor:"pointer"},t&&{position:"relative",fontWeight:"bold","::after":{position:"absolute",left:"0",bottom:"0",content:"''",display:"block",width:"100%",height:"4px",backgroundColor:e.colors.GBL01A,flexShrink:"0"}}]}},n))},k=function(e){var t=e.tabType,n=e.tabChange;return Object(a.c)(v.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return{height:"50px",padding:"0 20px",boxShadow:"inset 0px -0.5px 0px ".concat(e.colors.GBK09A)}},children:[Object(a.b)(v.Flex,{children:O.map((function(e){return Object(a.b)(x,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))}),Object(a.b)("div",{className:"MaterialLibrary-SearchInputContainer"})]})};k.propTypes={tabType:d.a.string,tabChange:d.a.func};var S=k,A=n(162),R=n(923),T=n(282),I=n(424),E=["active"],N=function(e){return Object(a.b)(v.Flex,Object.assign({justifyContent:"space-between",css:{padding:"10px 20px 10px 8px"}},e))},B=function(e){return Object(a.b)("div",Object.assign(Object.assign({css:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},e),{},{children:"加载中..."}))},z=function(e){return Object(a.b)(p.a,Object.assign({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",css:{marginRight:"10px",padding:"7px 15px",fontSize:"14px",borderRadius:"3px","&:last-child":{marginRight:0}}},e))},L=function(e){var t=e.active,n=Object(m.default)(e,E);return Object(a.b)(z,Object.assign({css:function(e){return[{background:e.colorMod(e.colors.GBL01A).alpha(.3),color:e.colors.GBK99A},t&&{background:e.colors.GBL01A}]}},n))},P=function(e){return Object(a.b)(z,Object.assign({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GBK03A}}},e))},M=function(e){return Object(a.b)(z,Object.assign({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GRD03A}}},e))},D=function(e){return Object(a.b)("svg",Object.assign(Object.assign({},e),{},{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 0C11.4477 0 11 0.447716 11 1V11H1C0.447715 11 0 11.4477 0 12C0 12.5523 0.447716 13 1 13H11V23C11 23.5523 11.4477 24 12 24C12.5523 24 13 23.5523 13 23V13H23C23.5523 13 24 12.5523 24 12C24 11.4477 23.5523 11 23 11H13V1C13 0.447715 12.5523 0 12 0Z",fill:"#999999"})}))},_=function(e){return null!=e&&e.length?e.sort((function(e,t){return(null==e?void 0:e.checkedIndex)-(null==t?void 0:t.checkedIndex)})):[]},V=n(943),U=["checked","onChange"],F=function(e){var t=e.checked,n=e.onChange,o=Object(m.default)(e,U);return Object(a.c)(v.Flex,Object.assign(Object.assign({alignItems:"center",css:function(e){return{fontSize:"13px",color:e.colors.GBL04A}}},o),{},{children:[Object(a.b)(V.a,{type:"checkbox",checked:t,onChange:function(e){n(e.target.checked)},size:15,style:{marginRight:"5px",marginTop:"1px"}}),"本页全选"]}))},q=n(876),H=n(47),G=n(157),K=["onSearch"],W=function(e){var t=e.onSearch,n=Object(m.default)(e,K),r=Object(o.useState)(""),i=Object(s.a)(r,2),c=i[0],l=i[1],u=Object(o.useState)(null),d=Object(s.a)(u,2),b=d[0],f=d[1];return Object(o.useEffect)((function(){f(document.querySelector(".MaterialLibrary-SearchInputContainer"))}),[]),b&&Object(H.createPortal)(Object(a.b)(G.a,Object.assign({className:"materials_library_public_search",onChange:function(e){return l(e.target.value)},value:c,after:Object(a.b)(q.a,{text:!0,onClick:function(){t(c)}}),onKeyUp:function(e){13===e.keyCode&&t(c)},css:function(e){return{width:"198px",height:"28px",lineHeight:"28px",fontSize:"12px",color:e.colors.GBL05A,backgroundColor:e.colors.GBK99A,border:"1px solid",borderColor:e.colors.GBK08A}}},n)),b)},Z=n(416),Q=["children"],Y=function(e){return Object(a.b)("i",Object.assign({css:{marginLeft:"14px",width:"96px"}},e))},J=function(e){var t=e.children,n=Object(m.default)(e,Q);return Object(a.c)(Z.b,Object.assign(Object.assign({css:{display:"flex",flex:1,overflow:"auto",flexWrap:"wrap",justifyContent:"space-between",alignContent:"flex-start",height:"100%",marginLeft:"-5px",padding:"0 20px 0"}},n),{},{children:[t,Object(a.b)(Y,{}),Object(a.b)(Y,{}),Object(a.b)(Y,{}),Object(a.b)(Y,{}),Object(a.b)(Y,{}),Object(a.b)(Y,{})]}))},X=Object(o.createContext)({}),$=function(){return Object(o.useContext)(X)},ee=function(e){var t=e.onClose,n=e.sourceType,r=e.sourceId,i=e.insertImage,c=e.setTabType,l=e.initLocalList,s=e.setInitLocalList,u=e.children;return Object(a.b)(X.Provider,{value:Object(o.useMemo)((function(){return{onClose:t,sourceType:n,sourceId:r,insertImage:i,setTabType:c,initLocalList:l,setInitLocalList:s}}),[t,n,r,i,c,l,s]),children:u})},te=n(138),ne=n(1568),ae=n(83),oe=n(856),re=function(){return new Promise(requestAnimationFrame)},ie=function(e,t,n){e({eventType:"Click",action:"Unknown",elementLocation:{type:t,text:n}})},ce=function(){return Object(a.b)(v.Box,{color:"GBK02A",width:"96px",css:function(e){return{position:"absolute",left:"4px",bottom:"4px",width:"48px",height:"16px",lineHeight:"16px",textAlign:"center",fontSize:"12px",background:e.colors.GBL05A,color:e.colors.GBK99A,borderRadius:"2px",zIndex:1}},children:"已删除"})},le=function(e){return Object(a.b)(p.a,Object.assign({as:v.Flex,zaType:"Button",zaAction:"Unknown",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",css:{borderRadius:"2px",position:"absolute",lineHeight:"24px"}},e))},se=function(e){var t=e.data,n=e.chooseImage,r=e.deleted,i=e.deleteSingleImage,c=e.imageUrl,l=e.poster,u=e.isPrivate,d=void 0!==u&&u,b=Object(p.i)().trackEvent,f=Object(ae.e)(),h=Object(te.imgUrl)(c||(null==t?void 0:t.origin),"100w"),m=function(e){var t=Object(p.i)().trackEvent,n=Object(o.useState)(null),r=Object(s.a)(n,2),i=r[0],c=r[1],l="error"===i,u="ready"===i,d=function(n){n.stopPropagation(),"loading"!==i&&(c("loading"),ie(t,"Button","加载 gif"),Promise.all([Object(te.loadImage)(e),re().then(re)]).then((function(){c("ready")})).catch((function(){c("error")})))};return{isGifReady:u,gifIcon:"loading"===i||u?Object(a.b)(ne.b,{className:"MaterialLibrary-GifIcon",onClick:d}):l?Object(a.b)(ne.c,{className:"MaterialLibrary-GifIcon",onClick:d}):Object(a.b)(ne.a,{className:"MaterialLibrary-GifIcon",onClick:d})}}(h),g=m.isGifReady,O=m.gifIcon,j=g?h:Object(te.imgUrl)(l||(null==t?void 0:t.thumbnail),"100w"),y="dynamic"===t.subtype?j:h;return Object(a.c)(v.Box,{color:"GBK02A",width:d?"96px":"105px",css:[{display:"inline-block",marginBottom:"10px",marginLeft:d?"14px":"5px",verticalAlign:"top",".MaterialLibrary-GifIcon":{position:"absolute",width:"46px",height:"46px",marginLeft:"-23px",marginTop:"-23px",top:"50%",left:"50%",transition:"0.3s ease-out",transitionProperty:"transform, opacity",transform:"scale(1)",transformOrigin:"center",opacity:"1"}},g&&{".MaterialLibrary-GifIcon":{transform:"scale(0.3)",opacity:"0",width:0,height:0,margin:0}}],children:[Object(a.c)(v.Box,{width:d?"96px":"105px",height:d?"96px":"105px",css:function(e){return{borderRadius:"2px",cursor:"pointer",position:"relative",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.08),"&:hover > .MaterialLibrary-imgListItemHover":{display:"flex",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.3)}}},onClick:function(){r||(n(t),ie(b,"Image","".concat(null!=t&&t.checked?"取消选中图片":"选中图片")))},children:[Object(a.b)(v.Image,{src:y,loading:"lazy",size:"100%",css:Object.assign({position:"absolute",left:0,right:0,objectFit:"cover",borderRadius:"inherit",opacity:r?"0.3":"1"},f)}),Object(a.b)(v.Box,{sx:{color:"GBK99A",border:"2px solid",borderColor:"GBL01A"},css:function(e){return Object.assign({display:null!=t&&t.checked?"flex":"none",position:"absolute",top:"0",left:"0",right:"0",width:"100%",height:"100%",borderRadius:"inherit"},(null==t?void 0:t.checked)&&{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.3)})},className:"MaterialLibrary-imgListItemHover",children:r?Object(a.b)(le,{zaText:"删除图片",title:"删除",css:function(e){return{bottom:"2px",right:"2px",backgroundColor:e.colors.GBL01A}},onClick:function(e){e.stopPropagation(),i(t)},children:Object(a.b)(oe.a,{fill:"currentColor",size:18})}):Object(a.b)(le,{zaType:"Image",zaText:"选中图片",title:"选中图片",onClick:function(e){e.stopPropagation(),n(t)},css:function(e){return{top:"6px",right:"6px",border:"2px solid ".concat(null!=t&&t.checked?e.colors.GBL01A:e.colors.GBK99A),borderRadius:"50%"}}})}),(null==t?void 0:t.checked)&&Object(a.b)(le,{zaType:"Image",zaText:"取消选中图片",title:"取消选中图片",onClick:function(e){e.stopPropagation(),n(t)},css:function(e){return{top:"8px",right:"8px",fontSize:"14px",textAlign:"center",backgroundColor:e.colors.GBL01A,color:e.colors.GBK99A,borderRadius:"50%"}},children:null==t?void 0:t.checkedIndex}),"dynamic"===t.subtype&&O,r&&Object(a.b)(ce,{})]}),Object(a.b)(v.Box,{mt:"4px",fontSize:"10px",lineHeight:"20px",css:Object.assign(Object.assign({},Object(ae.d)(1)),{},{wordBreak:"break-all"}),title:"文件名称",children:null==t?void 0:t.name})]})};se.propTypes={data:d.a.string,chooseImage:d.a.func,getLatestList:d.a.func};var ue=se,de=n(4),be=n(158),fe=n(6),pe=function(e){var t=e.itemKey,n=Object(T.b)(),a=Object(p.i)().trackEvent,r=$(),i=r.sourceId,c=r.sourceType,l=r.insertImage,u=r.onClose,d=Object(o.useState)([]),f=Object(s.a)(d,2),h=f[0],m=f[1],v=Object(o.useState)(!0),g=Object(s.a)(v,2),O=g[0],j=g[1],y=Object(o.useState)(!1),C=Object(s.a)(y,2),w=C[0],x=C[1],k=Object(o.useState)(!1),S=Object(s.a)(k,2),A=S[0],R=S[1],I=Object(o.useState)(!1),E=Object(s.a)(I,2),N=E[0],B=E[1],z=Object(o.useState)("all"),L=Object(s.a)(z,2),P=L[0],M=L[1],D=Object(o.useState)(null),_=Object(s.a)(D,2),V=_[0],U=_[1],F=h.length&&h.every((function(e){return e.checked})),q=function(){j(!0),B(!1),R(!1),U(null),m([]),x(!1)},H=Object(b.d)((function(e,t){var n;(j(!1),t)?B(!0):be.a.alert((null==e?void 0:e.message)||(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧!")})),G=Object(b.d)((function(e){var t,n=Object(fe.camelizeKeys)(e.payload||{});j(!1),R(null==n||null===(t=n.paging)||void 0===t?void 0:t.isEnd),U(null==n?void 0:n.paging),m((function(e){return e.concat((null==n?void 0:n.data)||[])}))})),K=Object(b.d)((function(e){m((function(n){var a,o=Object(de.a)(n),r=o.find((function(n){return e[t]===n[t]})),i=(null==o||null===(a=o.map((function(e){return null==e?void 0:e.checkedIndex})).sort((function(e,t){return t-e})))||void 0===a?void 0:a[0])||0;return r&&(r.checked=!r.checked,r.checked?r.checkedIndex=i+1:(o.forEach((function(e){(null==e?void 0:e.checkedIndex)>r.checkedIndex&&e.checkedIndex--})),delete r.checkedIndex)),o}))})),W=Object(b.d)((function(e){l(e.map((function(e){return e.origin}))),n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"POST",body:{source_type:c,source_id:String(i),material_type:"image",material_ids:e.map((function(e){return e.materialId}))}}),u()}));return{materialList:h,setMaterialList:m,paging:V,isLoading:O,setIsLoading:j,hasInited:w,setHasInited:x,isDrained:A,setIsDrained:R,isPageError:N,setIsPageError:B,subTypeCatch:P,setSubTypeCatch:M,selectAllChecked:F,toggleSelectAll:function(e){e&&a({action:"Unknown",eventType:"Click",elementLocation:{type:"Button",text:"本页全选"}}),m((function(t){return t.map((function(t,n){return Object.assign(Object.assign({},t),{},{checked:e,checkedIndex:e?n+1:void 0})}))}))},reset:q,handleSubTypeChange:function(e){w&&e!==P&&(M(e),q())},handleResponseErrorData:H,handleResponseData:G,chooseImage:K,insertImages:W}},he=["dataList","insertImages"],me=["keywordCatch"],ve=function(e){var t=e.isPageError,n=e.keywordCatch,o=e.reset;return t?Object(a.b)(R.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:o}):Object(a.b)(R.a.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},ge=function(e){var t=e.dataList,n=e.insertImages,o=Object(m.default)(e,he),r=(t||[]).filter((function(e){return!0===e.checked}));return Object(a.b)(v.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:"flex-end"},o),{},{children:Object(a.b)(L,{active:r.length>0,onClick:function(){n(_(r))},css:{margin:0},zaText:"插入图片；图片数：".concat(r.length||0),children:"插入图片"})}))},Oe=function(e){var t=e.keywordCatch,n=Object(m.default)(e,me),r=Object(T.b)(),i=$(),c=i.insertImage,l=i.onClose,s=pe({itemKey:"id"}),u=s.materialList,d=s.paging,f=s.isLoading,p=s.setIsLoading,h=s.hasInited,g=s.setHasInited,O=s.isDrained,j=s.isPageError,y=s.setIsPageError,C=s.selectAllChecked,w=s.toggleSelectAll,x=s.reset,k=s.handleResponseErrorData,S=s.handleResponseData,A=s.chooseImage,R=!u.length,E=Object(b.d)((function(){return p(!0),y(!1),r((null==d?void 0:d.next)||Object(I.a)("".concat(location.origin,"/api/v4/materials/pc_editor/search"),{offset:null==u?void 0:u.length,limit:24,keyword:t||"表情包"}))})),z=Object(b.d)((function(){return E().then(S).catch((function(e){k(e.payload)}))})),L=Object(b.d)((function(e){c(e.map((function(e){return e.origin}))),l()}));Object(o.useEffect)((function(){h||E().then(S).catch((function(e){k(e.payload,!0)})).finally((function(){g(!0)}))}),[h,g,E,S,k]);var P=R?!f&&Object(a.b)(ve,{isPageError:j,keywordCatch:t,reset:x}):Object(a.c)(a.a,{children:[Object(a.b)(J,{getContainer:function(e){return e},onLoad:z,isLoading:f,isDrained:O,children:u.map((function(e,t){return Object(a.b)(ue,{data:e,insertImages:L,chooseImage:A},String([e.id,t]))}))}),Object(a.b)(ge,{dataList:u,insertImages:L})]});return Object(a.c)(v.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},n),{},{children:[Object(a.c)(N,{children:[Object(a.b)("div",{className:"MaterialLibrary-SearchTipsContainer",children:t&&!R&&!f&&!j&&Object(a.c)(v.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})}),Object(a.b)(F,{checked:C,onChange:w})]}),h?P:Object(a.b)(B,{})]}))},je=function(e){var t=Object(A.default)({},e),n=Object(o.useState)(""),r=Object(s.a)(n,2),i=r[0],c=r[1];return Object(a.c)(a.a,{children:[Object(a.b)(W,{placeholder:"搜索表情包",onSearch:c}),Object(a.b)(Oe,Object.assign({keywordCatch:i},t),i)]})},ye=["active"],Ce=function(e){var t=e.active,n=Object(m.default)(e,ye);return Object(a.b)("button",Object.assign({color:"GBK03A",css:[{padding:"0 12px",fontSize:"12px",cursor:"pointer"},t&&{fontWeight:"bold"}]},n))},we=function(e){var t=e.tabType,n=e.tabChange;return Object(a.b)(v.Flex,{children:C.map((function(e){return Object(a.b)(Ce,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))})};we.propTypes={tabType:d.a.string,tabChange:d.a.func};var xe=function(e){var t=Object(T.b)(),n=Object(o.useState)({}),a=Object(s.a)(n,2),r=a[0],i=a[1],c=Object(o.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],f=Object(o.useState)(""),p=Object(s.a)(f,2),h=p[0],m=p[1],v=Object(o.useState)(!1),g=Object(s.a)(v,2),O=g[0],j=g[1],y=Object(b.d)((function(){j(!1),i({}),d(!1)})),C=Object(b.d)((function(){return t("".concat(location.origin,"/api/v4/materials/pc_editor/folders?type=").concat(e,"&material_type=image")).then((function(e){var t,n=Object(fe.camelizeKeys)((null===(t=e.payload)||void 0===t?void 0:t.data)||{});return i(n),n}))}));return Object(o.useEffect)((function(){u||C().then((function(e){var t,n,a=null==e||null===(t=e.child)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;m(a)})).catch((function(){j(!0)})).finally((function(){d(!0)}))}),[u,C]),{hasInited:u,isPageError:O,setIsPageError:j,reset:y,folders:r,getFoldersList:C,activeFolderId:h,setActiveFolderId:m}},ke=["dataList","insertImages"],Se=function(e){var t=e.isPageError,n=e.keywordCatch,o=e.reset;return t?Object(a.b)(R.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:o}):Object(a.b)(R.a.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},Ae=function(e){var t=e.dataList,n=e.insertImages,o=Object(m.default)(e,ke),r=(t||[]).filter((function(e){return!0===e.checked}));return Object(a.b)(v.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:"flex-end"},o),{},{children:Object(a.b)(L,{active:r.length>0,onClick:function(){n(_(r))},zaText:"插入图片；图片数：".concat(r.length||0),children:"插入图片"})}))},Re=function(e){var t=e.keywordCatch,n=e.activeFolderId,r=$(),i=r.sourceId,c=r.sourceType,l=Object(T.b)(),s=pe({itemKey:"uniqueId"}),u=s.materialList,d=s.paging,f=s.isLoading,p=s.setIsLoading,h=s.hasInited,m=s.setHasInited,g=s.isDrained,O=s.isPageError,j=s.setIsPageError,y=s.subTypeCatch,C=(s.handleSubTypeChange,s.selectAllChecked),w=s.toggleSelectAll,x=s.reset,k=s.handleResponseErrorData,S=s.handleResponseData,A=s.chooseImage,R=s.insertImages,E=!u.length,z=Object(b.d)((function(){return p(!0),j(!1),l((null==d?void 0:d.next)||Object(I.a)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/search"),{offset:null==u?void 0:u.length,limit:24,keyword:t,source_type:c,source_id:i,sub_type:y}))})),L=Object(b.d)((function(){return z().then(S).catch((function(e){k(e.payload)}))}));Object(o.useEffect)((function(){!h&&n&&z().then(S).catch((function(e){k(e.payload,!0)})).finally((function(){m(!0)}))}),[h,n,m,z,S,k]);var P=E?!f&&Object(a.b)(Se,{isPageError:O,keywordCatch:t,reset:x}):Object(a.c)(a.a,{children:[Object(a.b)(J,{getContainer:function(e){return e},onLoad:L,isLoading:f,isDrained:g,children:u.map((function(e,t){return Object(a.b)(ue,{data:e,insertImages:R,chooseImage:A},String([e.uniqueId,t]))}))}),Object(a.b)(Ae,{dataList:u,insertImages:R})]});return Object(a.c)(a.a,{children:[Object(a.c)(N,{children:[Object(a.c)("div",{className:"MaterialLibrary-SearchTipsContainer",children:[!1,t&&!E&&!f&&!O&&Object(a.c)(v.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})]}),Object(a.b)(F,{checked:C,onChange:w})]}),h?P:Object(a.b)(B,{})]})},Te=function(e){var t=Object(A.default)({},e),n=Object(o.useState)(""),r=Object(s.a)(n,2),i=r[0],c=r[1],l=xe(j.PUBLIC),u=l.hasInited,d=l.reset,b=l.isPageError,f=l.activeFolderId,p=b?Object(a.b)(Se,{isPageError:!0,reset:d}):Object(a.b)(Re,Object.assign({keywordCatch:i,activeFolderId:f},t),i);return Object(a.c)(a.a,{children:[Object(a.b)(W,{placeholder:"搜索网络素材库",onSearch:c}),Object(a.b)(v.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:u?p:Object(a.b)(B,{css:{marginTop:42}})}))]})},Ie=n(292),Ee=n(307),Ne=n(210),Be=n(26),ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Le=function(e){return r.a.createElement(Be.a,ze({fill:"currentColor"},e),r.a.createElement("path",{d:"M6 20h12a2 2 0 0 0 2-2V8.828a2 2 0 0 0-.586-1.414l-2.828-2.828A2 2 0 0 0 15.172 4H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2zm.5-2h11a.5.5 0 0 0 .5-.5V9.207a.5.5 0 0 0-.146-.353l-2.708-2.708A.5.5 0 0 0 14.793 6H6.5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5zm4.086-9.886a2 2 0 0 1 2.828 0l2.44 2.44a.5.5 0 0 1 0 .707l-.708.707a.5.5 0 0 1-.707 0L13 10.528V13.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-2.972l-1.438 1.44a.5.5 0 0 1-.707 0l-.708-.707a.5.5 0 0 1 0-.708l2.44-2.439zM7.5 15a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-9z",fillRule:"evenodd",clipRule:"evenodd"}))};Le.defaultProps={name:"UpLoad"};var Pe=Le,Me=function(e){var t=e.handleUploadImage,n=e.content,r=e.style,i=void 0===r?{}:r,c=e.isLocal,l=Object(o.useRef)();return Object(a.c)(a.a,{children:[Object(a.b)("input",{css:{display:"none"},ref:l,type:"file",onChange:function(e){t(e),c&&(l.current.value=null)},accept:"image/*",multiple:!0}),Object(a.b)(p.a,{zaType:"Button",zaText:"本地上传图片",as:v.Flex,role:"button",width:"92px",height:"32px",lineHeight:"32px",fontSize:"12px",color:"GBL05A",alignItems:"center",justifyContent:"center",ml:"19px",mb:"6px",onClick:function(){return l.current.click()},css:function(e){return Object.assign({verticalAlign:"top",display:"inline-flex",cursor:"pointer",borderRadius:"2px",backgroundColor:e.colorMod(e.colors.GBL05A).alpha(.08)},i)},children:n||Object(a.c)(a.a,{children:[Object(a.b)(Pe,{}),Object(a.b)(v.Text,{ml:"3px",mt:"2px",children:"本地上传"})]})})]})},De=["handleUploadImage"],_e=function(e){var t=e.handleUploadImage,n=Object(m.default)(e,De);return Object(a.b)(v.Flex,Object.assign(Object.assign({},n),{},{height:"100%",alignItems:"center",justifyContent:"center",children:Object(a.c)(v.Box,{textAlign:"center",children:[Object(a.b)(Me,{handleUploadImage:t,style:{width:"104px",height:"104px",border:"1px dashed #d3d3d3",margin:0,background:"transparent",borderRadius:"8px","&:hover":{background:"rgba(246, 246, 246, 0.3)"}},content:Object(a.b)(D,{})}),Object(a.b)(v.Text,{color:"GBK02A",fontSize:"14px",fontWeight:"500",mt:"10px",children:"上传图片"}),Object(a.b)(v.Text,{color:"GBK06A",fontSize:"12px",mt:"4px",children:"支持 JPG、JPEG、PNG 等格式"})]})}))},Ve=n(2768),Ue=n(2809),Fe=n(1570),qe=n(414),He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ge=function(e){return r.a.createElement(Be.a,He({fill:"currentColor"},e),r.a.createElement("path",{d:"M9.586 3a1 1 0 0 1 .707.293l1.414 1.414a1 1 0 0 0 .707.293H21a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h6.586zm-.122 2.293A1 1 0 0 0 8.757 5H4.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h15.5a.25.25 0 0 0 .25-.25V7.25a.25.25 0 0 0-.25-.25h-8.164a1 1 0 0 1-.707-.293L9.464 5.293zM14.75 11a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25H13v1.75a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25V13H9.25a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25H11V9.25a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25V11h1.75z",fillRule:"evenodd",clipRule:"evenodd"}))};Ge.defaultProps={name:"FolderPlus"};var Ke=Ge,We=n(13),Ze=n.n(We),Qe=function(e){var t=e.type,n=e.className,r=e.inputShowName,i=void 0===r?"":r,c=e.resetInput,l=e.folderId,u=e.getFoldersList,d=Object(T.b)(),b=Object(o.useRef)(),f=Object(o.useState)(i),p=Object(s.a)(f,2),h=p[0],m=p[1];return Object(a.b)("input",{ref:b,type:"text",className:Ze()("MaterialLibrary-input-module",n),placeholder:"请输入文件名称",autoFocus:"autofocus",onChange:function(e){var t=e.target.value;m(t)},value:h,onBlur:function(){c&&c(""),"add"!==t&&h&&d("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(l),{method:"PUT",body:{name:h}}).then((function(){var e;null===(e=b.current)||void 0===e||e.blur(),u&&u()})).catch((function(e){var t,n,a;be.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(a=n.error)||void 0===a?void 0:a.message)||"网络错误，稍后重试吧!")}))},onKeyUp:function(e){var t;13===e.keyCode&&(null===(t=b.current)||void 0===t||t.blur())}})};Qe.propTypes={inputShowName:d.a.string,resetInput:d.a.func};var Ye=Qe,Je=function(e){return Object(a.b)(p.a,Object.assign({as:v.Flex,zaType:"Button",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:function(e){return{borderRadius:"12px",backgroundColor:e.colors.GBK99A,cursor:"pointer","&+&":{marginLeft:"4px"}}}},e))},Xe=function(e){var t,n=e.folders,r=void 0===n?{}:n,i=e.activeFolderId,c=e.getFoldersList,l=e.folderClick,u=e.reset,d=Object(T.b)(),b=Object(o.useState)(""),f=Object(s.a)(b,2),p=f[0],h=f[1],m=Object(o.useState)(""),g=Object(s.a)(m,2),O=g[0],j=g[1],y=function(e,t){"nav-edit"===e?(h(t.id),j(t.name)):"nav-delete"===e&&be.a.confirm(Object(a.c)("div",{className:"MaterialLibrary-alert",children:[Object(a.b)("h2",{children:"是否删除已选择分类？"}),Object(a.b)("p",{children:"分类中的图片将归入未分类中"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){d("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t.id),{method:"DELETE",body:{delete_material:!1}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?(be.a.alert("已成功删除分组，该分组的图片已移动至「我的图片-未分类」"),u()):be.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))};return null!=r&&r.hidden?null:Object(a.c)("div",{className:"MaterialLibraryNav",children:[Object(a.c)("div",{className:"MaterialLibraryNav-nav",children:[Object(a.c)(v.Flex,{className:"MaterialLibraryNav-Mine",justifyContent:"space-between",alignItems:"center",children:[Object(a.c)(v.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(a.b)(Ve.a,{className:"nav-icon"}),null==r?void 0:r.name]}),Object(a.b)("div",{className:"nav-num",children:null==r?void 0:r.materialCount})]}),null==r||null===(t=r.child)||void 0===t?void 0:t.map((function(e){return Object(a.c)(v.Flex,{className:Ze()("MaterialLibraryNav-Folder",{active:i===e.id}),justifyContent:"space-between",alignItems:"center",onClick:function(){l(e.id)},children:[Object(a.c)(v.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(a.b)(Ue.a,{className:"nav-icon"}),p!==e.id&&Object(a.b)("div",{className:"nav-name",children:e.name})]}),p!==e.id&&Object(a.b)("div",{className:Ze()("nav-num",{"disable-hover":!e.supportEdit&&!e.supportDelete}),children:e.materialCount||0}),p!==e.id&&(e.supportEdit||e.supportDelete)&&Object(a.c)(v.Flex,{className:"nav-handle",children:[e.supportEdit&&Object(a.b)(Je,{zaText:"编辑",onClick:function(t){t.stopPropagation(),y("nav-edit",e)},children:Object(a.b)(Fe.a,{fill:"currentColor",size:10})}),e.supportDelete&&Object(a.b)(Je,{zaText:"删除",onClick:function(t){t.stopPropagation(),y("nav-delete",e)},children:Object(a.b)(qe.a,{fill:"currentColor",size:10})})]}),p===e.id&&Object(a.b)(Ye,{folderId:e.id,inputShowName:O,getFoldersList:c,resetInput:function(e){h(e)}})]},e.id)}))]}),Object(a.c)(v.Flex,{className:"MaterialLibraryNav-Add",justifyContent:"space-between",alignItems:"center",onClick:function(){var e;(null==r||null===(e=r.child)||void 0===e?void 0:e.length)>15?be.a.alert("分组已达上限，请删除已有的分类后再行添加"):be.a.confirm(Object(a.c)("div",{className:"MaterialLibrary-alert",children:[Object(a.b)("h2",{children:"添加分类"}),Object(a.b)(Ye,{type:"add",className:"MaterialLibraryNav-input-module"})]}),{text:{ok:"添加",cancel:"取消"}}).then((function(){var e,t=null===(e=document.querySelector(".MaterialLibrary-input-module"))||void 0===e?void 0:e.value;d("".concat(location.origin,"/api/v4/materials/pc_editor/folders"),{method:"POST",body:{name:t,material_type:"image"}}).then((function(){c()})).catch((function(e){var t,n,a;be.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(a=n.error)||void 0===a?void 0:a.message)||"网络错误，稍后重试吧!")}))}),(function(){}))},children:[Object(a.b)(Ke,{className:"nav-icon"}),"添加分类"]})]})};Xe.propTypes={folders:d.a.object,getFoldersList:d.a.func,folderClick:d.a.func};var $e=Xe,et=["dataList","activeFolderId","folders","getFoldersList","insertImages"];function tt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var at,ot=function(e){var t=e.isPageError,n=e.handleUploadImage,o=e.reset;return t?Object(a.b)(a.a,{children:Object(a.b)(R.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:o})}):Object(a.b)(_e,{css:{marginTop:"-50px"},handleUploadImage:n})},rt=function(e){var t=e.dataList,n=e.activeFolderId,r=e.folders,i=e.getFoldersList,c=e.insertImages,l=Object(m.default)(e,et),s=Object(T.b)(),u=(t||[]).filter((function(e){return!0===e.checked})),d=Object(o.useMemo)((function(){var e;return null==r||null===(e=r.child)||void 0===e?void 0:e.filter((function(e){return e.id!==n}))}),[r,n]);return Object(a.c)(v.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:u.length>0?"space-between":"flex-end"},l),{},{children:[u.length>0&&Object(a.b)(M,{onClick:function(){0!==u.length&&be.a.confirm(Object(a.c)("div",{className:"MaterialLibrary-alert",children:[Object(a.c)("h2",{children:["是否删除已选择共 ",u.length," 张图片？"]}),Object(a.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){var e="".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/materials");s(e,{method:"DELETE",body:{material_type:"image",folder_material_ids:u.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?i():be.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))},children:"删除图片"}),Object(a.c)(v.Box,{children:[u.length>0&&(null==d?void 0:d.length)>0&&Object(a.b)(P,{css:{width:"86px"},onClick:function(){if(0!==u.length){var e=d[0].id;be.a.confirm(Object(a.c)("div",{className:"MaterialLibrary-alert",children:[Object(a.c)("h2",{children:["为已选择共 ",u.length," 张图片分类"]}),Object(a.b)(Ne.b,{buttonClassName:"MaterialLibraryContent-select",listClassName:"MaterialLibraryContent-option",value:n,onChange:function(t){e=t},children:d.map((function(e){var t=e.name,n=e.id;return Object(a.b)(Ne.a,{value:n,text:t,children:t},n)}))})]}),{text:{ok:"确定",cancel:"取消"}}).then((function(){s("".concat(location.origin,"/api/v4/materials/pc_editor/material-move"),{method:"POST",body:{folder_id:n,target_folder_id:e,folder_material_ids:u.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?i():be.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))}},children:"移动"}),Object(a.b)(L,{active:u.length>0,onClick:function(){c(_(u))},zaText:"插入图片；图片数：".concat(u.length||0),children:"插入图片"})]})]}))},it=function(e){var t=e.activeFolderId,n=e.getFoldersList,r=e.folders,i=Object(T.b)(),c=pe({itemKey:"uniqueId"}),l=c.materialList,s=c.paging,u=c.isLoading,d=c.setIsLoading,f=c.hasInited,p=c.setHasInited,h=c.isDrained,m=c.isPageError,g=c.setIsPageError,O=c.selectAllChecked,j=c.toggleSelectAll,y=c.reset,C=c.handleResponseErrorData,w=c.handleResponseData,x=c.chooseImage,k=c.insertImages,S=!l.length,A=Object(b.d)((function(){return d(!0),g(!1),i((null==s?void 0:s.next)||Object(I.a)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{offset:null==l?void 0:l.length,limit:24}))})),R=Object(b.d)((function(){return A().then(w).catch((function(e){C(e.payload)}))})),E=function(e){var a=e.target.files;if(null!=a&&a.length)if((null==a?void 0:a.length)>100)be.a.alert("添加图片请不要超过 100 张哦~");else{var o,r=[],c=tt(a);try{var l=function(){var e=o.value;Object(Ie.a)(e).then((function(o){Object(Ee.a)(o).then((function(o){(r=r.concat({name:null==e?void 0:e.name,source:null==o?void 0:o.original_hash})).length===a.length&&function(e){i("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{method:"POST",body:{material_type:"image",materials:e}}).then((function(e){var t,a;null!==(t=e.payload)&&void 0!==t&&t.success?n():be.a.alert((null===(a=e.payload)||void 0===a?void 0:a.message)||"网络错误，稍后重试吧！")})).catch((function(e){var t,n,a;be.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(a=n.error)||void 0===a?void 0:a.message)||"网络错误，稍后重试吧!")}))}(r)}))}))};for(c.s();!(o=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}}};Object(o.useEffect)((function(){!f&&t&&A().then(w).catch((function(e){C(e.payload,!0)})).finally((function(){p(!0)}))}),[f,p,t,A,w,C]);var z=S?!u&&Object(a.b)(ot,{handleUploadImage:E,isPageError:m,reset:y}):Object(a.c)(a.a,{children:[Object(a.b)(v.Box,{mt:"-36px",width:"100px",children:Object(a.b)(Me,{handleUploadImage:E},l.length)}),Object(a.b)(J,{getContainer:function(e){return e},onLoad:R,isLoading:u,isDrained:h,css:{marginLeft:"-14px"},children:l.map((function(e,t){return Object(a.b)(ue,{data:e,chooseImage:x,insertImages:k,isPrivate:!0},String([e.uniqueId,t]))}))}),Object(a.b)(rt,{dataList:l,folders:r,activeFolderId:t,getFoldersList:n,insertImages:k})]});return Object(a.c)(a.a,{children:[Object(a.b)(N,{children:Object(a.b)(F,{css:{marginLeft:"auto"},checked:O,onChange:j})}),f?z:Object(a.b)(B,{})]})},ct=function(e){var t,n=Object(A.default)({},e),o=xe(j.PRIVATE),r=o.hasInited,i=o.getFoldersList,c=o.reset,l=o.isPageError,s=o.folders,u=o.activeFolderId,d=o.setActiveFolderId,b=null===(t=s.child)||void 0===t?void 0:t.find((function(e){return e.id===u})),f=l?Object(a.b)(ot,{isPageError:!0,reset:c}):Object(a.b)(it,Object.assign({folders:s,activeFolderId:u,getFoldersList:i},n),String([u,null==b?void 0:b.materialCount]));return Object(a.c)(v.Flex,{color:"GBL05A",css:{height:"530px",overflow:"hidden",fontSize:"12px"},children:[!l&&Object(a.b)($e,{folders:s,activeFolderId:u,folderClick:function(e){u!==e&&d(e)},getFoldersList:i,reset:c}),Object(a.b)(v.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px",flex:1}},n),{},{children:r?f:Object(a.b)(B,{css:{marginTop:42}})}))]})},lt=["dataList","deleteImages","insertImages"],st=function(e){var t=e.isPageError,n=e.reset,o=$().setTabType;return t?Object(a.b)(R.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:n}):Object(a.b)(R.a.EI1A,{image:"default",content:"最近使用为空，请搜索网络素材或上传图片",buttonText:"上传图片",buttonOnClick:function(){o(j.PRIVATE)}})},ut=function(e){var t=e.dataList,n=e.deleteImages,o=e.insertImages,r=Object(m.default)(e,lt),i=(t||[]).filter((function(e){return!0===e.checked}));return Object(a.c)(v.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:i.length>0?"space-between":"flex-end"},r),{},{children:[i.length>0&&Object(a.b)(M,{onClick:function(){0!==i.length&&be.a.confirm(Object(a.c)("div",{className:"MaterialLibrary-alert",children:[Object(a.c)("h2",{children:["是否删除已选择共 ",i.length," 张图片？"]}),Object(a.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){n(i.map((function(e){return e.materialId})))}),(function(){}))},children:"删除图片"}),Object(a.b)(L,{active:i.length>0,onClick:function(){o(_(i))},zaText:"插入图片；图片数：".concat(i.length||0),children:"插入图片"})]}))},dt=function(e){var t=Object(A.default)({},e),n=Object(T.b)(),r=pe({itemKey:"materialId"}),i=r.materialList,c=r.paging,l=r.isLoading,s=r.setIsLoading,u=r.hasInited,d=r.setHasInited,f=r.isDrained,p=r.isPageError,h=r.setIsPageError,m=r.selectAllChecked,g=r.toggleSelectAll,O=r.reset,j=r.handleResponseErrorData,y=r.handleResponseData,C=r.chooseImage,w=r.insertImages,x=!i.length,k=Object(b.d)((function(){return s(!0),h(!1),n((null==c?void 0:c.next)||Object(I.a)("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{offset:null==i?void 0:i.length,limit:24,material_type:"image"}))})),S=Object(b.d)((function(){return k().then(y).catch((function(e){j(e.payload)}))})),R=Object(b.d)((function(e){return n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"DELETE",body:{material_type:"image",material_ids:e}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?O():be.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))})),E=Object(b.d)((function(e){be.a.confirm(Object(a.c)("div",{className:"MaterialLibrary-alert",children:[Object(a.b)("h2",{children:"是否从最近使用删除图片？"}),Object(a.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){R([e.materialId])}),(function(){}))}));Object(o.useEffect)((function(){u||k().then(y).catch((function(e){j(e.payload,!0)})).finally((function(){d(!0)}))}),[u,d,k,y,j]);var z=x?!l&&Object(a.b)(st,{isPageError:p,reset:O}):Object(a.c)(a.a,{children:[Object(a.b)(J,{getContainer:function(e){return e},onLoad:S,isLoading:l,isDrained:f,children:i.map((function(e,t){return Object(a.b)(ue,{data:e,chooseImage:C,insertImages:w,deleted:e.deleted,deleteSingleImage:E},String([e.materialId,t]))}))}),Object(a.b)(ut,{dataList:i,deleteImages:R,insertImages:w})]});return Object(a.c)(v.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:[Object(a.b)(N,{children:Object(a.b)(F,{css:{marginLeft:"auto"},checked:m,onChange:g})}),u?z:Object(a.b)(B,{})]}))},bt=n(24),ft=n(1162),pt=n(96),ht=n.n(pt),mt=n(111),vt=n.n(mt),gt=n(283),Ot=n(866),jt=n(995),yt=function(e){var t,n=e.data,o=e.deleteImage,r=e.reUploadImage,i=e.dragWrapRef,c=n||{},l=c.tag,s=c.index,u=(null==i||null===(t=i.current)||void 0===t?void 0:t.clientWidth)||746,d={cursor:"pointer",userDrag:"none",userSelect:"none",WebkitUserDrag:"none",WebkitUserSelect:"none"};return Object(a.c)(v.Box,{id:l.originSrc+s,css:function(e){return Object.assign({position:"relative",display:"inline-block",width:"105px",height:"105px",margin:"0 calc(".concat(u-655,"px / 12) 15px"),borderRadius:"2px",background:e.colors.GBK10C,"&:active":{filter:"drop-shadow(0px 3px 6px rgba(0, 0, 0, 0.15)) drop-shadow(0px 0px 4px rgba(0, 0, 0, 0.3))"}},"pending"===l.status&&d)},children:[Object(a.b)(v.Image,{src:l.originSrc,width:"100%",height:"100%",css:{borderRadius:"2px"},sx:{objectFit:"cover"}}),Object(a.c)(v.Box,{css:function(e){return{position:"absolute",top:0,left:0,width:"105px",height:"105px",borderRadius:"2px",zIndex:2,backgroundColor:e.colorMod(e.colors.GBK02A).alpha("success"===l.status?0:.4),"& .CircleLoadingBar .path":{stroke:e.colors.GBK99A},"&:hover":{".close":{display:"block"}}}},children:["pending"===l.status&&Object(a.b)(jt.a,{}),Object(a.b)(v.Box,{className:"close",css:function(e){return Object.assign({position:"absolute",top:"-10px",right:"-9px",zIndex:3,width:"20px",height:"20px",lineHeight:"21px",fontSize:"15px",textAlign:"center",borderRadius:"50%",display:"none",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.4),color:e.colors.GBK99A,"&>span":{marginLeft:"1px"}},d)},onClick:function(){return o(l,s)},children:Object(a.b)(qe.a,{center:!0,width:"13px",height:"13px"})}),"error"===l.status&&Object(a.c)(a.a,{children:[Object(a.c)(v.Flex,{fontSize:"15px",fontWeight:"400",height:"82px",color:"GBK99A",alignItems:"center",justifyContent:"center",css:d,onClick:function(){return r(l.file,s)},children:[Object(a.b)(Ot.a,{width:"20px",height:"22px"}),Object(a.b)(v.Text,{ml:"3px",children:"重试"})]}),Object(a.b)(v.Box,{css:function(e){return{position:"absolute",bottom:0,left:0,zIndex:3,width:"100%",height:"23px",lineHeight:"23px",fontSize:"12px",fontWeight:400,textAlign:"center",backgroundColor:e.colorMod(e.colors.GBK99A).alpha(.8),color:e.colors.GRD03A,borderRadius:"0 0 1px 1px"}},children:"上传失败"})]})]})]},l.originSrc+s)},Ct=n(29),wt=["dataList","insertImages","onClose"],xt=function(e){var t=e.src,n=e.originalSrc,a=e.watermarkSrc,o=e.privateWatermarkSrc,r=e.watermark,i=e.dataRawwidth,c=e.dataRawheight,l=e.hash,s=Object(te.imgUrl)(t,{quality:ht()(navigator.userAgent).Mobile?50:80,size:window.devicePixelRatio>=1.5?"1440w":"720w"});return{src:s,url:s,originalSrc:n,watermarkSrc:a,privateWatermarkSrc:o,watermark:r,rawWidth:i,rawHeight:c,id:l}},kt=function(e){var t=e.dataList,n=e.insertImages,o=e.onClose,r=Object(m.default)(e,wt);return Object(a.c)(v.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},alignItems:"center",justifyContent:"flex-end"},r),{},{children:[(null==t?void 0:t.length)>0&&Object(a.c)(v.Text,{color:"GBK03A",fontSize:"14px",fontWeight:"400",mr:"10px",children:["已上传 ",t.length," 张图片，拖拽可调整顺序"]}),Object(a.b)(L,{active:t.length>0,onClick:function(){var e=t.map((function(e){return e.data||{}}));n(e,!0),o()},zaText:"插入图片；图片数：".concat(t.length||0),children:"插入图片"})]}))},St=function(e){var t=e.handleUploadImage,n=e.errorList,o=e.reUpload;return Object(a.c)(v.Flex,{alignItems:"center",justifyContent:"space-between",children:[Object(a.b)(Me,{handleUploadImage:t,style:{margin:"5px 0 4px 20px",height:"32px"},isLocal:!0}),(null==n?void 0:n.length)>0&&Object(a.c)(v.Flex,{alignItems:"center",mr:"20px",mt:"1px",fontSize:"14px",children:[Object(a.c)(v.Text,{color:"GRD03A",children:[n.length," 张上传失败"]}),Object(a.b)(v.Text,{css:function(e){return{width:"114px",height:"32px",lineHeight:"32px",marginLeft:"10px",borderRadius:"3px",cursor:"pointer",background:e.colors.GBK10A,color:e.colors.GBL01A,fontWeight:500,textAlign:"center"}},onClick:o,children:"批量重新上传"})]})]})},At=function(){var e=(Object(b.e)((function(){return n.e(79).then(n.t.bind(null,2819,7))}))||{}).DraggableArea,t=Object(o.useRef)(),r=Object(bt.useDispatch)(),i=$().sourceType,c=$(),l=c.insertImage,u=c.onClose,d=c.initLocalList,f=c.setInitLocalList,p=Object(o.useState)(d||[]),h=Object(s.a)(p,2),m=h[0],g=h[1],O=Object(o.useRef)(m);Object(o.useEffect)((function(){O.current=m}),[m]),Object(o.useEffect)((function(){return g(d),function(){var e;f(null===(e=O.current)||void 0===e?void 0:e.map((function(e){return Object.assign(Object.assign({},e),"pending"===e.status&&{status:"error"})})))}}),[]);var j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.findIndex((function(e){return e.id===t})),o=Object(de.a)(e);return-1!==a&&o.splice(a,1,Object.assign(Object.assign({},e[a]),n)),o},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var a=null!=n&&n.isUpload?null==n?void 0:n.imageList:m;a.splice(t,1,Object.assign(Object.assign({},a[t]),{},{status:"pending"})),g((function(){return Object(de.a)(a)})),r(Object(gt.b)(e,"default",i)).then((function(e){var n=e.payload;g((function(e){var o;return j(e,null===(o=a[t])||void 0===o?void 0:o.id,{data:xt(n),status:"success"})}))})).catch((function(){g((function(e){var n;return j(e,null===(n=a[t])||void 0===n?void 0:n.id,{status:"error"})}))}))}},C=function(e){var t,n=e.target.files;null!=n&&n.length&&((null==n?void 0:n.length)>100?be.a.alert("添加图片请不要超过 100 张哦~"):null===(t=Array.from(n))||void 0===t||t.forEach((function(e){Object(ft.b)({file:e,preset:ft.a.content}).then((function(){g((function(t){var n=[].concat(Object(de.a)(t),[{originSrc:window.URL.createObjectURL(e),status:"pending",id:vt()("image"),file:e}]);return function(e,t){var n=t.length-1;y(t[n].file,n,{isUpload:!0,imageList:t})}(0,n),n}))})).catch((function(e){r(Object(Ct.h)(e.message||"图片上传未完成，请稍后发布","red"))}))})))},w=function(e,t){var n=Object(de.a)(m);n.splice(t,1),g(n)},x=function(e){var t=[];return null==e||e.forEach((function(e,n){"error"===e.status&&t.push(Object.assign(Object.assign({},e),{},{index:n}))})),t};return null!=m&&m.length?Object(a.c)(a.a,{children:[Object(a.b)(St,{handleUploadImage:C,errorList:x(m),reUpload:function(){var e;null===(e=x(m))||void 0===e||e.forEach((function(e){return y(e.file,e.index)}))}}),Object(a.b)(v.Box,{ref:t,css:{position:"relative",width:"100%",height:"505px",overflowY:"scroll",padding:"10px 12.5px 16px",lineHeight:"0.8"},children:e?Object(a.b)(e,{tags:m.map((function(e){return Object.assign(Object.assign({},e),{},{id:"".concat(e.id,"_").concat(e.status)})})),render:function(e){return Object(a.b)(yt,{data:e,deleteImage:w,reUploadImage:y,dragWrapRef:t})},onChange:function(e){g(e.map((function(e){var t,n;return Object.assign(Object.assign({},e),{},{id:(null===(t=e.id)||void 0===t||null===(n=t.split("_"))||void 0===n?void 0:n[0])||vt()("image")})})))}}):m.map((function(e,n){return Object(a.b)(yt,{data:{tag:e,index:n},deleteImage:w,reUploadImage:y,dragWrapRef:t},"".concat(e.id,"_").concat(n))}))}),Object(a.b)(kt,{dataList:m.filter((function(e){return"success"===e.status})),onClose:u,insertImages:l})]}):Object(a.b)(_e,{css:{marginTop:"-20px"},handleUploadImage:C})},Rt=function(e){var t=Object(A.default)({},e);return Object(a.b)(a.a,{children:Object(a.b)(v.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:Object(a.b)(At,Object.assign({},t))}))})},Tt=(at={},Object(h.a)(at,j.LOCAL,Rt),Object(h.a)(at,j.EMOTICON,je),Object(h.a)(at,j.PUBLIC,Te),Object(h.a)(at,j.PRIVATE,ct),Object(h.a)(at,j.LATEST,dt),at),It=function(e){var t=e.onClose,n=e.sourceType,r=e.sourceId,i=e.insertImage,c=Object(o.useState)(j.LOCAL),l=Object(s.a)(c,2),u=l[0],d=l[1],b=Object(o.useState)([]),f=Object(s.a)(b,2),h=f[0],m=f[1],v=Tt[u];return Object(o.useEffect)((function(){var e=function(e){return e.preventDefault()};return document.addEventListener("drop",e,!1),document.addEventListener("dragover",e,!1),function(){document.removeEventListener("drop",e,!1),document.removeEventListener("dragover",e,!1)}}),[]),Object(a.b)(ee,{onClose:t,sourceType:n,sourceId:r,insertImage:i,setTabType:d,initLocalList:h,setInitLocalList:m,children:Object(a.c)("div",{children:[Object(a.b)(S,{tabType:u,tabChange:d}),v&&Object(a.b)(p.b,{block:u,children:Object(a.b)(v,{})})]})})};It.propTypes={sourceType:d.a.string,sourceId:d.a.number,onClose:d.a.func,insertImage:d.a.func};var Et=It,Nt=function(e,t){var n=e.sourceType,r=e.sourceId,i=e.insertImage,c=Object(o.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],h=Object(b.d)((function(){return d((function(e){return!e}))}));return Object(o.useImperativeHandle)(t,(function(){return{toggleShown:h}}),[h]),Object(a.b)(f.b,{css:{minWidth:"746px",".Modal-content":{margin:0,padding:0}},onClose:h,children:u&&Object(a.b)(p.b,{block:"MaterialLibrary",children:Object(a.b)(Et,{onClose:h,sourceType:n,sourceId:r,insertImage:i})})})};Nt.propType={sourceType:d.a.string.isRequired,sourceId:d.a.number.isRequired,insertImage:d.a.func.isRequired};var Bt=Object(o.forwardRef)(Nt);t.a=function(e){var t=e.sourceType,n=e.sourceId,o=r.a.createRef(null),s={},u=!1,d=null,b=function(e,t){u?d=Object(l.a)(d,"image","IMMUTABLE",Object.assign(Object.assign({},t?null==e?void 0:e.value:{upload:e}),{},{size:"normal"})):s.setEditorState(Object(l.a)(s.getEditorState(),"image","IMMUTABLE",{upload:e,size:"normal"}))};return{initialize:function(e){Object.assign(s,e)},components:[Object(a.b)(Bt,{ref:o,sourceType:t,sourceId:n,insertImage:function(e,t){var n;n=function(){for(var n=0;n<e.length;n++)b({value:e[n]},t)},u=!0,d=s.getEditorState(),n(),s.setEditorState(d),u=!1}},"material_library")],handleCommand:function(e){var t;return"insert-image-from-library"===e?(null===(t=o.current)||void 0===t||t.toggleShown(),"handled"):"not-handled"},toolbar:{label:"插入图片",section:c.a.BASIC_MEDIA,text:"图片",icon:Ve.a,priority:2,onClick:function(){var e;null===(e=o.current)||void 0===e||e.toggleShown()}},toolbarV2:[{label:"插入图片",section:i.a.BASIC_MEDIA,text:"图片",icon:Ve.a,priority:2,onClick:function(){var e;null===(e=o.current)||void 0===e||e.toggleShown()}}]}}},1707:function(e,t,n){"use strict";n.d(t,"a",(function(){return It}));var a=n(49),o=n(206),r=n(15),i=n(16),c=n(77),l=n(17),s=n(18),u=n(9),d=n(1),b=n(3),f=n.n(b),p=n(0),h=n(24),m=n(19),v=n(41),g=n(13),O=n.n(g),j=n(55),y=n(209),C=n.n(y),w=n(1393),x=n(2799),k=n(2220),S=n(2811),A=n(2221),R=n(291),T=n(279),I=n(158),E=n(139),N=n(45),B=n.n(N),z=n(415),L=n(1127),P=n(222),M=n(161),D=n(980),_=n(35),V=n(74),U=n(1181),F=n(1636),q=n(1638),H=n(1715),G=n(491),K=n(499),W=n(523),Z=n(121),Q=n(79),Y=n(482),J=n(29),X=n(46),$=n(56),ee=n(431),te=n(448),ne=n(1124),ae=n(1639),oe=n(83),re=n(1571),ie=n(1338),ce=n(428),le=n(38),se=n(1416),ue=n(1500),de=n(954),be=n(213);function fe(e){var t=e.isAnonymous,n=e.handleToggleAnonymous,a=e.isSmall,o=e.isReport;return Object(d.b)(be.c,{id:"publish-anonymous-setting",css:a?{transform:"scale(0.5)"}:{},checked:t,onChange:n,forceControlled:!0,disabled:o})}var pe=n(925);function he(e){var t=e.isSmall,n=Object(p.useContext)(de.a),a=n.updateFormData,o=(0,n.getFormData)().pushActivity,r=Object(pe.a)();Object(p.useEffect)((function(){a({pushActivity:void 0===o||o})}),[o,a]);return Object(d.b)(be.c,{css:t?{transform:"scale(0.5)"}:{},checked:o,onChange:function(e){var t=e.target.checked;_.a.trackEvent(null,{id:8361,action:"Click"},{button:{text:t?"开":"关"}}),t?a({pushActivity:!0}):(_.a.trackCardShow(null,{id:8362}),r.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",ok:"关闭推送"}).then((function(){_.a.trackEvent(null,{id:8363,action:"Click"}),a({pushActivity:!1})})).catch((function(){})))},forceControlled:!0,id:"publish-push-to-followers"})}var me=n(891),ve=n(875),ge=n(43),Oe=n(122),je=n(36),ye=n(87),Ce=function(e){var t=e.openModal,n=e.handleHelpClick,a=function(e){n(e)};return Object(d.b)(ye.b,{title:"商业内容推广",subtitle:"",onClose:function(){a(!1)},className:"DisclaimerEntry-helpWrap",children:t&&Object(d.c)("div",{children:[Object(d.b)("div",{className:"DisclaimerEntry-helpContent",children:"商业内容是指，未经平台允许，用户以推广曝光为目的，发布含有产品售卖信息、牟利性外链等内容，或引导用户至第三方平台进行交易。"}),Object(d.b)("div",{className:"DisclaimerEntry-helpContent",children:"知乎提供了报备功能，创作者可以选择主动对包含商业推广的内容进行报备。对于包含商业推广但是未报备的内容，将按社区规范进行处理"}),Object(d.c)("div",{style:{marginTop:"10px"},children:["关于报备功能更多的信息，",Object(d.b)(j.Link,{href:"https://www.zhihu.com/creator/explore/academy/rights/rights",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"欢迎前往了解"})]}),Object(d.b)("button",{className:"DisclaimerEntry-helpBtn",onClick:function(){a(!1)},children:"我知道了"})]})})},we=n(1125),xe=n(1640),ke=function(){var e=Object(p.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(d.c)(d.a,{children:[Object(d.c)(j.Flex,{color:"GBL05A",alignItems:"center",flex:"0 0 80px",children:[Object(d.b)(j.Text,{mr:"4px",fontSize:14,fontWeight:"bold",css:{whiteSpace:"nowrap"},children:"商业推广"}),Object(d.b)(V.a,{as:je.c,zaAction:"Unknown",zaText:"商业推广帮助",zaType:"Button",style:{border:"none",width:"5px"},onClick:function(){o(!0)},children:Object(d.b)(me.a,{text:!0,center:!0,css:{cursor:"pointer"}})})]}),Object(d.b)(Ce,{openModal:n,handleHelpClick:function(){return o(!1)}})]})},Se=function(e){var t=e.isSmall,n=e.positionStatus,o=e.bizExtendsInfo,r=e.isReport,i=e.updateBizVipStatus,c=e.isAnonymous,l=e.menuClassName,s=e.itemClassName,u=Object(ge.a)(!1),b=Object(a.a)(u,2),f=b[0],p=b[1],m=Object(h.useDispatch)();return Object(d.c)(d.a,{children:[Object(d.b)(Oe.c,{positionStatus:n,toggler:Object(d.c)(j.Flex,Object.assign(Object.assign({alignItems:"center",color:"GBL05A",fontSize:t?12:13,css:{position:"relative",cursor:"pointer"}},t&&{marginLeft:"8px",padding:"0 10px",height:20,bg:"GBK10A",css:{borderRadius:10}}),{},{children:[Object(d.b)(j.Text,{mr:"4px",color:t?"GBL05A":"GBK06A",children:r?"商业推广":"非商业推广"}),Object(d.b)(ve.a,{text:!0,center:!0})]})),menuClassName:l,itemClassName:s,children:[{type:!1,description:"非商业推广"},{type:!0,description:"商业推广"}].map((function(e){return Object(d.b)(we.a,{onClick:function(){c?m(Object(J.h)("已经启用匿名的内容不能进行商业推广声明","red")):!0!==e.type||null!=o&&o.isCommercialVip?i(e.type):p.on()},checked:e.type===r,children:e.description},e.type)}))}),Object(d.b)(xe.a,{shown:f,toggle:p.toggle,onSuccess:function(){i(!0)},onFail:function(){i(!1)}})]})},Ae=n(4),Re=function(e){var t=e.openModal,n=e.handleHelpClick,a=function(e){n(e)};return Object(d.b)(ye.b,{title:"什么是「创作声明」？",subtitle:"",onClose:function(){a(!1)},className:"DisclaimerEntry-helpWrap",children:t&&Object(d.c)("div",{children:[Object(d.c)("div",{className:"DisclaimerEntry-helpContent",children:[Object(d.b)("span",{className:"DisclaimerEntry-helpContentBold",children:"「创作声明」"}),"是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"]}),Object(d.b)("button",{className:"DisclaimerEntry-helpBtn",onClick:function(){a(!1)},children:"我知道了"})]})})},Te={type:"none",description:"无声明"},Ie=function(){var e=Object(p.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(d.c)(d.a,{children:[Object(d.c)(j.Flex,{color:"GBL05A",alignItems:"center",flex:"0 0 76px",children:[Object(d.b)(j.Text,{mr:"4px",fontSize:14,fontWeight:"bold",css:{whiteSpace:"nowrap"},children:"创作声明"}),Object(d.b)(me.a,{text:!0,center:!0,css:{cursor:"pointer"},onClick:function(){o(!0),_.a.trackEvent(null,{id:5604,action:"Click"}),_.a.trackEvent(void 0,{id:7840,action:"Click"})}})]}),Object(d.b)(Re,{openModal:n,handleHelpClick:function(){return o(!1)}})]})},Ee=function(e){var t=e.question,n=e.answer,a=e.isSmall,o=e.positionStatus,r=Object(p.useContext)(de.a),i=r.getFormData,c=r.updateFormData,l=Object(h.useDispatch)(),s=Object(h.useSelector)((function(e){return e.question.disclaimers[t.id]})),u=i().disclaimerType,b=null==s?void 0:s.find((function(e){return e.type===u})),f=Object(h.useSelector)((function(e){return Object(Q.d)(e,null==n?void 0:n.id)})),m=(null==s?void 0:s.length)>0&&(!(null!=n&&n.id)||f);Object(p.useEffect)((function(){f&&c(function(e){var t,n,a,o,r="open"===(null==e||null===(t=e.disclaimerInfo)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.status);return{isDisclaimerChecked:r,disclaimerType:r?null==e||null===(a=e.disclaimerInfo)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.type:"none"}}(f))}),[Boolean(f)]),Object(p.useEffect)((function(){s||l(Object(Z.P)(t.id))}),[]);return m?Object(d.b)(Oe.c,{positionStatus:o,toggler:Object(d.c)(j.Flex,Object.assign(Object.assign({alignItems:"center",color:"GBL05A",fontSize:a?12:13,css:{position:"relative",cursor:"pointer"}},a&&{marginLeft:"8px",padding:"0 10px",height:20,bg:"GBK10A",css:{borderRadius:10}}),{},{children:[Object(d.b)(j.Text,{mr:"4px",color:a?"GBL05A":"GBK06A",children:(null==b?void 0:b.description)||Te.description}),Object(d.b)(ve.a,{text:!0,center:!0})]})),menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:[].concat(Object(Ae.a)(s),[Te]).map((function(e){return Object(d.b)(we.a,{onClick:function(){return function(e){c({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type})}(e)},checked:e.type===u,children:e.description},e.type)}))}):null},Ne=n(414),Be=n(2800);function ze(e){var t=e.setShowCampaignModal,n=e.allowSelectCampaign,a=e.resetCampaign,o=Object(ee.q)(),r=n&&null!=o&&o.title?"GBL01A":"GBL05A";return Object(d.c)(j.Flex,{alignItems:"center",color:"GBL05A",fontSize:"14px",ml:"16px",css:{cursor:"pointer"},children:[Object(d.b)("span",{children:"绑定活动"}),Object(d.b)(j.Flex,{alignItems:"center",p:"3px 10px",ml:"8px",fontSize:"12px",color:r,css:function(e){return{borderRadius:"13px",background:e.colorMod(e.colors[r]).alpha(.08),cursor:n?"pointer":"not-allowed"}},children:null!=o&&o.title?Object(d.c)(d.a,{children:[n&&Object(d.b)(Ne.a,{text:!0,center:!0,size:6,css:{marginRight:4},onClick:function(){a()}}),Object(d.b)("span",{role:"button",tabIndex:0,onClick:function(){n&&t(!0)},children:o.title})]}):Object(d.b)("span",{role:"button",tabIndex:0,onClick:function(){n&&t(!0)},children:"选择活动"})})]})}function Le(e){var t=e.setShowCampaignModal,n=e.allowSelectCampaign;return Object(d.c)(j.Flex,{alignItems:"center",fontSize:"13px",color:"GBK06A",css:{cursor:n?"pointer":"not-allowed"},onClick:function(){n&&t(!0)},children:[Object(d.b)(Be.a,{mr:4,size:20}),"选择活动"]})}function Pe(e){var t=e.setShowCampaignModal,n=e.allowSelectCampaign,a=e.resetCampaign,o=Object(ee.q)(),r=n?"GBL01A":"GBL05A";return Object(d.c)(j.Flex,{alignItems:"center",p:"6px 14px",color:r,fontSize:"13px",css:function(e){return{borderRadius:"20px",background:e.colorMod(e.colors[r]).alpha(.1),cursor:"pointer"}},onClick:function(){n&&t(!0)},children:[Object(d.b)(Be.a,{mr:4,size:20}),o.title,n&&Object(d.b)(Ne.a,{text:!0,center:!0,size:6,css:{marginLeft:4},onClick:function(e){a(),e.stopPropagation()}})]})}var Me=n(290);function De(e){var t=e.title,n=e.isSecondary,a=e.customTitle,o=e.children;return Object(d.c)(j.Flex,{pl:n?"20px":0,py:"20px",justifyContent:"space-between",alignItems:"center",css:function(e){return Object.assign({},Object(oe.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},children:[a||Object(d.b)(j.Text,{color:"GBL05A",fontSize:14,fontWeight:"bold",children:t}),o]})}var _e=n(2),Ve=n(939),Ue={all:"开放评论",censor:"预审评论",nobody:"关闭评论"},Fe={all:"允许任何人评论",follower:"允许关注我的人评论",followee:"允许我关注的人评论",paid:"付费用户可评论",censor:"答主筛选显示",nobody:"禁止评论"},qe=function(e){var t=e.checked,n=e.onChange,a=e.text,o=e.disabled;return Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",as:"label",children:[Object(d.b)(Ve.a,{size:12,checked:t,onChange:n,disabled:o}),Object(d.b)(j.Text,{ml:"4px",fontSize:13,children:a})]})};function He(){var e=Object(h.useSelector)(X.h),t=Object(p.useContext)(de.a),n=t.updateFormData,o=(0,t.getFormData)().commentPermission,r=Object(p.useState)("all"),i=Object(a.a)(r,2),c=i[0],l=i[1],s="all"!==c;Object(p.useEffect)((function(){o&&l(o)}),[o]);var u=function(e){e!==c&&(l(e),e&&n({commentPermission:e}))},b=e?Ue:Object.keys(Fe).filter((function(e){if("paid"!==e)return"follower"!==e})).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(_e.a)({},t,Fe[t]))}),{});return Object(d.c)(d.a,{children:[Object(d.b)(De,{title:"评论限制",children:Object(d.b)(be.c,{checked:s,onChange:function(){u(s?"all":Object.keys(b)[1])},forceControlled:!0})}),Object(d.b)(De,{title:"限制类型",isSecondary:!0,children:Object(d.b)(j.Flex,{justifyContent:"space-between",css:{opacity:s?1:.3},children:Object.keys(b).map((function(e){return"all"===e?null:Object(d.b)(qe,{text:b[e],checked:e===c,onChange:function(t){t.target.checked&&u(e)},disabled:!s},e)}))})})]})}var Ge={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Ke=function(e){var t=e.checked,n=e.onChange,a=e.text,o=e.disabled;return Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",as:"label",children:[Object(d.b)(Ve.a,{disabled:o,size:13,checked:t,onChange:n}),Object(d.b)(j.Text,{ml:"4px",fontSize:13,children:a})]})};function We(e){var t=e.currentUser,n=Object(p.useContext)(de.a),o=n.updateFormData,r=(0,n.getFormData)(),i=r.isCopyable,c=r.reshipmentSettings,l=Object(p.useState)("allowed"),s=Object(a.a)(l,2),u=s[0],b=s[1],f="disallowed"!==u;Object(p.useEffect)((function(){!1===i&&b("disallowed")}),[i]),Object(p.useEffect)((function(){c?b(c):t.caEnabled&&b("need_payment")}),[c,t]);var h=function(e){"need_payment"!==e||t.caEnabled||window.open("/copyright/invite"),b(e),o({reshipmentSettings:e})};return Object(d.c)(d.a,{children:[Object(d.b)(De,{title:"允许转载",children:Object(d.b)(be.c,{checked:f,onChange:function(){h(f?"disallowed":t.caEnabled?"need_payment":"allowed")},forceControlled:!0})}),Object(d.b)(De,{title:"转载设置",isSecondary:!0,children:Object(d.b)(j.Flex,{css:{opacity:f?1:.3},children:Object.keys(Ge).map((function(e){return"disallowed"===e||"need_payment"===e&&t.isOrg?null:Object(d.b)(Ke,{disabled:!f,text:Ge[e],checked:e===u,onChange:function(t){t.target.checked&&h(e)}},e)}))})})]})}var Ze=n(1748),Qe=n(460),Ye=function(e){var t,n=Object(X.b)(e),a=Object.values(e.entities.answers).filter((function(e){var t;return(null===(t=e.author)||void 0===t?void 0:t.urlToken)===(n&&n.urlToken)}))[0]||{};return null==a||null===(t=a.rewardInfo)||void 0===t?void 0:t.tagline};function Je(e){var t=e.answer,n=(t=void 0===t?{}:t).rewardInfo,o=(n=void 0===n?{}:n).isRewardable,r=void 0!==o&&o,i=e.question,c=i.id,l=i.relationship.isAnonymous,s=e.isAnswerRewardable,u=Object(p.useState)(!1),b=Object(a.a)(u,2),f=b[0],m=b[1],v=Object(h.useSelector)(Ye),g=Object(p.useState)(!1),O=Object(a.a)(g,2),j=O[0],y=O[1],C=Object(p.useContext)(de.a),w=C.getFormData,x=C.updateFormData,k=Object(h.useDispatch)(),S=w(),A=S.canReward,R=S.rewardTagline,T=Object(p.useState)(r||R),I=Object(a.a)(T,2),E=I[0],N=I[1];Object(p.useEffect)((function(){A&&N(!0)}),[A]);return Object(p.useEffect)((function(){x({rewardTagline:v})}),[v,x]),Object(p.useEffect)((function(){s&&(B.a.get("rewardNotication")||(y(!0),B.a.set("rewardNotication",!0)))}),[s]),Object(ge.l)((function(){return y(!1)}),j?2e3:null),s?Object(d.c)(d.a,{children:[Object(d.b)(be.c,{checked:E,onChange:function(e){if(!l)return!e.target.checked||R?(x({rewardTagline:""}),N(!1),void k(Object(Qe.n)(c,!1))):void m(!0);k(Object(J.h)("匿名回答无法开启赞赏，请先取消匿名","red"))},forceControlled:!0}),f&&Object(d.b)(Ze.a,{submitRewardText:function(e){x({rewardTagline:e}),N(!0),k(Object(Qe.n)()),m(!1)},onClose:function(){return m(!1)},tagline:R,edit:!1})]}):null}var Xe=n(647),$e=n(1096);function et(e){var t=e.setScheduledPublish,n=Object(p.useRef)(),a=new Date;return Object(d.b)($e.a,{css:function(e){return{fontSize:13,color:e.colors.GBL05A}},onRef:n,value:a,min:a,max:Xe.a(a,7),onChange:function(e,a){t(!0,e),_.a.setModule(n.current,{module:"Unknown",module_name:a.date?"日期":a.hours?"小时":a.minutes?"分钟":void 0}),_.a.trackEvent(n.current,{action:"Click",id:5731,name:"回答"})}})}var tt=n(1570),nt=n(421),at=n(1713),ot=function(e){var t=e.questionId,n=e.currentUser,a=Object(h.useSelector)((function(e){return e.question.bio})),o=Object(h.useSelector)((function(e){return e.topic.bios})),r=(a[t]||{result:{type:"headline"}}).result;return"topic"===r.type&&(r.bio=o[r.topic.id]||r.bio),r.bio&&"headline"!==r.type?r.bio:n.headline?Object(d.b)(nt.a,{inline:!0,html:(r||{}).bio||n.headline}):""};function rt(e){var t=e.question,n=e.currentUser,o=Object(p.useState)(!1),r=Object(a.a)(o,2),i=r[0],c=r[1];return Object(d.c)(d.a,{children:[Object(d.c)(j.Flex,{maxWidth:454,color:"GBL05A",alignItems:"center",css:{cursor:"pointer"},onClick:function(){c(!0)},children:[Object(d.b)(tt.a,{size:20}),Object(d.b)(j.Text,{ml:"5px",fontSize:13,color:"GBK06A",css:[Object(oe.d)(1)],children:Object(d.b)(ot,{questionId:t.id,currentUser:n})})]}),Object(d.b)(at.a,{shown:i,question:t,onClose:function(){return c(!1)}})]})}function it(e){var t=e.question,n=e.answer,a=e.settingExpanded,o=e.positionStatus,r=e.setScheduledPublish,i=e.canScheduledPublish,c=e.shouldShowAnonymousButton,l=e.handleToggleAnonymous,s=e.isReediting,u=e.isAnonymous,b=e.setShowCampaignModal,f=e.allowSelectCampaign,m=e.isNotOrgUser,v=e.currentUser,g=e.isVideoAnswer,O=e.resetCampaign,j=e.isReport,y=e.bizExtendsInfo,C=e.updateBizVipStatus,w=Object(h.useDispatch)(),x=Object(h.useSelector)((function(e){return e.switches})).isAnswerRewardable,k=Boolean(t||n)&&!(null!=n&&n.id),S=Object(ee.q)();Object(p.useEffect)((function(){void 0===x&&w(Object(Me.b)(["isAnswerRewardable"]))}),[w,x]);var A=Object(p.useMemo)((function(){return null!=S&&S.title?Pe:Le}),[null==S?void 0:S.title]);return Object(d.c)("div",{css:{maxHeight:a?"auto":0,overflowY:"hidden"},children:[!g&&Object(d.b)(De,{customTitle:Object(d.b)(Ie,{}),children:Object(d.b)(Ee,{question:t,answer:n,positionStatus:o})}),c&&!s&&Object(d.b)(De,{title:"启用匿名",children:Object(d.b)(fe,{isAnonymous:u,answer:n,handleToggleAnonymous:l,isReport:j})}),(null==y?void 0:y.isShowTab)&&Object(d.b)(De,{customTitle:Object(d.b)(ke,{}),children:Object(d.b)(Se,{positionStatus:o,isReport:j,bizExtendsInfo:y,updateBizVipStatus:C,isAnonymous:u,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"})}),!s&&i&&Object(d.b)(De,{title:"定时发布",children:Object(d.b)(et,{setScheduledPublish:r})}),g&&Object(d.b)(De,{title:"绑定活动",children:Object(d.b)(A,{resetCampaign:O,setShowCampaignModal:b,campaign:S,allowSelectCampaign:f})}),!s&&m&&Object(d.b)(De,{title:"编辑一句话介绍 / 话题经验",children:Object(d.b)(rt,{question:t,currentUser:v})}),(t||n)&&x&&Object(d.b)(De,{title:"开启赞赏",children:Object(d.b)(Je,{question:t,answer:n,isAnswerRewardable:!0})}),k&&!g&&Object(d.b)(De,{title:"推送给关注者",children:Object(d.b)(he,{})}),!s&&Object(d.c)(d.a,{children:[Object(d.b)(We,{currentUser:v}),Object(d.b)(He,{})]})]})}var ct=Object(v.withRouter)((function(e){var t,n,o,r=e.question,i=e.answer,c=e.isVideoAnswer,l=e.handleToggleAnonymous,s=e.positionStatus,u=e.isReediting,b=e.settingExpanded,f=e.handleExpand,m=e.isFullScreen,v=e.inEditor,g=e.location,O=Object(h.useDispatch)(),y=Object(p.useContext)(de.a),C=y.updateFormData,w=y.getFormData,x=((null==g?void 0:g.query)||{}).push_activity,k=Object(ee.q)(),S=Object(h.useSelector)(X.b),A=null==i||null===(t=i.attachment)||void 0===t||null===(n=t.video)||void 0===n?void 0:n.campaign,R=Boolean(!A||!A.title),T=Object(p.useState)(!1),I=Object(a.a)(T,2),E=I[0],N=I[1],B=Object(p.useState)([]),z=Object(a.a)(B,2),L=z[0],P=z[1],M=Object(p.useState)({}),D=Object(a.a)(M,2),_=D[0],U=D[1],F=w().isReport;Object(p.useEffect)((function(){O(Object(ce.l)()).then((function(e){var t=e.payload;P(t.data)}))}),[O]),Object(p.useEffect)((function(){O(Object(se.b)(null==r?void 0:r.id)).then((function(e){var t=e.payload;U(t.commercialPermissionInfo)}))}),[O,null==r?void 0:r.id]),Object(p.useEffect)((function(){null!=i&&i.id&&O(Object(Q.y)(null==i?void 0:i.id)).then((function(e){var t,n=e.payload;C({isReport:null===(t=n.commercialReportInfo)||void 0===t?void 0:t.isReport})})),null!=r&&r.id&&O(Object(le.Y)(null==r?void 0:r.id)).then((function(e){var t=e.payload;C(null==t?void 0:t.settings)})),O(Object(le.X)()).then((function(e){var t=e.payload;C(Object.assign(Object.assign({},null==t?void 0:t.settings),x&&{pushActivity:Boolean(Number(x))}))}))}),[O,null==i?void 0:i.id,C,null==r?void 0:r.id]);var q=Object(p.useCallback)((function(e){N(!1),O(Object(ee.m)(e))}),[O]),H=Object(p.useCallback)((function(){O(Object(ee.m)(null))}),[O]),G=function(e,t){C({isReport:e}),e&&t&&O(Object(se.b)(null==r?void 0:r.id)).then((function(e){var t=e.payload;U(t.commercialPermissionInfo)}))},K=null==r||null===(o=r.relationship)||void 0===o?void 0:o.isAnonymous,W="show"===Object($.useAbParam)("gue_anonymous"),Z=(r||{}).questionType,Y=S&&!S.isOrg,J=Y&&("normal"===Z||"commercial"===Z&&W||K)&&!c;return c&&u?null:Object(d.c)(j.Box,Object.assign(Object.assign({p:"0 20px",width:"100%"},m&&{mx:"auto",maxWidth:688}),{},{bg:"GBK99A",css:function(e){return Object.assign(Object.assign({position:"relative"},b?Object(oe.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)}):{boxShadow:"0 -1px 3px ".concat(e.colorMod(e.colors.GBK02B).alpha(.12))}),(v&&!b||!v&&b)&&{height:0,overflow:"hidden"})},children:[Object(d.c)(j.Flex,{py:"13px",justifyContent:"space-between",alignItems:"center",css:function(e){return Object.assign({whiteSpace:"nowrap"},Object(oe.c)({borderBottom:"1px solid ".concat(e.colors.GBK09A)}))},children:[Object(d.c)(j.Flex,{alignItems:"center",children:[Object(d.b)(j.Text,{mr:"4px",fontSize:15,fontWeight:"bold",color:"GBK03A",children:"发布设置"}),!b&&c&&Object(d.b)(ze,{setShowCampaignModal:N,allowSelectCampaign:R,resetCampaign:H}),!b&&!c&&Object(d.c)(d.a,{children:[!(null!=_&&_.isShowTab)&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(Ie,{}),Object(d.b)(Ee,{isSmall:!0,question:r,answer:i,positionStatus:s})]}),J&&!u&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(j.Text,{as:"label",htmlFor:"publish-anonymous-setting",fontSize:14,fontWeight:"bold",color:"GBL05A",children:"启用匿名"}),Object(d.b)(fe,{isSmall:!0,isAnonymous:K,answer:i,handleToggleAnonymous:l,isReport:F})]}),!u&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(j.Text,{as:"label",htmlFor:"publish-push-to-followers",fontSize:14,fontWeight:"bold",color:"GBL05A",children:"推送给关注者"}),Object(d.b)(he,{isSmall:!0})]}),(null==_?void 0:_.isShowTab)&&Object(d.c)(j.Flex,{ml:"16px",alignItems:"center",children:[Object(d.b)(ke,{}),Object(d.b)(Se,{isSmall:!0,positionStatus:s,bizExtendsInfo:_,isReport:F,isAnonymous:K,updateBizVipStatus:G,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem"})]})]})]}),Object(d.c)(V.a,{as:j.Flex,zaAction:"Unknown",zaText:b?"收起":"全部设置",zaType:"Button",alignItems:"center",color:"GBL05A",css:{cursor:"pointer"},onClick:f,children:[Object(d.b)(j.Text,{fontSize:14,mr:"4px",children:b?"收起":"全部设置"}),b?Object(d.b)(re.a,{size:20,center:!0}):Object(d.b)(ie.a,{size:20,center:!0})]})]}),Object(d.b)(it,Object.assign(Object.assign({},e),{},{settingExpanded:b,shouldShowAnonymousButton:J,isAnonymous:K,setShowCampaignModal:N,allowSelectCampaign:R,isNotOrgUser:Y,currentUser:S,resetCampaign:H,isReport:F,bizExtendsInfo:_,updateBizVipStatus:G})),Boolean(null==L?void 0:L.length)&&Object(d.b)(ue.a,{shown:E,onClose:function(){N(!1)},defaultCampaignId:null==k?void 0:k.id,campaignList:L,onSubmit:q})]}))})),lt=n(1641),st=n(946),ut=n(1743),dt=n(1716),bt=n(1744),ft=n(1727),pt=n(1730),ht=n(1705),mt=n(1182),vt=n(1642),gt=n(2787),Ot=n(887),jt=n(924),yt=n(30),Ct=function(e){var t=e.question,n=Object(h.useSelector)(X.b);return t.relationship.isAnonymous?Object(d.b)(jt.a,{className:"AnswerAdd-info",noLink:!0,author:yt.h}):n&&n.isOrg?Object(d.b)(jt.a,{className:"AnswerAdd-info",noLink:!0,author:n}):Object(d.b)(jt.a,{className:"AnswerAdd-info",noLink:!0,author:n,children:Object(d.b)(j.Text,{color:"GBK04A",children:Object(d.b)(ot,{questionId:t.id,currentUser:n})})})};function wt(e){var t=e.question,n=e.handleHistoryVersion,a=e.handleImportDoc,o=Object(p.useRef)();return Object(d.b)(d.a,{children:Object(d.c)(j.Flex,{p:"11px 20px",justifyContent:"space-between",mx:"auto",width:"100%",maxWidth:688,children:[Object(d.b)(Ct,{question:t}),Object(d.c)(j.Flex,{justifyContent:"center",alignItems:"center",p:"7px 12px",height:34,fontSize:14,fontWeight:500,color:"GBL05A",bg:"GBK10A",css:{borderRadius:3},children:[Object(d.c)(V.a,{as:j.Text,zaAction:"Unknown",zaText:"文档导入",zaType:"Button",pr:"8px",css:function(e){return{cursor:"pointer",borderRight:"1px solid ".concat(e.colors.GBK08A)}},onClick:a,children:[Object(d.b)(gt.a,{center:!0,text:!0,css:{marginRight:4}}),"文档导入"]}),Object(d.b)(Oe.c,{arrowed:!1,toggler:Object(d.b)(je.c,{preset:"plain",onRef:o,children:Object(d.b)(Ot.a,{css:{paddingLeft:8,position:"relative",top:1}})}),children:Object(d.b)(V.a,{as:Oe.b,zaAction:"Unknown",zaText:"历史版本",zaType:"Button",onClick:n,css:{padding:"10px 20px"},children:"历史版本"})})]})]})})}var xt,kt=n(1418),St=n(1417);n(1644);function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Rt=function(e){Object(l.a)(n,e);var t=At(n);function n(e,a){var i;Object(r.a)(this,n),(i=t.call(this,e,a)).editableReady=function(){var e=i.props,t=e.reporter,n=e.draft;t.reportSuccess(kt.a.editableInit),n&&t.reportSuccess(kt.a.draftLoad)},i.onCompositionStart=function(){i.composition=!0,i.syncDraft.cancel()},i.onCompositionEnd=function(){i.composition=!1,i.prevValue&&i.syncDraft(i.prevValue),i.prevValue=null},i.onChangeContent=function(e){i.loggingDeltaTime||(i.loggingDeltaTime=!0,i.startCompositionTime=Math.floor((new Date).getTime()/1e3)),i.hasEdited=!0,i.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),i.composition?i.prevValue=e:i.syncDraft(e)},i.onInsertDoc=function(){return i.editable.handleKeyCommand("insert-doc")},i.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var a=n.getRangeAt(0).cloneRange();a.collapse(t);var o=a.getBoundingClientRect();if(0===o.height){var r=a.commonAncestorContainer;1===r.nodeType&&(o=r.getBoundingClientRect())}if(0!==o.height){var i=o.bottom-(window.innerHeight-117);i>0&&window.scrollBy(0,i)}}},i.onDeleteDraftModalShow=function(){i.setState({deleteDraftModalShown:!0})},i.onDeleteDraft=function(){var e=i.props,t=e.isReediting,n=e.activeTabKey;t||(n===U.a.videoAnswer?i.editable.clearAllContent():i.editable.reset(),i.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),i.deleteDraft();var a=i.props.onDeleteDraft;a&&a()},i.onDeleteDraftModalHide=function(){i.setState({deleteDraftModalShown:!1})},i.checkVideoSectionReady=function(e){if(!e)return I.a.alert("没有上传视频，请上传后提交",{title:"无视频"}),!1;var t=e.videoId,n=e.isOriginal;if(t){if("zvideo"===e.type&&null==n)return I.a.alert("没有视频类型，请选择视频为原创或转载后提交",{title:"无视频类型"}),!1}else{var a=i.editable.checkVideoStatus();if(a.isUploading)return I.a.alert("视频上传中，请上传完成后提交",{title:"视频上传中"}),!1;if(a.hasError)return I.a.alert("视频上传失败，请重新上传后提交",{title:"上传失败"}),!1}return!0},i.checkEditorContentReady=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading"),!1):i.editable.hasImage("upload")?(i.handleError("image-uploading"),!1):i.editable.hasImage("error")||i.editable.hasVideo("error")&&!i.editable.hasVideo("error-review")?(I.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"}),!1):!i.editable.hasVideo("error-review")&&!i.editable.hasVideo("censor")||(I.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"}),!1)},i.getSubmitData=function(e,t,n){var a,o=i.state.scheduledPublishAt,r=i.props,l=r.answer,s=r.disclaimers,u=r.settings,b=r.isReediting,f={content:t},p=(0,r.getFormData)(),h=p.isDisclaimerChecked,m=p.disclaimerType,v=p.rewardTagline,g=p.pushActivity,O=p.commentPermission,j=p.reshipmentSettings,y=p.isReport;if(!b){var C=i.props.currentUser.caEnabled?"need_payment":"allowed";f.reshipmentSettings=j||C,f.commentPermission=O||"all"}if(f.rewardSetting={canReward:Boolean(v),tagline:v},e)return{content:t,attachment:n,rewardSetting:f.rewardSetting,reshipmentSettings:f.reshipmentSettings,commentPermission:f.commentPermission};if(s&&s.length&&(!l||u)&&(f.disclaimerStatus=h?"open":"close",f.disclaimerType=m||"none"),f.commercialReportInfo={isReport:!!y},f.isReport=!!y,o){if(_.a.trackEvent(Object(c.a)(i),{action:"Click",id:5733,name:"回答"}),w.a(o,x.a(new Date,30)))return void I.a.alert(Object(d.b)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});f.publishAt=Math.floor(o/1e3)+0}return void 0!==g&&(f.pushActivity=g),null!=n&&n.bizExt&&(f.bizExt=Object(ne.a)(n.bizExt)),f.tableOfContentsEnabled=i.editable.hasCatalog(),Object.assign(f,null===(a=i.editable)||void 0===a?void 0:a.getExtraPluginData()),f},i.canSubmit=function(){var e,t,n=null===(e=i.editable)||void 0===e?void 0:e.toHTML(),a=i.isVideoAnswer?null===(t=i.editable)||void 0===t?void 0:t.getAttachment():null;return i.isVideoAnswer?Boolean(a||n):Boolean(n)},i.handleSubmit=i.context.authRequired((function(){var e=i.props.reporter;e.reportRequest(kt.a.addAnswer);try{var t,n=i.props,a=n.answer,o=n.draft,r=n.isReediting,l=n.onSubmit,s=n.showNotification,u=n.question,d=u.id,b=u.questionType,f=n.currentUser,p=n.updateSettingsDisclaimer,h=n.loadLabel,m=n.onCancel;if(!i.editable)return m(),void e.reportSuccess(kt.a.addAnswer);if(!i.canSubmit())return void e.reportSuccess(kt.a.addAnswer);var v=i.editable.toHTML(),g=i.isVideoAnswer?i.editable.getAttachment():null==o?void 0:o.attachment;if(i.isVideoAnswer&&!i.checkVideoSectionReady(g))return void e.reportSuccess(kt.a.addAnswer);if(!i.checkEditorContentReady())return void e.reportSuccess(kt.a.addAnswer);var O=i.getSubmitData(i.isVideoAnswer,v,Object.assign(Object.assign({},g),{},{campaign_id:null===(t=i.props.campaign)||void 0===t?void 0:t.id}));Promise.resolve(l(O)).then((function(){a&&O.disclaimerStatus&&p(a.id,O.disclaimerStatus,O.disclaimerType),a&&h("answer",a.id),"commercial"===b&&s("已发布！由品牌筛选后进入推荐区。"),e.reportSuccess(kt.a.addAnswer)})).then((function(){_.a.trackCardShow(null,{id:7879}),r||_.a.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(d),author_member_hash_id:f.id}]}}],status:{result:"Success",event:{action:"Submit"}}})})).catch((function(t){var n;t.status&&"5"!==(null===(n=t.status)||void 0===n?void 0:n.toString()[0])||e.reportFail(kt.a.addAnswer,t),r||_.a.trackEvent(Object(c.a)(i),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}));var j=r?"Edit":"Answer";"Answer"===j&&_.a.trackEvent(Object(c.a)(i),{id:4930}),_.a.trackEvent(Object(c.a)(i),{action:j,is_intent:!1})}catch(t){throw e.reportFail(kt.a.addAnswer,t),t}})),i.onCancel=function(){var e=i.props.onCancel;i.editable.hasVideo("upload")?i.handleError("video-uploading-draft"):i.editable.hasImage("upload")?i.handleError("image-uploading-draft"):(i.hasEdited&&i.syncDraftImmediately(),e&&e())},i.onFocus=function(){"org"===i.props.question.questionType&&i.shouldAnswerOrgQuestionModalShow&&i.handleAnswerOrgQuestionModalShow(),i.setState({focusing:!0})},i.onFocusWithAuth=function(){return i.onFocusAuthChecked?i.onFocus():(i.onFocusAuthChecked=!0,i.context.authRequired(i.onFocus)())},i.onSelectText=function(e){i.setState({selectedText:e.replace(/\s/g,"")})},i.onLoadStart=function(){i.setState({loadingShown:!0})},i.onLoadEnd=function(){i.setState({loadingShown:!1})},i.handleInsertZVideo=function(){i.setState({showInsertableVideoUploader:!0})},i.getAllInviters=function(){var e=i.props,t=e.question;return(0,e.fetchAllInviters)(t.id)},i.getToolbarSidePlugins=function(){var e=i.state,t=e.isFullscreen,n=e.isLeaveActive;return(!t||n)&&Object(d.b)(R.a,{icon:Object(d.b)(k.a,{text:!0}),className:"AnswerForm-enterFullscreenButton",onClick:i.toggleFullscreen},"enterFullscreen")},i.getToolbarMenuPlugins=function(){var e=i.state.scheduledPublishAt;return Object(d.b)(p.Fragment,{children:i.canUseScheduledPublish&&Object(d.c)(R.c,{onClick:function(){i.setUseScheduledPublish(!e),_.a.trackEvent(Object(c.a)(i),{action:"Click",id:5730,name:"回答"})},children:[Object(d.b)(S.a,{text:!0}),e?"取消定时发布":"定时发布"]})})},i.setUseScheduledPublish=function(e,t){if(e)if(t)i.setState({scheduledPublishAt:t});else{var n=x.a(new Date,30);i.setState({initialScheduledPublishAt:n,scheduledPublishAt:n})}else I.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then((function(){i.setState({scheduledPublishAt:void 0}),_.a.trackEvent(Object(c.a)(i),{action:"Click",id:5737,name:"回答"})})).catch((function(){_.a.trackEvent(Object(c.a)(i),{action:"Click",id:5736,name:"回答"})})),_.a.trackCardShow(Object(c.a)(i),{id:5735,name:"回答"})},i.getEditorState=function(){return i.editable.state.editorState?i.editable.state.editorState:i.editable.getEditorState()},i.toggleFullscreen=function(){var e=i.state.isFullscreen,t=function(){var e=i.scroller.querySelector(".Editable");return e?e.offsetTop:0};i.scrollTop=e?i.scroller.scrollTop-t():Math.max(-i.scroller.getBoundingClientRect().top,0),i.setState({isFullscreen:!e},(function(){i.state.isFullscreen?i.scrollTop>0&&(i.scroller.scrollTop=i.scrollTop+t()):window.scrollTo(0,i.scroller.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top+i.scrollTop)}))},i.exitFullscreen=function(){i.cloneEditor.resetWithValue(i.getCloneContent());i.fullscreenContent.addEventListener("animationend",(function e(){i.fullscreenContent.removeEventListener("animationend",e),i.setState({isLeaveActive:!1}),i.toggleFullscreen()})),i.setState({isLeaveActive:!0})},i.handleFullscreenRef=function(e){e?P.hide():(P.show(),i.setState({isToolbarSticky:!1}))},i.handleScroll=function(){i.isHandleScrollPending||(i.isHandleScrollPending=!0,requestAnimationFrame((function(){var e=i.state,t=e.isFullscreen,n=e.isToolbarSticky,a=!1;if(t&&i.scroller){var o=i.scroller.querySelector(".Editable-toolbar");a=!!o&&i.scroller.scrollTop===o.offsetTop}a!==n&&i.setState({isToolbarSticky:a}),i.isHandleScrollPending=!1})))},i.handleUploadStart=function(){i.setState({isUploading:!0})},i.handleUploadEnd=function(){i.setState({isUploading:!1})},i.handleUploadError=function(e,t){switch(t){case"video":i.handleError("video-upload-error");break;case"image":i.handleError("image-upload-error",e)}},i.handleAnswerOrgQuestionModalShow=function(){i.setState({answerModalShown:!0}),i.shouldAnswerOrgQuestionModalShow=!1},i.handleAnswerModalHide=function(){i.setState({answerModalShown:!1})},i.syncDraftImmediately=i.props.reporter.recordError(kt.a.draftSave,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.state.content,n=i.props,a=n.reporter,o=n.draft,r=i.state.lastUpdatedTime,l=t.toHTML(),s=Math.floor(Date.now()/1e3);e=!r||i.startCompositionTime-r>180?s-i.startCompositionTime:s-r,i.setState({isTyping:!1});var u,d=i.props.answer,b=(d=void 0===d?{}:d).attachment;u=i.videoAnswerEditable||"zvideo"===(null==b?void 0:b.type)?"video_answer":"video"===(null==b?void 0:b.type)?"video_answer_v2":"normal";var f=i.isVideoAnswer?t.getAttachment():null==o?void 0:o.attachment,p=i.isVideoAnswer?Boolean(f||l):Boolean(l);p?i.updateDraft(l,e,u,f).then((function(e){var t;null!=e&&null!==(t=e.payload)&&void 0!==t&&t.updatedTime&&i.setState({lastUpdatedTime:e.payload.updatedTime}),i.loggingDeltaTime=!1,a.reportSuccess(kt.a.draftSave),_.a.trackEvent(Object(c.a)(i),{action:"AutoSave"})}),(function(e){throw a.reportFail(kt.a.draftSave,e),e})).finally((function(){delete i.startCompositionTime})):(i.deleteDraft(),a.reportSuccess(kt.a.draftSave))})),i.syncDraft=Object(L.a)(i.syncDraftImmediately,2e3),i.updateDraft=function(){for(var e=i.props,t=e.question.id,n=e.draft,a=e.addDraft,o=e.updateDraft,r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return n?o.apply(void 0,[t].concat(c)):a.apply(void 0,[t].concat(c))},i.focus=function(){i.editable&&i.editable.focus()},i.hasVideo=function(){return!!i.editable&&i.editable.hasVideo()},i.hasADLinkCard=function(){return!!i.editable&&i.editable.hasADLinkCard()},i.hasFeeConsultCard=function(){return!!i.editable&&i.editable.hasFeeConsultCard()},i.hasMCNLinkCard=function(){return!!i.editable&&i.editable.hasMCNLinkCard()},i.hasCommercialReport=function(){var e=i.props.getFormData().commercialReportInfo;return null==e?void 0:e.isReport},i.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;i.setState({commentPermission:n})},i.handleReshipmentSettings=function(e){"need_payment"!==e||i.props.currentUser.caEnabled||window.open("/copyright/invite"),i.setState({reshipmentSettings:e})},i.handleError=function(e,t){Object(te.b)(e,t,i.props.showNotification)},i.handleBeforeVideoUpload=function(){var e=i.props.question;return!e.relationship||!e.relationship.isAnonymous},i.handleReverted=function(e){i.editable.resetWithValue(e.draft.content)},i.getDraftStatus=function(){var e=i.props.draft,t=i.state,n=t.isTyping,a=t.dateNow;return e?e.updating||n?"草稿保存中…":e.updated&&a<1e3*e.updatedTime+6e4?"草稿已保存":e.updateFailed?Object(d.b)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):C()(xt||(xt=Object(o.a)(["草稿保存于",""])),Object(E.toRelativeString)(e.updatedTime)):""},i.handleSettingExpand=function(){var e=i.state.settingExpanded;i.setState({settingExpanded:!e},(function(){var t=i.expandedSettingsRef;if(i.state.isFullscreen){i.scroller.scrollTo(0,e?-(null==t?void 0:t.offsetTop):null==t?void 0:t.offsetTop)}else{var n=i.expandedSettingsRef;window.scrollTo(0,e?-(null==n?void 0:n.offsetTop):null==n?void 0:n.offsetTop)}e&&i.focus()}))},i.handleEditGGRCard=function(e){var t=e.type,n=e.payload,a=i.state.mcnEditingGood,o=i.props.updateLinkCard;"goodsEditor/submitNewGoodsInfo"!==t?"goodsEditor/closeGoodsEditor"!==t||i.setState({mcnEditingGood:null}):o(Object.assign(Object.assign({},a),{},{title:null==n?void 0:n.title})).finally((function(){i.setState({mcnEditingGood:null}),i.editable.handleCommand("edit-mcn-link-card:".concat(a.id))}))},i.showDraftHistoryModal=function(){i.editable.handleCommand("toggle-draft-history-modal")},i.createEditorPlugins=function(){var e,t,n;return[Object(dt.a)({type:"question",id:i.props.question.id,draftType:null!==(e=i.props.answer)&&void 0!==e&&e.id?"answer":void 0,draftId:null===(t=i.props.answer)||void 0===t?void 0:t.id,syncDraft:i.syncDraft}),Object(pt.a)({getshowldShowToolbarButton:function(){return!i.isVideoAnswer},getAllInviters:i.getAllInviters,inviterQuery:i.props.inviterQuery,getInitialThankInviterInfo:function(){return i.props.thankInviterInfo}}),Object(bt.a)({shouldDisabled:function(){return i.props.question.relationship.isAnonymous},shouldShow:function(){return i.props.showUserProfitButton&&!i.isVideoAnswer},getContentInfo:function(){var e;return{type:"answer",id:null===(e=i.props.answer)||void 0===e?void 0:e.id}}}),Object(ft.a)(),Object(ht.a)({sourceType:"answer",sourceId:null===(n=i.props.question)||void 0===n?void 0:n.id})]},i.renderRichInput=function(){var e=i.props,t=e.answer,n=(t=void 0===t?{}:t).attachment,a=e.answer,o=e.question,r=e.isReediting,c=e.isPuQuestion,l=e.draft,s=e.defaultValue,u=i.state,b=u.isToolbarSticky,f=u.isFullscreen,p=u.toolbarMenuAttention,h=u.scheduledPublishAt,m=u.initialScheduledPublishAt,v="".concat(r?"修改":"写","回答...");if("commercial"===o.questionType&&!c){v="这是一个「".concat("品牌提问","」，请在回答前了解：「").concat("品牌提问","」由品牌方管理，回答由品牌方筛选后展示，传播与社区提问有所区别。回答著作权归作者所有。")}i.isVideoAnswer&&(v="详细介绍下视频（选填）");var g,O=i.videoAnswerEditable||"video_answer"===(null==l?void 0:l.type)||"zvideo"===(null==n?void 0:n.type);if(l)g=null==l?void 0:l.attachment;else if("zvideo"===(null==n?void 0:n.type))g=n.zvideo;else if("video"===(null==n?void 0:n.type)){var j;g=Object.assign(Object.assign({},null===(j=n.video)||void 0===j?void 0:j.videoInfo),{},{videoId:n.attachmentId})}var y={isToolbarSticky:b,ref:function(e){return i.editable=e},answer:a,question:o,isFullscreen:f,toolbarMenuAttention:p,scheduledPublishAt:h,initialScheduledPublishAt:m,placeholder:v,draft:l,defaultValue:s,isLegacyVideoAnswer:O,defaultVideo:g,videoAnswerEditable:i.videoAnswerEditable,videoAnswerPublished:i.videoAnswerPublished,editableReady:i.editableReady,handleChangeContent:i.onChangeContent,handleAfterChangeContent:i.onAfterChangeContent,handleFocusWithAuth:i.onFocusWithAuth,handleSelectText:i.onSelectText,handleSubmit:i.handleSubmit,handleError:i.handleError,handleLoadStart:i.onLoadStart,handleLoadEnd:i.handleLoadEnd,handleUploadStart:i.handleUploadStart,handleUploadEnd:i.handleUploadEnd,handleUploadError:i.handleUploadError,handleBeforeVideoUpload:i.handleBeforeVideoUpload,handleMCNLinkCardEdit:function(e,t){i.setState({mcnEditingGood:t})},isVideoAnswer:i.isVideoAnswer,handleInsertZVideo:i.handleInsertZVideo,getToolbarSidePlugins:i.getToolbarSidePlugins,createEditorPlugins:i.createEditorPlugins,getToolbarMenuPlugins:i.getToolbarMenuPlugins,getEditorBeforePlugins:i.getEditorBeforePlugins,setUseScheduledPublish:i.setUseScheduledPublish};return Object(d.b)(vt.a,Object.assign({},y))};var l=i.props,s=l.defaultValue,u=l.draft,b=u?u.editableContent:s,f=u?u.updatedTime:0;return i.state={draft:b,content:{toHTML:function(){return""}},isEmpty:!b,isTyping:!1,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,checked:e.isRewardable,isFullscreen:!1,isToolbarSticky:!1,isLeaveActive:!1,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:f,showInsertableVideoUploader:!1,mcnEditingGood:null,initialScheduledPublishAt:void 0,scheduledPublishAt:void 0,thankInviterInfo:e.thankInviterInfo||e.inviterFromNotification,footerPositionStatus:"",settingExpanded:!1},i.hasEdited=!1,i}return Object(i.a)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting,a=e.activeTabKey;return t&&t.autoSendingCreations&&a===U.a.textAnswer&&!n}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.reporter,o=t.draft;n.reportRequest(kt.a.editableInit),o&&n.reportRequest(kt.a.draftLoad),this.shouldAnswerOrgQuestionModalShow=!F.a.getKnown(),this.onFocusAuthChecked=!1;var r=this.props,i=r.fillCurrentUserIfNeeded,c=r.getUserProfitPermission,l=i(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);c(),Promise.resolve(l).then((function(){G.a.getActionsByNames(["a_draft_history",e.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then((function(t){var n=Object(a.a)(t,1)[0];n&&(e.setState({toolbarMenuAttention:n.description}),G.a.markAsShown(n),"auto_pub_answer"===n.guide_name&&_.a.trackCardShow(e,{id:5738}))})),_.a.trackCardShow(e,{id:5729,name:"回答"})})),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return e.state.isUploading||e.composition||e.syncDraft.pending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval((function(){return e.setState({dateNow:Date.now()})}),6e4);var s=this.props,u=s.answer,d=s.settings,b=s.loadSettings;u&&!d&&b(u.id),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus.bind(this),hasVideo:this.hasVideo.bind(this),hasADLinkCard:this.hasADLinkCard.bind(this),hasMCNLinkCard:this.hasMCNLinkCard.bind(this),hasFeeConsultCard:this.hasFeeConsultCard.bind(this),toggleFullscreen:this.toggleFullscreen,hasCommercialReport:this.hasCommercialReport,hasEditorContent:function(){return!e.state.isEmpty}})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.reporter,a=this.state,o=e.currentUser,r={};a.reshipmentSettings||void 0===o.caEnabled||(r.reshipmentSettings=o.caEnabled?"need_payment":"allowed"),a.commentPermission||void 0===o.lastCommentPermission||(r.commentPermission=o.lastCommentPermission),Object.keys(r).length&&this.setState(r),this.draftLoaded||this.state.draft||this.props.draft||!e.draft||(n.wrapAutoRecord(kt.a.draftLoad,(function(){var n=e.draft.editableContent;n&&(t.setState({draft:n,isEmpty:!n}),t.editable&&!t.editable.toHTML()&&t.editable.resetWithValue(n))}))(),this.draftLoaded=!0)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,a=n.focusing,o=n.thankInviterInfo,r=this.props,i=r.tagline,c=r.inviterFromNotification;if(i){var l=B.a.get("rewardNotication");a&&!l&&(this.setState({rewardNotication:!1}),B.a.set("rewardNotication",!0),this.timeout=setTimeout((function(){t.setState({rewardNotication:!0})}),2e3))}o||!c||e.inviterFromNotification||this.setState({thankInviterInfo:c})}},{key:"componentWillUnmount",value:function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getCloneContent",value:function(){return this.getEditorState().getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,a=e.deleteDraft;n&&a(t.id)}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.draft,a=t.isReediting,o=t.answer,r=t.question,i=t.handleToggleAnonymous,c=this.state,l=c.focusing,s=c.isEmpty,u=c.isFullscreen,b=c.selectedText,f=c.scheduledPublishAt,p=Object(d.c)("div",{className:O()("AnswerForm-footer",{"AnswerForm-footer--hidden":!u&&!l&&s}),children:[Object(d.b)(ct,{question:r,answer:o,isVideoAnswer:this.isVideoAnswer,handleToggleAnonymous:i,isFullScreen:u,positionStatus:this.state.footerPositionStatus,isReediting:a,setScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,handleExpand:this.handleSettingExpand,settingExpanded:this.state.settingExpanded}),Object(d.b)(lt.b,{isFullScreen:u,type:"answer",questionId:r.id,textCount:null==b?void 0:b.length,draftStatus:this.getDraftStatus(),removeDraft:this.onDeleteDraftModalShow,isReediting:a,scheduledPublishAt:f,onCancelEdit:this.onCancel,draft:n,handleSubmit:this.handleSubmit,canSubmit:this.canSubmit()})]});return!u?Object(d.b)(T.a,{bottom:!0,container:function(){return e.form},children:p}):p}},{key:"videoAnswerPublished",get:function(){var e=this.props.answer,t=(e=void 0===e?{}:e).attachment;return["zvideo","video"].includes(null==t?void 0:t.type)}},{key:"videoAnswerEditable",get:function(){return this.props.activeTabKey===U.a.videoAnswer}},{key:"isVideoAnswer",get:function(){return this.videoAnswerPublished||this.videoAnswerEditable}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.isReediting,o=t.question,r=t.currentUser,i=t.answer,c=t.answer,l=(c=void 0===c?{}:c).answerType,s=t.activeTabKey,u=t.handleTabChange,b=this.state,f=b.deleteDraftModalShown,h=b.isFullscreen,m=b.isLeaveActive,v=b.showInsertableVideoUploader,g=b.mcnEditingGood;return Object(d.b)(z.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(o.id),author_member_hash_id:r.id},children:Object(d.c)("form",{ref:function(t){e.form=t},className:O()("AnswerForm",n),onSubmit:function(e){return e.preventDefault()},noValidate:!0,children:[Object(d.b)(ae.a,{editorFrom:"answer-pc-editor"}),h&&Object(d.b)("div",{className:O()("AnswerForm-fullscreenBackdrop",{isLeaveActive:m})}),Object(d.c)("div",{className:O()({"AnswerForm-fullscreenContent":h,isLeaveActive:m}),ref:function(t){return e.fullscreenContent=t},children:[h&&Object(d.c)(j.Box,{bg:"GBK99A",css:{position:"relative",boxShadow:"0 0 32px rgba(0, 0, 0, 0.06);"},children:[Object(d.b)("div",{className:"AnswerForm-container",ref:this.handleFullscreenRef,children:Object(d.c)(j.Flex,{justifyContent:"space-between",alignItems:"center",children:[a?Object(d.b)(j.Box,{fontSize:15,fontWeight:"bold",lineHeight:"21px",color:"GBK03A",children:this.videoAnswerPublished?"本回答为视频回答":"本回答为图文回答"}):Object(d.b)(U.b,{activeTabKey:s,onChange:u}),Object(d.c)(V.a,{as:j.Flex,zaAction:"Unknown",zaText:"退出全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",lineHeight:"55px",onClick:this.toggleFullscreen,css:{cursor:"pointer"},children:[Object(d.b)(j.Text,{mr:"10px",children:"退出全屏编辑"}),Object(d.b)(A.a,{text:!0,center:!0})]})]})}),Object(d.b)(wt,{question:o,handleImportDoc:this.onInsertDoc,handleHistoryVersion:this.showDraftHistoryModal})]}),Object(d.c)("div",{className:O()({"AnswerForm-fullscreenScroller":h}),ref:function(t){return e.scroller=t},onScroll:this.handleScroll,children:[!h&&Object(d.b)(wt,{question:o,handleImportDoc:this.onInsertDoc,handleHistoryVersion:this.showDraftHistoryModal}),this.renderRichInput(),Object(d.b)("div",{ref:function(t){e.expandedSettingsRef=t},children:Object(d.b)(ct,{inEditor:!0,question:o,answer:i,isVideoAnswer:this.isVideoAnswer,handleToggleAnonymous:this.props.handleToggleAnonymous,isReediting:a,setScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,handleExpand:this.handleSettingExpand,settingExpanded:this.state.settingExpanded,isFullScreen:h})})]}),this.renderFooter()]}),h&&Object(p.cloneElement)(this.renderRichInput(),{readOnly:!0,className:"AnswerForm-cloneEditor",defaultValue:this.getCloneContent(),allowToolbarSticky:!1,toolbarMenuAttention:null,ref:function(t){return e.cloneEditor=t}}),"org"===o.questionType&&Object(d.b)(F.a,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),"commercial"===o.questionType&&Object(d.b)(q.a,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),Object(d.b)(st.a,{title:"清除草稿",subtitle:a?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:f,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),v&&Object(d.b)(H.a,{show:v,onClose:function(){return e.setState({showInsertableVideoUploader:!1})},onZVideoSubmit:function(t){e.setState({showInsertableVideoUploader:!1}),e.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(t)))},onVideoSubmit:function(t){e.setState({showInsertableVideoUploader:!1}),e.editable.handleCommand("insert-video-card",t)}}),Object(d.b)(M.b,{className:"AnswerForm-MCNEditor",title:"编辑商品",onClose:function(){e.setState({mcnEditingGood:null})},children:Boolean(g)&&Object(d.b)(D.a,{className:"AnswerForm-MCNEditorIframe",src:Object(St.a)({title:g.title,originTitle:g.originTitle,source:g.source,sourceId:g.sourceId,productTypeName:g.productTypeName}),onMessage:this.handleEditGGRCard})}),Object(d.b)(ut.a,{onClose:function(){e.props.onCancel()},shown:"slideshow"===l})]})})}}]),n}(p.Component);Rt.propTypes={activeTabKey:f.a.string,handleTabChange:f.a.func,question:f.a.object,isReediting:f.a.bool,defaultValue:f.a.string,getFormData:f.a.func,reporter:f.a.object},Rt.defaultProps={isReediting:!1},Rt.contextTypes={authRequired:f.a.func};var Tt={addDraft:Z.b,updateDraft:Z.lb,deleteDraft:Z.j,showNotification:J.h,fillCurrentUserIfNeeded:X.e,loadSettings:Q.y,updateSettingsDisclaimer:Q.M,loadLabel:Y.e,getUserProfitPermission:K.b,updateLinkCard:W.b,fetchAllInviters:Z.o},It=Object(m.compose)(v.withRouter,Object(h.connect)((function(e,t){var n,a,o=e.entities,r=o.questions,i=o.drafts,c=void 0===i?{}:i,l=e.question,s=t.location.query.inviter,u=Object(ee.b)(e),d=Object(X.b)(e),b=Object(Z.d)(e,t.question.id),f=s&&(null==b||null===(n=b.find)||void 0===n?void 0:n.call(b,(function(e){return e.id===s}))),p=c["question_".concat(t.question.id)];return{campaign:u,question:r[t.question.id]||t.question,draft:p,currentUser:d,isPuQuestion:Boolean(l&&l.brand&&l.brand.isPuQuestion),disclaimers:l.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null,showUserProfitButton:e.userProfit.permission.visible,thankInviterInfo:null===(a=Object(Y.c)(e,t.answer))||void 0===a?void 0:a.thankInviterInfo,allInviters:b,inviterQuery:s,inviterFromNotification:f,isOffice:Object($.isOfficeSelector)(e)}}),Tt),de.b,mt.e)(Rt)},1710:function(e,t,n){"use strict";n.d(t,"a",(function(){return we}));var a=n(4),o=n(49),r=n(1),i=n(0),c=n.n(i),l=n(24),s=n(13),u=n.n(s),d=n(55),b=n(74),f=n(43),p=n(64),h=n.n(p),m=n(87),v=n(122),g=n(36),O=n(294),j=n(1110),y=n(35),C=n(56),w=n(431),x=n(1467),k=n(46),S=n(900),A=n(1100),R=n(945),T=n(944),I=n(1004),E=n(1105),N=n(453),B=n(1413),z=n(428),L=n(1411),P=n(33),M=n(855),D=n(958),_=["isLiked","onClick","showIcon","authRequired"],V=Object(D.a)((function(e){var t=e.isLiked,n=e.onClick,a=e.showIcon,o=void 0===a||a,i=e.authRequired,c=Object(P.default)(e,_),l=Object(f.d)((function(e){var a=!t,o=a?"Like":"UnLike";y.a.trackEvent(e.target,{id:7448,action:o}),i((function(){return n(a)}))()}));return Object(r.b)(g.c,Object.assign({preset:"plain",onClick:l,icon:o?M.a:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},c))})),U=n(86),F=Object.assign;var q=function(e){return c.a.createElement(U.a,F({width:"14",height:"16",fill:"none",viewBox:"0 0 14 16"},e),c.a.createElement("path",{fill:"#8590A6",d:"M1 2.666c0-.736.597-1.333 1.334-1.333h9.333c.736 0 1.334.597 1.334 1.333v10.667c0 .736-.598 1.333-1.334 1.333h-1.666a.333.333 0 01-.334-.333v-4A2.333 2.333 0 007.334 8h-6A.333.333 0 011 7.667v-5zm2.667 0a.667.667 0 100 1.334h6.667a.667.667 0 100-1.333H3.667zM3 6c0-.368.299-.667.667-.667H9a.667.667 0 010 1.334H3.667A.667.667 0 013 6zm-2 4.334a1 1 0 011-1h5.333a1 1 0 011 1v3.333a1 1 0 01-1 1H2a1 1 0 01-1-1v-3.333zm5.167 1.377a.333.333 0 010 .578l-2 1.154a.333.333 0 01-.5-.288v-2.31c0-.256.277-.417.5-.288l2 1.154z",fillRule:"evenodd",clipRule:"evenodd"}))},H=["label","onClick"];function G(e,t){var n=e.label,a=e.onClick,o=Object(P.default)(e,H);return Object(r.b)(b.a,{zaText:!0,zaType:"Button",zaBlock:"VideoContributeButton",className:"ContentItem-action",children:Object(r.b)(g.c,Object.assign({ref:t,preset:"plain",onClick:a,icon:q,label:n},o))})}var K=Object(i.forwardRef)(G),W=n(40),Z=n.n(W),Q=n(60),Y=n(882),J=n(158),X=n(1060),$=n(1031),ee=["onClick"],te=Object(i.forwardRef)((function(e,t){var n=e.onClick,a=Object(P.default)(e,ee);return Object(r.b)(g.c,Object.assign({ref:t,preset:"plain",onClick:n,icon:Y.a,label:"设置"},a))})),ne=function(e){var t,n,a=e.className,o=e.zvideo,c=e.onEdit,s=e.onToggleVisibility,b=e.onRemove,f=e.onChangeCommentPermission,p=e.togglerProps,h=Object(l.useDispatch)(),m=o.id,g=o.commentPermission,O=o.isVisible,j=o.creationRelationship,y=null==j||null===(t=j.coCreation)||void 0===t||null===(n=t.bizInfo)||void 0===n?void 0:n.canCancelPermission,C=Object(i.useCallback)(function(){var e=Object(Q.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="视频删除后将不可恢复",e.next=3,h(Object(z.j)(m)).then((function(e){var t=e.payload.message;t&&(n=t)}));case 3:J.a.confirm(Object(r.b)(d.Text,{textAlign:"center",children:n}),{title:"确定删除视频",text:{ok:"删除视频"}}).then((function(){b(t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h,m,b]),w=Object(r.c)(r.a,{children:[Object(r.b)(v.b,{onClick:c,children:"编辑视频"}),Object(r.b)(v.b,{onClick:s,children:"在视频列表内".concat(O?"隐藏":"显示")}),Object(r.b)(v.a,{}),Object(r.b)(X.c,{current:g,target:o,onChange:f}),Object(r.b)(v.a,{}),Object(r.b)(v.b,{onClick:C,children:"删除"})]});return Object(r.b)(v.c,{className:u()("ZVideoSettingMenu",a),itemClassName:"ZVideoSettingMenu-item",toggler:Object(r.b)(te,Object.assign({},p)),reversed:!0,children:y?Object(r.b)(v.b,{children:Object(r.b)($.CancelCoCreation,{contentType:"zvideo",contentId:m})}):w})},ae=n(83),oe=n(1016),re=n(892),ie=function(e){var t,n,a,o,i=e.startTime,c=e.endTime,l=e.target,s=e.status,u=e.abnormalReason,d=Math.floor(i/1e3),b=Math.floor(c/1e3),f=l.parentObject,p=f.id,h=f.title,m=l.object.id,v=null;return 0===s?(t="已保存草稿",n="GBK06A",v=Object(r.b)(re.a,{}),a="GBK06A"):1===s?(t="发布中...",n="GBK06A",a="GBK06A"):2===s?"审核中"===u?(t="审核中",n="GBL05A",v=Object(r.b)(re.a,{}),a="GBK06A"):(t="已投稿",n="GBL01A",v=Object(r.b)(re.a,{}),a="GBK03A"):3===s&&(t="发布失败",n="GRD03A",v=Object(r.b)(re.a,{}),a="GBK06A",o=!0),{status:s,statusText:t,statusColor:n,StatusIcon:v,titleColor:a,hasAbnormalInfo:o,startTime:d,endTime:b,questionId:p,title:h,answerId:m,abnormalReason:u}},ce=["status","questionId","answerId","children"],le=["item"],se=function(e){var t=e.status,n=e.questionId,a=e.answerId,o=e.children,i=Object(P.default)(e,ce);return 2===t?Object(r.b)(d.Link,Object.assign(Object.assign({target:"_blank",href:"https://www.zhihu.com/question/".concat(n,"/answer/").concat(a),css:{display:"block",cursor:"pointer"}},i),{},{children:o})):Object(r.b)(d.Box,Object.assign(Object.assign({},i),{},{children:o}))};var ue=function(e){var t=e.item,n=Object(P.default)(e,le),a=ie(t),o=a.status,i=a.statusText,c=a.statusColor,l=a.StatusIcon,s=a.titleColor,u=a.hasAbnormalInfo,b=a.startTime,f=a.endTime,p=a.questionId,h=a.title,m=a.answerId,v=a.abnormalReason;return Object(r.c)(se,Object.assign(Object.assign({py:"20px",css:function(e){return Object.assign(Object.assign({},0===o&&{cursor:"pointer"}),Object(ae.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},status:o,questionId:p,answerId:m},n),{},{children:[Object(r.c)(d.Flex,{color:c,alignItems:"center",mb:"8px",fontSize:"12px",children:[Object(r.b)(d.Text,{children:"".concat(Object(oe.a)(b)," - ").concat(Object(oe.a)(f))}),Object(r.b)(d.Text,{ml:"auto",fontWeight:"bold",children:i}),l]}),Object(r.b)(d.Text,{color:s,fontSize:"14px",children:h}),u&&Object(r.b)(d.Text,{p:"8px",mt:"8px",color:"GBK03A",fontSize:"14px",css:function(e){return{borderRadius:2,backgroundColor:e.colorMod(e.colors.GRD03A).alpha(.08)}},children:v})]}))},de=n(1087),be=n(113);var fe=n(1412),pe=n(1732),he=["status","questionId","answerId","children"],me=["item"],ve=function(e){var t=e.status,n=e.questionId,a=e.answerId,o=e.children,i=Object(P.default)(e,he);return 2===t?Object(r.b)(d.Link,Object.assign(Object.assign({target:"_blank",href:"https://www.zhihu.com/question/".concat(n,"/answer/").concat(a),css:{display:"block",cursor:"pointer"}},i),{},{children:o})):Object(r.b)(d.Box,Object.assign(Object.assign({},i),{},{children:o}))},ge={"已保存草稿":"已保存草稿","发布失败":"发布失败","已投稿":"投稿成功","审核中":"审核中","发布中...":"发布中..."},Oe={"已保存草稿":"继续编辑","发布失败":"修改草稿","已投稿":"已投稿","审核中":"查看投稿","发布中...":""},je=function(e){var t=e.item,n=Object(P.default)(e,me),a=ie(t),o=a.status,i=a.statusText,c=a.statusColor,l=a.StatusIcon,s=a.titleColor,u=a.hasAbnormalInfo,b=a.questionId,f=a.title,p=a.answerId,h=a.abnormalReason;return Object(r.c)(ve,Object.assign(Object.assign({py:"20px",css:function(e){return Object.assign(Object.assign({},0===o&&{cursor:"pointer"}),Object(ae.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},status:o,questionId:b,answerId:p},n),{},{children:[Object(r.c)(d.Flex,{color:c,alignItems:"center",mb:"8px",fontSize:"12px",children:[Object(r.b)(d.Text,{children:ge[i]}),Object(r.b)(d.Text,{ml:"auto",fontWeight:"bold",css:function(e){return{color:e.colors.GBL01A}},children:Oe[i]}),i===ge.发布失败?null:l]}),Object(r.b)(d.Text,{color:s,fontSize:"14px",children:f}),u&&Object(r.b)(d.Text,{p:"8px",mt:"8px",color:"GBK03A",fontSize:"14px",css:function(e){return{borderRadius:2,backgroundColor:e.colorMod(e.colors.GRD03A).alpha(.08)}},children:h})]}))},ye={up:1,neutral:0,down:-1};function Ce(e){var t,c=Object(l.useDispatch)(),s=e.className,p=e.zvideo,B=e.author,P=e.commentsShown,M=void 0!==P&&P,D=e.onCommentButtonClick,_=void 0===D?h.a:D,U=e.renderOptions,F=e.renderActionButtons,q=e.enableContribute,H=void 0!==q&&q,G=p.id,W=p.title,Z=p.description,Q=p.voting,Y=p.voteCount,J=p.voteupCount,X=p.commentCount,$=p.isLiked,ee=p.isFavorited,te=p.contribute,ae=p.video,oe=p.video,re=(oe=void 0===oe?{}:oe).duration,ie=void 0===re?0:re,ce=function(e){var t=Object(de.c)(e),n="string"==typeof t?t:null==t?void 0:t.urlToken,a=Object(l.useSelector)((function(e){return Object(be.c)(e,{urlToken:n})}));return e?null!=a?a:t:null}(p.creationRelationship),le=Object(k.o)(ce),se=Object(k.o)(B)&&!le,he=se||le,me=Object(C.useIsMobile)(),ve=Object(i.useMemo)((function(){return parseInt(1e3*ie)}),[ie]),ge=Object(i.useMemo)((function(){return{id:G,video:ae}}),[G,ae]),Oe=Object(f.e)((function(){return n.e(43).then(n.bind(null,2869))})),Ce=Object(fe.a)(),we=Object(w.p)(G),xe=Object(i.useState)(!1),ke=Object(o.a)(xe,2),Se=ke[0],Ae=ke[1],Re=Object(w.o)(G).answer,Te=(Re=void 0===Re?{}:Re).canContribute,Ie=void 0!==Te&&Te,Ee=Boolean((null==te||null===(t=te.contributeList)||void 0===t?void 0:t.length)||(null==te?void 0:te.totals)),Ne=H&&!me&&se&&Ee,Be=H&&!me&&se&&Ie&&!Ee,ze=Object(L.a)("zvideo_toolbar:should_hide_contribution_tooltip"),Le=Object(o.a)(ze,2),Pe=Le[0],Me=Le[1],De=Object(i.useRef)();Object(f.l)((function(){return Me(!0)}),!Pe&&Be?5e3:null);var _e=Object(i.useCallback)((function(){Ae(!0),c(Object(w.h)(G,"edit"))}),[G,c]),Ve=Object(i.useCallback)((function(){return c(Object(w.g)({zvideoId:G,target:"answer",duration:ve}))}),[c,G,ve]),Ue=Object(i.useCallback)((function(e){return c(Object(z.A)(G,ye[e]))}),[G,c]),Fe=Object(i.useCallback)((function(e){c(Object(z.k)(G,e))}),[c,G]),qe=Object(i.useState)(!1),He=Object(o.a)(qe,2),Ge=He[0],Ke=He[1],We=Object(i.useCallback)((function(e){Ke(!0),y.a.trackEvent(e.target,{id:8213,action:"Collect",is_intent:!ee})}),[ee]),Ze=Object(i.useCallback)((function(){Ke(!1)}),[]),Qe=Object(i.useCallback)((function(e,t){c(Object(z.b)(G,t))}),[G,c]),Ye=Object(i.useCallback)((function(){c(Object(z.y)(G))}),[G,c]),Je=Object(i.useCallback)((function(){c(Object(z.w)(G)).then((function(){var e="https://www.zhihu.com/people/".concat(B.urlToken,"/zvideos");window.location.href=e}))}),[G,B,c]),Xe=Object(i.useState)(null),$e=Object(o.a)(Xe,2),et=$e[0],tt=$e[1],nt=Object(i.useState)(!1),at=Object(o.a)(nt,2),ot=at[0],rt=at[1],it=Object(i.useState)(!1),ct=Object(o.a)(it,2),lt=ct[0],st=ct[1];Object(i.useEffect)((function(){ot&&!et&&c(Object(z.g)(G)).then((function(e){var t=e.payload;tt(t)}))}),[G,ot,et,c]),Object(i.useEffect)((function(){se&&!me&&H&&Ve()}),[se,Ve,me,H]);var ut=Object(i.useCallback)((function(e){c(Object(z.u)(G,e)).then((function(){c(Object(w.k)(G)),e.clubId&&c(Object(z.x)(G,e.clubId));var t="https://www.zhihu.com/zvideo/".concat(G);window.location.href=t}))}),[G,c]),dt=Object(i.useState)(!1),bt=Object(o.a)(dt,2),ft=bt[0],pt=bt[1],ht=F({componentList:[{name:"favlist",component:Object(r.b)(E.a,{onClick:We,label:"收藏",showIcon:!me},"favlist")},{name:"like",component:Object(r.b)(V,{isLiked:$,onClick:Fe,showIcon:!me},"like")},{name:"report",component:!he&&Object(r.b)(N.a,{id:G,type:"zvideo",onModalShown:pt},"report")}]}).filter(Boolean),mt=Object(i.useMemo)((function(){return"1328062627923550208"===G||"1460226907631099904"===G||"1460330596731539457"===G||"zhi-hu-zheng-wu"===B.urlToken}),[G,B.urlToken]),vt=Object(i.useCallback)((function(){tt(null),rt(!1),c(Object(z.s)(G))}),[c,G]),gt=Object(f.d)((function(e){_e(),c(Object(w.l)(e.id)),st(!1)})),Ot=Object(f.d)((function(e){Ve(),c(Object(z.s)(e)),Ae(!1)})),jt=Ce?je:ue,yt=Ce?pe.a:Oe;return Object(r.c)(r.a,{children:[Object(r.c)(S.a,{className:u()("ZVideoToolbar",s),children:[!mt&&Object(r.b)(A.a,{type:"zvideo",count:J||Y,voting:Q,onVote:Ue,isOwner:se,zaIds:{voteUp:6599,voteDown:6600}}),Object(r.b)(R.a,{onClick:_,commentsShown:M,count:X,positionStatus:"normal"}),Object(r.b)(T.a,{id:G,type:"zvideo",url:"https://www.zhihu.com/zvideo/".concat(G),title:W,authorName:B.name,positionStatus:"normal"}),me?Object(r.c)(v.c,{preventCloseOnTarget:!0,globalClose:!ft,menuContainerClassName:"ZVideoToolbar-menuContainer",toggler:Object(r.b)(g.c,{preset:"plain",icon:j.a,"aria-label":"更多"}),children:[ht.map((function(e){return Object(r.b)(v.b,{className:"ZVideoToolbar-menuItem",children:e},e.key)})),!he&&U()]}):[].concat(Object(a.a)(ht),Object(a.a)(he?[]:U())),Ne&&Object(r.b)(K,{label:"全部投稿",onClick:function(){c(Object(w.h)(G)),st(!0)}}),Be&&Object(r.c)(r.a,{children:[Object(r.b)(K,{ref:De,label:"添加投稿",onClick:_e}),Object(r.b)(O.a,{placement:"top",isOpen:!Pe,target:De.current,children:"投稿到问题，让更多人看到你的视频"})]}),he&&Object(r.b)(ne,Object.assign({zvideo:p,onEdit:function(){return rt(!0)},onToggleVisibility:Ye,onChangeCommentPermission:Qe,onRemove:Je},me&&{togglerProps:{label:null}}))]}),se&&Object(r.b)(m.b,{className:"ZVideoToolbar-videoFormModal",title:"编辑视频",size:"fullPage",onClose:vt,css:{width:"734px",".Modal-inner":{"::-webkit-scrollbar":{display:"none"}},".Modal-title":{marginLeft:32}},children:ot&&et&&Object(r.b)(x.a,{defaultVideo:et,onSubmit:ut,onRemove:vt,isEditing:!0})}),Object(r.b)(I.a,{id:G,type:"zvideo",shown:Ge,onClose:Ze,zaEnabled:!0}),H&&!me&&se&&Object(r.c)(r.a,{children:[Object(r.b)(m.b,{title:Object(r.c)(d.Flex,{px:"24px",justifyContent:"space-between",children:[Object(r.b)(d.Text,{fontSize:"24px",color:"GBK02A",children:"全部视频回答投稿"}),Ie&&Object(r.b)("button",{css:function(e){return{width:90,height:34,border:"none",borderRadius:3,fontSize:14,fontWeight:"normal",color:e.colors.GBL01A,backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.08)}},onClick:function(){_e(),st(!1)},children:"添加投稿"})]}),css:function(e){return{width:536,height:554,backgroundColor:e.colors.GBK99A,".Modal-title":{marginTop:24},".Modal-inner::-webkit-scrollbar":{display:"none"}}},onClose:function(){return st(!1)},children:lt&&we.map((function(e){return Object(r.b)(jt,Object.assign({item:e},0===e.status&&{onClick:function(){gt(e)}}),e.id)}))}),Boolean(Oe)&&Object(r.b)(b.b,{block:"Contribution",children:Object(r.b)(yt,{show:Se,defaultVideo:ge,title:W,description:Z,duration:ve,onClose:function(){Ot(G)},shouldPublish:!0})})]})]})}Ce.defaultProps={renderOptions:function(){return[null]},renderActionButtons:B.a};var we=Ce},1713:function(e,t,n){"use strict";var a=n(33),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(87),p=n(24),h=n(140),m=n(179),v=n(121),g=n(36),O=n(425),j=n(21),y=n.n(j),C=n(25),w=n.n(C),x=n(23),k=n.n(x),S=n(27),A=n.n(S),R=n(14),T=n.n(R),I=n(881),E=n(13),N=n.n(E),B=n(7);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var o=T()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return A()(this,n)}}var L=function(e){k()(n,e);var t=z(n);function n(){var e;y()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t){e.props.onChange(t)},e}return w()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,a=e.name,o=e.type,r=e.value,i=e.checked,c=JSON.stringify(r);return Object(B.g)("label",{className:N()("CheckItem",t)},Object(B.g)("input",{className:"CheckItem-input",type:o,name:a,value:c,onChange:this.handleChange,checked:i}),Object(B.g)("div",{className:"CheckItem-box"},Object(B.g)("div",{className:"CheckItem-inner"},n),Object(B.g)(I.a,{className:"CheckItem-icon",size:20})))}}]),n}(b.Component);L.propTypes={name:d.a.string,onChange:d.a.func,checked:d.a.bool,className:d.a.string,type:d.a.string,value:d.a.any},L.defaultProps={name:"checkitems",type:"checkbox"};var P=L,M=n(854),D=n(157),_=n(432),V=n(1054),U=n(924),F=n(421);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var H=function(e){Object(i.a)(n,e);var t=q(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={value:null},e.handleModify=function(){e.setState({modifying:!0})},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleCancel=function(){e.setState({value:null,modifying:!1})},e.handleSubmit=function(t){t.preventDefault(),e.props.onBioChange(e.state.value),e.handleCancel()},e.handleSelect=function(){e.props.onSelect(e.props.value)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,a=e.title,o=e.checked,r=e.rich,i=this.state,c=i.modifying,l=i.value;return c?Object(s.c)("div",{className:"TopicBioItem",children:[Object(s.b)("div",{className:"TopicBioItem-title",children:a}),Object(s.c)("form",{onSubmit:this.handleSubmit,children:[Object(s.b)("div",{className:"TopicBioItem-inner",children:Object(s.b)(U.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t,children:Object(s.b)(D.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:a,autoFocus:!0})})}),Object(s.c)("div",{className:"TopicBioItem-inputFooter",children:[Object(s.b)(_.a,{current:l?l.length:0,max:40}),Object(s.c)("div",{className:"TopicBioItem-actions",children:[Object(s.b)(g.c,{preset:"plain",type:"reset",onClick:this.handleCancel,children:"取消"}),Object(s.b)(g.c,{preset:"primary",color:"blue",type:"submit",children:"保存"})]})]})]})]}):n?Object(s.c)("div",{className:"TopicBioItem",children:[Object(s.b)("div",{className:"TopicBioItem-title",children:a}),Object(s.b)(P,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:o,children:Object(s.b)(U.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo",children:Object(s.c)("div",{children:[r?Object(s.b)(F.a,{inline:!0,className:"TopicBioItem-bio",html:n}):Object(s.b)("span",{className:"TopicBioItem-bio",children:n}),Object(s.b)(V.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify})]})})})]}):Object(s.b)("div",{className:"TopicBioItem",children:Object(s.c)(g.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify,children:[Object(s.b)(M.a,{text:!0,center:!0})," 添加",a]})})}}]),n}(b.Component);H.propTypes={user:d.a.object.isRequired,title:d.a.node.isRequired,value:d.a.object.isRequired,onBioChange:d.a.func.isRequired,onSelect:d.a.func.isRequired,checked:d.a.bool.isRequired};var G=H;function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var W=function(e,t){var n=e.type,a=e.topic,o=(a=void 0===a?{}:a).id,r=t.type,i=t.topic,c=(i=void 0===i?{}:i).id;return n===r&&o===c},Z=function(e){Object(i.a)(n,e);var t=K(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={value:null},e.handleSelect=function(t){return e.setState({value:t})},e.handleChoose=function(){return e.props.onBioChoose(e.state.value)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return Object(s.b)("div",{className:"TopicBios-loading",children:Object(s.b)(O.a,{})});var t=this.props,n=t.user,a=t.question.topics,o=t.bios,r=t.currentBio,i=t.onHeadlineUpdate,c=t.onBioUpdate,l=this.state.value||r,u={type:"headline"};return Object(s.c)("div",{children:[Object(s.c)("div",{className:"TopicBioItems",children:[Object(s.b)(G,{title:"一句话介绍",user:n,bio:n.headline,value:u,onBioChange:i,onSelect:this.handleSelect,checked:W(l,u),rich:!0}),a.map((function(t){var a={type:"topic",topic:{id:t.id}};return Object(s.b)(G,Object.assign(Object.assign({title:"在 ".concat(t.name," 话题下的话题经验"),user:n},function(e,t){return e.find((function(e){return e.topic.id===t}))}(o,t.id)),{},{value:a,onBioChange:function(e){return c(t.id,e)},onSelect:e.handleSelect,checked:W(l,a)}),t.id)}))]}),Object(s.b)(f.a,{children:Object(s.b)(g.c,{color:"blue",preset:"primary",onClick:this.handleChoose,children:"完成"})})]})}}]),n}(b.Component);Z.propTypes={onHeadlineUpdate:d.a.func.isRequired,onBioUpdate:d.a.func.isRequired,onBioChoose:d.a.func.isRequired,question:d.a.object.isRequired,user:d.a.object.isRequired};var Q=Z;function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var J=function(e){Object(i.a)(n,e);var t=Y(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleUpdateHeadline=function(t){e.props.updateProfile(null,{headline:t})},e.handleUpdateBio=function(t,n){e.props.updateBio(t,n)},e.handleBioChoose=function(t){t&&e.props.chooseBio(e.props.question.id,t),e.props.onClose()},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return Object(s.b)(Q,Object.assign({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),n}(b.Component);J.contextTypes={currentUser:d.a.object},J.propTypes={question:d.a.object.isRequired};var X=Object(p.connect)((function(e,t){var n=e.currentUser,a=e.question.bio,o=e.entities,r=o.questions,i=o.users,c=e.topic.bios,l=t.question.id,s=r[l],u=(a[l]||{result:{type:"headline"}}).result;return{isFetching:c.isFetching,currentBio:{type:u.type,topic:u.topic},bios:s.topics.map((function(e){return{topic:e,bio:c[e.id]}})),question:s,user:i[n]}}),{updateProfile:h.n,updateBio:m.hb,chooseBio:v.e,loadBios:v.H})(J),$=["shown","onClose"];function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var te=function(e){Object(i.a)(n,e);var t=ee(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,o=Object(a.default)(e,$);return Object(s.b)(f.b,{title:"编辑话题经验",subtitle:Object(s.c)("span",{children:["可以填写你从事的职业、取得的资格或过往经历，",Object(s.b)("br",{}),"让你在这个问题下的回答更具说服力。"]}),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1,children:t&&Object(s.b)(X,Object.assign(Object.assign({},o),{},{onClose:n}))})}}]),n}(b.Component);te.propTypes=Object.assign({shown:d.a.bool.isRequired,onClose:d.a.func.isRequired},X.propTypes);t.a=te},1715:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n(24),c=n(55),l=n(43),s=n(35),u=n(87),d=n(36),b=n(865),f=n(29),p=n(428),h=function(e){var t=e.dataTransfer;return t.items?Array.from(t.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})):Array.from(t.files)},m=n(952),v=function(e){var t=e.className;return Object(o.b)("div",{className:t,css:function(e){return{fontSize:14,lineHeight:"22px",color:e.colors.GBL05A,textAlign:"center",a:{textDecoration:"underline"}}},children:Object(o.c)("p",{children:["请不要添加无关的视频，详情查看"," ",Object(o.b)("a",{href:"https://www.zhihu.com/question/20118966",target:"_blank",rel:"noopener noreferrer",children:"知乎视频使用规范"}),Object(o.b)("br",{}),"上传视频，即代表你同意",Object(o.b)("a",{href:"https://www.zhihu.com/term/video",target:"_blank",rel:"noopener noreferrer",children:"《知乎视频用户协议》"})]})})},g=n(416),O=n(181),j=n(943),y=n(139),C=n(83);function w(e){var t=e.item,n=e.onCheck,i=Object(r.useState)(!1),l=Object(a.a)(i,2),s=l[0],u=l[1],d=t.id,b=t.title,f=t.description,p=t.imageUrl,h=t.publishedAt,v=t.video,g=null==v?void 0:v.duration;return Object(o.c)(c.Flex,{p:"20px 24px",justifyContent:"space-between",alignItems:"center",children:[Object(o.c)(c.Flex,{flex:1,children:[Object(o.c)(c.Box,{width:112,height:70,flexShrink:0,marginRight:"16px",css:{position:"relative",borderRadius:3,overflow:"hidden"},children:[Object(o.b)(c.Image,{width:"100%",height:"100%",src:p,alt:"",css:{objectFit:"cover"}}),Object(o.b)(c.Text,{fontSize:12,lineHeight:"14px",color:"GBK99A",css:{position:"absolute",bottom:4,right:7,textShadow:"0 0 5px rgba(0,0,0,0.5)"},children:Object(m.b)(g)})]}),Object(o.c)(c.Flex,{flexDirection:"column",justifyContent:"center",flex:1,children:[Object(o.b)(c.Text,{fontSize:14,fontWeight:500,lineHeight:"20px",color:"GBK03A",css:[Object(C.d)(1)],children:b}),Object(o.b)(c.Text,{mt:"6px",fontSize:14,lineHeight:"20px",color:"GBK04A",css:[Object(C.d)(1)],children:f}),Object(o.b)(c.Text,{mt:"8px",fontSize:13,lineHeight:"16px",color:"GBK06A",children:Object(y.toRelativeString)(h)})]})]}),Object(o.b)(j.a,{css:{marginLeft:16,flexShrink:0},checked:s,onChange:function(e){u(e.currentTarget.checked),n(d)}})]})}function x(e){var t,n=e.onClose,l=e.onSubmit,s=Object(r.useState)([]),u=Object(a.a)(s,2),b=u[0],f=u[1],h=Object(i.useSelector)((function(e){return e.zvideos.insertable}))||{},m=h.isLoading,v=h.data,j=h.paging,y=Object(i.useDispatch)(),C=Object(r.useCallback)((function(){y(Object(p.n)())}),[y]),x=Object(r.useCallback)((function(e){b.includes(e)?f(b.filter((function(t){return t!==e}))):f(b.concat([e]))}),[b]);return Object(o.c)(c.Box,{height:688,children:[Object(o.b)(c.Box,{m:"40px auto",fontSize:24,fontWeight:500,lineHeight:"30px",color:"GBK02A",textAlign:"center",children:"选择已发布的视频"}),Object(o.b)(g.b,{css:{marginBottom:100},onLoad:C,isLoading:null!=m&&m,isDrained:null!==(t=null==j?void 0:j.isEnd)&&void 0!==t&&t,getContainer:function(e){return e.parentElement.parentElement.parentElement},children:v.map((function(e,t){return Object(o.b)(O.a,{children:Object(o.b)(w,{item:e,onCheck:x})},t)}))}),Object(o.c)(c.Flex,{bg:"GBK99A",p:"32px 25px",width:"100%",height:100,justifyContent:"center",css:{position:"absolute",left:0,right:0,bottom:0},children:[Object(o.b)(d.c,{css:{flex:1},onClick:n,children:"返回"}),Object(o.b)(d.c,{disabled:0===b.length,css:{flex:1,marginLeft:18},preset:"primary",color:"blue",onClick:function(){l(b),n()},children:"添加"})]})]})}var k=n(13),S=n.n(k),A=n(74),R=n(30);var T=function(e){var t=e.className,n=e.text,a=e.onFiles,i=e.zaClickId,c=e.zaBlockText,l=e.multiple,u=void 0===l||l,b=e.disabled,f=e.handleMouseEnter,p=e.handleMouseLeave,h=Object(r.useRef)(null);return Object(o.c)(o.a,{children:[Object(o.b)(A.a,{zaText:!0,zaType:"Button",zaBlock:c,zaAction:"Upload",css:{display:"inline-block"},onMouseEnter:f,onMouseLeave:p,children:Object(o.b)(d.c,{className:S()("VideoUploadButton",t),preset:"primary",color:"blue",disabled:b,onClick:function(e){i&&s.a.trackEvent(e.target,{id:i,action:"Upload"}),h.current.click()},children:n})}),Object(o.b)("input",{type:"file",className:"VideoUploadButton-fileInput",ref:h,onChange:function(){a(h.current.files,"Add"),h.current.value=null},accept:R.a.VIDEO.join(","),multiple:u})]})};t.a=function(e){var t=e.show,n=e.onZVideoSubmit,g=e.onVideoSubmit,O=e.onClose,j=(Object(i.useSelector)((function(e){return e.zvideos.insertable}))||{}).data,y=Object(r.useState)(!1),C=Object(a.a)(y,2),w=C[0],k=C[1],S=Object(r.useState)(!1),A=Object(a.a)(S,2),R=A[0],I=A[1],E=Object(i.useDispatch)(),N=Object(l.d)((function(e){var t=Object(m.a)(e),n=t.message,a=t.abortUpload,o=t.validFiles;n&&(E(Object(f.h)(n,a?"red":"white")),a)||g({value:o[0]})}));return t?Object(o.c)(u.b,{css:{width:688},onClose:O,children:[R&&Object(o.b)(x,{onSubmit:n,onClose:function(){I(!1)}}),!R&&Object(o.c)(o.a,{children:[Object(o.b)(c.Text,{fontSize:"24px",color:"GBK02A",lineHeight:"34px",fontWeight:500,m:"40px 0 30px",textAlign:"center",children:"导入视频"}),Object(o.c)(c.Flex,{flexDirection:"column",alignItems:"center",width:"440px",height:"300px",margin:"0 auto 45px",css:function(e){return Object.assign({border:"2px dashed ".concat(e.colors.GBK09A),borderRadius:4},w&&{borderColor:e.colors.GBL05A,"*":{pointerEvents:"none"}})},onDragOver:function(e){return e.preventDefault()},onDragEnter:function(){return k(!0)},onDragLeave:function(){return k(!1)},onDrop:function(e){e.preventDefault(),N(h(e))},children:[Object(o.b)(b.a,{size:90,css:function(e){return{color:w?e.colors.GBL05A:e.colors.GBK09A,marginTop:66}}}),Object(o.b)(c.Text,{color:"GBK03A",fontSize:"20px",lineHeight:"28px",fontWeight:"500",mt:"16px",children:"拖放要导入的视频文件"}),Object(o.c)(c.Box,{mt:"20px",children:[Object(o.b)(T,{text:"导入视频",multiple:!1,css:{width:142},zaBlockText:"UploadVideoFile",onFiles:N}),Object(o.b)(d.c,{preset:"secondary",color:"blue",css:{width:142,marginLeft:12,padding:"0 14px",whiteSpace:"nowrap"},onClick:function(e){s.a.trackEvent(e.target,{id:8622,action:"Click"},{button:{text:"选择已发布的视频"}}),(null==j?void 0:j.length)>0?I(!0):E(Object(p.n)()).then((function(e){e.payload.data.length?I(!0):E(Object(f.h)("还没有发布过视频"))}))},children:"选择已发布的视频"})]})]}),Object(o.b)(v,{})]})]}):null}},1716:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n.n(r),c=n(35),l=n(43),s=n(2005),u=n(15),d=n(16),b=n(17),f=n(18),p=n(9),h=n(3),m=n.n(h),v=n(87),g=n(24),O=n(609),j=n(13),y=n.n(j),C=n(1466),w=n(36),x=n(425),k=n(416),S=n(1056),A=n(86),R=Object.assign;var T=function(e){return i.a.createElement(A.a,R({width:"150",height:"120",viewBox:"0 0 150 120"},e),i.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0144 93V30.997A5.996 5.996 0 0150.002 25h48.996A5.996 5.996 0 01105 30.998V93a2 2 0 01-.396 1.2l-4.112-2.66z"}),i.a.createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 01-.999.999H56a.993.993 0 01-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 110 3h-35.99A1.499 1.499 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 110 3h-24.99A1.499 1.499 0 0155 75.5z"}))};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(p.a)(e);if(t){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var E={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},N=function(e){Object(b.a)(n,e);var t=I(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).formatDate=function(e){return C.a("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"yyyy-MM-dd HH:mm")},e.handleDraftClick=function(e){e.preventDefault()},e}return Object(d.a)(n,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,a=e.draftId,i=e.draftType,c=t.isFetching,l=t.data;return Object(o.c)("div",{className:"DraftHistory-main",children:[c&&Object(o.b)(x.a,{className:"DraftHistory-loading"}),!c&&l&&Object(o.c)(r.Fragment,{children:[l.draft.title&&Object(o.b)("div",{className:"DraftHistory-draftTitle",children:l.draft.title}),Object(o.b)(S.a,{className:"DraftHistory-draft",html:l.draft.content,onClick:this.handleDraftClick,sourceType:i,sourceId:a}),Object(o.c)("div",{className:"DraftHistory-actions",children:[Object(o.c)("div",{className:"DraftHistory-meta",children:[this.formatDate(l)," ",E[l.versionType]]}),Object(o.b)(w.c,{className:"DraftHistory-revert",disabled:"current"===l.versionType,onClick:function(){return n(l)},children:"恢复此版本"})]})]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.currentVersion,r=t.currentDraft,i=t.getHistory,c=t.onSelect;return n?n.isFetching&&!n.items?Object(o.b)("div",{className:"DraftHistory",children:Object(o.b)(x.a,{className:"DraftHistory-loading"})}):Object(o.c)("div",{className:"DraftHistory",children:[Object(o.c)("div",{className:"DraftHistory-side",children:[Object(o.b)("div",{className:"DraftHistory-title",children:"历史版本"}),Object(o.b)(k.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:i,children:Object(o.b)("div",{children:n.items&&n.items.map((function(t,n){return Object(o.c)("a",{href:"#",className:y()("DraftHistory-version",{"DraftHistory-version--selected":a&&t.versionType===a.versionType&&t.id===a.id}),onClick:function(e){e.preventDefault(),c(t)},children:[Object(o.b)("div",{className:"DraftHistory-versionDate",children:e.formatDate(t)}),Object(o.b)("div",{className:"DraftHistory-versionType",children:E[t.versionType]})]},n)}))})})]}),n.items&&!n.items.length&&Object(o.b)("div",{className:"DraftHistory-main",children:Object(o.c)("div",{className:"DraftHistory-empty",children:[Object(o.b)(T,{className:"DraftHistory-emptyIcon"}),Object(o.b)("div",{className:"DraftHistory-emptyText",children:"还没有历史版本"})]})}),r&&this.renderCurrentDraft()]}):null}}]),n}(r.Component);N.propTypes={history:m.a.object,currentVersion:m.a.object,currentDraft:m.a.object,onSelect:m.a.func,onRevert:m.a.func};var B=N;function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(p.a)(e);if(t){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var L=function(e){Object(b.a)(n,e);var t=z(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={currentVersion:null},e.getHistory=function(){var t=e.props,n=t.type,a=t.id;(0,t.getHistory)(n,a)},e.handleSelect=function(t){e.setState({currentVersion:t})},e.handleRevert=function(t){var n=e.props,a=n.revert,o=n.onReverted;a(t.versionType,t.id).then((function(){o&&o(t)}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.drafts,o=n.getDraft,r=this.state.currentVersion,i=t.currentVersion;!r||i&&i.versionType===r.versionType&&i.id===r.id||a["".concat(r.versionType,"_").concat(r.id)]||o(r.versionType,r.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,a=e.draftId,r=e.draftType,i=this.state.currentVersion;return Object(o.b)(B,{history:t,currentVersion:i,currentDraft:i?n["".concat(i.versionType,"_").concat(i.id)]:null,draftId:a,draftType:r,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),n}(r.Component);L.propTypes={type:m.a.string.isRequired,id:m.a.number.isRequired,onReverted:m.a.func};var P=Object(g.connect)((function(e,t){var n=t.type,a=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(a)],drafts:e.draftHistory.drafts}}),{getHistory:O.c,getDraft:O.b,revert:O.e,reset:O.d})(L);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(p.a)(e);if(t){var o=Object(p.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var D=function(e){Object(b.a)(n,e);var t=M(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleReverted=function(t){var n=e.props,a=n.onClose,o=n.onReverted;o&&o(t),a&&a(),c.a.trackEvent(null,{id:5016,action:"Click"})},e.handleClose=function(){var t=e.props.onClose;t&&t(),c.a.trackEvent(null,{id:5015,action:"Click"})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,a=e.id,r=e.draftId,i=e.draftType;return Object(o.b)(v.b,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose,children:t&&Object(o.b)(P,{type:n,id:a,draftId:r,draftType:i,onReverted:this.handleReverted})})}}]),n}(r.Component);D.propTypes={shown:m.a.bool.isRequired,onClose:m.a.func,type:m.a.string.isRequired,id:m.a.number.isRequired,onReverted:m.a.func},D.defaultProps={shown:!0};var _=D,V=Object(r.forwardRef)((function(e,t){var n,i,c=e.type,s=e.id,u=e.getId,d=e.handleReverted,b=e.draftId,f=e.draftType,p=e.getDraftId,h=Object(r.useState)(!1),m=Object(a.a)(h,2),v=m[0],g=m[1],O=Object(l.d)((function(){return g(!0)})),j=Object(l.d)((function(){return g(!1)}));return Object(r.useImperativeHandle)(t,(function(){return{handleOpen:O,handleClose:j}}),[O,j]),Object(o.b)(_,{shown:v,onClose:function(){return g(!1)},type:c,id:null!==(n=null==u?void 0:u())&&void 0!==n?n:s,draftId:null!==(i=null==p?void 0:p())&&void 0!==i?i:b,draftType:f,onReverted:d})}));t.a=function(e){var t=e.type,n=e.id,a=e.syncDraft,i=e.getId,l=e.getDraftId,u=e.draftId,d=e.draftType,b=e.shouldShowToolbarButton,f=void 0===b?function(){return!0}:b,p={};p.draftModalRef=Object(r.createRef)(null);return{initialize:function(e){Object.assign(p,e)},handleCommand:function(e){return"toggle-draft-history-modal"===e?(p.draftModalRef.current.handleOpen(),"handled"):"not-handled"},components:[Object(o.b)(V,{type:t,id:n,getId:i,draftId:u,getDraftId:l,draftType:d,ref:p.draftModalRef,handleReverted:function(e){p.getEditorRef().props.resetWithValue(e.draft.content)}},"draft_history_modal")],toolbar:{section:"menu",label:"历史版本",icon:s.a,onClick:function(){a.flush(),p.draftModalRef.current.handleOpen(),c.a.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},shouldShow:f}}}},1723:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(2796),f=n(2797),p=n(139),h=n(138),m=(n(178),n(36)),v=n(1313),g=n(33),O=n(7),j=n(13),y=n.n(j),C=n(208),w=["className","src"],x=["className"],k=["imageUrls"],S=function(e){var t=e.className,n=e.children;return Object(l.b)("div",{className:y()(t,"LiveAvatar-column"),children:n})},A=function(e){var t=e.className,n=e.speakers,a=e.size,o=e.alt;if(!n||!n.length)return null;var r=n.map((function(e){return e.avatarUrl})).slice(0,4),i=function(e){var t=e.className,n=e.src,a=Object(g.default)(e,w);return Object(l.b)(C.a,Object.assign(Object.assign({url:n},a),{},{className:y()("LiveAvatar-img",t)}))},c=function(e){var t=e.className,n=Object(g.default)(e,x);return Object(l.b)(S,{children:Object(l.b)(i,Object.assign(Object.assign({},n),{},{className:y()(t,"alignCenter"),size:a}))})},s=function(e){return Object(l.b)(i,Object.assign(Object.assign({},e),{},{size:a/2-1}))},u=function(e){var t=e.imageUrls,n=Object(g.default)(e,k);return Object(l.b)(S,{children:t.map((function(e,t){return Object(O.e)(s,Object.assign(Object.assign({},n),{},{key:t,src:e}))}))})},d=[];switch(r.length){case 1:d=Object(l.b)((function(e){return Object(l.b)(i,Object.assign(Object.assign({},e),{},{size:a}))}),{src:r[0],alt:o});break;case 2:d=r.map((function(e,t){return Object(l.b)(c,{src:e,alt:o},t)}));break;case 3:d=[Object(l.b)(c,{src:r[0],alt:o},"1"),Object(l.b)(u,{imageUrls:r.slice(1,3),alt:o},"2")];break;default:d=[r.slice(0,2),r.slice(2)].map((function(e,t){return Object(l.b)(u,{imageUrls:e,alt:o},t)}))}return Object(l.b)("div",{className:y()(t,"LiveAvatar-wrapper"),style:{width:a,height:a},children:d})},R=n(900),T=n(1206),I=n(955),E=n(944),N=n(415),B=n(1408),z=n(1003),L=n(1287);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var M=function(e){Object(r.a)(n,e);var t=P(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.live,o=t.live,r=o.id,i=o.type,c=o.subject,s=o.speaker.member,u=o.startsAt,g=o.price,O=o.promotionPrice,j=o.description,y=void 0===j?"":j,C=o.image,w=o.isLiked,x=o.likedNum,k=o.seats,S=t.lastreadTouchable,N=t.zaIds.options,P=t.renderOptions,M=t.isSticky,D=t.handleToggleSticky,_=this.context.currentUser,V=_&&_.urlToken===s.urlToken,U="function"==typeof D,F=(k||{}).taken,q="/lives/".concat(r);if(n!==R.c.interactive)return Object(l.b)(R.e,{data:a,link:q,title:Object(l.c)(d.Fragment,{children:[U&&M&&Object(l.b)(v.a,{}),Object(l.b)("a",{href:q,target:"_blank",rel:"noopener noreferrer",children:c})]}),children:U&&V&&Object(L.a)(_)&&Object(l.b)(m.c,{preset:"plain",onClick:D,icon:M?b.a:f.a,label:M?"取消置顶":"置顶"})});Object(l.b)(A,{className:"LiveItem-avatar",speakers:[s],size:60});var H={id:r,type:i};return Object(l.c)("div",{className:"LiveItem",children:[C&&Object(l.b)("a",{className:"LiveItem-cover",href:q,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:Object(h.imgUrl)(C,"640w"),srcSet:"".concat(Object(h.imgUrl)(C,"r")," 2x"),alt:c})}),Object(l.b)(R.e,{image:!1,data:a,link:q,onRef:function(t){e.contentItem=t},title:Object(l.c)("span",{children:[s.name,"：",Object(l.b)("a",{href:q,target:"_blank",rel:"noopener noreferrer",children:c})]}),meta:!1,lastreadTouchable:S,children:Object(l.c)(I.b,{className:"LiveItem-description",excerpt:Object(z.b)(y,60),limit:60,limitWithImage:60,html:y,data:a,extra:Object(l.c)(R.b,{children:[Boolean(F)&&Object(l.c)("div",{children:[Object(l.b)("span",{children:"参与人数："}),F]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"时间："}),Object(p.toSimpleDateTimeString)(u)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"特价："}),"number"==typeof O?Object(l.c)("span",{className:"LiveItem-price",children:[Object(B.a)(O),Object(l.b)("del",{children:Object(B.a)(g)})]}):Object(B.a)(g)]})]}),children:[Object(l.b)(T.a,Object.assign(Object.assign({},H),{},{liked:w,count:x,icon:"thank"})),Object(l.b)(E.a,Object.assign(Object.assign({},H),{},{title:c,authorName:s&&s.name,url:q})),P&&P((function(){return e.contentItem}),N)]})})]})}}]),n}(d.Component);M.propTypes={preset:u.a.oneOf(Object.values(R.c)),renderOptions:u.a.func,zaIds:u.a.object},M.defaultProps={zaIds:{}},M.contextTypes={currentUser:u.a.object};t.a=Object(N.b)((function(e){var t=e.live,n=e.trackCardShow,a=void 0===n||n,o=e.zaInfos,r=(o=void 0===o?{}:o).cardShow;return Object.assign(Object.assign({module:"LiveItem",card:{content:{type:"Live",id:t.id,author_member_hash_id:t.speaker.member.id}}},r&&{view:{id:r}}),{},{trackCardShow:a})}))(M)},1724:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(4),s=n(1),u=n(0),d=n(24),b=n(79),f=n(459),p=n(465),h=n(370),m=n(3),v=n.n(m),g=n(161),O=n(447),j=n(999),y=n(36),C=n(178),w=n(902),x=function(e){var t=e.upvotedFollowees,n=e.voteupCount,a=e.actionText,o=e.canClick,r=e.onClick;if(!n)return null;var i=t.length,c=i===n?"":"".concat(Object(C.formatNumber)(n)," 人");return Object(s.c)(j.CJKSpace,{children:[t.map((function(e,t){return Object(s.c)("span",{children:[t>0&&"、",Object(s.b)(w.a,{noBadge:!0,user:e,children:e.name},t)]},t)})),i>0&&n-i>0&&"等",o?Object(s.c)(y.c,{preset:"plain",onClick:r,children:[c,a]}):c+a]})};x.propTypes={voteupCount:v.a.number.isRequired,upvotedFollowees:v.a.array.isRequired,actionText:v.a.string.isRequired,canClick:v.a.bool,onClick:v.a.func},x.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var k=x,S=n(1322);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var R=function(e){Object(r.a)(n,e);var t=A(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={modalShown:e.props.defaultModalShown},e.handleListHide=function(){return e.setState({modalShown:!1})},e.handleListShown=function(){return e.setState({modalShown:!0})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,a=e.openable,o=e.type,r=e.too,i=e.isFetching,c=e.isDrained,l=e.items,u=e.onLoad;if(t<=0)return null;var d,b=this.state.modalShown;return d="pin"===o?"为该".concat(O.b[o],"鼓掌"):"column"===o?"关注":"".concat(r?"也":"","赞同了该").concat(O.b[o]),Object(s.c)("span",{className:"Voters",children:[Object(s.b)(k,{canClick:a,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:d}),Object(s.b)(g.b,{size:"fullPage",onClose:this.handleListHide,children:b&&Object(s.b)(S.a,{isFetching:i,isDrained:c,text:"column"===o?"关注了":"赞同了",items:l,voteupCount:t,onLoad:u})})]})}}]),n}(u.Component);R.propTypes={openable:v.a.bool,upvotedFollowees:v.a.array,id:v.a.oneOfType([v.a.number,v.a.string]),type:v.a.oneOf(["pin","answer","article","column"]).isRequired,defaultModalShown:v.a.bool},R.defaultProps={openable:!0,defaultModalShown:!1};var T=R;function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var E={answer:"answers",article:"articles",pin:"pins",column:"columns"};var N=function(e){Object(r.a)(n,e);var t=I(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleLoad=function(){var t=e.props,n=t.type,a=t.id,o=t.loadAnswerVoters,r=t.loadPinVoters,i=t.loadArticleVoters,c=t.loadColumnsFollowers;switch(n){case"answer":return o(a);case"pin":return r(a);case"article":return i(a);case"column":return c(a);default:return null}},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(s.b)(T,Object.assign({onLoad:this.handleLoad},this.props))}}]),n}(u.Component);N.propsTypes=Object.assign({},T.propsTypes),N.defaultProps=Object.assign({},T.defaultProps);t.a=Object(d.connect)((function(e,t){var n=t.id,a=t.type,o=e.entities.users,r=e[E[a]]||{},i=r.voters,c=void 0===i?{}:i,s=r.concernedUpvoters,u=void 0===s?{}:s,d=c[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},b=d.isFetching,f=d.isDrained,p=d.order,h=d.ids,m=(u[n]||{ids:[]}).ids;return{isFetching:b,isDrained:f,order:p,items:[].concat(Object(l.a)(m),Object(l.a)(h.filter((function(e){return!m.includes(e)})))).map((function(e){return o[e]}))}}),{loadAnswerVoters:b.v,loadArticleVoters:f.e,loadPinVoters:p.f,loadColumnsFollowers:h.c})(N)},1725:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n.n(o),i=n(86),c=Object.assign;var l=function(e){return r.a.createElement(i.a,c({viewBox:"0 0 15 15"},e),r.a.createElement("g",{fill:"#ffab2e",fillRule:"evenodd"},r.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),r.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},s=Object.assign;var u=function(e){return r.a.createElement(i.a,s({width:"15",height:"15",viewBox:"0 0 15 15"},e),r.a.createElement("g",{fillRule:"evenodd"},r.a.createElement("path",{fill:"#d7d8d9",d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),r.a.createElement("path",{fill:"#ffab2e",d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},d=Object.assign;var b=function(e){return r.a.createElement(i.a,d({viewBox:"0 0 15 15"},e),r.a.createElement("g",{fill:"#d7d8d9",fillRule:"evenodd"},r.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),r.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))};t.a=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return Object(a.b)("div",{className:"Rating",children:Array.from({length:5}).map((function(e,t){var o=function(e,t){return t>=e+1?l:t>=e+.5?u:b}(t,n);return Object(a.b)(o,{size:15},t)}))})}},1726:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(1),o=n(55),r=n(892),i=n(74),c=n(43),l=n(0),s=n.n(l),u=n(86),d=Object.assign;var b=function(e){return s.a.createElement(u.a,d({width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},e),s.a.createElement("path",{fill:"url(#paint0_linear_269:46630)",d:"M2.8 2a.8.8 0 00-.8.8v11.4a.8.8 0 00.8.8h11.4a.8.8 0 00.8-.8V2.8a.8.8 0 00-.8-.8H2.8zm1.051 1.25a.6.6 0 00-.6.6v9.3a.6.6 0 00.6.6h9.3a.6.6 0 00.6-.6v-9.3a.6.6 0 00-.6-.6h-9.3z",fillRule:"evenodd",clipRule:"evenodd"}),s.a.createElement("path",{fill:"#06F",d:"M2.8 2a.8.8 0 00-.8.8v11.4a.8.8 0 00.8.8h11.4a.8.8 0 00.8-.8V2.8a.8.8 0 00-.8-.8H2.8zm1.051 1.25a.6.6 0 00-.6.6v9.3a.6.6 0 00.6.6h9.3a.6.6 0 00.6-.6v-9.3a.6.6 0 00-.6-.6h-9.3z",fillRule:"evenodd",clipRule:"evenodd"}),s.a.createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"url(#paint1_linear_269:46630)",rx:".8"}),s.a.createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"#06F",rx:".8"}),s.a.createElement("path",{fill:"#fff",stroke:"#fff",d:"M8.962 11.153h.725V13.5H8.3v-2.754c0-.66.293-1.181.7-1.567.064-.06.129-.116.196-.168a2.654 2.654 0 00-.205.227c-.295.369-.53.864-.53 1.415v.5h.5zM12.974 11.153h.726V13.5h-1.387v-2.754c0-.66.293-1.181.7-1.567.063-.06.129-.116.195-.168a2.657 2.657 0 00-.204.227c-.295.369-.53.864-.53 1.415v.5h.5z"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"paint0_linear_269:46630",x1:"15",x2:"2",y1:"2",y2:"15",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#06F"}),s.a.createElement("stop",{offset:"1",stopColor:"#00D1FF"})),s.a.createElement("linearGradient",{id:"paint1_linear_269:46630",x1:"17.5",x2:"4.5",y1:"4.5",y2:"17.5",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#06F"}),s.a.createElement("stop",{offset:"1",stopColor:"#00D1FF"}))))},f=n(30);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.title,l=e.question,s=(l=void 0===l?{}:l).title,u=e.url,d=e.id,p="answer"===t?"原回答：".concat(s):"原文章：".concat(n),h=Object(c.d)((function(){window.open(u)}));return Object(a.b)(i.b,{content:{type:f.ab[t],token:String(d)},children:Object(a.c)(i.a,{shouldTrackShow:!0,zaText:"zvideo_origin_content",zaType:"Card",zaAction:"OpenUrl",extra:{link:{url:u}},as:o.Flex,bg:"GBK10A",padding:"12px 10px 12px 18px",justifyContent:"space-between",onClick:h,css:{cursor:"pointer"},children:[Object(a.c)(o.Flex,{children:[Object(a.b)(b,{css:{marginRight:"6.5px"}}),Object(a.b)(o.Text,{color:"GBK06A",fontSize:"14px",lineHeight:"19.6px",children:p})]}),Object(a.b)(r.a,{size:20,css:function(e){return{flexShrink:"0",fill:e.colors.GBK06A}}})]})})}var h=n(49),m=n(24),v=n(83),g=n(87),O=n(990),j=n(208),y=n(178),C=n(113),w=n(428),x=n(908),k=(n(1031),function(e){var t=e.author,n=t.author,r=t.identity,c=t.id,s=Object(m.useSelector)((function(e){return Object(C.c)(e,{urlToken:n})})),u=s||{},d=u.avatarUrl,b=u.isFollowing,f=u.name,p=Object(l.useRef)(),h=Object(l.useCallback)((function(){return window.open("https://www.zhihu.com/people/".concat(n))}),[n]),g=Object(l.useCallback)((function(){return p.current.trackEvent({eventType:"Click",elementLocation:{type:"Button",text:b?"取消关注":"关注"},action:b?"UnFollow":"Follow"}),!0}),[b]);return s?Object(a.c)(i.b,{content:{type:"User",token:n,id:c},children:[Object(a.b)(i.d,{ref:p}),Object(a.c)(o.Flex,{mt:"16px",css:{"& + &":{marginTop:"24px"}},alignItems:"center",children:[Object(a.b)(j.a,{url:d,size:38,css:{cursor:"pointer"},onClick:h}),Object(a.c)(o.Box,{ml:"14px",flex:"1",children:[Object(a.b)(o.Box,{color:"GBK03A",fontSize:"15px",lineHeight:"17px",fontWeight:"bold",onClick:h,css:[Object(v.d)(1),{cursor:"pointer"}],children:f}),Object(a.b)(o.Box,{color:"GBK04A",fontSize:"14px",lineHeight:"16px",mt:"3px",children:r})]}),Object(a.b)(x.a,{useCustomZa:!0,preset:"primary",type:"people",id:n,isFollowing:b,onClick:g,css:{padding:"0 14px",minWidth:"0px"}})]})]}):null}),S=function(e){var t,n,r,c,l,s=e.item,u=e.index;if("ANSWER"===s.type)r="Answer",c=(l=s.answer).question.title;else{if("ARTICLE"!==s.type)return null;r="Post",c=(l=s.article).title}var d=l,b=d.id,f=d.thumbnailInfo,p=d.url,h=d.voteupCount,m=d.commentCount,g=null==f||null===(t=f.thumbnails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url,O="".concat(Object(y.cnNiceNumber)(h),"赞同 · ").concat(Object(y.cnNiceNumber)(m),"评论");return Object(a.b)(i.b,{content:{type:r,id:String(b)},children:Object(a.c)(i.a,{as:"a",view:{elementLocation:{card:{index:u}}},zaType:"Card",zaAction:"OpenUrl",zaText:"视频引用的原文",extra:{link:{url:p}},href:p,target:"_blank",css:function(e){return{marginTop:"16px",display:"flex",alignItems:"center",height:"84px",borderRadius:"8px",padding:"0 12px",backgroundColor:e.colors.GBK10A}},children:[g&&Object(a.b)(o.Image,{src:g,width:"60px",height:"60px",mr:"12px",css:{borderRadius:"6px"}}),Object(a.c)(o.Box,{flex:"1",children:[Object(a.b)(o.Box,{fontWeight:"bold",fontSize:"15px",css:Object(v.d)(1),children:c}),Object(a.b)(o.Box,{color:"GBK06A",fontSize:"13px",children:O})]})]})})},A=function(e){var t,n,c=e.id,s=e.subAuthor,u=e.before,d=e.after,p=e.content,y=p||{},C=y.type,x=y.id,A=f.ab[C],R=Object(m.useDispatch)(),T=Object(m.useSelector)((function(e){return e.zvideos.creationReferences[c]})),I=Object(l.useState)(!1),E=Object(h.a)(I,2),N=E[0],B=E[1],z=Object(l.useCallback)((function(){B(!0),R(Object(w.m)(c))}),[R,c]);return s?Object(a.c)(a.a,{children:[Object(a.b)(i.b,{block:"CreationReferencesBar",content:p?{type:A,token:x}:{},children:Object(a.c)(i.e,{zaText:!0,shouldTrackClick:!0,zaType:"Card",as:o.Flex,onClick:z,justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"10px",py:"12px",color:"GBK06A",bg:"GBK10A",fontSize:"14px",lineHeight:"20px",css:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[Object(a.c)(o.Flex,{children:[Object(a.b)(b,{css:{marginRight:"6.5px"}}),Object(a.b)(o.Box,{flexShrink:"0",children:u}),Object(a.c)(o.Flex,{alignItems:"center",mx:"6px",children:[Object(a.b)(j.a,{url:s.avatarUrl,round:!0,size:18,css:function(e){return{border:"1px solid ".concat(e.colors.GBK99A)}}}),Object(a.b)(o.Box,{flex:"1",ml:"6px",css:Object(v.d)(1),children:s.name})]}),Object(a.b)(o.Box,{flexShrink:"0",children:d})]}),Object(a.b)(r.a,{size:20,css:{flexShrink:"0"}})]})}),Object(a.b)(g.b,{onClose:function(){return B(!1)},title:"引用详情",children:N&&(T?Object(a.c)(i.b,{block:"CreationReferencesModal",children:[Object(a.b)(o.Box,{fontSize:"15px",fontWeight:"bold",children:"作者"}),null===(t=T.authors)||void 0===t?void 0:t.map((function(e){return Object(a.b)(k,{author:e},e.author)})),Object(a.b)(o.Box,{my:"24px",css:function(e){return{borderTop:"1px solid ".concat(e.colors.GBK10A)}}}),Object(a.b)(o.Box,{fontSize:"15px",fontWeight:"bold",children:"视频引用的原文"}),null===(n=T.originalContent)||void 0===n?void 0:n.map((function(e,t){return Object(a.b)(S,{item:e,index:t},t)}))]}):Object(a.c)(a.a,{children:[Object(a.b)(O.a,{variant:"P01"}),Object(a.b)(O.a,{variant:"T02"})]}))})]}):null},R=n(1087),T=function(e){var t=e.id,n=e.creationRelationship;if(!n)return null;if(Object(R.e)(n)){var o,r=Object(R.a)(n);return(null!==(o=null==r?void 0:r.author)&&void 0!==o?o:null)&&Object(a.b)(p,Object.assign({},r))}if(Object(R.f)(n)){var i,c=Object(R.d)(n),l=null!==(i=null==c?void 0:c.author)&&void 0!==i?i:null,s="answer"===(null==c?void 0:c.type)?"回答":"文章";return l&&Object(a.b)(A,{id:t,subAuthor:l,before:"本视频引用",after:"的".concat(s,"进行创作"),content:c})}return null}},1727:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n(100),c=n(937),l=n(291),s=n(158),u=n(2809),d=n(1116),b=n(87),f=n(980);var p=function(e){var t=e.shown,n=e.onClose,a=e.onSubmit,i=Object(r.useCallback)((function(e){var t=e.type,o=e.payload;"browser/closeCurrentPage"!==t?"editor/submitAttachment"!==t||a(o.files):n()}),[a,n]);return Object(o.b)(b.b,{className:"BaiduFileSelector",size:"large",onClose:n,children:t&&Object(o.b)("div",{className:"BaiduFileSelector-content",children:Object(o.b)(f.a,{className:"BaiduFileSelector-iframe",src:"https://www.zhihu.com/appview/editor/attachment/baidu",onMessage:i})})})},h=Object(r.forwardRef)((function(e,t){var n=Object(r.useState)(!1),i=Object(a.a)(n,2),c=i[0],l=i[1];return Object(r.useImperativeHandle)(t,(function(){return{setBaiduFileSelectorShown:l}}),[]),Object(o.b)(p,{shown:c,onClose:function(){return l(!1)},onSubmit:function(t){l(!1),e.onSubmit(t)}})}));t.a=function(){var e={},t=function(t){e.getEditorRef().props.handleCommand("insert-file-link-card:".concat(JSON.stringify(t)))},n=function(){return Object(d.a)(e.getEditorState()).filter((function(e){return"file-link-card"===e.getType()}))},a=function(){n().size>=10?s.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)};return e.containerRef=Object(r.createRef)(),{initialize:function(t){Object.assign(e,t)},components:Object(o.b)(h,{handleSubmit:t,ref:e.containerRef,onSubmit:t}),handleCommand:function(e){return"insert-file-from-baidu-wangpan"===e?(a(),"handled"):"not-handled"},toolbar:{section:i.a.CUSTOM_MAIN,label:"上传附件",icon:u.a,toolType:l.e.ENTITY,onClick:function(){n().size>=10?s.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)},priority:2},toolbarV2:{section:c.a.BUSINESS_MEDIA,label:"上传附件",text:"网盘",icon:u.a,toolType:l.e.ENTITY,onClick:function(){a()},priority:2}}}},1730:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n(2810),c=n(43),l=n(100),s=n(937),u=n(161),d=n(36),b=n(35),f=n(924),p=n(55),h=function(e){var t=e.className,n=e.onClose,a=e.shown,r=e.allInviters,i=e.onChoose;return Object(o.b)(u.b,{title:"添加「谢邀」卡片",subtitle:"选择邀请人，添加感谢他的卡片",onClose:n,className:t,css:{width:"536px"},children:a&&r.map((function(e){return Object(o.c)(p.Flex,{css:{padding:"12px 0"},children:[Object(o.b)(f.a,{author:e}),Object(o.b)(d.c,{color:"color",preset:"blue",css:{height:"32px",marginLeft:"auto"},onClick:function(){b.a.trackEvent(null,{id:7682,action:"Click"}),i&&i(e)},children:"选择"})]},e.id)}))})},m=n(1214),v=function(e){var t=e.shown,n=e.hasShown,a=e.children,o=Object(r.useRef)(n),i=Object(r.useRef)(t);return Object(r.useEffect)((function(){!t&&i.current&&(o.current=!0),i.current=t}),[t]),t&&!o.current&&a},g=function(e){var t=e.className,n=e.shown,i=e.hasShown,c=e.inviters,l=e.onConfirm,s=e.onCancel,u=Object(r.useState)(n),d=Object(a.a)(u,2),f=d[0],h=d[1],m=Object(r.useRef)(n);return Object(r.useEffect)((function(){m.current!==n&&h(n),m.current=n}),[n]),(null==c?void 0:c.length)>0&&Object(o.b)(v,{shown:f,hasShown:i,children:Object(o.c)(p.Flex,{className:t,pb:"12px",px:"16px",mx:"-20px",mb:"16px",color:"GBK05A",alignItems:"center",sx:{borderBottom:"1px solid",borderColor:"GBK09A",fontSize:"15px",lineHeight:"20px",position:"relative",zIndex:"0"},children:[c.map((function(e,t){return Object(o.b)(p.Image,{src:c[0].avatarUrl,size:24,sx:{borderRadius:"50%",border:"2px solid",borderColor:"GBK99A",position:"relative",zIndex:c.length-t,marginLeft:t?"-14px":"0"}},e.id)})),Object(o.b)(p.Text,{ml:"8px",children:c[0].name+(c.length>1?"等 ".concat(c.length," 人"):"")}),"邀请你回答",Object(o.b)(p.Text,{color:"primary",ml:"16px",css:{cursor:"pointer"},onClick:function(){b.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===c.length?"0":"1"}]},{button:{text:"添加谢邀"}}),l&&l(c)},children:"添加谢邀"}),Object(o.b)(p.Text,{ml:"16px",css:{cursor:"pointer"},onClick:function(){h(!1),b.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===c.length?"0":"1"}]},{button:{text:"忽略"}}),s&&s()},children:"忽略"})]})})};var O=Object(r.forwardRef)((function(e,t){var n=e.getAllInviters,i=e.inviterQuery,l=e.getStore,s=e.getInitialThankInviterInfo,u=Object(r.useState)(!1),d=Object(a.a)(u,2),b=d[0],f=d[1],p=Object(r.useState)(s()),v=Object(a.a)(p,2),O=v[0],j=v[1],y=Object(r.useState)(null),C=Object(a.a)(y,2),w=C[0],x=C[1],k=Object(c.d)((function(){return f(!1)}));return Object(r.useImperativeHandle)(t,(function(){return{openInviterListModal:function(){return f(!0)},getInvitersData:function(){return w},getThankInviterInfo:function(){return O}}}),[w,O]),Object(r.useEffect)((function(){n().then((function(e){var t=e.payload;x(t.data);var n=l();n.setEditorState(n.getEditorState())}))}),[]),Object(o.c)(o.a,{children:[O&&Object(o.b)(m.a,{css:{marginBottom:16,marginTop:"4px !important"},showDeleteButton:!0,item:{isLabeled:!0},inviter:O,onDelete:function(){j(null)}}),(null==w?void 0:w.length)>0&&Object(o.b)(g,{hasShown:Boolean(i)||Boolean(O),shown:!O,inviters:w,onConfirm:function(e){null!=e&&e.length&&(1!==e.length?f(!0):j(e[0]))}}),Object(o.b)(h,{onClose:k,shown:b,allInviters:w,onChoose:function(e){j(e),k()}})]})}));t.a=function(e){var t=e.getshowldShowToolbarButton,n=e.getAllInviters,a=e.inviterQuery,c=e.getInitialThankInviterInfo,u={},d=Object(r.createRef)(null);return{initialize:function(e){Object.assign(u,e)},componentsBeforeEditor:[{component:Object(o.b)(O,{getAllInviters:n,inviterQuery:a,ref:d,getStore:function(){return u},getInitialThankInviterInfo:c}),priority:0}],getExtraPluginData:function(){var e,t,n;return t=c,n=null===(e=d.current)||void 0===e?void 0:e.getThankInviterInfo(),t?n?n.id===t.id?{}:{thankInviterStatus:"open",thankInviter:n.id}:{thankInviterStatus:"close"}:n?{thankInviterStatus:"open",thankInviter:n.id}:{}},toolbar:{label:"添加谢邀",section:l.a.CUSTOM_MAIN,priority:3,icon:i.a,onClick:function(){d.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=d.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=d.current)||void 0===n?void 0:n.getThankInviterInfo()))}},toolbarV2:{label:"添加谢邀",section:s.a.BUSINESS_MEDIA,text:"谢邀",icon:i.a,priority:3,onClick:function(){d.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=d.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=d.current)||void 0===n?void 0:n.getThankInviterInfo()))}}}}},1731:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(1),o=n(0),r=n.n(o),i=n(178),c=n(1039),l=n(975),s=n(43),u=n(86),d=Object.assign;var b=function(e){return r.a.createElement(u.a,d({width:"8",height:"10",fill:"none",viewBox:"0 0 8 10"},e),r.a.createElement("path",{fill:"#121212",d:"M1.315 9.302a.6.6 0 01-.915-.51v-7.52a.6.6 0 01.914-.51l6.11 3.754a.6.6 0 010 1.022l-6.11 3.764z",fillRule:"evenodd",clipRule:"evenodd"}))},f=n(42),p=n(1031),h=function(e,t){return null!=e&&e.plainText?"".concat(e.plaintext," · "):Object(p.isReferenceRelation)(t)?"引用创作 · ":null};function m(e){var t=e.videoId,n=e.zvideoId,r=e.title,u=e.playCount,d=void 0===u?0:u,p=e.voteupCount,m=void 0===p?0:p,v=e.isComplete,g=void 0!==v&&v,O=e.startTime,j=void 0===O?0:O,y=e.creationReferences,C=e.creationRelationship,w=e.shouldExpandState,x=e.videoRef,k=e.alwaysShowVolumeButton,S=e.itemId,A=e.itemType,R=Number(j/1e3),T=Object(o.useRef)(),I=Object(o.useRef)({currentTime:0}),E=Object(o.useRef)(Object(l.c)(t,"*",!0));Object(o.useEffect)((function(){var e=E.current.subscribeMessage((function(e,t){e===l.b.DOM.TIMEUPDATE&&(I.current.currentTime=t.currentTime)}));return function(){return e.unsubscribe()}}),[]);return Object(a.c)("div",{className:"VideoAnswerPlayer",children:[Object(a.b)("div",{className:"VideoAnswerPlayer-video",children:Object(a.b)(c.a,{zaProps:{type:"Answer",token:S},ref:Object(s.h)(T,x),className:"VideoAnswerPlayer-iframe",type:"video",src:"https://".concat(f.a.videoHost,"/video/").concat(t,"?").concat(new URLSearchParams([["itemId",S],["itemType",A]]).toString()),iframeProps:{allowFullScreen:!0},griffithProps:{alwaysShowVolumeButton:k}})}),w&&Object(a.c)("div",{role:"button",tabIndex:0,"aria-label":"跳转到对应视频",className:"VideoAnswerPlayer-stateBar",onClick:function(){E.current.dispatchMessage(T.current.contentWindow,l.a.PLAYER.PAUSE,{});var e=(I.current.currentTime+R).toFixed(1);window.open("https://www.zhihu.com/zvideo/".concat(n,"?playTime=").concat(e))},children:[Object(a.c)("div",{className:"VideoAnswerPlayer-state",children:[Object(a.b)("div",{className:"VideoAnswerPlayer-state--title",children:r}),Object(a.c)("div",{className:"VideoAnswerPlayer-state--data",children:[h(y,C),Object(i.cnNiceNumber)(d),"播放",m>0?" · ".concat(Object(i.cnNiceNumber)(m),"赞同"):null]})]}),!g&&Object(a.c)("div",{className:"VideoAnswerPlayer-action",children:[Object(a.b)(b,{style:{marginRight:"6px"}}),"完整版"]})]})]})}},1732:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n.n(r),c=n(24),l=n(55),s=n(74),u=n(36),d=n(87),b=n(431),f=n(1750),p=n(1629),h=n(1482),m=n(158),v=n(43),g=n(64),O=n.n(g),j=n(29),y=function(e){var t=e.selectedQuestion,n=e.answerContent,a=e.checkRange,i=e.onClose,u=e.shouldPublish,d=e.setSelectedQuestion,f=e.selectedContribution,p=e.zvideoId,h=e.isEditing,g=e.duration,y=e.editorRef,C=e.closeAfterEdit,w=e.reset,x=e.MIN_RANGE,k=Object(s.i)(),S=Object(c.useDispatch)();return{onCancel:Object(v.d)((function(){k.trackEvent({eventType:"Click",action:"Close",block:"Modal",elementLocation:{type:"Button"}}),t&&n?m.a.confirm(Object(o.b)(l.Box,{textAlign:"center",children:"当前视频投稿内容离开后不保存"}),{title:Object(o.b)(l.Box,{ml:"23px",children:"取消当前视频投稿编辑吗？"}),text:{ok:"继续编辑",cancel:"取消离开"}}).then(O.a,i):i()})),onComplete:Object(v.d)((function(){u?S(Object(b.k)(p)).then((function(){S(Object(j.h)("投稿成功，审核后自动发布")),i()})):i()})),onSelectQuestion:Object(r.useCallback)((function(e){a&&a()||d(e)}),[a,d]),onSubmit:Object(v.d)((function(){var e={startTime:0,endTime:g,content:n};h?S(Object(b.n)(f.id,e)).then((function(){var e;C?i():(w(),null===(e=y.current)||void 0===e||e.changeRange(0,y.current.getDuration()))})).catch((function(e){var t=e.payload.message;S(Object(j.h)(t||"添加失败"))})):S(Object(b.a)(p,Object.assign(Object.assign({},e),{},{target:{parentObject:{type:"question",id:t.id,title:t.title},object:{type:"answer"}}}),g)).then((function(){var e;w(),null===(e=y.current)||void 0===e||e.autoNextRange(x)})).catch((function(e){var t=e.payload.message;S(Object(j.h)(t||"添加失败"))}))})),onCancelEdit:Object(v.d)((function(){h&&C?i():w()}))}},C=n(86),w=Object.assign;var x=function(e){return i.a.createElement(C.a,w({width:"153",height:"104",fill:"none",viewBox:"0 0 153 104"},e),i.a.createElement("path",{fill:"#F0F4F7",d:"M95.97 102.732H45.137c-13.147 0-23.805-10.651-23.805-23.79 0-37.472 30.396-67.85 67.893-67.85 27.184 0 49.221 22.023 49.221 49.19 0 23.445-19.017 42.45-42.476 42.45z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#2B6BCC",d:"M73.088 40.905v20.068M39.27 64.164v24.009M110.813 64.164v34.1",strokeLinecap:"round",strokeWidth:".475"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M110.813 14.992v16.205M39.199 29.223v8.56M33.03 37.754h99.165M28.754 64.125h112.104",strokeLinecap:"round",strokeWidth:".475"}),i.a.createElement("path",{fill:"#fff",d:"M.015 101.856h152.816L76.423 11.907.015 101.856z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#fff",d:"M81.32 27.703a4.895 4.895 0 01-4.897 4.894 4.895 4.895 0 01-4.897-4.894 4.895 4.895 0 014.897-4.893 4.895 4.895 0 014.897 4.893z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M76.423 14.321V.811",strokeWidth:".633"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M61.587 29.415H91.26c.853 0 1.308-1.007.743-1.646L76.423 10.132 60.844 27.769c-.564.64-.11 1.646.743 1.646zM8.472 103.516h142.657V96.19H8.472v7.326z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M15.014 96.116h33.27V88.79h-33.27v7.326zM50.03 70.63l9.3 24.354-2.967 1.132-9.3-24.355 2.967-1.13z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M57.15 76.295l6.94 18.175-4.316 1.646-6.94-18.175 4.316-1.646z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M15.014 79.644H49.43V77.5H15.014v2.144z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M11.25 88.79h33.271v-3.663h-33.27v3.663zM17.548 77.5h30.737v-2.642H17.548V77.5z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#fff",d:"M17.809 84.866H48.25v-4.96H17.809v4.96z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M17.548 85.127h30.964v-5.483H17.548v5.483zm.522-.522h29.92v-4.439H18.07v4.439z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#fff",d:"M76.423 33.84v2.178M79.776 33.063l1.541 1.54M82.135 31.197h2.18M68.363 31.197h2.18M71.436 34.603l1.54-1.54",strokeWidth:"1.095"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M140.533 96.372c-2.182-9.496-.74-19.823 4.845-28.733",strokeWidth:"1.133"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M147.924 67.603c-.988.704-2.073.877-2.422.387-.348-.49.17-1.457 1.159-2.16.989-.704 2.073-.876 2.422-.386.349.489-.17 1.456-1.159 2.16z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M144.759 65.51c.704.987.877 2.071.387 2.42-.49.348-1.458-.17-2.162-1.159-.703-.988-.876-2.071-.386-2.42.49-.348 1.458.17 2.161 1.158zM145.6 73.984c-1.394.659-2.788.634-3.115-.057-.327-.69.538-1.784 1.931-2.443 1.394-.659 2.788-.633 3.115.057.327.69-.538 1.784-1.931 2.443z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M142.109 70.66c.66 1.393.634 2.786-.057 3.113-.69.327-1.785-.538-2.444-1.93-.659-1.393-.634-2.787.057-3.113.69-.327 1.785.537 2.444 1.93zM143.964 81.107c-1.607.76-3.216.731-3.593-.065-.377-.796.621-2.058 2.228-2.818 1.608-.76 3.216-.73 3.593.066.377.796-.621 2.057-2.228 2.817z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M139.938 77.273c.761 1.607.732 3.214-.065 3.59-.797.378-2.059-.62-2.82-2.225-.761-1.607-.731-3.215.065-3.591.797-.377 2.06.62 2.82 2.226zM143.224 87.524c-1.527.912-3.131 1.039-3.583.283-.452-.756.418-2.108 1.945-3.02 1.526-.912 3.13-1.038 3.582-.283.452.756-.418 2.108-1.944 3.02z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M138.845 84.098c.912 1.525 1.039 3.128.283 3.58-.757.452-2.11-.418-3.023-1.943-.912-1.525-1.039-3.128-.282-3.58.756-.452 2.109.418 3.022 1.943zM144.305 93.69c-1.507 1.384-3.285 1.9-3.971 1.154-.686-.746-.021-2.473 1.487-3.857 1.507-1.384 3.285-1.9 3.971-1.153.686.746.02 2.473-1.487 3.856z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M138.571 90.849c1.384 1.506 1.901 3.283 1.154 3.97-.747.685-2.475.02-3.859-1.487-1.385-1.506-1.901-3.282-1.154-3.968.747-.687 2.474-.021 3.859 1.485zM129.951 96.157h-10.3V84.28c0-.36.293-.654.655-.654h8.99c.362 0 .655.293.655.654v11.877z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M129.296 87.595h1.069a2.31 2.31 0 012.311 2.31v.488a2.31 2.31 0 01-2.311 2.31h-1.069",strokeWidth:"1.634"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M125.974 72.734c-.263.388-.538.758-.701 1.174a2.514 2.514 0 00-.21 1.244c.089.826.641 1.546 1.238 2.216l.226.258c.08.103.164.202.238.31.139.22.265.456.33.714a2.376 2.376 0 01-.1 1.54c-.407.955-1.299 1.546-2.195 1.775.796-.48 1.47-1.145 1.715-1.95a1.985 1.985 0 00-.278-1.719c-.06-.082-.128-.157-.191-.237l-.237-.26c-.306-.358-.611-.736-.851-1.171-.232-.435-.412-.934-.404-1.452-.005-.518.177-1.011.437-1.419.263-.411.617-.735.983-1.023zM123.249 77.57c-.312.404-.568.873-.518 1.339.048.463.356.865.686 1.237l.125.143c.044.056.09.11.131.169a1.304 1.304 0 01.129 1.233c-.22.527-.712.85-1.202.988.445-.255.82-.628.961-1.074a1.108 1.108 0 00-.152-.967c-.034-.046-.072-.088-.107-.132l-.131-.144a3.948 3.948 0 01-.47-.646c-.128-.238-.227-.512-.224-.795a1.445 1.445 0 01.236-.78c.146-.226.336-.41.536-.571z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M81.44 73.316h16.04v-5.712H81.44v5.712z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M112.063 96.19H66.857l1.491-15.342a10.45 10.45 0 0110.404-9.436h21.416a10.45 10.45 0 0110.403 9.436l1.492 15.342z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M70.543 96.157h43.929v-.68h-43.93v.68z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#fff",d:"M72.252 92.11l-1.007 3.368h21.262v-1.684s-7.61-2.467-20.255-1.684zM112.762 92.11l1.007 3.368H92.507v-1.684s7.61-2.467 20.255-1.684z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M92.507 93.794v1.684",strokeWidth:".368"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M99.775 69.924h-20.63a5.265 5.265 0 01-5.267-5.264v-1.992a5.265 5.265 0 015.267-5.264h20.63a5.265 5.265 0 015.267 5.264v1.992a5.265 5.265 0 01-5.267 5.264z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#BDCDE5",d:"M111.419 95.41a.666.666 0 01.648-.681l.578-.015.035 1.328-.579.015a.665.665 0 01-.682-.647z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M112.685 96.225l-.045-1.695 6.832-.179.044 1.695-6.831.18zM119.521 96.231l-.054-2.072 4.69-.123.054 2.072-4.69.123z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#BDCDE5",d:"M124.211 96.108l-.054-2.072 1.283.374.033 1.258-1.262.44z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M112.646 94.713l.034 1.329-.407.01-.034-1.328.407-.01z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#BDCDE5",d:"M125.44 94.41l.033 1.258 1.768-.672-1.801-.586z",fillRule:"evenodd",clipRule:"evenodd"}))};t.a=function(e){var t=e.defaultVideo,n=e.title,i=e.description,m=e.duration,v=e.show,g=e.onClose,O=e.closeAfterEdit,j=void 0!==O&&O,C=e.shouldPublish,w=void 0!==C&&C,k=e.isProduce,S=void 0!==k&&k,A=Object(c.useDispatch)(),R=t.id,T=Object(b.o)(R).answer,I=(T=void 0===T?{}:T).totalCount,E=void 0===I?0:I,N=Object(b.r)(),B=Boolean(N),z=Object(b.p)(R),L=!B&&z.length===E,P=Object(r.useRef)(),M=Object(r.useState)(null),D=Object(a.a)(M,2),_=D[0],V=D[1],U=Object(r.useState)(""),F=Object(a.a)(U,2),q=F[0],H=F[1],G=!_&&w,K=Object(r.useCallback)((function(){V(null),H(""),A(Object(b.l)(null))}),[A]),W=y({selectedQuestion:_,answerContent:q,onClose:g,shouldPublish:w,setSelectedQuestion:V,selectedContribution:N,zvideoId:R,isEditing:B,duration:m,editorRef:P,closeAfterEdit:j,reset:K,MIN_RANGE:6e4}),Z=W.onCancel,Q=W.onComplete,Y=W.onSelectQuestion,J=W.onSubmit,X=W.onCancelEdit;return Object(r.useEffect)((function(){if(v)if(N){var e,t=N.target.parentObject,n=N.content,a=N.startTime,o=N.endTime;V(t),H(n),null===(e=P.current)||void 0===e||e.changeRange(a,o)}else K()}),[v,N,A,K]),Object(o.b)(d.b,{maskClosable:!1,onClose:Z,css:{width:"790px",maxHeight:"initial",".Modal-content":{lineHeight:"normal",padding:0,margin:0}},children:v&&Object(o.b)(s.b,{block:"Modal",children:Object(o.c)(s.e,{zaType:"Block",as:l.Flex,height:"600px",children:[Object(o.c)(l.Flex,{flexDirection:"column",width:"216px",height:"100%",css:function(e){return{backgroundColor:"".concat(e.colors.GBK10A)}},children:[Object(o.c)(l.Box,{as:"p",fontSize:"24px",fontFamily:"PingFang SC",fontWeight:"500",px:"10px",mt:"24px",mb:"4px",children:["已添加投稿 ",null==z?void 0:z.length,"/",E]}),Object(o.b)(l.Box,{flex:"1",overflowY:"auto",px:"20px",mt:"12px",children:z.length?Object(o.b)(h.a,{isProduce:S,zvideoId:R,showSelect:!0}):Object(o.c)(l.Flex,{justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%",children:[Object(o.b)(x,{}),Object(o.b)(l.Text,{fontSize:"17px",fontFamily:"PingFang SC",fontWeight:"500",mt:"46px",css:function(e){return{color:e.colors.GBK02A}},children:"选择相关问题投稿"}),Object(o.b)(l.Text,{fontSize:"14px",fontFamily:"PingFang SC",fontWeight:"400",css:function(e){return{color:e.colors.GBK06A}},mt:"4px",children:"让更多人看到你的视频"})]})}),G&&Object(o.b)(l.Flex,{alignItems:"center",justifyContent:"space-between",px:"20px",height:"82px",css:{button:{width:"162px"}},children:Object(o.b)(s.a,{zaType:"Button",zaAction:"Save",zaText:!0,as:u.c,onClick:Q,preset:"primary",color:"blue",disabled:!z.length,children:"发布"})})]}),Object(o.b)(l.Flex,{flexDirection:"column",flex:"1",children:L?Object(o.c)(o.a,{children:[Object(o.b)(l.Box,{px:"20px",my:"24px",fontSize:"24px",fontWeight:"500",children:"选择投稿问题"}),Object(o.c)(l.Flex,{flexDirection:"column",justifyContent:"center",alignItems:"center",flex:"1",children:[Object(o.b)(l.Image,{width:"160px",height:"160px",src:"https://pic3.zhimg.com/v2-aee0d50112db6c845a1b7e7bcd2d7a84.png"}),Object(o.b)(l.Box,{mt:"10px",fontWeight:"500",fontSize:"17px",children:"已达到投稿数量上限"}),Object(o.b)(l.Box,{mt:"4px",fontSize:"14px",color:"GBK06A",children:"可移除已添加投稿来继续投稿问题"})]})]}):_?Object(o.b)(p.a,{value:q,onChange:H,onSubmit:J,onCancel:X,isEditing:B,selectedQuestion:_}):Object(o.b)(f.a,{zvideoId:R,title:n,description:i,onSelect:Y})})]})})})}},1734:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(3),d=n.n(u),b=n(24),f=n(36),p=n(161),h=n(46),m=n(121);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(r.a)(n,e);var t=v(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleToggleAnonymousConfirm=function(){var t=e.props,n=t.question.id,a=t.updateQuestionAnonymous;(0,t.onClose)(),a(n)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.fillCurrentUserIfNeeded(["mcn_user_info"])}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,a=e.shown,o=e.isMCNUser,r=n.relationship.isAnonymous;return Object(l.b)(p.b,{title:r?"确认取消匿名身份？":"启用匿名后",onClose:t,size:"default",children:a&&Object(l.c)("div",{children:[r?Object(l.b)("div",{className:"Anonymous-confirm",children:Object(l.b)("p",{children:"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。"})}):Object(l.b)("div",{className:"Anonymous-confirm",children:Object(l.c)("ul",{children:[Object(l.b)("li",{children:"提问、回答、赞同、关注会显示为匿名"}),Object(l.b)("li",{children:"不能邀请别人回答问题"}),Object(l.b)("li",{children:"不能将回答同步到圈子"}),Object(l.b)("li",{children:"除提问者本人，不能匿名编辑问题"}),Object(l.b)("li",{children:"匿名身份不能使用视频功能"}),Object(l.b)("li",{children:"不能被视频引用和联合创作"}),Object(l.b)("li",{children:"启用匿名将自动取消所有已获得的「专业认可」"}),o&&Object(l.b)("li",{children:"不能使用商品信息发布功能"})]})}),Object(l.c)(p.a,{direction:"horizontal",children:[Object(l.b)(f.c,{onClick:t,color:"grey",children:"取消"}),Object(l.b)(f.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm,children:"确认"})]})]})})}}]),n}(s.Component);g.propTypes={question:d.a.object.isRequired};t.a=Object(b.connect)((function(e){var t,n=Object(h.b)(e);return{isMCNUser:2===(null==n||null===(t=n.mcnUserInfo)||void 0===t?void 0:t.status)}}),{updateQuestionAnonymous:m.pb,fillCurrentUserIfNeeded:h.e})(g)},1736:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(138),f=n(902),p=n(900),h=(n(1725),n(945)),m=n(938),v=n(944),g=n(1206),O=n(1408),j=n(415);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var C=function(e){Object(r.a)(n,e);var t=y(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.preset,a=e.ebook,o=e.lastreadTouchable,r=a.id,i=a.type,c=a.url,s=a.title,u=a.cover,d=a.authors,b=a.price,j=a.promotionPrice,y=a.description,C=a.relationship,w=void 0===C?{}:C,x=a.voteupCount,k=a.commentCount,S=(a.score,this.state),A=S.commentsShown,R=S.commentsAutoFocus,T=S.commentPattern;if(t!==p.c.interactive)return Object(l.b)(p.e,{title:Object(l.b)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:s}),data:a,link:c});var I={id:r,type:i},E=d.slice(0,2);return Object(l.c)(p.e,{className:"EBookItem",data:a,link:c,title:Object(l.b)("a",{className:"EBookItem-title",href:c,target:"_blank",rel:"noopener noreferrer",children:s}),image:Object(l.b)(n.Cover,{url:c,title:s,cover:u}),meta:Object(l.c)("div",{children:[Object(l.b)("div",{className:"EBookItem-description",children:y}),Object(l.c)(p.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"作者："}),E.map((function(e,t){return Object(l.c)("span",{children:[Object(l.b)(f.a,{user:e}),t<E.length-1&&"、"]},t)}))]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"知乎价："}),"number"==typeof j?Object(l.c)("span",{className:"EBookItem-price",children:[Object(O.a)(j),Object(l.b)("del",{children:Object(O.a)(b)})]}):Object(O.a)(b)]})]})]}),lastreadTouchable:o,children:[Object(l.c)(p.a,{className:"EBookItem-actions",children:[Object(l.b)(g.a,Object.assign(Object.assign({},I),{},{liked:Boolean(w.voting),count:x})),Object(l.b)(h.a,{onClick:this.handleCommentsShown,commentsShown:A,count:k}),Object(l.b)(v.a,Object.assign(Object.assign({},I),{},{title:s,authorName:d[0]&&d[0].name,href:c}))]}),Object(l.b)(m.a,{parent:a,commentPattern:T,shown:A,autoFocus:R,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);C.propTypes={preset:u.a.oneOf(Object.values(p.c))},C.defaultProps={preset:p.c.default},C.Cover=function(e){var t=e.url,n=e.cover,a=e.title;return Object(l.b)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{className:"EBookItem-image",style:{width:"78px",height:"104px"},src:Object(b.imgUrl)(n,"100w"),srcSet:"".concat(Object(b.imgUrl)(n,"xld")," 2x"),alt:a})})};t.a=Object(j.b)((function(e){var t=e.trackCardShow;return{module:"EBookItem",trackCardShow:void 0===t||t}}))(C)},1737:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(19),d=n(24),b=n(1283),f=n.n(b),p=n(369),h=n.n(p),m=n(190),v=n(579);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}function O(e,t){var n=t.os,a=t.id,o=t.sessionId,r=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",o).replace("__SESSIONID__",o).replace("__ATOKEN__",a).replace("__AID__",a).replace("__PAGETYPE__",r)}var j=function(e){Object(r.a)(n,e);var t=g(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={urls:null,logged:!1},e.handleObserve=function(t){t&&e.log()},e.log=function(){e.state.logged||Promise.resolve(e.state.urls||e.load().then((function(t){return t?(t=e.normalize(t),e.setState({urls:t}),t):[]}))).then((function(e){return e.forEach((function(e){return e&&Object(m.c)(e)}))})).then((function(){return e.setState({logged:!0})}))},e.load=function(){var t=e.props,n=t.type,a=t.id;return(0,t.loadBrandEntityTrackUrl)({type:n,id:a}).then((function(e){return e&&e.payload&&e.payload.data}))},e.normalize=function(t){var n=h()(),a=e.props,o=a.ua,r=a.id,i=a.type,c=encodeURIComponent("其他");o.Android?c="android":o.iOS&&(c="ios");var l={os:c,id:r,sessionId:n,type:i};return t.map((function(e){return O(e,l)}))},e}return Object(o.a)(n,[{key:"render",value:function(){return!this.state.logged&&Object(l.b)(f.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),n}(s.Component),y=Object(u.compose)(Object(d.connect)((function(e){return{ua:e.env.userAgent}}),{loadBrandEntityTrackUrl:v.b}))(j)},1738:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n.n(r),c=n(13),l=n.n(c),s=n(43),u=n(74),d=n(45),b=n.n(d),f=n(36),p=n(86),h=Object.assign;var m=function(e){return i.a.createElement(p.a,h({width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},e),i.a.createElement("path",{d:"M19.027 10c.239.01 1.973.138 1.973 2l-.001 8.027c-.009.24-.137 1.973-2 1.973H5.003C3.138 22 3.009 20.266 3 20.027V12c0-1.862 1.733-1.99 1.972-2zm-8.481 3.004c-.475-.277-.86-.064-.86.5V18.5c0 .553.394.773.86.5l4.278-2.496c.475-.277.466-.731 0-1.003zM18 2a2 2 0 012 2v1.134a1 1 0 011.207 1.573l-1.5 1.5a1 1 0 01-1.414 0l-1.5-1.5A1 1 0 0118 5.134V4h-2a1 1 0 110-2h2zm-8 4a1 1 0 010 2H4a1 1 0 110-2h6zm2-4a1 1 0 010 2H4a1 1 0 110-2h8z",fillRule:"evenodd"}))},v=n(1415),g=n(1084),O=n(57),j=!1,y=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],i=t[1],c=Object(r.useRef)(null);Object(r.useEffect)((function(){b.a.get("vessayTipShown")||i(!0)}),[]),Object(g.a)((function(){i(!1),b.a.set("vessayTipShown",!0)}),c);var l=Object(s.d)((function(e){e.stopPropagation(),i(!1),b.a.set("vessayTipShown",!0)}));return n&&Object(o.b)("img",{ref:c,onClick:l,onKeyUp:l,src:"https://pic1.zhimg.com/v2-97ce1cdeee383ce98263fc787f08ba9e.png",alt:"一键生成视频",css:{width:"347px",height:"120px",objectFit:"cover",transform:"translate(-50%, -100%)",position:"absolute",top:"4px",left:"50%"}})};t.a=function(e){var t=e.className,n=e.type,i=e.id,c=e.useVessayV2,d=e.isAuthor,p=Object(v.c)(n,i,c),h=Object(O.isBrowser)()&&location.href.includes("/people"),g=Object(r.useState)(!1),C=Object(a.a)(g,2),w=C[0],x=C[1],k=Object(s.f)({once:!0}),S=Object(a.a)(k,2),A=S[0],R=S[1];return Object(r.useEffect)((function(){R&&!j&&(j=!0,x(!0))}),[R]),Object(o.c)(u.a,{as:f.c,zaAction:"OpenUrl",zaText:"生成视频",zaType:"Button",preset:"plain",onClick:function(){b.a.set("vessayTipShown",!0),window.open(p)},className:l()("ContentItem-convertVideoButton",t),css:{position:"relative"},extra:{link:{url:p}},children:[w&&d&&h&&Object(o.b)(y,{}),Object(o.b)(m,{}),Object(o.b)("span",{ref:A,children:"一键生成视频"})]})}},1739:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n.n(o),i=n(26),c=function(e){return r.a.createElement(i.a,e,r.a.createElement("path",{fill:"currentColor",d:"M3.495 3A1.993 1.993 0 0 0 1.5 4.99v14.02c0 1.092.893 1.99 1.995 1.99h16.01a1.993 1.993 0 0 0 1.995-1.99V4.99c0-1.092-.893-1.99-1.995-1.99zm1.007 8a.999.999 0 1 1 0-2h6.995a.999.999 0 1 1 0 2zM3.5 14c0 .556.449 1 1.002 1h4.995a.999.999 0 1 0 0-2H4.502c-.546 0-1.002.448-1.002 1zm15.285-2.429a.5.5 0 0 1 0 .858l-3.528 2.117a.5.5 0 0 1-.757-.43V9.884a.5.5 0 0 1 .757-.429z",fillRule:"evenodd",clipRule:"evenodd"}))};c.defaultProps={name:"Catalog"};var l=c,s=n(36),u=n(950),d=n(415),b=n(35);t.a=function(e){var t=e.className,n=e.onClick,r=e.html,i=e.sourceId,c=Object(o.useCallback)((function(e){b.a.trackEvent(e.target,{id:9857,action:"Click"}),n&&n(e)}),[n]),f=Object(o.useMemo)((function(){return Object(u.c)(r,i).catalog}),[r,i]);return null!=f&&f.length?Object(a.b)(d.a,{trackCardShow:!0,view:{id:9856},children:Object(a.b)(s.c,{preset:"plain",className:t,onClick:c,icon:l,label:"目录"})}):null}},1740:function(e,t,n){"use strict";var a,o=n(206),r=n(1),i=n(0),c=n(13),l=n.n(c),s=n(161),u=n(139),d=n(209),b=n.n(d),f=n(950),p=n(49),h=n(33),m=n(55),v=n(892),g=n(83),O=n(415),j=n(35),y=n(974),C=["children","targetId","active","setCursor"],w=function(e){var t=e.children,n=e.targetId,a=e.active,o=e.setCursor,i=Object(h.default)(e,C);return Object(r.b)(m.Text,Object.assign(Object.assign({color:a?"GBL01A":"GBK02A",fontWeight:a?"bold":"normal",css:{fontSize:"14px"}},i),{},{children:Object(r.b)(O.a,{module:"Content",moduleName:String(t),children:Object(r.c)(m.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(e){j.a.trackEvent(e.target,{id:9745,action:"Click",name:"弹窗"});var t=document.querySelector("#"+n);o(n),t&&Object(y.a)(t)},children:[Object(r.b)(m.Text,{css:Object(g.d)(1),children:t}),Object(r.b)(v.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})})}))},x=function(e){return Object(r.b)(w,Object.assign({},e))},k={1:x,2:function(e){return Object(r.b)(w,Object.assign({pl:"20px"},e))}},S=function(e){var t=e.catalog,n=e.className,a=e.zaContent,o=Object(i.useState)(null),c=Object(p.a)(o,2),s=c[0],u=c[1];return Object(i.useEffect)((function(){if(null!=t&&t.length){var e=null,n=Object(y.d)();t.forEach((function(t){var a=document.querySelector("#"+t.targetId);(null==a?void 0:a.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),u(e)}}),[]),null!=t&&t.length?Object(r.b)(O.a,{trackCardShow:!0,view:{id:9744,name:"弹窗"},content:a,module:"Content",children:Object(r.b)(m.Box,{className:l()(n),children:Object(r.b)(m.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,o=k[t]||x;return Object(r.b)(o,{targetId:a,active:s===a,setCursor:u,children:n},a)}))})})}):null};t.a=function(e){var t=e.className,n=e.shown,c=e.onClose,d=e.html,p=e.sourceId,h=e.updated,m=e.author,v=e.zaContent,g=Object(i.useMemo)((function(){return Object(f.c)(d,p).catalog}),[d,p]);return Object(r.b)(s.b,{wrapperClassName:"CatalogModal-wrapper",className:l()("CatalogModal",t),title:"目录",subtitle:b()(a||(a=Object(o.a)([""," 编辑于",""])),null==m?void 0:m.name,Object(u.toDateTimeString)(h)),onClose:c,children:n&&Object(r.b)(S,{css:{paddingBottom:"16px"},catalog:g,zaContent:v})})}},1741:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(2005),f=n(208),p=n(178),h=n(139),m=n(900),v=n(945),g=n(938),O=n(908),j=n(944),y=n(1746),C=n(902);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var x=function(e){Object(r.a)(n,e);var t=w(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.roundtable,o=t.lastreadTouchable,r=t.zaInfos.follow,i=a||{},c=i.id,s=i.logo,u=i.type,d=i.guests,w=void 0===d?[]:d,x=i.stopTime,k=i.startTime,S=i.followers,A=i.commentCount,R=i.isFollowing,T=this.state,I=T.commentsShown,E=T.commentsAutoFocus,N=T.commentPattern,B=Object(l.b)(y.a,{roundtable:a,target:"_blank"}),z="/roundtable/".concat(c);if(n!==m.c.interactive)return Object(l.b)(m.e,{data:a,link:z,title:B});var L,P,M,D={id:c,type:u};return Object(l.c)(m.e,{data:a,link:z,onRef:function(t){e.contentItem=t},title:Object(l.c)("div",{className:"RoundtableItem-title",children:[B,Object(l.c)("div",{className:"RoundtableItem-badge",children:[Object(l.b)(b.a,{text:!0,center:!0})," ",(L=k,P=x,M=Date.now()/1e3,M>P?"已结束":M<L?"".concat(Object(h.toRelativeString)(L)," 开始"):"".concat(Object(h.toRelativeString)(P)," 结束"))]})]}),image:Object(l.b)(f.a,{url:s,size:60}),meta:Object(l.c)("div",{className:"RoundtableItem-meta",children:[Object(p.formatNumber)(S)," 人关注","了该圆桌"]}),lastreadTouchable:o,children:[w.length>0&&Object(l.b)(m.b,{children:Object(l.c)("div",{children:[Object(l.b)("span",{children:"嘉宾："}),w.map((function(e,t){return Object(l.c)("span",{children:[Object(l.b)(C.a,{user:e}),t<w.length-1&&"、"]},t)}))]})}),Object(l.c)(m.a,{children:[Object(l.b)(O.a,Object.assign(Object.assign({},D),{},{isFollowing:R,zaId:r})),Object(l.b)(v.a,{onClick:this.handleCommentsShown,commentsShown:I,count:A}),Object(l.b)(j.a,Object.assign(Object.assign({},D),{},{title:a.name}))]}),Object(l.b)(g.a,{parent:a,commentPattern:N,shown:I,autoFocus:E,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);x.propTypes={preset:u.a.oneOf(Object.values(m.c)),zaInfos:u.a.shape({follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},x.defaultProps={preset:m.c.default,zaInfos:{}}},1742:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(40),o=n.n(a),r=n(60),i=n(1),c=n(24),l=n(74),s=n(158),u=n(5),d=Object(u.a)("coCreation",["CANCEL"]);function b(e){var t=e.contentType,n=e.contentId,a=Object(c.useDispatch)(),u=function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.confirm("",{title:"你确定要取消联合创作吗？",text:{ok:"同意"}});case 2:return e.next=4,a((o=t,r=n,{API:{types:d.CANCEL,endpoint:"creation-relationship/cancel",method:"PUT",body:{content_type:o,content_id:String(r)}}}));case 4:window.location.reload();case 5:case"end":return e.stop()}var o,r}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.b)(l.a,{zaType:"Button",zaText:!0,zaBlock:"CancelCoCreation",onClick:u,children:"取消联合创作"})}},1743:function(e,t,n){"use strict";var a=n(1),o=n(3),r=n.n(o),i=n(87),c=n(36),l=function(e){var t=e.shown,n=e.onClose;return Object(a.b)(i.b,{onClose:n,title:"该问题暂时只支持客户端进行回答",children:t&&Object(a.b)("div",{className:"SlideshowEditBlockModal",children:Object(a.b)(c.c,{preset:c.b.Primary,color:c.a.Blue,onClick:n,children:"知道了"})})})};l.propTypes={shown:r.a.bool.isRequired,onClose:r.a.func.isRequired};t.a=l},1744:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n.n(r),c=n(26),l=function(e){return i.a.createElement(c.a,e,i.a.createElement("path",{d:"M17 3a1 1 0 0 1 .89 1.458l-.058.097-1.537 2.305C19.405 8.202 21.5 11 21.5 14.43 21.5 19.093 17.609 22 12 22s-9.5-2.907-9.5-7.571c0-3.43 2.096-6.227 5.205-7.569L6.168 4.555a1 1 0 0 1 .72-1.55L7 3h10zm-5 5c-4.273 0-7.5 2.761-7.5 6.429C4.5 17.826 7.37 20 12 20s7.5-2.174 7.5-5.571C19.5 10.76 16.273 8 12 8zm2.47.97l1.06 1.06a.25.25 0 0 1 0 .354L12.914 13h2.336a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25H13v1h2.25a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25H13v.75a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25V18H8.75a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25H11v-1H8.75a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25h2.336L8.47 10.384a.25.25 0 0 1 0-.354l1.06-1.06a.25.25 0 0 1 .354 0l1.94 1.939a.25.25 0 0 0 .353 0l1.94-1.94a.25.25 0 0 1 .353 0zM15.13 5H8.868l.668 1h4.928l.667-1z"}))};l.defaultProps={name:"Income"};var s=l,u=n(87),d=n(980),b=n(158),f=n(35),p=n(100),h=n(937),m=n(291),v=n(1116),g=n(1417),O=Object(r.forwardRef)((function(e,t){var n=e.getStore,i=e.getContentInfo,c=Object(r.useState)(!1),l=Object(a.a)(c,2),s=l[0],f=l[1],p=i(),h=p.id,m=p.type;Object(r.useImperativeHandle)(t,(function(){return{setShowUserProfitCardSelector:f}}),[]);var O=function(){return Object(v.a)(n().getEditorState()).filter((function(e){return"ad-link-card"===e.getType()}))};return Object(o.b)(o.a,{children:Object(o.b)(u.b,{className:"UserProfitCardSelector",size:"large",onClose:function(){f(!1)},children:s&&Object(o.b)("div",{className:"UserProfitCardSelector-content",children:Object(o.b)(d.a,{className:"UserProfitCardSelector-iframe",src:Object(g.b)({contentId:h,contentType:m}),onMessage:function(e){var t=n().getEditorRef();if("ProfitCardSelector/submitProfitCardInfo"===(null==e?void 0:e.type)&&null!=e&&e.payload){var a=e.payload,o=a.type,r=a.id,i=a.url;if(a.preventClose||f(!1),"inserLinkCard"===o&&t.props.handleCommand("insert-link-card:".concat(i)),"insertMCNLinkCard"===o){if(Object(v.a)(n().getEditorState()).filter((function(e){return"mcn-link-card"===e.getType()})).size>=30)return void b.a.alert(null,{title:"一篇内容最多可添加 ".concat(30," 个商品")});t.props.handleCommand("insert-mcn-link-card:".concat(r))}if("insertAdLinkCard"===o){if(r.startsWith("ZhiTask_"))if(O().filter((function(e){return e.getData().id.startsWith("ZhiTask_")})).size>=5)return void b.a.alert("一篇内容最多可添加 ".concat(5," 个「知+自选」卡片"));if(r.startsWith("fee_"))if(O().filter((function(e){return e.getData().id.startsWith("fee_")})).size>=1)return void b.a.alert("一篇内容最多可添加 ".concat(1," 个「付费回答」卡片"));t.props.handleCommand("insert-ad-link-card:".concat(r))}}}})})})})}));t.a=function(e){var t=e.shouldDisabled,n=e.shouldShow,a=void 0===n?function(){return!0}:n,i=e.getContentInfo,c=void 0===i?function(){}:i,l={};return l.containerRef=Object(r.createRef)(),{initialize:function(e){Object.assign(l,e)},handleCommand:function(e){return"toggle-user-profit-modal"===e?(l.containerRef.current.setShowUserProfitCardSelector(!0),"handled"):"not-handled"},toolbar:{label:"用户收益",icon:s,shouldShow:a,shouldDisabled:function(){return!(null==t||!t())||null},section:p.a.CUSTOM_MAIN,toolType:m.e.ENTITY,onClick:function(){l.containerRef.current.setShowUserProfitCardSelector(!0),f.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},toolbarV2:{label:"收益",text:"收益",icon:s,shouldShow:a,shouldDisabled:function(){return!!t()||null},section:h.a.BUSINESS_MEDIA,toolType:m.e.ENTITY,onClick:function(){l.containerRef.current.setShowUserProfitCardSelector(!0),f.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},components:Object(o.b)(O,{ref:l.containerRef,getStore:function(){return l},getContentInfo:c})}}},1746:function(e,t,n){"use strict";var a=n(33),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(13),p=n.n(f),h=n(24),m=n(41),v=n(993),g=n(1059),O=n(2005),j=n(2792),y=n(139),C=n(35),w=n(205),x=n(908),k=n(430),S=["userKey","isLast"],A=["toggler","roundtable","id","isLoading","onRef"];function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var T=function(e){var t=e.userKey,n=e.isLast,o=Object(a.default)(e,S),r=Object(h.useSelector)((function(e){return e.entities.users[t]}));if(!r)return null;var i=r.urlToken,c=r.name,l=r.isOrg;return Object(s.c)(m.Link,Object.assign(Object.assign({to:"/".concat(l?"org":"people","/").concat(i)},o),{},{children:[c,!n&&"、"]}))},I=function(e){Object(i.a)(n,e);var t=R(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.dispatch,a=t.id;n(Object(k.d)(a))},e.track=function(){var t=e.props.roundtable;e.hoverCardElement&&t&&(C.a.setModule(e.hoverCardElement,{module:"RoundtableItem"},{card:{content:{type:"Roundtable",token:t.id,item_num:t.questionsCount,follower_num:t.followers,publish_timestamp:1e3*t.stopTime}}}),C.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.roundtable,r=t.id,i=t.isLoading,c=t.onRef,l=Object(a.default)(t,A),u=o||{},d=u.name,b=u.type,f=u.description,p=u.guests,h=void 0===p?[]:p,m=u.activitiesCount,C=u.questionsCount,k=u.followers,S=u.logo,R=u.stopTime,I=u.isFollowing,E=h.length,N="/roundtable/".concat(r);return Object(s.c)(g.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(g.a,{title:Object(s.b)("a",{target:"_blank",href:"/roundtable/".concat(r),rel:"noopener noreferrer",children:d}),avatarUrl:S,attrInfo:Object(s.c)("div",{children:[Object(s.b)(O.a,{text:!0,center:!0})," ",Object(y.toRelativeString)(R)]})}),f&&Object(s.b)("div",{children:Object(s.b)("div",{className:"HoverCard-description",children:f})}),Object(s.c)("div",{children:[Object(s.b)(j.a,{text:!0,center:!0})," 组织机构",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),Object(s.b)("a",{href:"/topic/19793502",children:"圆桌"})]}),E>0&&Object(s.c)("div",{children:["嘉宾",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),h.map((function(e,t){var n=e.member;return Object(s.b)(T,{userKey:n,isLast:t===E-1},t)}))]}),Object(s.c)("div",{children:[Object(s.c)(v.a,{children:[Object(s.b)(v.a.Item,{tag:w.a,preset:"plain",a:!0,to:N,name:"动态",value:m}),Object(s.b)(v.a.Item,{tag:w.a,preset:"plain",a:!0,to:"".concat(N,"/question"),name:"问题",value:C}),Object(s.b)(v.a.Item,{tag:w.a,preset:"plain",a:!0,to:"".concat(N,"/followers"),name:"关注者",value:k})]}),Object(s.b)("div",{className:"HoverCard-buttons",children:Object(s.b)(x.a,{id:r,type:b,isFollowing:I,preset:"primary"})})]})]}))}}]),n}(b.Component),E=Object(h.connect)((function(e,t){var n=t.id,a=e.entities.roundtables,o=e.loading.local;return{roundtable:a[n],isLoading:Boolean(o["roundtable/".concat(n)])}}))(I),N=["roundtable","noHoverCard","style","className","children"];function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var z=function(e){Object(i.a)(n,e);var t=B(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.roundtable,n=t.name,o=t.id,r=e.noHoverCard,i=e.style,c=e.className,l=e.children,u=Object(a.default)(e,N),d=l||n;return r||(d=Object(s.b)(E,{toggler:d,id:o})),Object(s.b)("a",Object.assign(Object.assign({style:i,className:p()("RoundTableLink",c),href:"/roundtable/".concat(o)},u),{},{children:d}))}}]),n}(b.Component);z.propTypes={roundtable:d.a.object.isRequired,noHoverCard:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},z.defaultProps={noHoverCard:!1};t.a=z},1748:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(3),d=n.n(u),b=n(13),f=n.n(b),p=n(161),h=n(943),m=n(157),v=n(36),g=n(30);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var j=function(e){Object(r.a)(n,e);var t=O(n);function n(e){var o;Object(a.a)(this,n),(o=t.call(this,e)).onChangeInputType=function(e){o.setState({checked:e.target.checked})},o.onChangeInputValue=function(e){o.setState({text:e.target.value})},o.submit=function(){var e=o.state.text;o.props.submitRewardText(e)};var r,i=e.tagline;return o.state={text:(r=i,r.replace(/^「/,"").replace(/」$/,"")||g.p),checked:!0},o}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,a=this.state,o=a.text,r=a.checked;return Object(l.c)(p.b,{onClose:t,className:"RewardForm-rewardModal",children:[Object(l.b)("p",{className:"RewardForm-rewardTitle",children:n?"编辑赞赏描述":"开启赞赏"}),Object(l.b)(m.a,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:o,onChange:this.onChangeInputValue,disabled:!0}),Object(l.c)("div",{className:"RewardForm-remark",children:[!n&&Object(l.c)("label",{className:"RewardForm-protocol",children:[Object(l.b)(h.a,{className:"RewardForm-rewardCheckbox",onChange:this.onChangeInputType,checked:r,size:16}),"我已同意",Object(l.b)("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar",children:"《知乎赞赏功能使用协议》"})]}),Object(l.b)("p",{className:"RewardForm-prompting",children:"暂不支持修改赞赏文案"})]}),Object(l.b)(v.c,{className:f()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!r}),onClick:this.submit,disabled:!r,children:"确定"})]})}}]),n}(s.Component);j.propTypes={onClose:d.a.func,submitRewardText:d.a.func,edit:d.a.bool,tagline:d.a.string},j.defaultProps={tagline:g.p}},1750:function(e,t,n){"use strict";var a=n(49),o=n(1),r=n(0),i=n(55),c=n(414),l=n(876),s=n(64),u=n.n(s),d=n(1387),b=n.n(d),f=n(74),p=n(43),h=n(24),m=n(215),v=n(923),g=n(13),O=n.n(g),j=n(244),y=n.n(j),C=n(57),w=n(599),x=n(425),k=Object(C.isBrowser)()?r.useLayoutEffect:function(){},S=function(e){return e===window?window.pageYOffset:e.scrollTop},A=function(){return window},R=function(e){var t=e.children,n=e.className,i=e.getContainer,c=void 0===i?A:i,l=e.isDrained,s=e.isLoading,u=e.isLocal,d=e.isPrevDrained,b=void 0===d||d,f=e.onLoad,p=e.onRef,h=e.placeholder,m=e.stopPropagation,v=e.threshold,g=void 0===v?1200:v,j=Object(r.useState)(!1),C=Object(a.a)(j,2),R=C[0],T=C[1],I=Object(r.useState)(!1),E=Object(a.a)(I,2),N=E[0],B=E[1],z=Object(r.useState)(!1),L=Object(a.a)(z,2),P=L[0],M=L[1],D=Object(r.useRef)(),_=Object(r.useRef)(),V=Object(r.useRef)(),U=Object(r.useRef)(),F=Object(r.useRef)(0),q=Object(r.useRef)(0),H=Object(r.useRef)(s),G=Object(r.useCallback)((function(){var e=_.current,t=U.current,n=V.current,a=S(e),o=a-F.current;F.current=a;var r=o<0,i=r&&b||!r&&l;if(!H.current&&!i){var c=function(e){var t,n,a=e.isPrev,o=e.container,r=e.nextPlaceholderEl,i=e.prevPlaceholderEl;if(void 0!==o.innerHeight)t=0,n=o.innerHeight;else{var c=o.getBoundingClientRect();t=c.top,n=c.bottom}var l=r.getBoundingClientRect().top;return a?t-i.getBoundingClientRect().bottom:l-n}({isPrev:r,container:e,nextPlaceholderEl:t,prevPlaceholderEl:n});r&&(q.current=t.getBoundingClientRect().top,M(c<=0)),c<=g&&(T(r),f(r))}}),[l,b,f,g]);Object(r.useEffect)((function(){H.current=s}),[s]),Object(r.useEffect)((function(){var e=c(D.current);_.current=e}),[c]),Object(r.useEffect)((function(){if(!l||!b){var e=_.current;G();var t=y()(G,100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t),t.cancel()}}}),[l,b,G]),k((function(){var e,t,n=_.current,a=U.current;if(n&&(R&&!s)){var o=S(n)+a.getBoundingClientRect().top-q.current;return t=o,(e=n)===window?e.scrollTo(e.pageXOffset,t):e.scrollTop=t,F.current=o,function(){q.current=a.getBoundingClientRect().top}}}),[s,R]);var K=u&&r.Children.toArray(t).length<=0;Object(r.useEffect)((function(){if(s&&K){var e=setTimeout((function(){B(H.current)}),300);return function(){clearTimeout(e),B(!1)}}}),[s,K]);var W=h;return N?W=Object(o.b)(x.a,{}):K&&(W=null),Object(o.c)(w.a,{className:O()(n,{"InfiLoader--bounceShown":N}),stopPropagation:m,onRef:function(e){"function"==typeof p?p(e):"object"==typeof p&&(p.current=e),D.current=e},children:[Object(o.b)("div",{ref:V,children:R&&!b&&s&&P&&W}),t,Object(o.b)("div",{ref:U,children:!l&&s&&W})]})},T=n(1628),I=n(282),E=n(431),N=b()(1);t.a=function(e){var t=e.title,n=e.description,s=e.zvideoId,d=e.onSelect,b=Object(I.b)(),g=Object(h.useDispatch)(),O=Object(r.useRef)(),j=Object(r.useState)(!1),y=Object(a.a)(j,2),C=y[0],w=y[1],x=Object(r.useState)(""),k=Object(a.a)(x,2),S=k[0],A=k[1],B=Object(r.useState)([]),z=Object(a.a)(B,2),L=z[0],P=z[1],M=Object(h.useSelector)((function(e){return e.zvideos.contribution[C?"questionSearchResults":"recommendQuestions"]})),D=M.isLoading,_=M.paging.isEnd,V=M.data,U=Object(f.i)(),F=Object(p.c)((function(e){return N((function(){return b("/api/v4/search/suggest",{query:{q:e},headers:{"X-API-Version":"3.0.91","X-App-Za":"OS=Web"}})})).then((function(e){var t=e.payload.suggest;P(t.map((function(e,t){return Object.assign(Object.assign({},e),{},{name:e.query,index:t})})))}),u.a)}),500),q=Object(r.useCallback)((function(){O.current&&(O.current.scrollTop=0)}),[]),H=Object(p.d)((function(e){e!==S&&(A(e),e?F(e):(q(),w(!1),P([])))})),G=Object(p.d)((function(e,t){var n=t.index;U.trackEvent({eventType:"Click",action:"Question",block:"SuggestItem",elementLocation:{type:"Text",text:e,card:{index:n}}}),q(),A(e),w(!0),g(Object(E.i)(e,!0))})),K=Object(p.d)((function(){S&&(q(),w(!0),g(Object(E.i)(S,!0)))})),W=Object(p.d)((function(){V.length&&g(S?Object(E.i)():Object(E.j)())}));return Object(r.useEffect)((function(){g(Object(E.j)({zvideoId:s,title:t,description:n},!0))}),[s,t,n,g]),Object(o.c)(o.a,{children:[Object(o.b)(i.Box,{px:"20px",my:"24px",fontSize:"24px",fontWeight:"500",children:"选择投稿问题"}),Object(o.b)(m.b,{autoSelect:!1,value:S,onChange:H,onSelect:G,onEnterInput:K,items:L,css:{".Popover":{width:"100%",padding:"0 20px",boxSizing:"border-box"},".Input-wrapper":{width:"100%"}},inputProps:{grey:!0,placeholder:"搜索相关问题…",after:S?Object(o.b)(c.a,{size:16,css:function(e){return{cursor:"pointer",color:e.colors.GBK07A}},onClick:function(){return H("")}}):Object(o.b)(l.a,{size:20,css:function(e){return{color:e.colors.GBL05A}}})},menuProps:{style:{width:"470px"}}}),_&&!V.length?Object(o.b)(v.a.EI1,{image:"default",content:"暂无相关问题"}):Object(o.b)(R,{onRef:O,css:{flex:"1",padding:"0 20px",overflowY:"auto"},isLoading:D,isDrained:_,onLoad:W,getContainer:function(e){return e},children:V.map((function(e,t){return Object(o.b)(T.a,{onSelect:function(){d(e)},index:t,item:e,css:function(e){return{"& + &":{borderTop:"1px solid ".concat(e.colors.GBK09A)}}}},e.id)}))})]})}},1751:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(49),o=n(1),r=n(43),i=n(0),c=n(282),l=function(e){return new Promise((function(t,n){try{var a=document.createElement("video");a.preload="metadata",a.onloadedmetadata=function(){URL.revokeObjectURL(a.src),t(Math.floor(1e3*a.duration))},a.onerror=n,a.src=URL.createObjectURL(e)}catch(e){n(e)}}))},s=Object(i.createContext)({});t.b=function(e){var t=e.children,n=e.zvideo_id,u=e.defaultVideo,d=Object(i.useState)(null),b=Object(a.a)(d,2),f=b[0],p=b[1],h=Object(c.b)(),m=Object(r.d)((function(e){h&&n&&h("/api/v4/zvideos/".concat(n,"/publish/permissions?full_duration_millis=").concat(e)).then((function(e){if(e.ok){var t=e.payload,n=(null!=t?t:{}).chapters;if(!n)return;var a=Object.assign(Object.assign({},n),{minInterval:"number"==typeof n.minInterval?parseInt("".concat(n.minInterval/1e3)):5});p(a)}}))})),v=Object(i.useRef)();return Object(i.useEffect)((function(){var e;n&&void 0===v.current&&(u.file?l(u.file).then((function(e){v.current=e,m(e)})):null!==(e=u.video)&&void 0!==e&&e.duration&&m(1e3*u.video.duration))}),[u,n,h,m]),Object(o.b)(s.Provider,{value:f,children:f&&t})}},2005:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(e){return o.a.createElement(r.a,i({fill:"currentColor"},e),o.a.createElement("path",{d:"M12.75 6a.25.25 0 0 1 .25.25v4.969a.5.5 0 0 0 .213.41l4.156 2.908a.25.25 0 0 1 .061.349l-.86 1.228a.25.25 0 0 1-.348.062l-5.009-3.506a.5.5 0 0 1-.213-.41V6.25a.25.25 0 0 1 .25-.25h1.5z"}),o.a.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16z",fillRule:"evenodd",clipRule:"evenodd"}))};c.defaultProps={name:"Time"},t.a=c},2114:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M4 7.008A3.002 3.002 0 0 1 7.01 4h9.98C18.654 4 20 5.34 20 7.008v8.936c0 1.661-1.268 3.463-2.82 4.021l-1.414.508c-2.08.748-5.443.751-7.532 0l-1.413-.508C5.263 19.405 4 17.612 4 15.944V7.008zm9.51 4.951c.384-.29.688-.527.827-.718.265-.353.4-.742.4-1.156 0-.74-.275-1.308-.816-1.687-.534-.375-1.05-.554-1.923-.564-.544.01-1.233.134-1.656.398-.673.415-1.036 1.127-1.079 2.115l-.003.225 1.656.003.005-.225c0-.268.081-.532.244-.782.157-.242.42-.36.806-.36.388 0 .655.097.797.29.146.2.22.425.22.668 0 .176-.074.354-.243.58-.072.102-.17.199-.285.283-.034.02-.838.524-1.202.94-.232.264-.322.562-.342 1.106v.235h1.63v-.156c.03-.259.11-.391.11-.391s.2-.346.433-.52l.422-.284zm-1.785 4.364a1.095 1.095 0 1 0 0-2.191 1.095 1.095 0 0 0 0 2.19z",fillRule:"evenodd"}))};i.defaultProps={name:"FeaturedQuestion"},t.a=i},2133:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M13.234 7.506l-1.13-1.13.911-.913c1.544-1.544 4.012-1.587 5.528-.07 1.513 1.512 1.466 3.991-.083 5.542l-2.678 2.678c-1.606 1.608-4.509 2.012-5.989.534l1.13-1.132c.776.774 2.688.508 3.727-.533l2.678-2.678c.934-.935.962-2.402.084-3.28-.883-.883-2.338-.857-3.266.07l-.912.912zm-2.459 9.007l1.131 1.131-.912.912c-1.543 1.544-4.011 1.587-5.528.07-1.512-1.512-1.466-3.99.084-5.542l2.676-2.674c1.609-1.608 4.513-2.01 5.991-.53l-1.132 1.13c-.774-.775-2.686-.51-3.728.532l-2.676 2.673c-.934.935-.961 2.402-.083 3.28.882.883 2.338.857 3.265-.07l.912-.912z"}))};i.defaultProps={name:"Link"},t.a=i},2211:function(e,t,n){"use strict";(function(t){var a=n(474),o=n(475),r=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/,l=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function s(e){return(e||"").toString().replace(l,"")}var u=[["#","hash"],["?","query"],function(e,t){return f(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function b(e){var n,a=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},o={},i=typeof(e=e||a);if("blob:"===e.protocol)o=new h(unescape(e.pathname),{});else if("string"===i)for(n in o=new h(e,{}),d)delete o[n];else if("object"===i){for(n in e)n in d||(o[n]=e[n]);void 0===o.slashes&&(o.slashes=r.test(e.href))}return o}function f(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function p(e,t){e=s(e),t=t||{};var n,a=i.exec(e),o=a[1]?a[1].toLowerCase():"",r=!!a[2],c=!!a[3],l=0;return r?c?(n=a[2]+a[3]+a[4],l=a[2].length+a[3].length):(n=a[2]+a[4],l=a[2].length):c?(n=a[3]+a[4],l=a[3].length):n=a[4],"file:"===o?l>=2&&(n=n.slice(2)):f(o)?n=a[4]:o?r&&(n=n.slice(2)):l>=2&&f(t.protocol)&&(n=a[4]),{protocol:o,slashes:r||f(o),slashesCount:l,rest:n}}function h(e,t,n){if(e=s(e),!(this instanceof h))return new h(e,t,n);var r,i,l,d,m,v,g=u.slice(),O=typeof t,j=this,y=0;for("object"!==O&&"string"!==O&&(n=t,t=null),n&&"function"!=typeof n&&(n=o.parse),r=!(i=p(e||"",t=b(t))).protocol&&!i.slashes,j.slashes=i.slashes||r&&t.slashes,j.protocol=i.protocol||t.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||c.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!f(j.protocol)))&&(g[3]=[/(.*)/,"pathname"]);y<g.length;y++)"function"!=typeof(d=g[y])?(l=d[0],v=d[1],l!=l?j[v]=e:"string"==typeof l?~(m=e.indexOf(l))&&("number"==typeof d[2]?(j[v]=e.slice(0,m),e=e.slice(m+d[2])):(j[v]=e.slice(m),e=e.slice(0,m))):(m=l.exec(e))&&(j[v]=m[1],e=e.slice(0,m.index)),j[v]=j[v]||r&&d[3]&&t[v]||"",d[4]&&(j[v]=j[v].toLowerCase())):e=d(e,j);n&&(j.query=n(j.query)),r&&t.slashes&&"/"!==j.pathname.charAt(0)&&(""!==j.pathname||""!==t.pathname)&&(j.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),a=n.length,o=n[a-1],r=!1,i=0;a--;)"."===n[a]?n.splice(a,1):".."===n[a]?(n.splice(a,1),i++):i&&(0===a&&(r=!0),n.splice(a,1),i--);return r&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(j.pathname,t.pathname)),"/"!==j.pathname.charAt(0)&&f(j.protocol)&&(j.pathname="/"+j.pathname),a(j.port,j.protocol)||(j.host=j.hostname,j.port=""),j.username=j.password="",j.auth&&(d=j.auth.split(":"),j.username=d[0]||"",j.password=d[1]||""),j.origin="file:"!==j.protocol&&f(j.protocol)&&j.host?j.protocol+"//"+j.host:"null",j.href=j.toString()}h.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||o.parse)(t)),r[e]=t;break;case"port":r[e]=t,a(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";r[e]=t.charAt(0)!==i?i+t:t}else r[e]=t;break;default:r[e]=t}for(var c=0;c<u.length;c++){var l=u[c];l[4]&&(r[l[1]]=r[l[1]].toLowerCase())}return r.origin="file:"!==r.protocol&&f(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,n=this,a=n.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var r=a+(n.slashes||f(n.protocol)?"//":"");return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(r+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(r+=n.hash),r}},h.extractProtocol=p,h.location=b,h.trimLeft=s,h.qs=o,e.exports=h}).call(this,n(110))},2212:function(e,t,n){var a;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n=function(){function e(){}function t(e,t){for(var n=t.length,a=0;a<n;++a)o(e,t[a])}e.prototype=Object.create(null);var n={}.hasOwnProperty;var a=/\s+/;function o(e,o){if(o){var r=typeof o;"string"===r?function(e,t){for(var n=t.split(a),o=n.length,r=0;r<o;++r)e[n[r]]=!0}(e,o):Array.isArray(o)?t(e,o):"object"===r?function(e,t){if(t.toString===Object.prototype.toString)for(var a in t)n.call(t,a)&&(e[a]=!!t[a]);else e[t.toString()]=!0}(e,o):"number"===r&&function(e,t){e[t]=!0}(e,o)}}return function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];var r=new e;t(r,a);var i=[];for(var c in r)r[c]&&i.push(c);return i.join(" ")}}();e.exports?(n.default=n,e.exports=n):void 0===(a=function(){return n}.apply(t,[]))||(e.exports=a)}()},2213:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z",fillRule:"evenodd"}))};i.defaultProps={name:"Comment"},t.a=i},2214:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z",fillRule:"evenodd"}))};i.defaultProps={name:"Like"},t.a=i},2215:function(e,t,n){e.exports=n.p+"assets/ReviewingPlaceholder.b2c9d906.svg"},2216:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(88),o=n(65);function r(e){Object(o.a)(1,arguments);var t=Object(a.a)(e),n=t.getHours();return n}},2217:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(88),o=n(65);function r(e){Object(o.a)(1,arguments);var t=Object(a.a)(e),n=t.getMinutes();return n}},2218:function(e,t,n){e.exports=n.p+"assets/deleteComment.97d8abc0.gif"},2219:function(e,t,n){e.exports=n.p+"assets/liukanshan_loudspeaker.292ada3b.svg"},2220:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M10.47 12.47l1.06 1.06a.25.25 0 0 1 0 .354L6.413 19h4.337a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-7.5a.25.25 0 0 1-.25-.25v-7.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v4.335l5.116-5.115a.25.25 0 0 1 .354 0zM20.75 3a.25.25 0 0 1 .25.25v7.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25V6.413l-5.116 5.117a.25.25 0 0 1-.354 0l-1.06-1.06a.25.25 0 0 1 0-.354L17.585 5H13.25a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25h7.5z"}))};i.defaultProps={name:"FullscreenEnter"},t.a=i},2221:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M10.75 13a.25.25 0 0 1 .25.25v7.5a.25.25 0 0 1-.25.25h-1.5a.25.25 0 0 1-.25-.25v-4.337L3.883 21.53a.25.25 0 0 1-.354 0l-1.06-1.06a.25.25 0 0 1 0-.354L7.585 15 3.25 15a.25.25 0 0 1-.25-.25v-1.5a.25.25 0 0 1 .25-.25h7.5zm9.72-10.53l1.06 1.06a.25.25 0 0 1 0 .354l-5.117 5.115L20.75 9a.25.25 0 0 1 .25.25v1.5a.25.25 0 0 1-.25.25h-7.5a.25.25 0 0 1-.25-.25v-7.5a.25.25 0 0 1 .25-.25h1.5a.25.25 0 0 1 .25.25v4.335l5.116-5.115a.25.25 0 0 1 .354 0z"}))};i.defaultProps={name:"FullscreenExit"},t.a=i},2222:function(e,t,n){"use strict";var a=n(1646);n.o(a,"animated")&&n.d(t,"animated",(function(){return a.animated})),n.o(a,"useSpring")&&n.d(t,"useSpring",(function(){return a.useSpring})),n.o(a,"useTransition")&&n.d(t,"useTransition",(function(){return a.useTransition}))},2793:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(420),i=Object.assign;var c=function(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Questioncircle24"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M3.75 12a8.25 8.25 0 1116.5 0 8.25 8.25 0 01-16.5 0zM12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM9.75 9.477c0-.826.867-1.727 2.25-1.727s2.25.901 2.25 1.727c0 .47-.277.953-.823 1.304-.491.316-1.036.722-1.463 1.226-.431.508-.779 1.16-.779 1.946V14a.75.75 0 001.5 0v-.047c0-.319.137-.639.423-.976.289-.34.693-.653 1.13-.934.866-.557 1.512-1.47 1.512-2.566 0-1.91-1.82-3.227-3.75-3.227S8.25 7.567 8.25 9.477a.75.75 0 001.5 0zm3.344 7.656a1.1 1.1 0 11-2.2 0 1.1 1.1 0 012.2 0z",fillRule:"evenodd",clipRule:"evenodd"}))}},2795:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z",fillRule:"evenodd"}))};i.defaultProps={name:"Share"},t.a=i},2796:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{d:"M4.125 21h15.75c.621 0 1.125-.593 1.125-1.324 0-.73-.504-1.323-1.125-1.323H4.125c-.621 0-1.125.593-1.125 1.323C3 20.407 3.504 21 4.125 21z"}),o.a.createElement("path",{d:"M15.69 3.826c0-.457-.418-.826-.92-.826H9.23c-.508 0-.92.37-.92.827V9.64H5.538c-1.015 0-1.255.526-.533 1.175l6.344 5.709a1 1 0 0 0 1.302 0l6.344-5.71c.722-.648.483-1.175-.535-1.175h-2.77V3.826z",fillRule:"nonzero"})))};i.defaultProps={name:"StickyUnset"},t.a=i},2797:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("g",{fillRule:"evenodd"},o.a.createElement("path",{d:"M4.125 3h15.75C20.496 3 21 3.593 21 4.324c0 .73-.504 1.323-1.125 1.323H4.125C3.504 5.647 3 5.054 3 4.324 3 3.593 3.504 3 4.125 3z"}),o.a.createElement("path",{d:"M15.69 20.174c0 .457-.418.826-.92.826H9.23c-.508 0-.92-.37-.92-.827V14.36H5.538c-1.015 0-1.255-.526-.533-1.175l6.344-5.709a1 1 0 0 1 1.302 0l6.344 5.71c.722.648.483 1.175-.535 1.175h-2.77v5.813z",fillRule:"nonzero"})))};i.defaultProps={name:"StickySet"},t.a=i},2798:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M17.917 6.713a.166.166 0 0 1-.274-.142l.252-2.887a.164.164 0 0 1 .02-.065.165.165 0 0 1 .225-.067l1.919 1.037a.167.167 0 0 1 .029.274l-2.171 1.85zm2.893-.257l.13 1.47c0 .014 0 .03-.003.044a.168.168 0 0 1-.195.133l-2.17-.409a.17.17 0 0 1-.118-.087.167.167 0 0 1 .072-.225l2.041-1.059a.166.166 0 0 1 .243.133zm-4.387-.017l-1.75-1.78a.167.167 0 0 1 .058-.272l1.547-.607a.167.167 0 0 1 .227.141l.203 2.387a.167.167 0 0 1-.285.131zm1.76 2.284l1.57 4.292a4.774 4.774 0 0 1-1.65 5.462l-.259.19a5.48 5.48 0 0 1-3.252 1.073c-.355 0-.709-.048-1.059-.117a4.779 4.779 0 0 1-1.658.3 4.89 4.89 0 0 1-3.144-1.139 45.328 45.328 0 0 0-.716-.587c-.498-.399-1.649-1.52-3.516-3.43a1.847 1.847 0 0 1-.225-2.287c.036-.056.077-.11.134-.176a1.749 1.749 0 0 1-.196-2.367c.125-.144.248-.256.375-.344a1.839 1.839 0 0 1 .3-1.595l.085-.106c.3-.335.707-.53 1.15-.556.338-.024.667.08.954.258.036-.06.065-.125.108-.182l.104-.127a1.86 1.86 0 0 1 1.82-.568 1.91 1.91 0 0 1 2.771-.28l.447.393.112-.135c.205-.247.473-.437.775-.547a1.799 1.799 0 0 1 1.385.06 1.8 1.8 0 0 1 .937 1.022l.114.311a1.967 1.967 0 0 1 1.506.066c.48.223.845.62 1.027 1.116zm-1.138 8.855l.26-.19a3.419 3.419 0 0 0 1.18-3.909l-1.572-4.292a.634.634 0 0 0-.904-.333l-.157.09a.796.796 0 0 0-.36.964l.228.64a.428.428 0 0 1-.252.542.499.499 0 0 1-.429-.08l-4.05-3.559a.553.553 0 0 0-.78.051.59.59 0 0 0 .022.803l2.742 2.48a.35.35 0 1 1-.476.514l-2.71-2.45-.038-.037-.734-.663a.513.513 0 0 0-.72.036c-.244.322-.208.721.055.963l3.371 3.106a.35.35 0 0 1-.47.52l-2.97-2.643a.485.485 0 0 0-.687.04.614.614 0 0 0 .05.844l3.028 2.763a.35.35 0 0 1-.467.521l-1.943-1.704a.38.38 0 0 0-.27-.092.375.375 0 0 0-.257.127c-.21.316-.177.672.051.906 1.901 1.958 3.1 3.14 3.56 3.508.207.165.556.402 1.036.704a4.127 4.127 0 0 0 4.663-.17zm-11.76-3.58c1.811 1.851 2.96 2.974 3.417 3.34.166.132.411.333.734.603.607.507 1.33.78 2.068.848a12.302 12.302 0 0 1-1-.69c-.518-.414-1.689-1.565-3.686-3.62a2.038 2.038 0 0 1-.55-1.116l-.435-.373a.428.428 0 0 0-.279-.103l-.033.001a.429.429 0 0 0-.292.147c-.224.337-.187.714.056.963zm.18-3.585a.534.534 0 0 0-.37.182.651.651 0 0 0 .057.9l1.156 1.04c.055-.208.141-.41.264-.6l.034-.05a1.952 1.952 0 0 1-.49-1.11l-.262-.23a.514.514 0 0 0-.39-.132zm.718-1.979a.562.562 0 0 0-.387.186c-.259.342-.219.764.062 1.02l.341.31a1.92 1.92 0 0 1 .383-.673c.074-.083.153-.158.237-.224-.02-.098-.024-.198-.03-.297l-.2-.18a.589.589 0 0 0-.406-.142zm7.102-1.038l-.132.16 1.203 1.056c.092-.169.208-.324.343-.463l-.198-.543a.714.714 0 0 0-1.216-.21z",fillRule:"evenodd"}))};i.defaultProps={name:"Clap"},t.a=i},2799:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(159),o=n(568),r=n(65);function i(e,t){Object(r.a)(2,arguments);var n=Object(a.a)(t);return Object(o.a)(e,6e4*n)}},2800:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M13.362 19.12l-1.951 1.73-.014.012a.595.595 0 0 1-.84-.078L9.178 19.12H7.481a2.985 2.985 0 0 1-2.966-3.292l.708-6.962c.151-1.489.348-2.183.789-2.891a3.963 3.963 0 0 1 1.635-1.481C8.395 4.126 9.103 4 10.596 4h5.923a2.985 2.985 0 0 1 2.966 3.292l-.708 6.962c-.151 1.488-.348 2.182-.789 2.89a3.963 3.963 0 0 1-1.635 1.482c-.748.367-1.456.494-2.949.494h-.042zm1.21-6.804a.198.198 0 0 1-.197-.23l.24-1.566a.199.199 0 0 1 .197-.169h1.01a.797.797 0 0 0 .795-.773.624.624 0 0 0-.624-.625h-.884a.198.198 0 0 1-.195-.233l.302-1.75a.676.676 0 0 0-.662-.789.9.9 0 0 0-.886.743l-.334 1.865a.199.199 0 0 1-.196.164h-1.62a.198.198 0 0 1-.196-.234l.314-1.748a.673.673 0 0 0-.659-.79.9.9 0 0 0-.886.743l-.334 1.865a.199.199 0 0 1-.195.164H8.51a.797.797 0 0 0-.795.773c0 .345.28.625.624.625h.942a.198.198 0 0 1 .197.23l-.24 1.566a.199.199 0 0 1-.197.17H7.979a.797.797 0 0 0-.794.772c0 .345.279.625.623.625h.959a.198.198 0 0 1 .196.23l-.308 1.968a.678.678 0 0 0 .666.78c.43 0 .796-.313.863-.74l.323-2.07a.199.199 0 0 1 .197-.168h1.64a.198.198 0 0 1 .196.23l-.306 1.96a.685.685 0 0 0 .673.788.883.883 0 0 0 .872-.748l.322-2.062a.199.199 0 0 1 .197-.168h1.01a.809.809 0 0 0 .805-.779.618.618 0 0 0-.618-.619h-.924zm-1.518-1.735l-.24 1.566a.199.199 0 0 1-.196.17h-1.623a.198.198 0 0 1-.197-.23l.24-1.567a.199.199 0 0 1 .197-.169h1.623a.198.198 0 0 1 .196.23z",fillRule:"evenodd"}))};i.defaultProps={name:"Hashtag"},t.a=i},2801:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M15.465 4.544l2.272.406c.67.12 1.193.644 1.313 1.313l.406 2.272c.042.231.132.45.266.643l1.32 1.894a1.624 1.624 0 0 1 0 1.856l-1.32 1.894a1.624 1.624 0 0 0-.266.643l-.406 2.272a1.624 1.624 0 0 1-1.313 1.313l-2.272.406c-.231.042-.45.132-.643.266l-1.894 1.32a1.624 1.624 0 0 1-1.856 0l-1.894-1.32a1.624 1.624 0 0 0-.643-.266l-2.272-.406a1.624 1.624 0 0 1-1.313-1.313l-.406-2.272a1.624 1.624 0 0 0-.266-.643l-1.32-1.894a1.624 1.624 0 0 1 0-1.856l1.32-1.894c.134-.193.224-.412.266-.643l.406-2.272c.12-.67.644-1.193 1.313-1.313l2.272-.406c.231-.042.45-.132.643-.266l1.894-1.32a1.624 1.624 0 0 1 1.856 0l1.894 1.32.643.266zM12 14.187c.526 0 .977-.209 1.351-.625.375-.416.562-.916.562-1.501V8.659c0-.584-.187-1.085-.562-1.501-.374-.416-.825-.625-1.35-.625-.527 0-.978.209-1.352.625a2.166 2.166 0 0 0-.562 1.501v3.402c0 .585.187 1.085.562 1.501.374.416.825.625 1.351.625zm3.436-3.159a.373.373 0 0 0-.278-.121c-.107 0-.199.04-.277.121a.402.402 0 0 0-.117.289v.82c0 .79-.27 1.466-.812 2.027-.54.562-1.191.843-1.952.843-.76 0-1.412-.281-1.953-.843a2.818 2.818 0 0 1-.81-2.027v-.82a.402.402 0 0 0-.118-.289.373.373 0 0 0-.277-.121c-.107 0-.2.04-.278.121a.401.401 0 0 0-.117.289v.82c0 .944.303 1.765.91 2.463.606.698 1.356 1.098 2.248 1.2v1.94c-.002.22.13.33.395.33s.397-.11.395-.33V15.8c.892-.102 1.642-.502 2.248-1.2.607-.698.91-1.52.91-2.463v-.82a.401.401 0 0 0-.117-.289z",fillRule:"evenodd"}))};i.defaultProps={name:"LabelRelevant"},t.a=i},2802:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M12.868 2.899l6.597 3.8c.537.31.868.881.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 0 1-.868-1.5V8.199c0-.619.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 0 1 1.736 0zm-2.614 11.85a.29.29 0 0 1 .255.148l1.239 2.207a.289.289 0 0 0 .504 0l1.24-2.207a.29.29 0 0 1 .254-.148l2.52.023a.29.29 0 0 0 .253-.434l-1.284-2.192a.288.288 0 0 1 0-.292l1.284-2.192a.288.288 0 0 0-.253-.434l-2.52.023a.29.29 0 0 1-.255-.148l-1.239-2.207a.289.289 0 0 0-.504 0l-1.24 2.207a.29.29 0 0 1-.254.148l-2.52-.023a.29.29 0 0 0-.253.434l1.284 2.192a.288.288 0 0 1 0 .292L7.48 14.338a.288.288 0 0 0 .253.434l2.52-.023z",fillRule:"evenodd"}))};i.defaultProps={name:"LabelEditorRecommendation"},t.a=i},2803:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M3.85 5.266c1.093-.4 2.175-.6 3.245-.6 1.338 0 2.675.313 4.01.939a.6.6 0 0 1 .346.543v10.31a.24.24 0 0 1-.342.216c-1.337-.626-2.675-.94-4.014-.94-1.186 0-2.387.246-3.604.738a.6.6 0 0 1-.824-.557V6.957a1.8 1.8 0 0 1 1.182-1.69zm9.045.339c1.335-.626 2.672-.938 4.01-.938 1.07 0 2.152.2 3.246.6a1.8 1.8 0 0 1 1.182 1.69v8.958a.6.6 0 0 1-.824.557c-1.217-.492-2.418-.737-3.604-.737-1.339 0-2.677.313-4.014.94a.24.24 0 0 1-.342-.218V6.148a.6.6 0 0 1 .346-.543zm4.01 11.282c1.311 0 2.619.27 3.918.806.419.172.62.656.45 1.081a.813.813 0 0 1-1.065.457c-1.108-.457-2.207-.684-3.303-.684-1.08 0-2.163.22-3.254.664h.001a1.8 1.8 0 0 1-.649.121l-2.079.001c-.195 0-.39-.04-.568-.12-1.094-.445-2.18-.666-3.261-.666-1.096 0-2.195.227-3.303.684a.813.813 0 0 1-1.065-.457.834.834 0 0 1 .45-1.081c1.3-.536 2.607-.806 3.918-.806a10.009 10.009 0 0 1 3.391.604 3 3 0 0 0 1.025.18l.973.001a3 3 0 0 0 1.028-.18 10.01 10.01 0 0 1 3.393-.604z",fillRule:"evenodd"}))};i.defaultProps={name:"LabelWeekly"},t.a=i},2804:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M10.037 3.2h3.926c2.377 0 3.24.248 4.109.712a4.846 4.846 0 0 1 2.016 2.016c.464.87.712 1.732.712 4.109v3.926c0 2.377-.248 3.24-.712 4.109a4.846 4.846 0 0 1-2.016 2.016c-.87.464-1.732.712-4.109.712h-3.926c-2.377 0-3.24-.248-4.109-.712a4.846 4.846 0 0 1-2.016-2.016c-.464-.87-.712-1.732-.712-4.109v-3.926c0-2.377.248-3.24.712-4.109a4.846 4.846 0 0 1 2.016-2.016c.87-.464 1.732-.712 4.109-.712zM12 17.61a1.027 1.027 0 0 0 0-2.053A3.557 3.557 0 1 1 15.557 12a1.027 1.027 0 1 0 2.053 0A5.61 5.61 0 1 0 12 17.61z",fillRule:"evenodd"}))};i.defaultProps={name:"LabelDaily"},t.a=i},2805:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM11.875 8.84a4.21 4.21 0 1 0 0 8.42 4.21 4.21 0 0 0 0-8.42zm2.086 4.044l-.8.815.19 1.152c.063.386-.149.555-.487.37l-.989-.545-.988.544c-.332.183-.551.025-.486-.37l.188-1.15-.8-.816c-.268-.274-.192-.54.186-.598l1.106-.168.494-1.047c.166-.352.432-.359.601 0l.494 1.047 1.106.168c.37.057.46.319.185.598zm2.066-6.143h-2.65a.298.298 0 0 0-.291.217l-.817 1.504s1.75.098 2.782 1.027l1.22-2.298a.268.268 0 0 0 .062-.164c0-.158-.137-.286-.306-.286zM11.73 8.46l-.816-1.503a.298.298 0 0 0-.292-.217h-2.65c-.169 0-.306.128-.306.286a.27.27 0 0 0 .062.164l1.22 2.298c1.033-.929 2.782-1.027 2.782-1.027z"}))};i.defaultProps={name:"LabelProfessional"},t.a=i},2806:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M12.3 3a9.3 9.3 0 1 1 0 18.6 9.3 9.3 0 0 1 0-18.6zM7.209 9.9v2.075a.729.729 0 0 1 .194 1.43l-.104.022-.09.006v1.055l.008.109c.037.248.2.461.43.562l.103.036 8.725 2.365.098.02a.733.733 0 0 0 .801-.535l.02-.095.006-.097v-1.96a.729.729 0 0 1-.099-1.452l.099-.007-.008-.11a.733.733 0 0 0-.444-.566l-.105-.034L7.71 10.47l-.106-.03c-.233-.078-.361-.207-.39-.436L7.21 9.9zm7.277 4.993a.729.729 0 1 1-.001 1.458.729.729 0 0 1 0-1.458zm-2.55-2.188a1.094 1.094 0 1 1-.002 2.187 1.094 1.094 0 0 1 .002-2.187zm-2.422-1.07a.6.6 0 1 1 0 1.2.6.6 0 0 1 0-1.2zM12.925 7.2l-.108-.116a1.663 1.663 0 0 0-1.813-.355l-.14.067L7.554 8.56l-.089.057c-.41.307-.332.987.136 1.183l.1.032 8.806 2.156.058.007a.22.22 0 0 0 .19-.32l-.03-.043-2.024-2.363a.723.723 0 0 1-.379.107.703.703 0 0 1-.712-.694c0-.144.045-.278.122-.389l.063-.079-.87-1.014z",fillRule:"evenodd"}))};i.defaultProps={name:"Cheese"},t.a=i},2807:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M12.3 3a9.3 9.3 0 1 1 0 18.6 9.3 9.3 0 0 1 0-18.6zm4.5 15H7.2v.6h9.6V18zm-9.99-5.785l-.394 1.082c-.028.078.008.167.084.213l.04.02.678.247-.162.443 8.989 3.272.161-.444.678.247c.087.032.18.004.226-.063l.019-.036.393-1.082L6.81 12.215zm.25-.673l-.045.11 10.713 3.899c.326-.897-.162-1.906-1.097-2.311l-.119-.047-7.05-2.567c-.971-.353-2.02.056-2.403.916zm6.467-5.502l-1.462 4.895 2.255.821 2.026-4.69a1.5 1.5 0 1 0-2.82-1.026z",fillRule:"evenodd"}))};i.defaultProps={name:"Stamp"},t.a=i},2808:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 0 1 1.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 0 1 0 1.989l-1.414 2.029a1.74 1.74 0 0 0-.285.688l-.435 2.435a1.74 1.74 0 0 1-1.407 1.407l-2.435.435a1.74 1.74 0 0 0-.688.285l-2.03 1.414a1.74 1.74 0 0 1-1.989 0l-2.029-1.414a1.74 1.74 0 0 0-.688-.285l-2.435-.435a1.74 1.74 0 0 1-1.407-1.407l-.435-2.435a1.74 1.74 0 0 0-.285-.688l-1.414-2.03a1.74 1.74 0 0 1 0-1.989l1.414-2.029a1.74 1.74 0 0 0 .285-.688l.435-2.435a1.74 1.74 0 0 1 1.407-1.407l2.435-.435a1.74 1.74 0 0 0 .688-.285l2.03-1.414a1.74 1.74 0 0 1 1.989 0l2.029 1.414.688.285zM7.874 14.585l-.551 1.838a.204.204 0 0 0 .255.254l1.836-.55c.347-.105.662-.293.918-.548l4.46-4.462a.273.273 0 0 0 0-.385l-1.524-1.524a.273.273 0 0 0-.386 0l-4.46 4.461c-.256.256-.444.57-.548.916zm8.581-6.317l-.723-.723a.786.786 0 0 0-1.111 0l-.882.88a.262.262 0 0 0 0 .371l1.465 1.465a.262.262 0 0 0 .37 0l.881-.881a.786.786 0 0 0 0-1.112z",fillRule:"evenodd"}))};i.defaultProps={name:"BadgeWrite"},t.a=i},2809:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M9.586 3a1 1 0 0 1 .707.293l1.414 1.414a1 1 0 0 0 .707.293H21a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h6.586zM4 11v6.75c0 .138.112.25.25.25h15.5a.25.25 0 0 0 .25-.25V11H4zm0-2h16V7.25a.25.25 0 0 0-.25-.25h-8.164a1 1 0 0 1-.707-.293L9.464 5.293A1 1 0 0 0 8.757 5H4.25a.25.25 0 0 0-.25.25V9z"}))};i.defaultProps={name:"Folder"},t.a=i},2810:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M19.722 18a.249.249 0 0 1-.242-.2 1 1 0 0 0-.906-.797L18.5 17h-.875a5.135 5.135 0 0 1-.527 1.003L17 18c1.524 0 2.783 1.237 2.974 2.72a.25.25 0 0 1-.249.28h-1.503a.249.249 0 0 1-.242-.2 1 1 0 0 0-.906-.797L17 20H7c-.465 0-.855.375-.967.818a.243.243 0 0 1-.237.182H4.385c-.266 0-.386-.12-.374-.262a3 3 0 0 1 2.876-2.736h.014a5.162 5.162 0 0 1-.527-1.001L5.5 17c-.465 0-.855.374-.967.818a.243.243 0 0 1-.237.182H2.885c-.266 0-.386-.12-.374-.262a3 3 0 0 1 2.876-2.736L5.5 15H6L6 14.895a4.736 4.736 0 0 1-3.684-5.329l.03-.173.442-2.365a3 3 0 0 1 1.94-5.017.25.25 0 0 1 .27.25v1.514a.249.249 0 0 1-.2.245A1 1 0 1 0 5.98 5.2a.25.25 0 0 1 .245-.2h1.514a.25.25 0 0 1 .25.271 3 3 0 0 1-3.342 2.708l-.334 1.782a2.735 2.735 0 0 0 2.089 3.172 5.012 5.012 0 0 1 1.076-1.637 2.006 2.006 0 0 1-.426-1.754 1.972 1.972 0 0 1 1.492-1.491A2.003 2.003 0 0 1 11 10h2a2.002 2.002 0 0 1 2.457-1.949c.741.164 1.328.75 1.492 1.492.148.669-.039 1.299-.426 1.754a5.021 5.021 0 0 1 1.077 1.64 2.903 2.903 0 0 0 2.248-3.406l-.031-.139-.357-1.427a3 3 0 0 1-3.448-2.692.251.251 0 0 1 .25-.273h1.515c.118 0 .22.083.243.198a1 1 0 1 0 1.178-1.178.248.248 0 0 1-.198-.243V2.263c0-.148.126-.264.273-.251A3.001 3.001 0 0 1 21.27 6.96l.486 1.946a4.906 4.906 0 0 1-3.759 5.992c.002.033.002.068.002.102h.5c1.524 0 2.783 1.236 2.975 2.72a.25.25 0 0 1-.25.28h-1.503zM13.5 12h-3C9.12 12 8 13.344 8 15c0 1.614 1.061 2.929 2.391 2.997L10.5 18h3c1.38 0 2.5-1.344 2.5-3 0-1.614-1.061-2.929-2.392-2.997L13.5 12z",fillRule:"evenodd"}))};i.defaultProps={name:"Crab"},t.a=i},2811:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M12.9 11.433v-5.1a.9.9 0 1 0-1.8 0v6a.9.9 0 0 0 .9.9h4.8a.9.9 0 1 0 0-1.8h-3.9zM2.652 8.246a3.3 3.3 0 0 1 4.43-4.851 10.241 10.241 0 0 0-4.43 4.851zm14.266-4.851a3.3 3.3 0 0 1 4.43 4.851 10.241 10.241 0 0 0-4.43-4.851zM12 21.333a9 9 0 1 1 0-18 9 9 0 0 1 0 18z",fillRule:"evenodd"}))};i.defaultProps={name:"Clock"},t.a=i},2812:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(420),i=Object.assign;var c=function(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--CircleClose24"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M12 21a9 9 0 100-18 9 9 0 000 18zm2.829-12.89a.25.25 0 01.353 0l.707.708a.25.25 0 010 .354L13.061 12l2.828 2.828a.25.25 0 010 .354l-.707.707a.25.25 0 01-.354 0L12 13.061l-2.828 2.828a.25.25 0 01-.354 0l-.707-.707a.25.25 0 010-.354L10.94 12 8.111 9.172a.25.25 0 010-.354l.707-.707a.25.25 0 01.353 0L12 10.94l2.829-2.83z",fillRule:"evenodd",clipRule:"evenodd"}))}},2813:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(26),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M15.333 19.333l-2.764 2.765a.333.333 0 0 1-.569-.236v-2.529h3.333zm0-13.333c.737 0 1.334.597 1.334 1.333V16A2.667 2.667 0 0 1 14 18.667H7.333A1.333 1.333 0 0 1 6 17.333v-10C6 6.597 6.597 6 7.333 6zm.394-1.987a2.933 2.933 0 0 1 2.93 2.791l.004.142v8.838c0 .693-.53 1.262-1.205 1.327l-.129.006V6.947a1.6 1.6 0 0 0-1.49-1.597l-.11-.004H7.333c0-.736.597-1.333 1.334-1.333h7.06z",fillRule:"evenodd"}))};i.defaultProps={name:"BlueBook"},t.a=i},900:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return T}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(33),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(13),p=n.n(f),h=n(89),m=n.n(h),v=n(897),g=n(245),O=n(1119),j=["onRef","listClassName","itemClassName","className","children"],y=["className","title","meta","children","extra","image","link"];function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}function w(e){return!!e&&!(Array.isArray(e)&&!e.some(Boolean))}function x(e){var t=e.onRef,n=e.listClassName,a=e.itemClassName,o=e.className,r=e.children,i=Object(l.default)(e,j);return Object(s.b)("div",Object.assign(Object.assign({ref:t,className:p()(n,o)},i),{},{children:b.Children.map(r,(function(e){return"string"==typeof e?Object(s.b)("span",{className:a,children:e}):e?Object(b.cloneElement)(e,{className:p()(a,e.props.className)}):e}))}))}var k=function(e){return Object(s.b)(x,Object.assign({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},S=function(e){return Object(s.b)(x,Object.assign({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},A=function(e){return Object(s.b)(x,Object.assign({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},R=function(e){Object(r.a)(n,e);var t=C(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onRef=function(t){e.domNode=t,e.props.onRef&&e.props.onRef(t)},e.onAccessContent=function(t,n){n===document.activeElement&&window.open(e.props.link)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(v.onViewedOnce)(this.domNode,(function(){var t=e.props,n=t.data,a=(n=void 0===n?{}:n).type,o=n.id,r=t.lastreadTouchable;e.context.currentUser&&r&&a&&o&&Object(O.c)("article"===a?"post":a,o,O.b)}))}},{key:"render",value:function(){var e=m()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef"]),t=e.className,n=e.title,a=e.meta,o=e.children,r=e.extra,i=e.image,c=e.link,u=Object(l.default)(e,y),d=Object(s.c)(b.Fragment,{children:[n&&Object(s.b)("h2",{className:"ContentItem-title",children:n}),w(a)&&Object(s.b)("div",{className:"ContentItem-meta",children:a})]});return Object(s.c)("div",Object.assign(Object.assign({ref:this.onRef,className:p()("ContentItem",t)},u),{},{children:[c&&Object(s.b)(g.c,{keyMap:{ACCESS:"enter"},handlers:{ACCESS:this.onAccessContent}}),i||r?Object(s.c)("div",{className:"ContentItem-main",children:[i&&Object(s.b)("div",{className:"ContentItem-image",children:i}),Object(s.b)("div",{className:"ContentItem-head",children:d}),r&&Object(s.b)("div",{className:"ContentItem-extra",children:r})]}):d,o]}))}}]),n}(b.Component);R.contextTypes={currentUser:d.a.object};var T={plain:"plain",default:"default",interactive:"interactive"};t.e=R},924:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(19),f=n(24),p=n(41),h=n(13),m=n.n(h),v=(n(422),n(35)),g=n(56),O=n(966),j=n(902),y=n(1045),C=(n(935),n(55)),w=n(83),x=function(e){var t=e.text,n=Object(w.f)();return Object(l.b)(C.Box,{css:{color:n.colors.GBK04A,fontSize:14,lineHeight:1.6,fontWeight:"normal"},children:t})},k=n(936),S=n(928);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var R=function(e){Object(r.a)(n,e);var t=A(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var n=e.props,a=n.zaId,o=n.zaExtra,r=n.author.urlToken,i=n.isSpecialQuestionOrAnswer;if(n.preventOpenUrl)t.preventDefault();else if(a&&v.a.trackEvent(null,{id:a,action:"OpenUrl",element_name:"User"},o),i)return location.href="zhihu://people/".concat(r,"?utm_app_name=zhihu_check"),t.preventDefault(),void t.stopPropagation()},e.renderDetail=function(t){var n=e.props,a=n.extra,o=n.children,r=n.author,i=n.noHeadline,c=n.coCreationAuthorDescriptionText;return c?Object(l.b)("div",{className:"AuthorInfo-badge",children:Object(l.b)(x,{text:c})}):t&&a||Object(l.b)("div",{className:"AuthorInfo-badge",children:o||Object(l.b)(O.a,{className:"AuthorInfo-badgeText",user:r,noHeadline:i})})},e}return Object(o.a)(n,[{key:"render",value:function(){var e,t="plain"===this.props.preset,n=this.props,a=n.author,o=n.noLink,r=n.avatarSize,i=void 0===r?t?24:38:r,c=n.className,s=n.extra,u=n.itemProp,d=n.roundAvatar,b=n.isMobile,f=n.target,p=n.noDetail,h=n.noHoverCard,v=n.router,g=n.noBadge,O=n.noVipBadge,C=n.showVipIcon,w=null==a||null===(e=a.vipInfo)||void 0===e?void 0:e.widget,x=v.getCurrentLocation().pathname,A=-1!==x.indexOf("people")&&3===x.split("/").length,R=this.renderDetail(t),T=this.props.userLinkV2;return Object(l.c)("div",{className:m()("AuthorInfo",c,{"AuthorInfo--plain":t}),itemProp:u,itemScope:!0,itemType:"http://schema.org/Person",children:[Object(l.c)("div",{className:m()("AuthorInfo",{"AuthorInfo--mobile":!1}),children:[Object(l.b)("meta",{itemProp:"name",content:a.name}),Object(l.b)("meta",{itemProp:"image",content:a.avatarUrl}),Object(l.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/people/".concat(a.urlToken)}),Object(l.b)("meta",{itemProp:"zhihu:followerCount",content:a.followerCount}),T&&Object(l.c)(l.a,{children:[Object(l.b)(k.a,Object.assign({onClick:this.handleClick,noHoverCard:b||h,noLink:o,user:a,className:"AuthorInfo-avatarWrapper",avatarProps:{className:"AuthorInfo-avatar",size:i,round:d}},f&&{target:f})),Object(l.c)("div",{className:"AuthorInfo-content",children:[Object(l.c)("div",{className:"AuthorInfo-head",children:[Object(l.b)(S.a,Object.assign({noHoverCard:b||h,onClick:this.handleClick,noLink:o,user:a,noBadge:g,noVipBadge:O,showVipIcon:C,className:"AuthorInfo-name"},f&&{target:f})),!t&&s]}),!p&&Object(l.b)("div",{className:"AuthorInfo-detail",children:R})]})]}),!T&&Object(l.c)(l.a,{children:[Object(l.b)(j.a,Object.assign({onClick:this.handleClick,noHoverCard:b||h,noLink:o,className:"AuthorInfo-avatarWrapper",user:a,avatar:!0,avatarProps:{className:"AuthorInfo-avatar",size:i,round:d}},f&&{target:f})),Object(l.c)("div",{className:"AuthorInfo-content",children:[Object(l.c)("div",{className:"AuthorInfo-head",children:[Object(l.b)(j.a,Object.assign({noHoverCard:b||h,onClick:this.handleClick,className:"AuthorInfo-name",noLink:o,user:a},f&&{target:f})),!t&&s]}),!p&&Object(l.b)("div",{className:"AuthorInfo-detail",children:R})]})]})]}),A&&w&&w.id&&Object(l.b)(y.a,{className:"AuthorInfo-Widget",widget:w})]})}}]),n}(d.Component);R.propTypes={author:u.a.object.isRequired,noLink:u.a.bool,avatarSize:u.a.number,preset:u.a.oneOf(["plain","default"]),className:u.a.string,itemProp:u.a.string,roundAvatar:u.a.bool,isMobile:u.a.bool,noDetail:u.a.bool,relatedTo:u.a.string,zaId:u.a.number,zaExtra:u.a.object,noHoverCard:u.a.bool,noHeadline:u.a.bool,preventOpenUrl:u.a.bool,noBadge:u.a.bool,noVipBadge:u.a.bool,showVipIcon:u.a.bool,coCreationAuthorDescriptionText:u.a.oneOf(["视频作者","图文作者"])},R.defaultProps={noLink:!1,roundAvatar:!1,itemProp:"author",noHoverCard:!1,noHeadline:!1,preventOpenUrl:!1,coCreationAuthorDescriptionText:null};t.a=Object(b.compose)(p.withRouter,Object(f.connect)((function(e,t){var n=t.relatedTo,a=t.params,o=["question","answer"].includes(n);return{isHuman:Object(g.isHumanSelector)(e),shouldOia:Object(g.shouldOiaSelector)(e)&&o,isMobile:Object(g.isMobileSelector)(e,{includeTablet:!0}),isSpecialQuestionOrAnswer:Object(g.specialQuestionOrAnswerSelector)(e,{type:o&&n,id:o?"question"===n?null==a?void 0:a.id:null==a?void 0:a.answerId:""})}})))(R)},926:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return k}));var a=n(31),o=n.n(a),r=n(39),i=n.n(r),c=n(0),l=n.n(c),s=n(13),u=n.n(s),d=n(7),b=["className","title","options","children"],f=function(e){var t=e.className,n=e.title,a=e.options,r=e.children,c=o()(e,b);return Object(d.g)("div",i()({className:u()("List",t)},c),(n||a)&&Object(d.g)("div",{className:"List-header"},Object(d.g)("h4",{className:"List-headerText"},n),Object(d.g)("div",{className:"List-headerOptions"},a)),r)},p=n(21),h=n.n(p),m=n(25),v=n.n(m),g=n(23),O=n.n(g),j=n(27),y=n.n(j),C=n(14),w=n.n(C);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return y()(this,n)}}var k=function(e){O()(n,e);var t=x(n);function n(){return h()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.tabIndex,a=e.meta,o=e.children,r=e.onRef;return Object(d.g)("div",{className:u()("List-item",t),tabIndex:n,ref:r},a&&Object(d.g)("div",{className:"List-itemMeta"},a),o)}}]),n}(l.a.Component);n(991)},935:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(49);var a=n(52),o=n.n(a),r=function(e){var t=e||{},n=t.type,a=t.id,r=t.urlToken,i=t.q;switch(n){case"question":return"/questions/".concat(a);case"answer":return"/answers/".concat(a);case"article":case"p":return"/articles/".concat(a);case"column":return"/columns/".concat(a);case"live":return"/lives/".concat(a);case"ebook":case"book":return"/pub/book/".concat(a);case"feed":return"/feed";case"topic":return"/topics/".concat(a);case"people":return"/people/".concat(r||a);case"search":return"/search?".concat(o.a.stringify({q:i}));case"video":return"video_topic/".concat(a);case"zvideo":return"/zvideo/".concat(a);case"zvideo_answer":case"zvideo_article":var c=n.replace("zvideo_","");return"/".concat(c,"s/").concat(a);case"liveplus":return"/liveplus/".concat(a);case"brief":return"/brief/".concat(a);default:return null}},i=function(e,t){var n=t?"?".concat(o.a.stringify(t)):"",a="string"==typeof e?e:r(e);if(a){var i=a.startsWith("/")?a.slice(1):a;return"zhihu://".concat(i).concat(n)}return"zhihu://".concat(n)}},937:function(e,t,n){"use strict";n.d(t,"b",(function(){return b}));var a=n(22),o=n.n(a),r=n(168),i=n.n(r),c=n(471),l=n.n(c);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var d={CONTENT_OPERATION:"content_operation",TEXT_STYLE:"text_style",LIST:"list",BLOCK:"block",STRUCTURE_GENERATION:"structure_generation",PROFESSIONAL_MEDIA:"professional_media",BASIC_MEDIA:"basic_media",BUSINESS_MEDIA:"business_media"},b=function(e){var t,n=Object.values(d).reduce((function(e,t){return Object.assign(Object.assign({},e),{},o()({},t,[]))}),{}),a=[],r=[],c=s(e);try{for(c.s();!(t=c.n()).done;){var u=t.value.toolbarV2;if(i()(u)||Array.isArray(u)){var b,f=s(i()(u)?[u]:u);try{for(f.s();!(b=f.n()).done;){var p=b.value;p.parentName?r.push(p):a.push(p)}}catch(e){f.e(e)}finally{f.f()}}}}catch(e){c.e(e)}finally{c.f()}for(var h=function(){var e=v[m],t=e.section,a=e.parentName,o=n[t];if(a){var r=o.find((function(e){return e.name===a}));if(!r)return"continue";r.childItems||(r.childItems=[]),r.childItems.includes(e)||(r.childItems.push(e),r.childItems=l()(r.childItems,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0})))}else o.push(e),o=l()(o,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0}));n[t]=o},m=0,v=[].concat(a,r);m<v.length;m++)h();return n};t.a=d},938:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(161),f=n(1006);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e){Object(r.a)(n,e);var t=p(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handlePackup=function(){var t=e.props.onClose;window.scrollTo(0,e.originPageYOffset),t&&t()},e}return Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.containerClassName,a=e.shown,o=e.showPackupButton,r=e.parent,i=e.commentPattern,c=e.commentInputPosition,s=e.onClose,u=e.byComment,d=e.needLoadCommentPermission,p=e.isMobile,h=e.onOrderChange,m=e.onItemLike,v=e.onPaginationClick,g=e.autoFocus,O=e.onMount,j=e.zaInfo;return a?"bottom"===i?Object(l.b)(f.a,{className:t,containerClassName:n,autoFocus:g,parent:r,commentPattern:i,commentInputPosition:c,showPackupButton:o,handlePackupButton:this.handlePackup,needLoadCommentPermission:d,isMobile:p,onOrderChange:h,onItemLike:m,onPaginationClick:v,onMount:O,zaInfo:j}):Object(l.b)(b.b,{size:"fullPage",onClose:s,maskClosable:!1,children:a&&"fixed"===i&&Object(l.b)(f.a,{className:t,containerClassName:n,parent:r,commentPattern:i,byComment:u,needLoadCommentPermission:d,onOrderChange:h,onItemLike:m,onPaginationClick:v,onMount:O,zaInfo:j})}):null}}]),n}(d.Component);h.propTypes={className:u.a.string,containerClassName:u.a.string,byComment:u.a.oneOfType([u.a.number,u.a.string]),parent:u.a.object,shown:u.a.bool,showPackupButton:u.a.bool,commentPattern:u.a.string,commentInputPosition:u.a.oneOf(["top","bottom"]),onClose:u.a.func,needLoadCommentPermission:u.a.bool,isMobile:u.a.bool,onOrderChange:u.a.func,onItemLike:u.a.func,onPaginationClick:u.a.func,autoFocus:u.a.bool,onMount:u.a.func,zaInfo:u.a.object},h.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"},t.a=h},943:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(28),o=n.n(a),r=n(0),i=n(13),c=n.n(i),l=n(1272),s=n(1273),u=n(7);var d=function(e){var t=e.style,n=e.className,a=e.id,i=e.name,d=e.size,b=void 0===d?20:d,f=e.checked,p=e.onChange,h=e.disabled,m=Object(r.useState)(!1),v=o()(m,2),g=v[0],O=v[1];return Object(u.g)("label",{style:t,className:c()("Checkbox",n,{"Checkbox--focused":g,"Checkbox--disabled":h})},f?Object(u.g)(l.a,{size:b,className:"Checkbox-iconOn"}):Object(u.g)(s.a,{size:b,className:"Checkbox-iconOff"}),Object(u.g)("input",{className:"Checkbox-input",id:a,name:i,type:"checkbox",checked:f,onFocus:function(){return O(!0)},onBlur:function(){return O(!1)},onChange:p,disabled:h}))}},944:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(24),f=n(13),p=n.n(f),h=n(1284),m=n.n(h),v=n(64),g=n.n(v),O=n(2760),j=n(1229),y=n(1228),C=n(2795),w=n(122),x=n(36),k=n(35),S=n(74),A=n(116),R=n(447),T=n(245),I=n(577),E=n(29),N=n(30);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}function z(e){return e&&e.startsWith("//")?"https:".concat(e):e}function L(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")}var P=function(e){Object(r.a)(n,e);var t=B(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={qrCodeUrl:"",url:""},e.togglerRef=Object(d.createRef)(),e.shouldShowMenu=function(){var t=e.props,n=t.onTogglerClick,a=t.disabled;return!1!==n()&&!a},e.handleTogglerClick=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.onShare(t)):t.preventDefault()},e.handleMouseEnter=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.onShare(t)):t.preventDefault()},e.open=function(t){e.shouldShowMenu()&&(e.loadQrcodeImage(),e.menu.popover.open(),e.onShare(t))},e.onShare=function(){var t=e.props,n=t.id,a=t.type,o=t.getShareText,r=t.zaShareId;"live"!==a&&"club"!==a&&o(n,a),k.a.trackEvent(e.togglerRef.current,Object.assign({action:"Share",element:"Button",is_intent:!0,element_name:N.bb[a]},r&&{id:r}))},e.copyLink=function(){var t=e.props,n=t.type,a=t.title,o=t.authorName,r=t.href,i=t.showNotification,c=R.b[n]||"",l=a?"".concat(a," - "):"",s=o&&"匿名用户"!==o&&c?"".concat(o,"的").concat(c," - "):"",u=r?Object(A.toAbsoluteUrl)(r):e.url();m()("".concat(l).concat(s,"知乎\n").concat(z(u))),i("链接复制成功！")},e.url=function(){var t=e.props,n=t.id,a=t.type;return z(Object(A.toAbsoluteUrl)(e.props.url))||"".concat(location.origin,"/").concat(a,"/").concat(n)},e.loadQrcodeImage=function(){var t=e.state.qrCodeUrl;if(!t){var n="".concat(location.protocol,"//www.zhihu.com/"),a=e.url();t="".concat(n,"qrcode?").concat(L({url:"".concat(a).concat("#showWechatShareTip")})),e.setState({qrCodeUrl:t,url:a})}},e.shareToWeibo=function(){var t={appKey:"3063806388"},n=e.props.shareText;n&&(t.title=n);var a="http://service.weibo.com/share/share.php?".concat(L(t));window.open(a,"_blank","width=615,height=505")||(location.href=a)},e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.togglerClassName,o=t.positionStatus,r=t.toggler,i=t.type,c=t.disabled,s=t.placement,u=t.toggleEvent,b=t.stickHover,f=t.children,h=this.state.qrCodeUrl,m=Object(l.c)("div",{className:p()("ShareMenu-toggler",a),children:[h&&Object(l.b)("img",{className:"ShareMenu-fakeQRCode",src:h,alt:"微信二维码"}),Object(d.cloneElement)(r,{onMouseEnter:this.loadQrcodeImage,disabled:c,ref:this.togglerRef})]}),v="hover"===u?{onMouseEnter:this.handleMouseEnter}:{onClick:this.handleTogglerClick};return Object(l.c)(d.Fragment,{children:[Object(l.b)(T.c,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open}}),Object(l.c)(S.a,Object.assign(Object.assign({as:w.c,zaText:!0,zaType:"Button",zaAction:"Share",className:p()("ShareMenu",n),positionStatus:o,ref:function(t){e.menu=t},toggler:m,placement:s,toggleEvent:u,stickHover:b},v),{},{children:[Object(l.c)(S.a,{as:w.b,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.copyLink,children:[Object(l.b)(O.a,{size:20,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"]}),"live"===i||Object(l.c)(S.a,{as:w.b,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.shareToWeibo,children:[Object(l.b)(j.a,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"]}),Object(l.c)(w.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0,children:[Object(l.c)(x.c,{className:"ShareMenu-button",preset:"plain",children:[Object(l.b)(y.a,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"]}),Object(l.b)("img",{className:"ShareMenu-qrCode",src:h,alt:"微信二维码"})]}),f]}))]})}}]),n}(d.Component);P.propTypes={toggler:u.a.node,onTogglerClick:u.a.func,zaShareId:u.a.number},P.defaultProps={toggler:Object(l.b)(x.c,{preset:"plain",icon:C.a,label:"分享"}),onTogglerClick:g.a};t.a=Object(b.connect)((function(e,t){var n=t.id,a=t.type,o=e.shareTexts;return{shareText:(null==o?void 0:o["".concat(a).concat(n)])||t.shareText}}),{showNotification:E.h,getShareText:I.b})(P)},945:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(74),f=n(2213),p=n(36),h=n(35),m=n(178),v=n(245);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var O=function(e){Object(r.a)(n,e);var t=g(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).buttonRef=Object(d.createRef)(),e.handleClick=function(t){var n=e.props,a=n.zaInfos,o=a.toggleComment,r=a.getCommentAction,i=n.positionStatus,c=n.onClick,l=n.commentsShown;if(h.a.trackEvent(e.buttonRef.current,Object.assign({action:r?r(!l):"Comment",element:"Button",is_intent:!0},o&&{id:o})),c){var s="fixed"===i?"fixed":"bottom",u={commentsShown:!e.props.commentsShown,commentsAutoFocus:!(t instanceof KeyboardEvent),commentPattern:s};t instanceof KeyboardEvent&&"bottom"===s&&e.buttonRef.current.focus(),c(t,u)}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.count,o=t.commentsShown,r=t.commentClosed;o?e="收起评论":e=a&&!r?"".concat(Object(m.formatNumber)(a)," 条评论"):"添加评论";return Object(l.c)(d.Fragment,{children:[Object(l.b)(v.c,{keyMap:{COMMENT:"c"},handlers:{COMMENT:this.handleClick}}),Object(l.b)(b.a,{as:p.c,zaText:o?"收起评论":"展开评论",zaType:"Button",onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:f.a,label:e})]})}}]),n}(d.Component);O.propTypes={commentsShown:u.a.bool,count:u.a.number,zaInfos:u.a.shape({id:u.a.number,getCommentAction:u.a.func}),onInstance:u.a.func},O.defaultProps={zaInfos:{},onInstance:function(){return null}};t.a=O},946:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(13),d=n.n(u),b=n(36),f=n(161);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e){Object(r.a)(n,e);var t=p(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(){var t=e.props,n=t.onSubmit,a=t.onCancel,o=t.needCancel;(void 0===o||o)&&a(),n()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,a=e.shown,o=e.onCancel,r=e.className,i=e.isMobile,c=e.confirmText,s=e.cancelText,u=e.showButtonHorizontal,p=e.showConfirmButtonRight,h=Object(l.b)(b.c,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:c||"确认"},"confirm"),m=Object(l.b)(b.c,{onClick:o,children:s||"取消"},"cancel"),v=i||p?[m,h]:[h,m];return Object(l.b)(f.b,{wrapperClassName:"ConfirmModal-wrapper",className:d()("ConfirmModal",r),title:t,size:i?"small":"default",subtitle:n,onClose:o,closeButton:!1,buttonGroupOnly:!0,children:a&&Object(l.b)(f.a,{direction:i||u?"horizontal":"vertical",children:v})})}}]),n}(s.Component);t.a=h},949:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return s}));var a={general:"general",live:"live",publication:"publication",album:"album",special:"special",manga:"manga"},o=(Object.assign(Object.assign({},a),{},{album_chapter:a.album,album_video_chapter:a.album,album_paid_column:a.album,paid_column_chapter:a.album,training:a.album,training_bundle:a.album,training_chapter:a.album,web_literature:a.publication,instabook:a.publication,ebook_audio:a.publication,publication_chapter:a.publication,publication_paid_magazine:a.publication,magazine_section:a.publication,paid_answer:a.album,assessment:a.album,playlet:a.album}),{live:"Live 讲座",album:"盐选专栏",album_paid_column:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",paid_column_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书章节",instabook:"讲书",ebook_audio:"有声书",publication_paid_magazine:"盐选杂志",special:"专题",training:"训练营",training_bundle:"训练营",training_chapter:"训练营",web_literature:"网络文学",magazine_section:"杂志文章",manga:"漫画"}),r={live:"Live 讲座",album:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",album_paid_column:"盐选专栏",paid_column_chapter:"盐选专栏",assessment:"盐选专栏",training:"盐选专栏",training_bundle:"盐选专栏",training_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书",instabook:"电子书",ebook_audio:"电子书",publication_paid_magazine:"电子书",special:"电子书",web_literature:"电子书",magazine_section:"电子书",manga:"电子书"},i={live:a.live,album:a.album,album_chapter:a.album,album_paid_column:a.album,album_video_chapter:a.album,training:a.album,training_bundle:a.album,training_chapter:a.album,paid_column_chapter:a.album,assessment:a.album,publication:a.publication,publication_chapter:a.publication,instabook:a.publication,ebook_audio:a.publication,publication_paid_magazine:a.publication,special:a.publication,web_literature:a.publication,magazine_section:a.publication,manga:a.publication},c=["live","album","album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section","album_paid_column","assessment","special"],l={PaidAnswer:"PaidAnswer",PaidPost:"PaidPost",Answer:"Answer",Post:"Post"},s={paid_magazine:"PaidMagazine",paid_column:"PaidColumn",paid_column_chapter:"PaidColumn",album:"RemixAlbum",ebook:"EBook",instabook:"InstaBook",literature:"Literature",training:"Training",training_bundle:"TrainingBundle",special:"Special",ebook_audio:"AudioBook",live:"Live",publication:"EBook",web_literature:"EBook",album_chapter:"RemixAlbum",album_paid_column:"RemixAlbum",album_video_chapter:"RemixAlbum",manga:"Manga",free_conversation:"FreeConversation",event:"Event",Onebox:"OneBox",paid_answer:"Answer"}},952:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a=n(1e3),o=n.n(a),r=n(30);function i(e){if("number"!=typeof e)return null;var t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(String(t),":").concat(o()(String(n),2,"0"))}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.multiple,a=void 0!==n&&n,o=t.numLimit,i=void 0===o?r.U:o,c=t.uploadPartiallyWhenExceedsLimit,l=void 0===c||c,s=Array.from(e).filter((function(e){return r.a.VIDEO.some((function(t){return e.name.toLowerCase().endsWith(t)}))}));if(0===s.length)return{message:"视频格式不支持",abortUpload:!0};var u=s.filter((function(e){return e.size>102400}));return 0===u.length?{message:"视频必须大于 100KB，请重新选择上传",abortUpload:!0}:!a&&u.length>1?{message:"一次仅能上传一个视频，请分开上传",abortUpload:!1,validFiles:[u[0]]}:a&&u.length>i?0===i?{message:"上传个数已达上限",abortUpload:!0}:l?{message:"最多可上传 ".concat(i," 个视频，已默认选择").concat(i>1?"前":"第"," ").concat(i," 个视频"),abortUpload:!1,validFiles:u.slice(0,i)}:{message:"一次最多上传 ".concat(i," 个视频, 请重新选择上传"),abortUpload:!0}:{message:null,abortUpload:!1,validFiles:u}}},953:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},954:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(85),d=n.n(u);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var f=Object(s.createContext)({updateFormData:function(){},formData:{}});t.b=function(e){var t=function(t){Object(r.a)(i,t);var n=b(i);function i(){var e;Object(a.a)(this,i);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=n.call.apply(n,[this].concat(o))).state={},e.answerFormDataProps={updateFormData:function(t){return e.setState(t)},getFormData:function(){return e.state}},e}return Object(o.a)(i,[{key:"render",value:function(){return Object(l.b)(f.Provider,{value:this.answerFormDataProps,children:Object(l.b)(e,Object.assign(Object.assign({},this.props),this.answerFormDataProps))})}}]),i}(s.Component);return d()(t,e)}},955:function(e,t,n){"use strict";n.d(t,"a",(function(){return xe}));var a=n(33),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(24),p=n(1282),h=n.n(p),m=n(13),v=n.n(m),g=n(36),O=n(942),j=n(1571),y=n(963),C=n(279),w=n(1210),x=n(433),k=n(897),S=n(1068),A=n(138),R=n(35),T=n(44),I=n.n(T),E=n(56);function N(e){for(var t=e.replace(/(<noscript>).*?(<\/noscript>)/g,""),n=[],a=/<\s*img.*?>/g,o=/(zh-lightbox-thumb)|(Slideshow-swiperImage)/,r=/(data-original=").*?"/,i=null;i=null===(c=a.exec(t))||void 0===c?void 0:c[0];){var c;if(o.test(i)){var l=r.exec(i);l&&n.push(l[0].split("data-original=")[1].replace(/"|\\/g,""))}}return n}var B=n(245),z=n(1179),L=n(19),P=n(40),M=n.n(P),D=n(60),_=n(2758);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var U=function(e){Object(i.a)(n,e);var t=V(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,a=e.onSelect,o=e.content,r=this.hintInfo,i=r&&"danger"===r.type;return Object(s.c)("div",{className:v()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:i,children:[Object(s.b)("span",{className:"SharePopover-arrow"}),Object(s.c)("div",{role:"button",tabIndex:0,className:v()("SharePopover-content",{"SharePopover-content--danger":i}),onClick:function(){i||a(o)},children:[Object(s.b)(_.a,{className:"SharePopover-quote",size:24}),Object(s.b)("span",{className:"SharePopover-main",children:"发送到百科下的摘录"}),r&&Object(s.b)("span",{className:"SharePopover-hint",children:r.text})]})]})}}]),n}(b.Component);U.propTypes={content:d.a.string,top:d.a.number,visible:d.a.bool};var F=U,q=n(49),H=n(161),G=n(1496),K=n(473);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var Z=function(e){Object(i.a)(n,e);var t=W(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={topics:[],actived:!1},e.handleChange=function(t){(0,e.props.onChange)(t),e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!1,topics:t})}))},e.deactived=function(){e.setState({actived:!1})},e.toggleActived=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!e.actived})}))},e.focus=function(){return e.topicsInput&&e.topicsInput.focus()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.topics,a=t.actived;return Object(s.b)("div",{className:"TopicSelect",children:Object(s.b)(K.a,{actived:a,placeholderNote:" ",max:1,inputProps:{className:"".concat("TopicSelect","-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived})})}}]),n}(b.Component);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var Y=function(e){Object(i.a)(n,e);var t=Q(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={topics:[]},e.handleChangeTopics=function(t){e.setState((function(e){return Object.assign(Object.assign({},e),{},{topics:t})}))},e.handleSubmit=function(){var t=Object(q.a)(e.state.topics,1)[0].urlToken;(0,e.props.onSubmit)(t)},e}return Object(r.a)(n,[{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,a=e.currentUser,o=e.title,r=e.url,i=e.onClose,c=e.content,l=e.visible;return Object(s.b)(H.b,{onClose:i,size:"large",title:"发送摘录到百科",className:"AbstractForm",children:l&&Object(s.c)(b.Fragment,{children:[Object(s.b)(G.a,{type:t,author:n,member:a,title:o,url:r,content:c,theme:"scroll"}),Object(s.b)(Z,{onChange:this.handleChangeTopics}),Object(s.b)("div",{className:"AbstractForm-footer",children:Object(s.b)(g.c,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit,children:"确定"})})]})})}}]),n}(b.Component);Y.propTypes={type:d.a.string.isRequired,author:d.a.object,currentUser:d.a.object,title:d.a.string.isRequired,content:d.a.string.isRequired,url:d.a.string.isRequired,visible:d.a.bool.isRequired,onClose:d.a.func.isRequired,onSubmit:d.a.func.isRequired};var J=n(179),X=n(1180),$=n(293);function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var te=function(e){Object(i.a)(n,e);var t=ee(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},e.handlePopoverShow=function(t,n){if(!e.hasAddBaikeSummaryPermission)return null;R.a.trackCardShow(null,{id:6115}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{top:n,content:t,popoverVisible:!0})}))},e.handlePopoverClose=function(){if(!e.hasAddBaikeSummaryPermission)return null;e.setState((function(e){return Object.assign(Object.assign({},e),{},{popoverVisible:!1})}))},e.handleAbstractModalClose=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{abstractModalVisible:!1})}))},e.handleAbstractSelected=function(t){R.a.trackEvent(null,{id:6116,action:"Send"}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:t,popoverVisible:!1,abstractModalVisible:!0})}))},e.handleCreateAbstract=function(t){var n=e.props,a=n.type,o=n.objectId,r=n.createAbstract,i=e.state.content;R.a.trackEvent(null,{id:6117,action:"Submit"}),r({type:a,token:o,topicId:t,content:i}).then((function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:i,popoverVisible:!1,abstractModalVisible:!1})}))}))},e}return Object(r.a)(n,[{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return Object(X.a)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}},{key:"componentDidMount",value:function(){var e,t,n;e=this.richContainer,t=this.handlePopoverShow,n=this.handlePopoverClose,e.onmouseup=function(){var a=Object(D.a)(M.a.mark((function a(o){var r,i;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,new Promise((function(e){setTimeout((function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())}),0)}));case 2:(r=a.sent)?(i=o.target===e?o.offsetY:o.offsetY+o.target.offsetTop+30,t(r,i)):n();case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,a=e.content,o=e.abstractModalVisible,r=this.props,i=r.type,c=r.author,l=r.currentUser,u=r.title,d=r.url,f=r.isCopyable;return this.hasAddBaikeSummaryPermission?Object(s.c)(b.Fragment,{children:[Object(s.b)(F,{top:n,visible:t,content:a,isCopyable:this.isAuthor||f,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),Object(s.b)(Y,{type:i,onSubmit:this.handleCreateAbstract,author:c,visible:o,onClose:this.handleAbstractModalClose,currentUser:l,title:u,url:d,content:a})]}):null}}]),n}(b.Component);te.propTypes={type:d.a.string.isRequired,author:d.a.object.isRequired,currentUser:d.a.object,title:d.a.string.isRequired,url:d.a.string.isRequired,objectId:d.a.number.isRequired,isCopyable:d.a.bool},te.defaultProps={isCopyable:!0};var ne=Object(L.compose)($.b,Object(f.connect)(null,{createAbstract:J.d}))(te),ae=n(900),oe=n(77),re=n(503),ie=n(46),ce=n(1056);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var se=function(e){Object(i.a)(n,e);var t=le(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object(oe.a)(e)),e.handleCopy=e.handleCopy.bind(Object(oe.a)(e)),e.handleTipClose=e.handleTipClose.bind(Object(oe.a)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(r.a)(n,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var a=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],o=["",""];return a=n?a.concat(o):o.concat(a)}},{key:"getCopyText",value:function(e,t,n,a){var o=this.getExtraCopyright(t,n,a).join("\n");return a?o+e:e+o}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,a){var o=this.getExtraCopyright(t,n,a).join("<br />");return"<div>".concat(a?o+e:e+o,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var a=window.getSelection(),o=this.getRange(a),r=o.toString().trim(),i=this.getRangeHtml(o);if(r&&!(r.length<128)){var c=r.length>=512,l=this.getCopyHtml(i,t,n,c),s=this.getCopyText(r,t,n,c),u=e.nativeEvent.clipboardData;if("object"==typeof u){if(u.setData("text/html",'<meta charset="utf-8">'+l),u.setData("text/plain",s),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=l;var b=d.firstChild;b.style.position="fixed",b.style.left="-9999px",document.body.appendChild(b),a.selectAllChildren(b),setTimeout((function(){document.body.removeChild(b),a.removeAllRanges(),a.addRange(o)}),200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),a=this.getRange(n),o=a.toString().trim(),r=this.randomRange(44,66);if(!(o.length<=r)){e.preventDefault(),e.stopPropagation();var i,c=a.getBoundingClientRect(),l=window.pageYOffset,s=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)i=u+3;else{var b=this.props.viewPort,f=c.top+l,p=c.bottom+l,h=l+b.top+52,m=l+b.bottom-52;p<h?i=h-52:p<m?i=p:(d="top",i=f>h&&f<m?f:m+52)}var v=-1!==s?s+3:c.left+(c.right-c.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:v,tipY:i,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,a=n.author,o=n.type,r=n.id,i=n.question,c=n.reshipmentSettings,l=n.relationship,u=(l=void 0===l?{}:l).isAuthor,d=l.isAuthorized,b=t.isCurrentUser,f="";if("article"===o?f="https://zhuanlan.zhihu.com/p/".concat(r):"answer"===o&&(f="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(r)),!b&&!u)switch(c){case"disallowed":this.showTip(e,Object(s.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6",children:"禁止转载"}));break;case"need_payment":if(!d){this.showTip(e,Object(s.b)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(r),children:"申请转载"}));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,f,a.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.data,a=e.tag,o=e.html,r=e.children,i=e.onClick,c=e.className,l=e.itemProp,u=e.style,d=e.prefix,b=e.ecommerce,f=e.shouldUseArticleCard,p=e.shouldShowCatalog,h=e.shouldCatalogCollapse,m=e.richContentKey,v=e.isCurrentUser,g=e.isNovel,O=e.isExpanded,j=e.entityWords,y=this.state,C=y.tipShown,w=y.tipContent,x=y.tipX,k=y.tipY,S=y.tipPosition;return Object(s.c)("div",{ref:t,onClick:i,className:c,style:u,children:[d,Object(s.b)(ce.a,{entityWords:j,richContentKey:m,sourceId:n.id,sourceType:n.type,itemProp:l,tag:a,html:o,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:b,shouldUseArticleCard:f,shouldShowCatalog:p,useCatalogV2:!0,isAuthor:v,isNovel:g,isExpanded:O,shouldCatalogCollapse:h}),r,Object(s.b)(re.a,{shown:C,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:x,y:k,position:S,content:w,className:"CopyrightRichText-tooltip"})]})}}]),n}(b.Component);se.propTypes={onRef:d.a.func,viewPort:d.a.object};var ue,de,be,fe,pe=Object(L.compose)(Object(f.connect)((function(e,t){return{isCurrentUser:Object(ie.i)(e,t.data.author)}})))(se),he=n(1107),me=n(206),ve=n(41),ge=n(209),Oe=n.n(ge),je=n(178),ye=n(139);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var we=function(e){Object(i.a)(n,e);var t=Ce(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,a=e.updated,o=e.onClick,r=e.videoPlayCount;return Object(s.c)("div",{className:"ContentItem-time",children:[Object(s.b)(ve.Link,{to:t,target:"_blank",onClick:o,children:Object(s.b)("span",{"data-tooltip":Oe()(ue||(ue=Object(me.a)(["发布于",""])),Object(ye.toDateTimeString)(n)),"aria-label":Oe()(de||(de=Object(me.a)(["发布于",""])),Object(ye.toDateTimeString)(n)),children:a!==n?Oe()(be||(be=Object(me.a)(["编辑于",""])),Object(ye.toDateTimeString)(a)):Oe()(fe||(fe=Object(me.a)(["发布于",""])),Object(ye.toDateTimeString)(n))})}),Boolean(r)&&Object(s.c)("span",{css:{marginTop:10,marginLeft:5},children:["· ",Object(je.cnNiceNumber)(r),"次播放"]})]})}}]),n}(b.Component);we.propTypes={href:d.a.string,created:d.a.number,updated:d.a.number,videoPlayCount:d.a.number,onClick:d.a.func};var xe=we,ke=n(582),Se=n(1119),Ae=new Set([106713022,429615779,435773734,426291898,250310031,414291487,409115369,446861209,247003387,73377905,254989758,35134669,36249462,435345603,182387634,140256060,437667891,153624684,47216571,1009993776,1166287748,150785754,573667246,345093461,2051581556,423418617,24921526,427937981,119180585,442812865,175851487,285113967,807213480,415830436,125852644,399866520,269912473,736404714,630788898,217627201,32718846,233425911,1965977070,1703482555,425876259,376921084,477237451,430849009,409175983,395659900,404407636,33593650,29355234,45519587,477365726,407347055,128506044,324992390,391677046,399503822,540487048,514491508,340627548,433773279,125028091,126685323,1073936835,128655569,1782124590,431426144,198577418,449399100,2074550774,342658316,429187404,275411797,121202894,356603699,211168793,1182049284,88545788,435377412,142918293,112180819,107952366,394146559,239506554,243404812,967162682,416311991,108937963,503648342,37744326,338336040,742041726,2142758456,13098904,435935045,181579258,17350640]),Re=["url","hasVideo","duration","isVideoAnswer"];function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var Ie=/.*?(class="link-box")/;var Ee=function(e){Object(i.a)(n,e);var t=Te(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state=Object.assign(Object.assign({},e.getInitTruncatedState(e.props)),{},{shouldSticky:!1,offset:0,prevImgUrls:[]}),e.richContentRef=Object(b.createRef)(),e.truncateContent=function(){var t=e.props,n=t.isMobile,a=t.onToggleExpend,o=n?400:800,r=e.props.expandedHeight||o;(!e.content||e.content.scrollHeight<r)&&(e.setState({isTruncated:!1,isExpanded:!1}),null==a||a(!1,{trackUserAction:!1})),e.content&&e.content.scrollHeight>e.content.offsetHeight&&e.setState({contentCollapsed:!0})},e.updateStateInBrowser=function(){var t=e.props,n=t.excerpt,a=t.allowCollapseWithEmptyExcerpt,o=t.html,r=t.expanded,i=t.cover,c=t.unescapable,l=t.limit,s=t.limitWithImage,u=t.truncateHTMLOptions,d=t.truncateDisabled,b=!0,f=e.state.truncatedContent;if((n||a)&&(Ie.test(n)||d))f=n;else if(!c){var p=i?s:l,h=e.truncate(o,p,u);b=h.isTruncated,f=h.content}return{isTruncated:b,isExpanded:o&&r,truncatedContent:f,previewImg:null}},e.checkOpenInAppStyle=function(e){},e.toggle=function(t){e.isCollapsed()?e.handleExpand(t):e.handleCollapse(t)},e.handleExpand=function(t){var n,a,o,r,i,c,l=e.props.zaIds.expand;null!=t&&t.target&&(((null===(r=o=t.target.textContent)||void 0===r?void 0:r.length)>10||t.target.classList.contains("RichContent-inner")||t.target.classList.contains("List-item"))&&(o=null));(R.a.trackEvent(e.richContentRef.current,Object.assign(Object.assign({action:"Expand"},o&&{name:o}),l&&{id:l})),Ae.has(null===(n=e.props)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.id))&&I.a.increment("RichContent.Expand.afterZALog.".concat(o||"default",".").concat(l||"default",".").concat(null===(i=e.props)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.id,".count"));var s=e.props.onExpand;if(s)s(t);else{var u=e.props,d=u.onToggleExpend,b=u.data,f=b.type,p=b.id;e.context.currentUser&&Object(Se.c)("article"===f?"post":f,p,Se.a);d&&d(!0),e.setState({isExpanded:!0},(function(){"article"===f&&Object(k.onViewedOnce)(e.richContentRef.current,(function(){R.a.trackEvent(e.richContentRef.current,{action:"ReadFinish"})}))}))}},e.handleCollapse=function(){var t=e.props.onToggleExpend;R.a.trackEvent(e.richContentRef.current,{action:"Collapse",element:"Button"});t&&t(!1),e.setState({isExpanded:!1},(function(){return e.checkOpenInAppStyle(!1)}))},e.handlePreview=function(t){var n,a,o=e.props,r=o.ua,i=o.isMobile,c=e.state,l=c.isExpanded,s=c.isTruncated,u=c.prevImgUrls,d=s&&!l,b=t.target;d||"IMG"!==b.tagName||!b.classList.contains("zh-lightbox-thumb")&&!b.classList.contains("Slideshow-swiperImage")||(i&&r.MQQBrowser&&null!==(n=window.browser)&&void 0!==n&&null!==(a=n.app)&&void 0!==a&&a.openPhotoBrowser?setTimeout((function(){window.browser.app.openPhotoBrowser(u,h()(u,(function(e){return e===b.dataset.original})),0)}),0):e.setState({previewImg:b}))},e.handlePositionStatusChange=function(t){var n=e.props.onPositionStatusChange;n&&(n(t),e.checkOpenInAppStyle("fixed"===t))},e.handleObserve=function(t){var n=t[0].intersectionRatio;if(n||!document.querySelector("#root").style.position){var a=n>0;a!==e.state.shouldSticky&&(e.setState({shouldSticky:a}),a||e.checkOpenInAppStyle(!1))}},e.handleTrunObserve=function(t){var n=e.props,a=n.data,o=(a.type,a.id,n.updateReadStatus,n.html),r=t[0],i=r.intersectionRatio,c=r.isIntersecting;e.truncateComputed||(i>0||c||!o)&&(setTimeout((function(){return e.truncateContent()})),e.truncateComputed=!0)},e.isCollapsed=function(){var t=e.props,n=t.after,a=t.before,o=t.unescapable,r=e.state,i=r.isExpanded,c=r.isTruncated;return!a&&!n||o?c&&!i:!i},e}return Object(r.a)(n,[{key:"abstractProps",get:function(){var e=this.props.data,t=e.id,n=e.type,a=e.author,o=e.question;return{objectId:t,type:n,author:a,title:(o=void 0===o?{}:o).title,url:e.url,isCopyable:e.isCopyable}}},{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign(Object.assign({},this.updateStateInBrowser()),{},{viewPort:{top:148,bottom:window.innerHeight-56}}),(function(){var t,n;null===(t=(n=e.props).onToggleExpend)||void 0===t||t.call(n,e.state.isExpanded,{trackUserAction:!1})})),Object(k.onViewedOnce)(this.richContentRef.current,(function(){var t=e.props,n=t.data,a=n.type,o=n.id,r=t.expanded;e.context.currentUser&&r&&Object(Se.c)("article"===a?"post":a,o,Se.a)})),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){var n=e.ua,a=e.html,o=e.isMobile;if(this.state.isExpanded&&!t.isExpanded){var r=this.richContentRef.current.getBoundingClientRect();r.top<this.props.topExcludedHeight&&(this.rect=r,this.scroll=window.pageYOffset)}o&&!this.state.isExpanded&&t.isExpanded&&n.MQQBrowser&&this.setState({prevImgUrls:N(a)})}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,a=n.top,o=n.bottom,r=n.height,i=this.richContentRef.current.offsetHeight,c=window.innerHeight,l=o<c?i-r:a-(c-i);window.scrollTo(0,this.scroll+l),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,a=e.expanded,o=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:a,truncatedContent:o?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var a=Object(S.truncateHTML)(e,t,n);return{isTruncated:a.isTruncated,content:a.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,a=t.unescapable,o=t.noCollapsed,r=t.expandText,i=void 0===r?"展开阅读全文":r,c=t.onClick,l=t.videoData,u=t.needExpandArrow,d=void 0===u||u,b=this.state,f=b.isExpanded,p=b.isTruncated,h=b.shouldSticky,m=b.offset;if(!f)return[a&&p&&!l&&Object(s.c)(g.c,{preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:c||this.handleExpand,children:[i,d&&Object(s.b)(j.a,{className:"ContentItem-arrowIcon",center:!0})]},"expand-button"),n&&Object(s.b)(ae.a,{children:n},"actions")];var v=(n||!o)&&Object(s.c)(ae.a,{className:"RichContent-actions",children:[n,!o&&Object(s.c)(g.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse,children:[Object(s.b)("span",{className:"RichContent-collapsedText",children:"收起"}),Object(s.b)(j.a,{className:"ContentItem-arrowIcon is-active",center:!0})]})]});return h&&v?Object(s.b)(C.a,{offset:m,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange,children:v}):v}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,a=t.excerpt,o=t.data,r=t.itemProp,i=void 0===r?"text":r,c=t.expandText,l=void 0===c?"阅读全文":c,u=t.onClick,d=t.prefix,b=t.unescapable,f=(t.isSearchContent,t.collapsedHeight),p=t.ecommerce,h=t.canAbstract,m=t.shouldUseArticleCard,O=t.richContentKey,C=t.shouldCatalogCollapse,w=t.isNovel,k=t.entityWords,S=this.state,A=S.truncatedContent,R=S.previewImg,T=S.viewPort,I=S.contentCollapsed,E=S.isExpanded,N=this.isCollapsed(),B=N?A||a:n,L={},P=Object(s.c)(pe,Object.assign(Object.assign(Object.assign({entityWords:k,richContentKey:O&&String([O,N]),itemProp:i,className:v()("RichContent-inner",{"RichContent-inner--collapsed":I}),style:N&&b?{maxHeight:f}:null,tag:"span",onRef:function(t){e.content=t},isExpanded:E,data:o,html:B,viewPort:T,prefix:d},N&&{onClick:u||this.handleExpand}),L),{},{ecommerce:p,shouldUseArticleCard:m,shouldCatalogCollapse:C,shouldShowCatalog:Object(z.a)(o)&&(E||b&&!N),isNovel:w,children:[h&&Object(s.b)(ne,Object.assign({},this.abstractProps)),!b&&N&&Object(s.c)(g.c,{preset:"plain",className:"ContentItem-more",children:[l,Object(s.b)(j.a,{className:"ContentItem-arrowIcon",center:!0})]}),R&&Object(s.b)(y.a,{img:R,onClose:function(){return e.setState({previewImg:null})}})]}),N);return b?Object(s.b)(x.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve,children:P}):P}},{key:"render",value:function(){var e=this.props,t=e.unescapable,a=e.after,o=e.before,r=e.extra,i=e.cover,c=e.hasVideo,l=e.renderCanExpandExtra,u=e.className,d=e.videoData,f=e.handleClickVideoMoreButton,p=e.duration,h=e.isVideoAnswer,m=this.state.isExpanded,g=this.isCollapsed(),O=d?Object(s.c)(b.Fragment,{children:[Object(s.b)(he.a,{data:d}),Object(s.b)("p",{className:"RichContent-videoMore",onClick:f,children:"点击查看全文"})]}):this.renderText(),j=m?Object(s.b)(x.a,{rootMargin:"-".concat(240,"px 0px"),onObserve:this.handleObserve,children:O}):O;return Object(s.c)("div",{className:v()("RichContent",u,{"is-collapsed":g,"RichContent--unescapable":t}),ref:this.richContentRef,onClick:this.handlePreview,children:[Object(s.b)(B.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!g&&o,!t&&g&&i&&Object(s.b)(n.Cover,{url:i,hasVideo:c,onClick:this.handleExpand,duration:p,isVideoAnswer:h}),j,r||"function"==typeof l&&l(m,this.handleExpand),!g&&a,this.renderActions()]})}}]),n}(b.Component);Ee.contextTypes={currentUser:d.a.object},Ee.propTypes={enableConvert:d.a.bool,unescapable:d.a.bool,expanded:d.a.bool,noCollapsed:d.a.bool,limit:d.a.number,limitWithImage:d.a.number,collapsedHeight:d.a.number,html:d.a.string,excerpt:d.a.string,allowCollapseWithEmptyExcerpt:d.a.bool,truncateDisabled:d.a.bool,before:d.a.node,after:d.a.node,prefix:d.a.node,extra:d.a.node,renderCanExpandExtra:d.a.func,topExcludedHeight:d.a.number,onPositionStatusChange:d.a.func,type:d.a.string,data:d.a.object,canAbstract:d.a.bool,cover:d.a.string,hasVideo:d.a.bool,truncateHTMLOptions:d.a.object,expandText:d.a.string,onToggleExpend:d.a.func,videoData:d.a.object,handleClickVideoMoreButton:d.a.func,zaIds:d.a.shape({expand:d.a.number})},Ee.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,isVideoAnswer:!1,data:{},collapsedHeight:400,zaIds:{}},Ee.Cover=function(e){var t=e.url,n=e.hasVideo,o=e.duration,r=e.isVideoAnswer,i=Object(a.default)(e,Re);return Object(s.c)("div",Object.assign(Object.assign({className:v()("RichContent-cover",{"RichContent-cover--mobile":!1})},i),{},{children:[Object(s.c)("div",{className:"RichContent-cover-inner",children:[Object(s.b)(w.a,{thumbnail:Object(A.imgUrl)(t,"60w"),url:Object(A.imgUrl)(t,"400x224"),alt:"cover"}),o&&Object(s.b)("div",{className:"RichContent-cover-mask"}),o&&Object(s.b)("div",{className:"RichContent-cover-duration",children:o})]}),r&&Object(s.b)("img",{alt:"",css:{position:"absolute",left:0,top:0,width:"64px",height:"18px",objectFit:"cover"},src:"https://pic1.zhimg.com/80/v2-c19ceba4b1bea7204cb67e27f469c95b_1440w.png"}),n&&Object(s.b)(O.a,{className:"RichContent-cover-play"})]}))};t.b=Object(f.connect)((function(e){return{ua:Object(E.uaSelector)(e),isMobile:Object(E.isMobileSelector)(e)}}),{updateReadStatus:ke.b})(Ee)},958:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(0),u=n(3),d=n.n(u),b=n(85),f=n.n(b),p=n(435);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}t.a=function(e){var t=function(t){Object(r.a)(i,t);var n=h(i);function i(){return Object(a.a)(this,i),n.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var t=this.props.currentUser,n=this.context.authRequired,a=void 0===n?function(){}:n;return Object(l.b)(e,Object.assign({isLogin:t&&"guest"!==t.userType,authRequired:a},this.props))}}]),i}(s.Component);return t.contextTypes={authRequired:d.a.func},f()(Object(p.b)(t),e)}},969:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0);function o(){return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),null}},973:function(e,t,n){"use strict";var a=n(894);t.a=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:" ",i=e.getSelection(),c=e.getCurrentContent(),l=c.createEntity(t,n,o),s=l.getLastCreatedEntityKey(),u=a.EditorState.set(e,{currentContent:l}),d=(u=a.AtomicBlockUtils.insertAtomicBlock(u,s,r)).getCurrentContent(),b=d.getBlockMap(),f=i.getStartKey(),p=d.getBlockForKey(f);p!==b.first()&&0===p.getLength()&&(b=b.delete(f),d=d.merge({blockMap:b}));var h=u.getSelection().getFocusKey(),m=d.getBlockForKey(h);return m!==b.last()&&0===m.getLength()&&(b=b.delete(h),d=d.merge({blockMap:b,selectionAfter:a.SelectionState.createEmpty(d.getKeyAfter(h))})),u=a.EditorState.set(u,{currentContent:d}),a.EditorState.forceSelection(u,u.getCurrentContent().getSelectionAfter())}},976:function(e,t,n){"use strict";var a=n(15),o=n(16),r=n(17),i=n(18),c=n(9),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(35),f=n(139),p=n(178),h=n(908),m=n(1139),v=n(902),g=n(966),O=n(900),j=(n(1269),n(936)),y=n(928);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var w=function(e){Object(r.a)(n,e);var t=C(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.user;b.a.setModule(this,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id,follower_num:e.followerCount}}})}},{key:"renderRewardDetails",value:function(){var e=this.props.user,t=e.amount,n=e.rewardCreated;return Object(l.c)("div",{className:"ContentItem-rewardDetails",children:[Object(l.b)("p",{className:"ContentItem-rewardAmount",children:t&&"赞赏了 ¥".concat(t/100)}),Object(l.b)("p",{className:"ContentItem-rewardTime",children:Object(f.toRelativeString)(n)})]})}},{key:"render",value:function(){var e=this.props,t=e.user,n=t.urlToken,a=t.isFollowed,o=t.isFollowing,r=t.answerCount,i=t.articlesCount,c=t.followerCount,s=t.id,u=t.isOrg,d=e.user,b=e.type,f=e.isRewardList,C=e.action,w=e.meta,x=e.status,k=e.noTrackCardShow,S=e.onClick,A=e.currentUser,R=!n,T=A&&A.id===s,I=void 0!==C?C:!T&&!R&&Object(l.b)(h.a,{id:d.urlToken,type:b||d.type,preset:h.a.PRESETS.primary,gender:d.gender,isFollowing:o,onClick:S}),E=void 0!==w?w:R||Object(l.b)(g.a,{user:d}),N=void 0!==x?Object(l.b)(O.d,{children:x}):!R&&Object(l.c)(O.d,{children:[Boolean(r)&&"".concat(Object(p.formatNumber)(r)," 回答"),Boolean(i)&&"".concat(Object(p.formatNumber)(i)," 文章"),Boolean(c)&&"".concat(Object(p.formatNumber)(c)," 关注者")]}),B="//www.zhihu.com/".concat(u?"org":"people","/").concat(n||s),z=this.props.userLinkV2;return Object(l.b)(O.e,{data:d,link:B,image:z?Object(l.b)(j.a,{className:"UserItem-avatar",avatarProps:{size:60},user:d,target:"_blank"}):Object(l.b)(v.a,{className:"UserItem-avatar",avatar:!0,avatarProps:{size:60},user:d,target:"_blank"}),title:Object(l.c)("div",{className:"UserItem-title",children:[z?Object(l.b)(y.a,{user:d,target:"_blank"}):Object(l.b)(v.a,{user:d,target:"_blank"}),Object(l.b)(m.a,{isFollowing:o,isFollowed:a})]}),meta:Object(l.c)("div",{children:[E,N]}),noTrackCardShow:k,extra:f?this.renderRewardDetails():I})}}]),n}(d.Component);w.contextTypes={authRequired:u.a.func},w.propTypes={action:u.a.node,status:u.a.node,meta:u.a.node,type:u.a.string,isRewardList:u.a.bool,onClick:u.a.func,currentUser:u.a.object},t.a=w},980:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(49),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(0),d=n(52),b=n(3),f=n.n(b),p=n(13),h=n.n(p),m=n(1178),v=n(106),g=n.n(v),O="function"==typeof ResizeObserver?function(e,t){var n=new ResizeObserver((function(e){return t(e[0].contentRect)}));return n.observe(e),function(){n.disconnect()}}:function(e,t){var n,a=function(){var a=e.getBoundingClientRect();!(n&&["left","top","width","height"].every((function(e){return n[e]===a[e]})))&&(n=a,t(a))},o=new(window.MutationObserver||window.WebKitMutationObserver)(g()(a,100));return o.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),a(),function(){o.disconnect()}};function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var y={auto:"auto",yes:"scroll",no:"hidden"},C=function(e){Object(i.a)(n,e);var t=j(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={locationHref:"",iframeHeight:900},e.iframe=null,e.iframeMessenger=null,e.iframeObserver=null,e.handleIframeLoad=function(){e.iframe.contentDocument&&(e.unlistenResize=O(e.iframe.contentDocument.body,(function(t){e.setState({iframeHeight:t.height})})))},e.handleMessage=function(t){var n=e.props.onMessage;t.type===m.b.CHANGE_IFRAME_HEIGHT&&e.setState({iframeHeight:t.payload}),t.type===m.b.REDIRECT_URL&&(window.location.href=t.payload),n&&n(t)},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({locationHref:window.location.href,timestamp:Date.now()}),this.iframeMessenger=new m.a({beforeMessage:function(e){return e.origin.endsWith("zhihu.com")},onMessage:this.handleMessage})}},{key:"componentWillUnmount",value:function(){this.iframeMessenger.close(),this.unlistenResize&&this.unlistenResize()}},{key:"render",value:function(){var e=this,t=this.props,n=t.src,o=t.className,r=t.scrolling,i=t.withParentUrl,c=t.withTimestamp,l=this.state,u=l.locationHref,b=l.timestamp,f=l.iframeHeight,p=n.split("?"),m=Object(a.a)(p,2),v=m[0],g=m[1],O=Object(d.parse)(g);return i&&(O.parent_url=u),c&&(O.ts=b),Object(s.b)("iframe",{className:h()("Iframe",o),src:"".concat(v,"?").concat(Object(d.stringify)(O)),ref:function(t){return e.iframe=t},height:f,onLoad:this.handleIframeLoad,scrolling:r,style:{border:"none",display:"block",overflow:y[r],width:"100%"}})}}]),n}(u.Component);C.defaultProps={scrolling:"auto",withParentUrl:!0,withTimestamp:!1},C.propTypes={className:f.a.string,src:f.a.string,scrolling:f.a.oneOf(["auto","yes","no"]),onMessage:f.a.func};var w=C},982:function(e,t,n){"use strict";var a=n(33),o=n(15),r=n(16),i=n(17),c=n(18),l=n(9),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(19),p=n(24),h=n(13),m=n.n(h),v=n(208),g=n(36),O=n(993),j=n(1059),y=n(421),C=n(35),w=n(205),x=n(30),k=n(179),S=["toggler","topic","id","isLoading","onRef"];function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var R=function(e){Object(i.a)(n,e);var t=A(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.dispatch,a=t.id;n(Object(k.A)(a))},e.track=function(){var t=e.props.topic;e.hoverCardElement&&t&&(C.a.setModule(e.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:t.id,item_num:t.questionsCount,follower_num:t.followersCount}}}),C.a.trackCardShow(e.hoverCardElement))},e.handleFollow=e.context.authRequired((function(){var t=!e.props.topic.isFollowing;C.a.trackEvent(e.hoverCardElement,{action:t?"Follow":"UnFollow",element:"Button"});var n=e.props,a=n.dispatch,o=n.id;a(Object(k.M)(o))}),x.X.follow),e.handleOpen=function(){e.load(),e.track()},e}return Object(r.a)(n,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,a=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.topic,r=t.id,i=t.isLoading,c=t.onRef,l=Object(a.default)(t,S),u=o||{},d=u.name,b=u.introduction,f=u.questionsCount,p=u.followersCount,h=u.bestAnswersCount,m=u.avatarUrl,v=u.isFollowing,C=u.headerCard,x="//www.zhihu.com/topic/".concat(r),k=C&&C.avatarUrl||m;return Object(s.c)(j.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(j.a,{title:Object(s.b)("a",{target:"_blank",rel:"noopener noreferrer",href:x,children:d}),avatarUrl:k,avatarFit:"cover"}),b&&Object(s.b)("div",{children:Object(s.b)(y.a,{className:"HoverCard-description",html:b})}),Object(s.c)("div",{children:[this.isTopicReady()&&Object(s.c)(O.a,{children:[Object(s.b)(O.a.Item,{tag:w.a,preset:"plain",a:!0,to:"".concat(x,"/questions"),name:"问题",value:f,target:"_blank"}),Object(s.b)(O.a.Item,{tag:w.a,preset:"plain",a:!0,to:"".concat(x,"/top-answers"),name:"精华",value:h,target:"_blank"}),Object(s.b)(O.a.Item,{tag:w.a,preset:"plain",a:!0,to:"".concat(x,"/followers"),name:"关注者",target:"_blank",value:p})]}),Object(s.b)("div",{className:"HoverCard-buttons",children:o&&Object(s.b)(g.c,{preset:"primary",color:v?"grey":"blue",onClick:this.handleFollow,children:v?"已关注":"关注话题"})})]})]}))}}]),n}(b.Component);R.contextTypes={authRequired:d.a.func};var T=Object(p.connect)((function(e,t){var n=t.id,a=e.entities.topics,o=e.loading.local;return{topic:a[n],isLoading:Boolean(o["topic/".concat(n)])}}))(R),I=n(56),E=["isMobile","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children","dispatch","trackEvent"];function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var B=function(e){Object(i.a)(n,e);var t=N(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,o=t.topic,r=o.name,i=o.avatarUrl,c=o.id,l=o.headerCard,u=t.avatar,d=t.avatarProps,b=t.noHoverCard,f=t.noLink,p=t.style,h=t.className,g=t.children,O=(t.dispatch,t.trackEvent,Object(a.default)(t,E)),j=void 0===b?n:b,y=l&&l.avatarUrl||i;e=u?Object(s.b)(v.a,Object.assign({className:"TopicLink-avatar",url:y,alt:r},d)):g||r,f||j||(e=Object(s.b)(T,{toggler:e,id:c}));var C=f?"span":"a";return Object(s.b)(C,Object.assign(Object.assign({style:p,className:m()("TopicLink",h),href:"//www.zhihu.com/topic/".concat(c),target:"_blank"},O),{},{children:e}))}}]),n}(b.Component);B.propTypes={topic:d.a.object.isRequired,user:d.a.object,avatar:d.a.bool,avatarProps:d.a.object,noHoverCard:d.a.bool,noLink:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},B.defaultProps={avatar:!1,noLink:!1};t.a=Object(f.compose)(Object(p.connect)((function(e){return{isMobile:Object(I.isMobileSelector)(e,{includeTablet:!0})}})))(B)},989:function(e,t,n){"use strict";n.d(t,"a",(function(){return $o}));var a=n(49),o=n(4),r=n(15),i=n(16),c=n(77),l=n(17),s=n(18),u=n(9),d=n(7),b=n(1),f=n(0),p=n.n(f),h=n(19),m=n(55),v=n(3),g=n.n(v),O=n(13),j=n.n(O),y=n(24),C=n(34),w=n(41),x=n(68),k=n.n(x),S=n(882),A=n(1110),R=n(1154),T=n(2796),I=n(2797),E=n(35),N=n(74),B=n(36),z=n(893),L=n(122),P=n(158),M=n(45),D=n.n(M),_=n(164),V=n(161),U=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}];function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var q=function(e){Object(l.a)(n,e);var t=F(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,a=e.onChange,o=e.className;return Object(b.b)("div",{className:j()("RadioButtons",o),children:t.map((function(e,t){var o=e.value,r=e.text,i=e.placeholder;return Object(b.c)("label",{className:"RadioButtons-item",children:[Object(b.b)("span",{className:"RadioButtons-text",children:r}),Object(b.b)("input",{type:"radio",className:"RadioButtons-input",value:o,checked:n===o,onChange:function(){return a(o,i)}})]},t)}))})}}]),n}(f.PureComponent);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}q.propTypes={options:g.a.arrayOf(g.a.shape({value:g.a.string,text:g.a.string,placeholder:g.a.string})).isRequired,value:g.a.string,onChange:g.a.func,className:g.a.string};var G=function(){return Promise.all([n.e(1),n.e(3),n.e(61),n.e(64),n.e(2),n.e(6),n.e(20),n.e(21),n.e(82)]).then(n.bind(null,2818))},K=U.map((function(e){var t=e.code,n=e.description,a=e.placeholder;return{text:n,value:String(t),placeholder:a}})),W=function(e){Object(l.a)(n,e);var t=H(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},e.handleReasonCodeChange=function(t,n){e.setState({selectedReasonCode:Number(t),selectedReasonPlaceholder:n||""}),e.input&&e.input.resetWithValue(n||"")},e.handleAddAnnotation=function(){var t=e.props,n=t.addAnnotation,a=t.type,o=t.urlToken,r=t.showNotification,i=t.onClose;n(a,o,e.state.selectedReasonCode,e.input.toHTML()).then((function(){i(),r&&r("标记内容成功")}))},e.handleReasonDescriptionChange=function(t){e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.shown,o=t.className,r=this.state,i=r.selectedReasonCode,c=r.isReasonDescriptionEmpty,l=r.selectedReasonPlaceholder,s=function(e){var t=U.find((function(t){return t.code===e}));return t&&t.description}(i),u=32300===i;return Object(b.b)(V.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:o,children:a&&Object(b.c)("div",{children:[Object(b.c)("div",{className:"AddAnnotationModal-body",children:[Object(b.b)(q,{options:K,onChange:this.handleReasonCodeChange,value:String(i)}),i&&Object(b.c)("div",{children:[Object(b.c)("div",{className:"AddAnnotationModal-description",children:[s,"（",u?"必填":"选填","）"]}),Object(b.b)(_.a,{getComponent:G,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:l,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange})]})]}),Object(b.b)(V.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup",children:Object(b.b)(B.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||u&&c,children:"标记"})})]})})}}]),n}(f.PureComponent);W.propTypes={addAnnotation:g.a.func.isRequired,onClose:g.a.func.isRequired,shown:g.a.bool.isRequired,type:g.a.oneOf([0,1,2]).isRequired,urlToken:g.a.oneOfType([g.a.number,g.a.string]),showNotification:g.a.func,className:g.a.string};var Z=n(57),Q=n(96),Y=n.n(Q),J=n(157);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var $=function(e){Object(l.a)(n,e);var t=X(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isReasonDescriptionEmpty:!0},e.handleCancelAnnotation=function(){var t=e.props,n=t.cancelAnnotation,a=t.type,o=t.urlToken,r=t.showNotification,i=t.onClose;n(a,o,32305,e.input.value).then((function(){i(),r&&r("撤销标记成功")}))},e.handleReasonDescriptionChange=function(t){return e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.shown,o=t.className,r=this.state.isReasonDescriptionEmpty;return Object(b.b)(V.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:o,children:a&&Object(b.c)("div",{className:"CancelAnnotationModal",children:[Object(b.b)(J.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),Object(b.c)(V.a,{direction:"horizontal",children:[Object(Z.isBrowser)()&&!Y()(window.navigator.userAgent).Mobile&&Object(b.b)(B.c,{onClick:n,size:"spread",children:"取消"}),Object(b.b)(B.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:r,children:"撤销标记"})]})]})})}}]),n}(f.PureComponent);$.propTypes={cancelAnnotation:g.a.func.isRequired,onClose:g.a.func.isRequired,shown:g.a.bool.isRequired,type:g.a.oneOf([0,1,2]).isRequired,urlToken:g.a.oneOfType([g.a.number.isRequired,g.a.string.isRequired]),showNotification:g.a.func,className:g.a.string};var ee=n(422),te=n(472),ne=n(415),ae=n(30),oe=n(1634),re=n(969),ie=n(85),ce=n.n(ie),le=n(79),se=n(121),ue=n(2),de=n(6),be=n(37),fe=n(5),pe=Object.assign({},Object(fe.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),he=function(e){return e===ae.e?"answers":e===ae.g?"pins":e===ae.f?"articles":null},me=n(29),ve=n(460),ge=n(56),Oe=n(261),je=n(46),ye=n(156),Ce=n(1287),we=n(935),xe=n(1060),ke=n(1125),Se=n(181),Ae=n(1213),Re=n(1179),Te=n(1031),Ie=n(1087),Ee=n(95),Ne=n.n(Ee),Be=n(21),ze=n.n(Be),Le=n(25),Pe=n.n(Le),Me=n(23),De=n.n(Me),_e=n(27),Ve=n.n(_e),Ue=n(14),Fe=n.n(Ue),qe=n(28),He=n.n(qe),Ge=n(40),Ke=n.n(Ge),We=n(207),Ze=n.n(We),Qe=n(31),Ye=n.n(Qe),Je=n(53),Xe=n.n(Je),$e=n(64),et=n.n($e),tt=n(43),nt=n(66),at=n(178),ot=n(2214),rt=n(2213),it=n(2761),ct=n(1571),lt=n(892),st=n(204),ut=n(114),dt=n(417),bt=n(83),ft=n(423),pt=n(467),ht=n(52),mt=n(167),vt=n.n(mt),gt=n(493),Ot=n(47),jt=n(248),yt=n(11),Ct=n(118),wt=n(595),xt=n(273);function kt(){var e=!1,t=[],n=new Set,a={subscribe:function(e){return n.add(e),function(){n.delete(e)}},start:function(a,o){if(e){var r=[];return n.forEach((function(e){r.push(Object(wt.a)(e,a,{transitionOverride:o}))})),Promise.all(r)}return new Promise((function(e){t.push({animation:[a,o],resolve:e})}))},set:function(t){return Object(Ct.invariant)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),n.forEach((function(e){Object(xt.d)(e,t)}))},stop:function(){n.forEach((function(e){Object(wt.b)(e)}))},mount:function(){return e=!0,t.forEach((function(e){var t=e.animation,n=e.resolve;a.start.apply(a,Object(yt.__spreadArray)([],Object(yt.__read)(t),!1)).then(n)})),function(){e=!1,a.stop()}}};return a}var St=n(124);var At=n(269),Rt=n(139),Tt=["user","className","badgeSize","isHybrid"],It=["query","children","innerStyle","innerRef","onClick"],Et=["name","className","defaultClassName","size","center"];function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Fe()(e);if(t){var o=Fe()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Ve()(this,n)}}var Bt=function(e){var t=e.medalAvatarFrame,n=Object(st.b)();return Object(pt.versionControl)(n,{IOS:"7.39",ANDROID:"7.39"})&&t?Object(b.b)("div",{css:{position:"absolute",width:"38px",height:"38px",pointerEvents:"none",top:"-4px",left:"-4px"},children:Object(b.b)(m.Image,{alt:"头像挂件",src:t})}):null},zt=function(e){var t=e.user,n=e.className,a=e.badgeSize,o=void 0===a?14:a,r=e.isHybrid,i=Ye()(e,Tt),c=t.avatarUrl,l=t.badge,s=t.badgeV2,u=t.isOrg,d=t.id,f=t.exposedMedal,p=Object(bt.e)(),h=r?30:24,v="0"===d||""===d,g=Object(b.c)(b.a,{children:[Object(b.b)(m.Image,{size:h,src:c,css:{borderRadius:r?"50%":"2px"},className:n}),(null!=s?s:l)&&r&&Object(b.b)(dt.c,{size:o,badge:null!=s?s:l,css:Object(dt.f)(2*o,o)})]});return v?Object(b.b)("span",Object.assign(Object.assign({},i),{},{children:g})):Object(b.c)(m.Box,{size:h,css:Object.assign({position:"relative"},p),className:n,children:[r&&(null==f?void 0:f.medalAvatarFrame)&&Object(b.b)(Bt,{medalAvatarFrame:f.medalAvatarFrame}),Object(b.b)(ft.b,{href:"https://www.zhihu.com/".concat(u?"org":"people","/").concat(d),zaType:"Image",css:{position:"relative"},onClick:function(e){E.a.trackEvent(e.target,{id:1200,action:"OpenUrl",element_name:"User"})},children:g})]})},Lt=!1,Pt=!1,Mt=function(){var e=Ze()(Ke.a.mark((function e(t){var n;return Ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pt){e.next=3;break}return e.next=3,Pt=!0,nt.a.ready().catch((function(){Lt=!0}));case 3:if(!Lt){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,nt.a.dispatch("account/showLoginDialog",{next:t}).catch((function(e){return e}));case 7:if("object"!=typeof(n=e.sent)||"ERR_AUTH_ALREADYLOGIN"!==n.name&&"ERR_ACOUNT_NOTGUEST"!==n.name){e.next=11;break}return Lt=!0,e.abrupt("return",Lt);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dt=Object(f.createContext)({data:null,dispatch:et.a,authRequired:et.a}),_t="LOAD_COMMENT_PREVIEW",Vt="TOGGLE_LIKE",Ut=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,a=t.payload;if(n===_t)return Object(de.camelizeKeys)(a);if(n===Vt){var o=a.id,r=a.nextAction,i=a.rootCommentId;return Object.assign(Object.assign({},e),{},{data:e.data.map((function(e){return i?i!==e.id?e:Object.assign(Object.assign({},e),{},{childComments:e.childComments.map((function(t){return t.id!==o?t:Object.assign(Object.assign({},t),{},{likeCount:e.likeCount+("like"===r?1:-1),liked:"like"===r})}))}):e.id!==o?e:Object.assign(Object.assign({},e),{},{likeCount:e.likeCount+("like"===r?1:-1),liked:"like"===r})}))})}return e},Ft=function(e){var t=e.children,n=e.resourceType,a=e.resourceId,o=e.redirectUrl,r=e.commentUnfoldable,i=e.showInteractions,c=void 0===i||i,l=e.showSecondaryComment,s=e.showSecondaryCommentButton,u=e.showLevelInfo,d=e.listHeight,p=e.maskTransparent,h=e.onAllCommentsShow,m=void 0===h?et.a:h,v=e.openInApp,g=void 0===v?et.a:v,O=Object(f.useReducer)(Ut,null),j=He()(O,2),y=j[0],C=j[1],w=Object(gt.b)(),x=Object(tt.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://www.zhihu.com";return function(t){return function(n){var a=n.target;return Mt(e).then((function(e){if(e)return t(a)}))}}}(o)),k=Object(tt.d)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return w.apply(void 0,["https://www.zhihu.com".concat(e)].concat(n))}));return Object(b.b)(Dt.Provider,{value:{data:y,dispatch:C,authRequired:x,fetcher:k,resourceType:n,resourceId:a,commentUnfoldable:r,showInteractions:c,showSecondaryComment:l,showSecondaryCommentButton:s,showLevelInfo:u,onAllCommentsShow:m,listHeight:d,maskTransparent:p,openInApp:g},children:t})};function qt(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=null;return function(){var o=Date.now();if(!n&&!a||o-a<t){a||(a=o);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e.apply(this,i)}a=o}}var Ht=Object(f.forwardRef)((function(e,t){var n=e.query,a=void 0===n?{}:n,o=e.children,r=e.innerStyle,i=e.innerRef,c=e.onClick,l=Ye()(e,It),s=Object(f.useContext)(Dt),u=s.resourceType,d=s.resourceId,p=s.onAllCommentsShow,h=s.listHeight,m=s.maskTransparent,v=s.openInApp,g=a.rootCommentId,O=a.anchorCommentId,j=a.openEditor,y=a.replyAuthorName,C=Object(st.b)(),w=Object(f.useMemo)((function(){var e=Object(ht.stringify)(Object(de.decamelizeKeys)(vt()(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),g&&{isChild:!0}),{},{rootCommentId:void 0,isChild:void 0,anchorCommentId:null!=g?g:O},j&&{openEditor:!0,replyCommentId:O,replyRootCommentId:g,replyAuthorName:y}),h&&{listHeight:h,maskTransparent:!0}),void 0!==m&&{maskTransparent:m}),Boolean))),t=d,n=u;return a.resourceType&&a.resourceType!==u&&(n=a.resourceType,t=a.resourceId),"https://www.zhihu.com/comment/list/".concat(n,"/").concat(t,"?").concat(e)}),[a,u,d,O,g,y,j,h,m]);return Object(b.b)(ft.b,Object.assign(Object.assign({as:"div",ref:t,href:w,onClick:function(e){if(!C.ZhihuHybrid)return e.preventDefault(),void v();null==c||c(e),e.defaultPrevented||null==p||p()}},l),{},{children:Object(b.b)("div",{role:"link",tabIndex:0,ref:i,onClick:qt((function(e){e.stopPropagation()}),1e3),css:function(e){return Object.assign({":focus":{outline:"none"},":focus-visible":{outline:"".concat(e.colorMod(e.colors.GBL01A).alpha(.3)," auto 5px")}},r)},children:o})}))})),Gt=function(e){De()(n,e);var t=Nt(n);function n(){var e;ze()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t,n){var a=e.props,o=a.onObserve,r=a.onChange;o&&o(t),t.forEach((function(e){r&&r(e,n)}))},e}return Pe()(n,[{key:"componentDidMount",value:function(){var e=Object(Ot.findDOMNode)(this);e&&(this.observer=this.createObserver(),this.observer.observe(e))}},{key:"componentWillUnmount",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null)}},{key:"createObserver",value:function(){var e=this.props,t=e.root,n=e.rootMargin,a=e.threshold,o=e.trackVisibility,r=e.delay;return new window.IntersectionObserver(this.handleChange,{root:t,rootMargin:n,threshold:a,trackVisibility:o,delay:r})}},{key:"render",value:function(){return this.props.children}}]),n}(f.Component);function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Gt.propTypes={root:g.a.object,rootMargin:g.a.string,threshold:g.a.oneOfType([g.a.number,g.a.arrayOf(g.a.number)]),trackVisibility:g.a.bool,delay:g.a.number,onObserve:g.a.func,onChange:g.a.func};var Wt=function(e){De()(n,e);var t=Nt(n);function n(){var e;ze()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),Kt(Ne()(e),"trackCardShowTimer",null),Kt(Ne()(e),"handleIntersectionChange",(function(t,n){if(t.isIntersecting&&t.intersectionRatio>0){n.disconnect();var a=e.props,o=a.view,r=void 0===o?{}:o,i=a.extra;e.trackCardShowTimer=setTimeout((function(){E.a.trackCardShow(Ne()(e),r,i)}))}})),e}return Pe()(n,[{key:"componentDidMount",value:function(){this.setModule()}},{key:"componentDidUpdate",value:function(){this.setModule()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.trackCardShowTimer)}},{key:"setModule",value:function(){var e=this.props,t=e.module,n=e.index,a=e.isAd,o=e.moduleName,r=e.content,i=e.list,c=e.card,l=e.attachedInfoBytes;if(t){var s=Object(Ot.findDOMNode)(this);s&&E.a.setModule(s,{module:t,index:n,is_ad:a,module_name:o},function(e,t,n,a){return Object.assign(Object.assign(Object.assign(Object.assign({},e&&{card:{content:e}}),t&&{card:t}),n&&{list:n}),a&&{attached_info_bytes:a})}(r,c,i,l))}}},{key:"render",value:function(){var e=this.props,t=e.visibleThreshold,n=e.trackCardShow,a=e.children;return n?Object(b.b)(Gt,{threshold:t,onChange:this.handleIntersectionChange,children:a}):a}}]),n}(f.Component);Kt(Wt,"propTypes",{id:g.a.string,module:g.a.string,moduleName:g.a.string,index:g.a.number,isAd:g.a.bool,content:g.a.object,extra:g.a.object,trackCardShow:g.a.bool,attachedInfoBytes:g.a.string}),Kt(Wt,"defaultProps",{id:null,module:null,index:null,isAd:!1,content:null,extra:null,attachedInfoBytes:null,trackCardShow:!1,visibleThreshold:0});var Zt={avatarUrl:"https://pic1.zhimg.com/v2-abed1a8c04700ba7d72b45195223e0ff_s.jpeg",badge:null,id:"0"},Qt=["1","0.7","0.4"],Yt=["[666]","[谢邀]","[赞同]"],Jt=function(e){var t=e.inputPlaceholder,n=e.commentStatus,a=e.emoticons,o=e.currentUserId,r=e.onInputShowTips,i=Object(st.b)(),c=(null==i?void 0:i.ZhihuHybrid)||(null==i?void 0:i.Zhihu),l=Object(f.useState)([]),s=He()(l,2),u=s[0],d=s[1],p=Object(f.useState)(Zt),h=He()(p,2),v=h[0],g=h[1],O=n.type,j=n.text,y=n.induceText,C=4===O,w=5===O,x=C||w,k=x?j:t;Object(f.useEffect)((function(){a.length>0&&nt.a.dispatch("base/getFrequentlyUsedEmoticon",{count:3}).then((function(e){var t=null==e?void 0:e.data;return t&&0!==t.length||(t=Yt),d(t.map((function(e){return function(e,t){return t.find((function(t){return t.placeholder===e}))}(e,a)})))}))}),[a]),Object(f.useEffect)((function(){o?nt.a.dispatch("base/getData",{type:"people",id:o}).then((function(e){var t=e.data;t&&g(Object(de.camelizeKeys)(t))})):nt.a.dispatch("account/me").then((function(e){if(null!=e&&e.url_token){var t=e.avatar_url,n=e.url_token,a=e.badge_v2,o=e.badge;g({avatarUrl:t,id:n,badgeV2:a,badge:o})}}))}),[o]);var S=Object(tt.d)((function(e){E.a.trackEvent(e.target,{id:1203,action:"Click"}),x&&e.preventDefault(),C&&Object(nt.a)("ui/showToast").dispatch({text:j}),w&&(null==r||r(y||"评论区功能升级中，暂时无法发送评论，可以使用「赞同并推荐」功能参与互动"))}));return Object(b.c)(m.Flex,{css:{width:"100%",alignItems:"center"},children:[Object(b.b)(zt,{user:v,isHybrid:c}),Object(b.b)(Wt,{module:"CommentEditView",children:Object(b.c)(Ht,{as:m.Flex,query:{openEditor:!0},css:function(e){return{flex:1,border:"1px solid ".concat(e.colors.GBK09A),marginLeft:"10px",borderRadius:"8px",height:"36px",paddingLeft:"10px",fontSize:"13px",color:e.colors.GBK06A}},innerStyle:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onClick:S,children:[Object(b.b)(m.Text,{css:{lineHeight:"normal"},children:k||"写下你的评论..."}),u.length>0&&Object(b.b)(m.Flex,{css:{height:"34px",alignItems:"center",marginRight:"4px"},children:u.filter(Boolean).map((function(e,t){var n=e.static_image_url,a=e.title;return Object(b.b)("img",{alt:"icon",src:n,css:{width:"20px",height:"20px",marginRight:"4px",opacity:Qt[t]}},a)}))})]})})]})},Xt={hybrid:{username:{fontSize:14,color:"GBK02A"},authorTag:{fontSize:13},content:{lineHeight:"21px"},commentTag:{fontSize:12,height:20,lineHeight:"16px",color:"GBK06A",marginTop:"6px"}},web:{username:{fontSize:15,color:"GBK03A"},authorTag:{fontSize:15},content:{lineHeight:"24px"},commentTag:{fontSize:14,height:24,lineHeight:"24px",color:"GBL05A",marginTop:"4px"}}};function $t(e){var t=e.name,n=e.nicknameColor,a=void 0===n?{}:n,o=e.showLevelInfo,r=e.isOrg,i=e.id,c=e.className,l=e.uaType,s=Object(bt.f)(),u=a.color,d=a.nightModeColor,f=Boolean(o&&u&&d&&!r),p=s.isDarkMode?d:u,h=s.isDarkMode?"#999999":"#1a1a1a",v=f?p:h,g="0"===i||""===i,O=g?m.Text:ft.b,j=Xt[l].username,y=j.fontSize,C=j.color;return Object(b.b)(O,Object.assign(Object.assign({},!g&&{href:"https://www.zhihu.com/".concat(r?"org":"people","/").concat(i),as:m.Text}),{},{color:v||C,fontSize:y,fontWeight:"bold",lineHeight:"16px",css:[{flex:"0 1 auto"},Object(bt.d)(1)],className:c,children:t}))}function en(e){var t=e.levelInfo,n=void 0===t?{}:t,a=n.level,o=n.iconInfo,r=o.url,i=o.nightModeUrl,c=Object(bt.f)().isDarkMode?i:r;return Object(b.b)("a",{href:"https://www.zhihu.com/level-detail",css:{marginLeft:6,height:16,display:"flex",alignItems:"center"},children:Object(b.b)(m.Image,{height:"14px",src:c,alt:"等级 ".concat(a)})})}var tn=["comment_gif","comment_img","comment_sticker"],nn=function(e,t){return e instanceof NodeList?Object(b.b)(b.a,{children:[].map.call(e,(function(e,n){return Object(b.b)(f.Fragment,{children:t(e,n)},n)}))}):t(e)},an={class:"className"},on=function(e,t){function n(e,t){return e.nodeType===Node.TEXT_NODE?e.nodeValue:e.nodeType===Node.ELEMENT_NODE?Object(f.createElement)("A"===e.nodeName&&t?ft.b:e.tagName.toLowerCase(),e.attributes?Array.from(e.attributes).reduce((function(e,t){return e[an[t.name]||t.name]=t.value,e}),{}):{},e.childNodes.length?nn(e.childNodes,n):null):null}return nn(e,(function(e){return t(e,(function(t){return n(e,t)}))}))},rn=function(e,t){return e.replace(/(\[[^[^\]]+\])/g,(function(e){var n=t.find((function(t){return t.placeholder===e}));return n?"<img src=".concat(n.static_image_url,' class="sticker" />'):e}))},cn=Object(f.memo)((function(e){return function(e){if("undefined"==typeof DOMParser)return Object(b.b)("div",{dangerouslySetInnerHTML:{__html:e}});var t=(new DOMParser).parseFromString(e,"text/html");return on(t.body.childNodes,(function(e,t){return e.nodeType===Node.ELEMENT_NODE?t(!0):e.textContent}))}(e.text)})),ln=function(e){var t=e.tagInfo,n=e.richText,a=e.responseLink,o=e.className,r=Object(jt.b)().isDarkMode;if(!t)return null;var i=t.text,c=t.color,l=t.nightColor,s=t.hasBorder,u=t.borderColor,d=t.borderNightColor,p=t.targetLink,h=p&&a,m=Object(f.useContext)(Dt).openInApp,v=Object(st.b)(),g=Object(tt.d)((function(e){h&&!v.ZhihuHybrid&&(e.preventDefault(),m())})),O=h?ft.b:"span";return Object(b.c)(O,Object.assign(Object.assign({css:function(e){return Object.assign(Object.assign(Object.assign({},s&&u&&Object(bt.c)({border:"1px solid ".concat(r?d:u),borderRadius:"4px"})),h&&{textDecoration:"none"}),{},{height:"14px",fontSize:"10px",lineHeight:"15px",boxSizing:"border-box",marginLeft:"4px",padding:"0 4px","& a":{color:e.colors.GBL01A,textDecoration:"none"}})},className:o,style:{color:r?l:c},onClick:g},Boolean(h)&&{href:p}),{},{children:[n?Object(b.b)(cn,{text:i}):i,Boolean(p)&&Object(b.b)(it.a,{css:function(e){return{fill:e.colors[c],marginRight:"-2px"}},center:!0,size:12})]}))},sn={answer:"回答",article:"文章",pin:"想法"},un=function(e){var t=e.vipInfo,n=t.vipIcon,a=(n=void 0===n?{}:n).url,o=t.isVip,r=Object(f.useContext)(Dt).resourceType;return Object(f.useEffect)((function(){E.a.trackCardShow(null,{id:3613,name:sn[r]})}),[r]),a&&o?Object(b.b)(ft.a,{shouldTrackShow:!0,zaType:"Image",zaBlock:"VIP",children:Object(b.b)(m.Flex,{as:"a",href:"https://www.zhihu.com/vip?entry_privileges_type=member_id",css:{marginLeft:"4px"},onClick:function(){E.a.trackEvent(null,{id:3612,action:"Click",name:sn[r]})},children:Object(b.b)(m.Image,{src:a,css:{height:"14px",width:"14px"}})})}):null},dn=function(e){var t=e.medalId,n=e.avatarUrl,a=e.userToken,o=e.medalName,r=Object(st.b)();return Object(pt.versionControl)(r,{IOS:"7.39",ANDROID:"7.39"})?Object(b.b)(m.Flex,{as:"button",onClick:function(e){e.preventDefault(),Object(nt.a)("base/openURL").dispatch({url:"zhihu://popup_container?"+new URLSearchParams({url:"https://www.zhihu.com/appview/v2/badge_center/detail?userToken=".concat(encodeURIComponent(a),"&badgeId=").concat(encodeURIComponent(t)),min_percent:"0.6",show_header:"false",cancelable:"true",enable_drag:"false",canchangeheight:"false"}).toString()})},css:{padding:0,marginLeft:"6px"},children:Object(b.b)(m.Image,{alt:o,css:{height:"14px",width:"14px"},src:n})}):null},bn=function(e){var t=e.showLevelInfo,n=void 0!==t&&t,a=e.authorTags,o=void 0===a?[]:a,r=e.className,i=e.user,c=e.uaType,l=e.badgeSize,s=void 0===l?14:l,u=i.name,d=i.vipInfo,f=i.levelInfo,p=i.badge,h=i.badgeV2,v=i.isOrg,g=i.id,O=i.exposedMedal,j=void 0===O?null:O,y=i.urlToken,C=j&&j.avatarUrl&&j.medalId&&y;return Object(b.c)(m.Flex,{css:{alignItems:"center",lineHeight:"16px"},className:r,children:[Object(b.b)($t,Object.assign(Object.assign({name:u},f),{},{isOrg:v,id:g,showLevelInfo:n,uaType:c})),n&&f&&Object(b.b)(en,{levelInfo:f}),o.map((function(e){return Object(b.b)(ln,{responseLink:!0,richText:!0,tagInfo:e},e.text)})),(null!=h?h:p)&&"hybrid"!==c&&Object(b.b)(dt.c,{size:s,badge:null!=h?h:p,css:{marginLeft:4}}),d&&Object(b.b)(un,{vipInfo:d}),C&&Object(b.b)(dn,Object.assign({userToken:y},j))]})},fn=function(e){var t=e.onClick,n=Object(bt.f)().colors,a=n.GBK04A,o=n.GBK99A;return Object(b.c)("span",{role:"button",tabIndex:0,css:{position:"absolute",right:0,bottom:0,paddingLeft:18,backgroundImage:"linear-gradient(90deg, ".concat(Object(bt.b)(o).alpha(0),", ").concat(o," 25%, ").concat(o,")"),display:"inline-block",color:a},onClick:t,children:["展开",Object(b.b)(ct.a,{center:!0,color:a,css:{height:21}})]})},pn=function(e){var t=e.comment,n=t.content,a=t.collapsed,o=t.isDeleted,r=t.id,i=e.emoticons,c=e.className,l=e.rootCommentId,s=e.unfoldable,u=e.uaType,d=!a&&!o,p=Object(f.useRef)(),h=Object(f.useRef)(),v=Object(f.useState)(!1),g=He()(v,2),O=g[0],j=g[1],y=Object(f.useState)(!1),C=He()(y,2),w=C[0],x=C[1],k=Object(f.useMemo)((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("undefined"==typeof DOMParser)return Object(b.b)("div",{dangerouslySetInnerHTML:{__html:e}});var n=rn(e,t),a=new DOMParser,o=a.parseFromString(n,"text/html");return on(o.body.childNodes,(function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.classList.contains("sticker")?t(!1):e.nodeType===Node.ELEMENT_NODE&&e.textContent.match("http")?t(!0):e.textContent}))}(n,null!=i?i:[])}),[n,i]),S=Xt[u].content.lineHeight;Object(f.useLayoutEffect)((function(){var e,t;s&&!w&&(null===(e=p.current)||void 0===e?void 0:e.clientHeight)<(null===(t=h.current)||void 0===t?void 0:t.clientHeight)&&j(!0)}),[p,h,j,w,s]);var A=Object(tt.d)((function(e){E.a.trackEvent(e.target,{id:1201,action:"OpenUrl",element_name:"Body"});var t,n=e.target;if(tn.some((function(e){return n.classList.contains(e)}))){var a=n.href;a&&(t=a,nt.a.dispatch("base/openImage",{images:[t],index:0})),e.preventDefault()}})),R=Object(tt.d)((function(e){e.stopPropagation(),x(!0)}));return Object(b.c)(Ht,{ref:p,innerRef:h,as:m.Box,onClick:A,fontSize:"15px",lineHeight:S,color:d?"GBK03A":"GBK07A",mt:"6px",css:Object.assign(Object.assign(Object.assign({position:"relative",overflowWrap:"break-word"},!w&&Object(bt.d)(2)),s&&!w&&{display:"block",overflow:"hidden",maxHeight:42}),{},{img:{width:"1.24em",height:"1.24em",marginBottom:"-0.25em"}}),className:c,zaType:"Card",query:{rootCommentId:l,anchorCommentId:r},children:[k,O&&!w&&Object(b.b)(fn,{onClick:R})]})},hn=function e(t){var n=function(e,t){return Object.keys(t).reduce((function(e,n){var a=e[n];if(delete e[n],a){var o=t[n],r="function"==typeof o?o(e):o;return Object.assign(Object.assign(Object.assign({},e),r),r&&r.style&&{style:Object.assign(Object.assign({},e.style),r.style)})}return e}),Object.assign({},e))}(t,e.mapProps),a=n.name,o=n.className,r=n.defaultClassName,i=n.size,c=n.center,l=Ye()(n,Et),s=Object(b.b)("svg",Object.assign(Object.assign({className:"".concat(r," ").concat(r,"--").concat(a).concat(o?" ".concat(o):"")},l),i&&{width:i,height:i}));return c?Object(b.c)("span",{style:e.strutStyle,children:["​",s]}):s};hn.defaultProps={defaultClassName:"Icon",fill:"currentColor"},hn.mapProps={text:{size:"1.2em"}},hn.strutStyle={display:"inline-flex",alignItems:"center"};var mn=function(e){return Object(b.b)(hn,Object.assign(Object.assign({viewBox:"0 0 24 24"},e),{},{children:Object(b.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3C16.9706 3 21 7.02944 21 12C21 12.9242 20.7842 14.037 20.3617 15.3551C20.2673 15.6497 20.2603 15.9655 20.3417 16.264L20.4506 16.64C21.073 18.8462 21.1396 20.1542 20.6504 20.5641C20.1634 20.972 18.8358 20.9294 16.6675 20.4363L16.264 20.3417C15.9655 20.2603 15.6497 20.2673 15.3551 20.3617C14.037 20.7842 12.9242 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3ZM12 4.61093C7.9191 4.61093 4.6109 7.91913 4.6109 12C4.6109 16.0809 7.9191 19.3891 12 19.3891C12.7277 19.3891 13.6797 19.2071 14.8633 18.8277C15.4548 18.6381 16.0886 18.6241 16.6417 18.7757C17.687 19.0279 18.5219 19.1739 19.1295 19.2169L19.248 19.2241L19.349 19.228L19.3449 19.1745C19.2933 18.6329 19.1303 17.872 18.846 16.8877L18.7875 16.6878C18.6241 16.0886 18.638 15.4548 18.8276 14.8633C19.2071 13.6797 19.389 12.7277 19.389 12C19.389 7.91913 16.0808 4.61093 12 4.61093Z"})}))};mn.defaultProps={name:"CommentLikeNormal"};var vn=function(e){return Object(b.b)(hn,Object.assign(Object.assign({viewBox:"0 0 43 41"},e),{},{children:Object(b.b)("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z"})}))};vn.defaultProps={name:"Star"};var gn=function(e){return Object(b.b)(hn,Object.assign(Object.assign({viewBox:"0 0 43 41"},e),{},{children:Object(b.c)("g",{fillRule:"evenodd",children:[Object(b.b)("path",{d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z",opacity:".2"}),Object(b.b)("path",{d:"M21.5.162v34.931c-.716.01-1.43.188-2.083.53L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165c.29-.59.872-.94 1.486-.965z"})]})}))};gn.defaultProps={name:"HalfStar"};var On=Xe()(Array(5)),jn=function(e){var t=e.score/2,n=Object(bt.f)().colors.GRD10A,a=Object(bt.b)(n).alpha(.2);return Object(b.b)(m.Flex,{flexDirection:"row",height:"20px",alignItems:"center",mt:"2px",children:On.map((function(e,o){var r=function(e,t){return e-t>=0?1:e-t<=-1?0:.5}(t,o+1);return.5===r?Object(b.b)(gn,{css:{marginRight:"2px"},color:n,size:12},"".concat(o,"-").concat(r)):Object(b.b)(vn,{css:{marginRight:"2px"},color:r?n:a,size:12},"".concat(o,"-").concat(r))}))})},yn=function(e){return Object(b.b)(hn,Object.assign(Object.assign({viewBox:"0 0 24 24"},e),{},{children:Object(b.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 4.07782C8.5 2.24411 10.4861 1.09899 12.0731 2.01775C13.7298 2.9769 14.663 4.82463 14.4516 6.72727L14.3379 7.74996H17.9194C20.4493 7.74996 22.2533 10.2038 21.4987 12.6185L19.6761 18.4508C19.1559 20.1155 17.5599 21.197 15.8279 21.0902C13.456 20.9438 9.78636 20.75 7 20.75H4.49936C3.53225 20.75 2.75 19.9658 2.75 19V9.49996C2.75 8.53346 3.5335 7.74996 4.5 7.74996H5.1371C6.55156 7.74996 7.81995 6.87883 8.32771 5.55864C8.4416 5.26254 8.5 4.94801 8.5 4.63076V4.07782ZM11.3215 3.31589C10.7346 2.97608 10 3.39961 10 4.07782V4.63076C10 5.13211 9.90771 5.62918 9.72773 6.09711C8.99716 7.99659 7.17222 9.24996 5.1371 9.24996H4.5C4.36193 9.24996 4.25 9.36189 4.25 9.49996V19C4.25 19.1386 4.36191 19.25 4.49936 19.25H7C9.83637 19.25 13.5459 19.4465 15.9203 19.593C16.9721 19.6579 17.9327 19.0008 18.2444 18.0034L20.067 12.1711C20.5198 10.7222 19.4374 9.24996 17.9194 9.24996H13.5C13.2867 9.24996 13.0834 9.15911 12.9412 9.00015C12.7989 8.84119 12.731 8.62916 12.7546 8.41713L12.9608 6.56162C13.1065 5.25035 12.4633 3.97693 11.3215 3.31589Z"})}))};yn.defaultProps={name:"CommentLikeNormal"};var Cn=function(e){return Object(b.b)(hn,Object.assign(Object.assign({viewBox:"0 0 24 24"},e),{},{children:Object(b.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 4.07782C8.5 2.24411 10.4861 1.09899 12.0731 2.01775C13.7298 2.9769 14.663 4.82463 14.4516 6.72727L14.3379 7.74996H17.9194C20.4493 7.74996 22.2533 10.2038 21.4987 12.6185L19.6761 18.4508C19.1559 20.1155 17.5599 21.197 15.8279 21.0902C13.456 20.9438 9.78636 20.75 7 20.75H4.49936C3.53225 20.75 2.75 19.9658 2.75 19V9.49996C2.75 8.53346 3.5335 7.74996 4.5 7.74996H5.1371C6.55156 7.74996 7.81995 6.87883 8.32771 5.55864C8.4416 5.26254 8.5 4.94801 8.5 4.63076V4.07782Z",fill:"#0066FF"})}))};Cn.defaultProps={name:"CommentLikeActive"};var wn=function(e){var t,n=e.comment,a=e.rootCommentId,o=n.likeCount,r=n.liked,i=Object(st.b)(),c=Object(f.useRef)(!1),l=Object(f.useContext)(Dt),s=l.dispatch,u=l.fetcher,d=l.authRequired,p=l.openInApp,h=r?Cn:yn,m=(t=Object(St.a)(kt),Object(f.useEffect)(t.mount,[]),t),v=Object(tt.d)(Ze()(Ke.a.mark((function e(){return Ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){nt.a.dispatch("iOS/hapticFeedback")}),300),e.next=3,m.start({scale:1.3,transition:{type:"tween",duration:.2,ease:[0,0,.58,1]}});case 3:return e.next=5,m.start({scale:1,transition:{type:"tween",duration:.3,ease:[.42,0,.2,1.8]}});case 5:case"end":return e.stop()}}),e)})))),g=Object(tt.d)(function(){var e=Ze()(Ke.a.mark((function e(t){var o;return Ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.ZhihuHybrid){e.next=3;break}return p(),e.abrupt("return");case 3:if(!c.current){e.next=5;break}return e.abrupt("return");case 5:return c.current=!0,E.a.trackEvent(t,{action:r?"UnUpvote":"Upvote",id:r?1444:1202}),"like"===(o=r?"dislike":"like")&&v(),e.prev=9,e.next=12,u("/api/v4/comment_v5/comment/".concat(n.id,"/reaction/").concat(o),{method:"PUT"});case 12:s({type:Vt,payload:{nextAction:o,id:n.id,rootCommentId:a}}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),nt.a.dispatch("ui/showToast",{icon:"fail",text:e.t0&&e.t0.toastMsg||"操作失败"});case 18:return e.prev=18,c.current=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[9,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()),O=i.ZhihuHybrid?"":"赞";return Object(b.c)(b.a,{children:[Object(b.b)(N.a,{zaType:"Button",zaAction:r?"UnUpvote":"Upvote",as:At.a.button,css:function(){return{marginLeft:"16px",display:"flex",alignItems:"center",justifyContent:"center",padding:0,color:"inherit",font:"inherit",background:"none",outline:"none",border:"none",appearance:"none"}},initial:{scale:1},animate:m,onClick:d(g),children:i.ZhihuHybrid?Object(b.b)(h,{size:20,css:function(e){return{fill:e.colors.GBK06A}}}):Object(b.b)(ot.a,{size:16,css:function(e){return{fill:e.colors.GBL05A}}})}),Object(b.b)("span",{css:function(e){return{marginLeft:"4px",color:e.colors[r?"GBL01A":"GBK06A"]}},children:o>0?Object(at.cnNiceNumber)(o):O})]})},xn=function(e){var t=e.comment,n=e.editStatus,a=e.rootCommentId,o=e.className,r=e.uaType,i=e.isSecondary,c=t.score,l=t.createdTime,s=t.contentTag,u=t.commentTag,d=t.canLike,p=t.resourceId,h=t.resourceType,v=Object(f.useContext)(Dt).showInteractions,g=Xt[r].commentTag,O=g.fontSize,j=g.color,y=g.height,C=g.lineHeight,w=g.marginTop,x="hybrid"===r;return Object(b.c)(m.Flex,{css:{flexDirection:"column"},className:o,children:[c>0&&Object(b.b)(jn,{score:c}),Object(b.b)(m.Flex,{flexDirection:"row",children:s.map((function(e){return Object(b.b)(ln,{richText:!0,tagInfo:e,css:{height:"auto",padding:0,fontSize:"11px",lineHeight:"16px",marginTop:"6px","&:first-of-type":{marginLeft:0}}},e.text)}))}),Object(b.c)(m.Flex,{fontSize:O,justifyContent:"space-between",alignItems:"center",height:y,lineHeight:C,mt:w,color:j,children:[Object(b.c)(m.Flex,{css:{flexShrink:0,alignItems:"baseline"},children:[Object(b.c)("span",{children:[Object(Rt.toSmartString)(l),Boolean(u.length)&&" · "]}),u.map((function(e){return Object(b.b)(ln,{tagInfo:e,css:{fontSize:O,paddingLeft:0,paddingRight:0}},e.text)}))]}),v&&Object(b.c)(m.Flex,{css:{flexShrink:0,alignItems:"center"},children:[Object(b.c)(Ht,{query:{openEditor:!0,anchorCommentId:t.id,rootCommentId:a,replyAuthorName:t.author.name,resourceId:p,resourceType:h},onClick:function(e){n&&!n.canReply&&n.toast&&(e.preventDefault(),Object(nt.a)("ui/showToast").dispatch({text:n.toast}))},children:[x?Object(b.b)(mn,{size:20,center:!0}):Object(b.b)(rt.a,{size:18,center:!0}),!x&&!i&&Object(b.b)("span",{css:function(e){return{marginLeft:"4px",color:e.colors.GBL05A}},children:"回复"})]}),(!x||d)&&Object(b.b)(wn,{comment:t,rootCommentId:a})]})]})]})},kn=function(e){var t=e.comment,n=e.emoticons,a=e.rootCommentId,o=e.uaType,r=t.author,i=t.authorTag,c=t.index,l=t.id,s=t.replyToAuthor,u=t.replyAuthorTag,d=Xt[o].authorTag.fontSize,f=Object(st.b)(),p=(null==f?void 0:f.ZhihuHybrid)||(null==f?void 0:f.Zhihu);return Object(b.b)(m.Flex,{css:{flexDirection:"column"},children:Object(b.b)(N.b,{content:{type:"Comment",id:t.id},children:Object(b.b)(Wt,{module:"CommentItem",index:c,card:{content:{type:"Comment",id:l}},view:{id:1199},trackCardShow:!0,children:Object(b.c)(N.e,{as:m.Flex,zaType:"Card",css:{marginTop:"4px"},children:[Object(b.b)(zt,{user:r,css:{width:"24px",height:"24px"},badgeSize:13,isHybrid:p}),Object(b.c)(m.Flex,{css:{flex:1,flexDirection:"column",marginLeft:"8px"},children:[Object(b.c)("div",{css:function(e){return{display:"flex",fontSize:d,color:e.colors.GBK03A,alignItems:"center",fontWeight:"bold",lineHeight:"16px"}},children:[Object(b.b)("div",{children:r.name}),i.map((function(e){return Object(b.b)(ln,{tagInfo:e,css:{fontWeight:"normal"}},e.text)})),s&&Object(b.c)(b.a,{children:[Object(b.b)(it.a,{size:12,center:!0,css:function(e){return{marginRight:"4px",fill:e.colors.GBK06A}}}),Object(b.b)("div",{children:s.name}),u.map((function(e){return Object(b.b)(ln,{tagInfo:e},e.text)}))]})]}),Object(b.b)(pn,{comment:t,emoticons:n,rootCommentId:a,uaType:o,css:function(e){return{marginTop:"4px",color:e.colors.GBK04A}}}),Object(b.b)(xn,{comment:t,rootCommentId:a,css:{marginTop:"-4px"},uaType:o,isSecondary:!0})]})]})})})})},Sn=function(e){var t=e.id,n=e.count,a=e.offsetLeft,o=Object(bt.f)().colors;return n?Object(b.c)(Ht,{as:m.Text,css:{display:"flex",justifyContent:"flex-start",marginTop:"8px",marginLeft:a},innerStyle:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",fontSize:"12px",height:"28px",background:o.GBK10A,color:o.GBK03A,padding:"0 10px 0 16px",borderRadius:"14px"},query:{rootCommentId:t},children:[Object(b.c)("span",{children:["查看全部"," ".concat(Object(at.cnNiceNumber)(n)),"条回复"]}),Object(b.b)(lt.a,{center:!0,size:18,css:function(e){return{fill:e.colors.GBK03A}}})]}):null},An=function(e){var t=e.comments,n=e.count,a=e.emoticons,o=e.rootCommentId,r=e.uaType,i=Object(f.useContext)(Dt),c=i.showLevelInfo,l=i.showSecondaryComment,s=i.showSecondaryCommentButton;return!l&&!s||0===t.length?null:Object(b.c)(m.Flex,{css:{borderRadius:"8px",flexDirection:"column",marginTop:"6px",marginLeft:"40px"},children:[l&&t.map((function(e,t){return Object(b.b)(N.b,{content:{type:"Comment",id:e.id},children:Object(b.b)(Wt,{module:"CommentItem",content:{type:"Comment",id:e.id},index:t,view:{id:1199},trackCardShow:!0,children:Object(b.b)(kn,{comment:e,showLevelInfo:c,emoticons:a,rootCommentId:o,uaType:r})})},e.id)})),s&&Object(b.b)(Sn,{id:o,count:n,offsetLeft:l?32:0})]})},Rn=function(e){var t=e.comment,n=e.editStatus,a=e.showLevelInfo,o=e.showInteractions,r=e.emoticons,i=t.author,c=t.authorTag,l=t.childComments,s=void 0===l?[]:l,u=t.childCommentCount,d=t.index,p=t.id,h=Object(st.b)(),v=(null==h?void 0:h.ZhihuHybrid)||(null==h?void 0:h.Zhihu),g=v?"hybrid":"web",O=Object(f.useContext)(Dt).commentUnfoldable;return Object(b.c)(m.Flex,{css:{flexDirection:"column"},children:[Object(b.b)(N.b,{content:{type:"Comment",id:t.id},children:Object(b.b)(Wt,{module:"CommentItem",index:d,card:{content:{type:"Comment",id:p}},view:{id:1199},trackCardShow:!0,children:Object(b.c)(N.e,{as:m.Flex,zaType:"Card",css:{marginTop:"16px"},children:[Object(b.b)(zt,{user:i,isHybrid:v}),Object(b.c)(m.Flex,{css:{flex:1,flexDirection:"column",marginLeft:"10px"},children:[Object(b.b)(bn,{user:i,showLevelInfo:a,authorTags:c,uaType:g}),Object(b.b)(pn,{unfoldable:O,comment:t,emoticons:r,uaType:g}),Object(b.b)(xn,{comment:t,editStatus:n,showInteractions:o,uaType:g})]})]})})}),Object(b.b)(An,{comments:s,count:u,emoticons:r,rootCommentId:p,uaType:g})]})},Tn=function(e){var t,n=e.className,a=e.showLevelInfo,o=e.showInteractions,r=e.resourceType,i=e.resourceId,c=e.currentUserId,l=void 0===c?"":c,s=e.showCommentInput,u=e.inputPlaceholder,d=e.customHeader,p=e.customFooter,h=e.customCommentClosed,v=e.onCommentChange,g=e.commentType,O=void 0===g?"abstract_comment":g,j=e.onLoad,y=e.onInputShowTips,C=Object(f.useState)([]),w=He()(C,2),x=w[0],k=w[1],S=Object(f.useContext)(Dt),A=S.fetcher,R=S.data,T=S.dispatch,I=Object(tt.j)(R),N=Object(tt.d)(v),B=Object(tt.d)((function(){A("/api/v4/comment_v5/".concat(r,"s/").concat(i,"/").concat(O)).then((function(e){return T({type:_t,payload:e})}))}));Object(f.useEffect)(B,[B]),Object(f.useEffect)((function(){var e=Object(nt.a)("base/onMessage").listen((function(e){var t=e.type,n=e.data;if("comment/listChange"===t){var a=n.status;n.resourceType===r&&String(n.resourceId)===String(i)&&(B(),N(a))}}));return function(){return e()}}),[]);var z=1===(null==R||null===(t=R.commentStatus)||void 0===t?void 0:t.type);if(Object(f.useEffect)((function(){z||Object(ut.loadScript)("https://unpkg.zhimg.com/@cfe/emoticon@1.2.3/lib/emoticon.js").then((function(){return window.zh_emoticon?window.zh_emoticon.reduce((function(e,t){var n;return[].concat(Xe()(e),Xe()(null!==(n=t.stickers)&&void 0!==n?n:[]))}),[]):[]})).then(k)}),[z]),Object(f.useEffect)((function(){!I&&R&&(null==j||j())}),[I,R,j]),!R)return null;var L=R.counts,P=(L=void 0===L?{}:L).totalCounts,M=R.data,D=void 0===M?[]:M,_=R.editStatus,V=R.commentStatus,U=void 0===V?{}:V;if(z)return h||null;var F=P>0?Object(at.cnNiceNumber)(P):"";return Object(b.c)(m.Flex,{className:n,css:{margin:"0 16px 40px",flexDirection:"column"},children:[d?d(F):Object(b.b)(m.Box,{color:"GBK02A",css:{fontSize:"15px",fontWeight:500,marginBottom:"16px"},children:"评论 ".concat(F)}),s&&Object(b.b)(Jt,{commentStatus:U,inputPlaceholder:u,emoticons:x,currentUserId:l,onInputShowTips:y}),D.map((function(e,t){return Object(b.b)(Rn,{comment:e,editStatus:_,showLevelInfo:a,showInteractions:o,emoticons:x,index:t},e.id)})),D.length>0&&Object(b.b)(Wt,{module:"CommentList",children:Object(b.b)(Ht,{as:m.Flex,css:function(e){return{marginTop:"20px",color:e.colors.GBK06A,fontSize:"13px",width:"100%",justifyContent:"center",lineHeight:"normal",alignItems:"center"}},onClick:function(e){return E.a.trackEvent(e.target,{id:1204,action:"OpenUrl",element_name:"ViewAll"})},children:p?p(F):Object(b.c)(b.a,{children:[Object(b.b)("span",{css:{height:"18px"},children:"查看全部评论"}),Object(b.b)(lt.a,{size:18,center:!0,css:function(e){return{color:e.colors.GBK06A,marginLeft:"4px"}}})]})})})]})};Tn.propTypes={className:g.a.string,showCommentInput:g.a.bool,showLevelInfo:g.a.bool.isRequired,showSecondaryComment:g.a.bool,showSecondaryCommentButton:g.a.bool,listHeight:g.a.number,maskTransparent:g.a.bool,commentUnfoldable:g.a.bool,resourceType:g.a.string.isRequired,resourceId:g.a.string.isRequired,currentUserId:g.a.string,inputPlaceholder:g.a.string,redirectUrl:g.a.string,customHeader:g.a.func,customFooter:g.a.func,onCommentChange:g.a.func,onLoad:g.a.func,onInputShowTips:g.a.func,commentType:g.a.string,showInteractions:g.a.bool},Tn.defaultProps={showLevelInfo:!1,showInteractions:!0,showCommentInput:!0,showSecondaryComment:!0,showSecondaryCommentButton:!0,commentUnfoldable:!1,onCommentChange:et.a};var In=Object(f.forwardRef)((function(e,t){return Object(b.b)(Ft,Object.assign(Object.assign({},e),{},{children:Object(b.b)(N.b,{block:"Comment",children:Object(b.b)(Tn,Object.assign(Object.assign({},e),{},{ref:t}))})}))})),En=n(488),Nn=n(1088),Bn=Object(w.withRouter)(Object(y.connect)(null,{loadComments:En.e})((function(e){var t=Object(f.useState)([]),n=Object(a.a)(t,2),o=n[0],r=n[1],i=e.parent,c=i.type,l=i.id,s=i.question,u=e.loadComments,d=e.location.pathname,p=-1!==(null==d?void 0:d.indexOf("answer")),h=-1!==(null==d?void 0:d.indexOf("question")),m=Object(y.useSelector)((function(e){return Object(ge.specialQuestionOrAnswerSelector)(e,{type:p?"answer":h?"question":"",id:l||(null==s?void 0:s.id)})}));if(Object(f.useEffect)((function(){u(c,l).then((function(e){var t=e.payload;r(t.data)}))}),[l,c,u]),null==o||!o.length)return null;var v=function(e,t){e&&e.stopPropagation(),"zvideo"===c?Object(ee.e)(Object(we.a)({type:c,id:l},{launch_button:t})):m?location.href="zhihu://".concat(c,"/").concat(l,"?utm_app_name=zhihu_check"):Object(ee.e)(Object(we.a)({type:c,id:l},{launch_button:t})),e.preventDefault()};return Object(b.b)("div",{className:"CommentsForOia",children:Object(b.b)(In,{css:{margin:0},showInteractions:!1,resourceType:c,resourceId:String(l),showCommentInput:!1,openInApp:function(e){return v(e,Nn.b.comment_list)},customHeader:function(){return null},customFooter:function(e){return e<=2?null:Object(b.b)(B.c,{color:"blue",preset:"primary",onClick:function(e){return v(e,Nn.b.comment_more)},children:"打开 App 查看更多评论"})}})})}))),zn=n(1415),Ln=n(1004),Pn=n(87),Mn=n(205),Dn=n(1280),_n=n.n(Dn),Vn=n(1395),Un=n.n(Vn),Fn=n(1606),qn=n.n(Fn),Hn=n(2219),Gn=n.n(Hn),Kn={answerAdmireCouldOpen:{image:Un.a,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:Un.a,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:Gn.a,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:Gn.a,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:qn.a,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:qn.a,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}};var Wn=function(e){var t=e.notification,n=void 0===t?{}:t,a=e.className,o=e.onRead,r=e.onUseAdmire,i=e.onUseRecommend,c=Object.keys(n).find((function(e){return n[e]})),l=Kn[c]||{},s=l.title,u=l.image,d=l.content,p=l.buttonText,h=l.buttonLink,m=l.detailViewName,v=l.cardShowId,g=l.buttonClickId,O=l.readAlwaysId,y=l.readNextId;return Object(f.useEffect)((function(){c&&E.a.trackCardShow(null,{id:v,name:m})}),[c,v,m]),Object(b.b)(Pn.b,{className:j()("CreatorRightsNotification",a),onClose:function(){o("next"),E.a.trackEvent(null,{id:y,name:m})},children:c&&Object(b.c)(f.Fragment,{children:[Object(b.b)("img",{className:"CreatorRightsNotification-background",src:_n.a,alt:"blue background"}),Object(b.b)("img",{className:"CreatorRightsNotification-liukanshan",src:u,alt:"liukanshan image"}),Object(b.b)("div",{className:"CreatorRightsNotification-title",children:s}),Object(b.b)("div",{className:"CreatorRightsNotification-content",children:d}),Object(b.c)(Pn.a,{className:"CreatorRightsNotification-buttonGroup",children:[h?Object(b.b)(Mn.a,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:h,target:"_blank",onClick:function(){o("current"),E.a.trackEvent(null,{id:g,name:m})},children:p}):Object(b.b)(B.c,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){o("current"),E.a.trackEvent(null,{id:g,name:m}),"answerAdmireCouldUse"===c&&r(),"recommendationCouldUse"===c&&i()},children:p}),Object(b.b)(B.c,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){o("always"),E.a.trackEvent(null,{id:O,name:m})},children:"不再提醒"})]})]})})},Zn=n(1105),Qn=n(1737),Yn=n(1212),Jn=n(900),Xn=n(944),$n=n(945),ea=n(938),ta=n(288),na=n(1635),aa=n(1707),oa=n(1462),ra=n(924),ia=n(1645),ca=n(290),la=n(1100),sa={up:1,neutral:0,down:-1};function ua(e){var t=e.id,n=e.voteupCount,a=e.voting,o=e.isOwner,r=e.answer,i=e.currentUser,c=e.disabled,l=Object(y.useDispatch)();Object(f.useEffect)((function(){!c&&i&&l(Object(ca.b)(["opposeRight"]))}),[c,i,l]);var s=Object(y.useSelector)((function(e){var t=e.entities.questions[r.question.id];return null==t?void 0:t.voteDownReason})),u=Object(y.useSelector)((function(e){return Object(ca.d)(e)})),d=Object(f.useCallback)((function(e){l(Object(le.L)(r.id,sa[e],{zVideoId:t}))}),[t,l,r.id]);return Object(b.b)(la.a,{type:"zvideo",isShowVoteDownMenu:Boolean(!c&&i)&&u,count:n,voting:a,onVote:d,isOwner:o,voteDownReason:s,onLoadVoteDownReason:function(){l(Object(le.k)(r.id,r.question.id))},onSelectVoteDownReason:function(e){l(Object(le.D)(r.id,e.reasonId)).then((function(e){l(Object(me.h)(e.payload.message))}))},onSetVoteDownReason:function(e){l(Object(ca.e)(e))}})}var da=n(955);function ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var fa=function(e){Object(l.a)(n,e);var t=ba(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.activateReward;return Object(b.c)("div",{className:"Reward",children:[Object(b.b)("button",{className:"Reward-activateBtn",onClick:e,children:"开启赞赏"}),Object(b.b)("div",{className:"Reward-activateHint",children:"赞赏开启后，读者将可以付费支持你的创作。"})]})}}]),n}(f.Component);function pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}fa.propTypes={activateReward:g.a.func};var ha=function(e){Object(l.a)(n,e);var t=pa(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.totalMoney,n=e.showRewarders;return Object(b.b)("div",{children:Boolean(t)&&Object(b.b)("div",{className:"Reward-money",children:Object(b.c)("span",{onClick:n,role:"button",tabIndex:0,children:["¥ ",t.toFixed(2)]})})})}}]),n}(f.Component);ha.propTypes={totalMoney:g.a.number,showRewarders:g.a.func};var ma=n(1322);function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var ga=function(e){Object(l.a)(n,e);var t=va(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,a=e.items,o=e.voteupCount,r=e.isRewardList,i=e.onClose,c=e.notice;return Object(b.b)(V.b,{size:"fullPage",onClose:i,children:t&&Object(b.b)(ma.a,{items:a,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:o,onLoad:n,isRewardList:r,notice:c,type:"rewardPeople"})})}}]),n}(f.Component);function Oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}ga.propTypes={onLoad:g.a.func,modalShown:g.a.bool};var ja=function(e){Object(l.a)(n,e);var t=Oa(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hoverName:""},e.hoverUser=function(t){e.setState({hoverName:t.target.dataset.name})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,a=t.handleListShown,o=t.rewardMemberCount,r=t.onUserClick,i=this.state.hoverName,c=n.slice(0,5);return Object(b.c)("div",{className:"Reward-count",children:[Object(b.b)("p",{className:"Reward-User-text",onClick:a,children:"".concat(Object(at.formatNumber)(o)," 人已赞赏")}),Object(b.c)("div",{children:[c.map((function(t,n){return Object(b.b)(w.Link,{to:"//www.zhihu.com/".concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:r,children:Object(b.b)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"})},n)})),o>6&&Object(b.c)("span",{className:"Reward-MoreUser",onClick:a,children:[Object(b.b)("i",{}),Object(b.b)("i",{}),Object(b.b)("i",{})]})]})]})}}]),n}(f.Component);ja.propTypes={users:g.a.array,handleListShown:g.a.func,rewardMemberCount:g.a.number,onUserClick:g.a.func},ja.defaultProps={users:[]};var ya=Object(ne.b)({module:"UserList",moduleName:"*** 人已赞赏"})(ja);function Ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var wa=function(e){Object(l.a)(n,e);var t=Ca(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,a=e.isAuthor,o=e.users,r=e.onUserClick;return t?Object(b.b)(ya,{users:o,onUserClick:r,handleListShown:n,rewardMemberCount:t}):Object(b.b)("div",{className:"Reward-countZero",children:a?null:"还没有人赞赏，快来当第一个赞赏的人吧！"})}}]),n}(f.Component);function xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}wa.propTypes={rewardMemberCount:g.a.number,handleListShown:g.a.func,isAuthor:g.a.bool,users:g.a.array,onUserClick:g.a.func};var ka=function(e){Object(l.a)(n,e);var t=xa(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return Object(b.c)("div",{children:[Object(b.b)("div",{className:"Reward-tagline",children:t||ae.p}),Object(b.b)("button",{className:"Reward-rewardBtn",onClick:n,children:"赞赏"})]})}}]),n}(f.Component);function Sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}ka.propTypes={onClick:g.a.func,tagline:g.a.string};var Aa=function(){return n.e(72).then(n.bind(null,2853)).then((function(e){return e.TipjarDialog}))},Ra=function(e){Object(l.a)(n,e);var t=Sa(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={TipjarRender:!1,modalShown:!1},e.onSubmitReward=function(t){D.a.set("isRewardable",!0),e.updateReward(t)},e.onPaySuccess=function(){var t=e.props,n=t.reward,a=t.currentUser,o=t.id,r=t.type,i=n[r][o].users,c=[a];Array.isArray(i)&&(i.push(a),c=i),e.props.onRewardSuccess(c,o,r),e.colseTijarDialog(),e.props.showNotification("你已赞赏成功！")},e.onLoad=function(t){"article"===e.props.type?"normal"===t?e.onLoadArticleRewardUser():e.onLoadArticleRewardUserDetails():e.onLoadRewardUser()},e.onLoadArticleRewardUser=function(){var t=e.props.id;e.props.getArticleRewardUser(t)},e.onLoadArticleRewardUserDetails=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getPagingArticleRewardUserDetails(n):e.props.getPagingArticleRewardUser(n)},e.onLoadRewardUser=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getRewardUserDetails(e.props.id):e.props.getRewardUser(n).then((function(t){var n=t.payload.data;if(n.length>0){var a={};n.forEach((function(e){a[e.urlToken]=e})),e.props.updateEntitiesUsers(a)}}))},e.handleListShown=function(t){var n=e.props.onRewardUserMoreClick;n&&n(t),e.setState({modalShown:!0})},e.handleListHide=function(){e.setState({modalShown:!1})},e.updateReward=function(t){var n=e.props,a=n.type,o=n.id,r=n.rewardInfo.canOpenReward;if("article"===a){var i=!!r||void 0;e.props.updateArticleReward(o,t,i)}else e.props.updateAnswerReward(o,t)},e.activateReward=function(){e.onSubmitReward(ae.p)},e.showRewarders=function(){e.setState({modalShown:!0})},e.addReward=e.context.authRequired((function(t,n){var a=e.props,o=a.id;"article"===a.type?e.props.createArticleTipjar(o,t):e.props.createTipjar(o,t,n)}),void 0,me.b),e.handleRewardButtonClick=function(t){var n=e.props.onRewardButtonClick;n&&n(t),e.setState({TipjarRender:!0})},e.colseTijarDialog=function(){e.setState({TipjarRender:!1})},e.removeTradeNumber=function(){var t=e.props,n=t.id,a=t.type;e.props.removeTradeNumber(n,a)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.isAuthor,a=e.isMobile,o=e.id,r=e.reward,i=e.author,c=e.type,l=e.ua,s=e.rewardInfo,u=s.canOpenReward,d=s.isRewardable,f=s.tagline,p=s.rewardTotalMoney,h=s.rewardMemberCount,m=e.onRewardUserClick,v=e.balanceEnable;if(n&&t&&"organization"===t.userType)return null;var g=this.state,O=g.TipjarRender,j=g.modalShown;if(n&&u)return Object(b.b)("div",{children:Object(b.b)(fa,{activateReward:this.activateReward})});if(d){var y=r&&r[c][o]||{},C=y.tradeNumber,w=y.users,x=y.notice,k=Object(b.b)(ga,{modalShown:j,items:w,voteupCount:h,onLoad:this.onLoad,isRewardList:n,notice:x,onClose:this.handleListHide}),S=Object(b.b)(wa,{rewardMemberCount:h,handleListShown:this.handleListShown,onUserClick:m,users:w,isAuthor:n});if(!n)return Object(b.c)("div",{className:"Reward",children:[Object(b.b)(ka,{tagline:f,onClick:this.handleRewardButtonClick}),S,k,Object(b.b)(_.a,{getComponent:Aa,author:i,tagline:f,isMobile:a,ua:l,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:C,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:O,type:c,balanceEnable:v})]});var A=(Number(p)||0)/100;return Object(b.c)("div",{className:"Reward",children:[Object(b.b)(ha,{tagline:f,totalMoney:A,showRewarders:this.showRewarders}),k,S]})}return null}}]),n}(f.Component);Ra.propTypes={reward:g.a.object,isAuthor:g.a.bool,author:g.a.object,id:g.a.number,rewardInfo:g.a.object,currentUser:g.a.object,ua:g.a.object,type:g.a.string,isMobile:g.a.bool,balanceEnable:g.a.bool,onRewardButtonClick:g.a.func,onRewardUserClick:g.a.func,onRewardUserMoreClick:g.a.func},Ra.contextTypes={authRequired:g.a.func},Ra.defaultProps={rewardInfo:{},type:"answer",balanceEnable:!0};var Ta=Object(h.compose)(Object(y.connect)(null,{updateAnswerReward:le.I,updateArticleReward:ve.l,createArticleTipjar:ve.b,getRewardUserDetails:ve.i,getPagingArticleRewardUser:ve.f,getPagingArticleRewardUserDetails:ve.g,getArticleRewardUser:ve.e,updateEntitiesUsers:ve.m,getRewardUser:ve.h,createTipjar:ve.c,removeTradeNumber:ve.k,onRewardSuccess:ve.j,showNotification:me.h}))(Ra),Ia=n(946),Ea=n(26),Na=function(e){return p.a.createElement(Ea.a,e,p.a.createElement("path",{d:"M16.387 10.869l-3.188-4.27A1 1 0 1 1 14.8 5.401l4.92 6.59-4.883 7.491a1 1 0 1 1-1.676-1.092l3.6-5.522H7a3 3 0 0 1-3-3V7a1 1 0 1 1 2 0v2.869a1 1 0 0 0 1 1h9.387z"}))};Na.defaultProps={name:"Jump"};var Ba=Na;var za=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var a=n.tail,o=a.url,r=a.message;return Object(b.c)("a",{className:j()("CommercialQuestionTail",t),href:o,children:[r,Object(b.b)(Ba,{className:"CommercialQuestionTail-Icon",center:!0,text:!0})]})},La=n(1136),Pa=n(1214),Ma=n(39),Da=n.n(Ma),_a=n(933),Va=n.n(_a),Ua=n(186),Fa=n.n(Ua),qa=n(1012),Ha=n(1014),Ga=n(1050),Ka=n(905);function Wa(e,t){return e.length<=t?e:"".concat(e.substring(0,t),"...")}function Za(e){var t=e.logoUrl,n=e.productName,a=e.productDesc,o=e.link,r=void 0===o?"":o,i=e.btnText,c=void 0===i?"":i,l=e.className,s=void 0===l?"":l,u=e.productNameMaxLength,d=void 0===u?6:u,b=e.productDescMaxLength,f=void 0===b?15:b,h=e.btnTextMaxLength,m=void 0===h?4:h,v=e.type,g="".concat("pc"===v?"pc":"app","_EAnswerCard");return p.a.createElement("a",{ref:e.cardRef,onClick:e.onClick,href:r,target:"_blank",className:j()("".concat(g),s)},p.a.createElement(N.e,{zaType:"Card",zaBlock:"advertPluginCard"}),p.a.createElement("img",{src:t,className:"".concat(g,"-image"),alt:"logo"}),p.a.createElement("div",{className:"".concat(g,"-content")},p.a.createElement("div",{className:j()("".concat(g,"-content-appName")),style:{WebkitBoxOrient:"vertical",maxWidth:"".concat(d+1,"em")}},Wa(n,d)),a&&p.a.createElement("div",{className:"".concat(g,"-content-desc"),style:{maxWidth:"".concat(f+1,"em")}},Wa(a,f))),p.a.createElement("div",{className:"".concat(g,"-button"),style:{maxWidth:"".concat(m+1,"em")},onClick:e.onBtnClick},Wa(c,m)),"app"===v&&p.a.createElement("div",{className:"app_EAnswerCard-bottom-close",onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),t.onClose()}(t,e)}},"×"))}var Qa=n(1075),Ya=function(e){function t(e){var n;return ze()(this,t),(n=Ve()(this,Fe()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,E.a.trackCardShow(e,{id:5642}),Object(qa.h)(e,{trackMethod:qa.i,tracks:t}))},n.addDSCListener=function(){try{var e=n.props.data.pluginType;if(/^android/i.test(e)){n.appPromotionUrl=null,n.downloadInfo=null,n.landingUrl=Object(Ka.e)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".landingUrl"),"");var t=Object(Ka.e)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".downloadInfo"),"{}"),a=Object(Ka.e)(JSON.parse(t.adjson||"{}"),"ads[0].creatives[0].asset.app_promotion_url","");a&&(Qa.a({app_promotion_url:n.appPromotionUrl},"ad/getDownloadStatus").then((function(e){var t=e.status,a=e.data;t||console.log("下载插件 ad/getDownloadStatus 调用失败！"),n.setState({status:a.status})})).catch(console.log),n.appPromotionUrl||nt.a.listen("ad/downloadStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,a=void 0===t?"error":t;n.setState({status:a})}))),n.appPromotionUrl=a,n.downloadInfo=t}}catch(e){console.log(e)}},n.onBtnClick=function(e){"pc"!==Object(Ka.h)().os&&n.appPromotionUrl&&n.downloadInfo&&(e.stopPropagation(),e.preventDefault(),n.sendClickTrack(),Qa.a(n.downloadInfo,"ad/downloadApk"))},n.sendClickTrack=function(){E.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(qa.a)({trackMethod:qa.i,tracks:n.track.click})},n.handleClick=function(e){e.stopPropagation(),n.sendClickTrack(),"pc"!==Object(Ka.h)().os&&n.landingUrl&&n.downloadInfo&&(e.preventDefault(),Qa.a(n.downloadInfo,"ad/open"))},n.sessionId=Fa()(),n.init(e),n.viewShow=!1,n.state={status:"ready"},n}return De()(t,e),Pe()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,a=t.suger,o=void 0===a?"":a,r=(n[t.pluginType]||{}).trackUrl,i=void 0===r?{}:r,c=Object(Ka.h)(),l={xSuger:o,sessionId:this.sessionId,os:c.os,cardType:"".concat(c.os,"_download")};this.track=Object(Ka.u)(i,l)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(Ka.h)();E.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_download")}),e&&this.onceViewTrack(this.card,this.track.view),this.addDSCListener()}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,a=void 0===n?{}:n,o=t.plugin,r=t.className,i=void 0===r?"":r,c=t.pluginType,l=(o[c]||{}).plugin,s=(void 0===l?{}:l)[c],u=Object(Ka.h)(),d=this.state.status,b=void 0===d?"ready":d,f={className:i,type:"pc"===u.os?"pc":"app",btnText:s.interaction||"立即下载",onClick:this.handleClick,productNameMaxLength:13,productDescMaxLength:15,btnTextMaxLength:4,onClose:this.props.onClose};return/^ios/i.test(c)?(f.logoUrl=s.icon,f.productName=s.name,s.score>0&&(f.productDesc="Appstore 评分：".concat(s.score)),f.link=s.landingUrl):/^android/i.test(c)&&(f.logoUrl=s.icon||a.avatarUrl||"",f.productName=s.name,f.link=s.landingUrl,f.onBtnClick=this.onBtnClick,Ga.d[b]&&(f.btnText=Ga.d[b])),f.link?p.a.createElement(N.c,Da()({as:Za,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},f)):null}}]),t}(p.a.Component);Ya.propTypes={data:g.a.object.isRequired};var Ja=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?p.a.createElement(Ha.a,null,p.a.createElement(Ya,e)):null},Xa=function(e){function t(e){var n;return ze()(this,t),(n=Ve()(this,Fe()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,E.a.trackCardShow(n.card,{id:5642}),Object(qa.h)(e,{trackMethod:qa.i,tracks:t}))},n.handleClick=function(e){e.stopPropagation(),E.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object(qa.a)({trackMethod:qa.i,tracks:n.track.click});var t=Object(Ka.e)(n.props.data,"plugin.leads.plugin.leads",{}),a=n.props.data,o=a.contentType,r=a.contentToken;t.isCanvas&&(e.preventDefault(),t.creativeId=Object(Ka.g)(),Qa.a(t,"ad/openForm"));var i=t.cardType,c=t.hashId;if("message"===i){e.preventDefault();var l={inbox_id:c,initial_message:"",auto_focus:!0,title:"",source_type:o,source_id:r};Qa.a(l,"base/openInbox")}},n.isHiddenEcommerceAd=function(e){return!(!e.isCanvas||e.adjson)||!(e.isCanvas||e.token||e.landingUrl)},n.sessionId=Fa()(),n.init(e),n.viewShow=!1,n}return De()(t,e),Pe()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,a=t.suger,o=void 0===a?"":a,r=t.pluginType,i=Object(Ka.e)(e.data,"plugin.leads.plugin.leads",{}).cardType,c=(n[r]||{}).trackUrl,l=void 0===c?{}:c,s=Object(Ka.h)().os,u={xSuger:o,sessionId:this.sessionId,os:s,cardType:i};this.track=Object(Ka.u)(l,u)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(Ka.h)();E.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_leads")}),e&&this.onceViewTrack(this.card,this.track.view);var n=Object(Ka.e)(this.props.data,"plugin.leads.plugin.leads",{}),a=n.isCanvas,o=n.adjson;a&&Qa.a({adjson:o},"ad/preload")}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,a=void 0===n?{}:n,o=t.plugin,r=void 0===o?{}:o,i=t.className,c=void 0===i?"":i,l=t.pluginType,s=Object(Ka.e)(r,"".concat(l,".plugin.").concat(l),{});return this.isHiddenEcommerceAd(s)?null:p.a.createElement(N.c,Da()({as:Za,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},{className:c,type:"app",logoUrl:a.avatarUrl,productName:a.name,productNameMaxLength:13,productDesc:s.desc,productDescMaxLength:15,link:s.landingUrl||"javascript:",btnText:s.interaction||"立即咨询",btnTextMaxLength:4,onClick:this.handleClick,onClose:this.props.onClose}))}}]),t}(p.a.Component);Xa.propTypes={data:g.a.object.isRequired};var $a=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?p.a.createElement(Ha.a,null,p.a.createElement(Xa,e)):null},eo=function(e){function t(){var e,n;ze()(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Ve()(this,(e=Fe()(t)).call.apply(e,[this].concat(o)))).state={display:!1},n.onClose=function(){n.setState({display:!0})},n.getContent=function(e){var t=e.data;if(!t||!t.plugin)return null;var a=(t=Object(Ka.b)(Object(de.camelizeKeys)(t))).plugin,o=Object(Ka.h)();if(a.androidDownload||a.iosDownload){var r="".concat(o.os,"Download");if("pc"===o.os)r=("mac"===o.pc?["iosDownload","androidDownload"]:["androidDownload","iosDownload"]).find((function(e){return a[e]}))||"";return p.a.createElement(Ja,Da()({},e,{data:Va()({},t,{pluginType:r}),onClose:n.onClose}))}return a.leads&&"pc"!==o.os?p.a.createElement($a,Da()({},e,{data:Va()({},t,{pluginType:"leads"}),onClose:n.onClose})):null},n}return De()(t,e),Pe()(t,[{key:"render",value:function(){var e=this.props.data,t=this.state.display;return e&&e.plugin&&!t?p.a.createElement(p.a.Fragment,null,this.getContent({data:e})):null}}]),t}(p.a.Component),to=n(419),no=n(585);function ao(e){var t=e.loadBrandContentPlugin,n=e.contentType,a=e.contentToken,o=e.author,r=e.plugin,i=Object(f.useCallback)((function(){t(n,a)}),[n,a,t]),c="organization"===o.userType&&!r;if(Object(f.useEffect)((function(){c&&i()}),[c,i]),!r)return null;var l={contentType:n,contentToken:a,suger:{},author:o,plugin:r,visible:!0};return Object(b.b)("div",{className:"OrgEquityPlugin",children:Object(b.b)(eo,{data:l})})}ao.propTypes={contentType:g.a.oneOf(["answer","article"]).isRequired,contentToken:g.a.oneOfType([g.a.number,g.a.string]).isRequired,author:g.a.object.isRequired};var oo=Object(h.compose)(Object(to.a)(null),Object(y.connect)((function(e,t){var n=t.contentType,a=t.contentToken;return{plugin:Object(no.c)(e,{contentType:n,contentToken:a})}}),{loadBrandContentPlugin:no.b}))(ao),ro=n(1289),io=n(1128),co=n(1318),lo=[{title:"知乎",imageSrc:"https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png",description:"发现更大的世界",button:"打开"},{title:"浏览器",imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",description:"",button:"继续"}],so={uc:{imageSrc:"https://pic4.zhimg.com/80/v2-eb129ee601fe0521fbc05703a615ddd5_1440w.png",title:"UC 浏览器"},qq:{imageSrc:"https://pic1.zhimg.com/80/v2-211dd15e1000c599f5b89ecf4e1eb3b6_1440w.png",title:"QQ 浏览器"},wx:{imageSrc:"https://pic1.zhimg.com/80/v2-05fe05b84411fc88790189e95d7e84aa_1440w.png",title:"微信"},huawei:{imageSrc:"https://pic1.zhimg.com/80/v2-88a3ad0d3764917daaf92f5133a7024d_1440w.jpeg",title:"华为浏览器"},safari:{imageSrc:"https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png",title:"Safari"},chrome:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"Chrome"},default:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"浏览器"}},uo=function(e){var t=e.show,n=e.onCancel,a=e.onSubmit,o=e.id,r=e.type,i=Object(st.b)(),c=i.origin.toLowerCase(),l=i.Android?so.chrome.imageSrc:so.safari.imageSrc,s=D.a.get("question:firstCheckedTrue");Object(f.useEffect)((function(){s&&t&&!i.Wechat&&(location.href="zhihu://".concat(r,"/").concat(o))}),[s,t,r,o,i.Wechat]);var u="";return u=i.UC?"uc":i.Wechat?"wx":i.MQQBrowser?"qq":/huawei|honor/g.test(c)?"huawei":/chrome/g.test(c)||/crios/g.test(c)?"chrome":i.Safari?"safari":"default",lo[1].title=so[u].title,lo[1].imageSrc="default"===u?l:so[u].imageSrc,Object(b.c)(co.a,{className:"ModalWrap",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:[t&&Object(b.b)(io.a,{className:"ModalWrap-body"}),Object(b.c)("div",{className:"ModalWrap-content",children:[Object(b.b)("div",{className:"ModalWrap-title",children:"继续浏览内容"}),lo.map((function(e,t){return Object(b.c)("div",{className:"ModalWrap-item",children:[e.imageSrc&&Object(b.b)("div",{className:"ModalWrap-itemImg",children:Object(b.b)("img",{src:e.imageSrc,alt:""})}),Object(b.c)("div",{className:"ModalWrap-itemContent",children:[Object(b.b)("div",{className:"ModalWrap-itemTitle",children:e.title}),e.description&&Object(b.b)("div",{className:"ModalWrap-itemDesc",children:e.description})]}),Object(b.b)("div",{className:"ModalWrap-itemBtn",role:"button",tabIndex:0,onClick:function(){return function(e){0===e?(D.a.set("question:firstCheckedTrue","true"),a()):n()}(t)},children:e.button})]},t)}))]})]})},bo=function(e){var t=e.show,n=e.onCancel,a=e.onSubmit,o=Object(N.i)().trackEvent;return Object(b.b)(co.a,{className:"SkipModal",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:t&&Object(b.c)(N.e,{zaType:"Block",zaBlock:"expandBlockModal",zaText:"展开阅读全文弹窗",children:[Object(b.b)("div",{className:"title",children:"即将打开“知乎App”继续阅读"}),Object(b.c)("div",{className:"button_container",children:[Object(b.b)(B.c,{preset:"plain",onClick:function(){o({eventType:"Click",block:"expandModal_cancel",elementLocation:{type:"Button"}}),n()},children:"取消"}),Object(b.b)(B.c,{preset:"primary",onClick:function(){o({eventType:"Click",action:"OpenUrl",block:"expandModal_open",elementLocation:{type:"Button"}}),a()},children:"打开App"})]})]})})},fo=n(478),po=n(995),ho=function(e){var t=e.show,n=e.children,a=e.className,o=Object(f.useRef)();return Object(f.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(fo.a)(o.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),Object(b.b)("div",{className:a,children:Object(b.c)("div",{ref:o,children:[Object(b.b)("div",{className:j()({"ModalLoading-background":t})}),Object(b.c)("div",{className:j()("ModalLoading-content",{"ModalLoading-modalShow":t}),children:[n,Object(b.b)(po.a,{})]})]})})},mo=n(1478),vo=n(1313);function go(e){var t=e.questionId,n=e.title,a=e.href,o=e.zaTitleId,r=e.showStickyMark,i=e.showHeightLight,c=e.onClick;return Object(b.c)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(b.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(t)}),Object(b.b)("meta",{itemProp:"name",content:n}),r&&Object(b.b)(vo.a,{}),Object(b.b)(w.Link,Object.assign(Object.assign({to:a,target:"_blank","data-za-detail-view-element_name":"Title"},o&&{"data-za-detail-view-id":o}),{},{onClick:c,children:i?Object(b.b)("span",{dangerouslySetInnerHTML:{__html:n},className:"AnswerItem-highlight"}):n}))]})}go.propTypes={questionId:g.a.number.isRequired,title:g.a.string.isRequired,href:g.a.string.isRequired,zaTitleId:g.a.number,showStickyMark:g.a.bool,onClick:g.a.func};var Oo=n(33),jo=n(999),yo=n(1724);function Co(e){var t=e.markInfo,n=ae.H[t.markType];if(!n)return null;var a=t.roundtable&&"https://www.zhihu.com/roundtable/".concat(t.roundtable.urlToken);return a?Object(b.b)("a",{href:a,children:n}):Object(b.b)("span",{children:n})}var wo=["id","voteupCount","markInfos","actorToken","action","concernedUpvoters"];function xo(e){var t=e.markInfos,n=Object(f.useMemo)((function(){return t.filter((function(e){return ae.H[e.markType]})).map((function(e,t){return Object(b.c)(f.Fragment,{children:[0!==t&&"、",Object(b.b)(Co,{markInfo:e})]},t)}))}),[t]);return n.length?Object(b.c)(jo.CJKSpace,{children:["收录于",n]}):null}function ko(e){var t,n=e.id,a=e.voteupCount,o=e.markInfos,r=e.actorToken,i=e.action,c=e.concernedUpvoters,l=Object(Oo.default)(e,wo);return Object(b.b)(ne.a,{trackCardShow:!0,view:{id:8257},children:Object(b.c)(m.Text,Object.assign(Object.assign({color:"GBL05A",fontSize:14,mt:"16px"},l),{},{children:[o&&Object(b.c)(b.a,{children:[Object(b.b)(xo,{markInfos:o}),Boolean(a)&&" · "]}),Object(b.b)("span",{onClick:function(){return E.a.trackEvent(null,{id:8258,action:"Click"})},children:Object(b.b)(yo.a,{id:n,type:"answer",voteupCount:a,upvotedFollowees:null!==(t=null==c?void 0:c.filter((function(e){return r!==e.urlToken})))&&void 0!==t?t:[],too:"voted"===i})})]}))})}var So=n(1731),Ao=n(1414);var Ro=function(e){var t=e.shouldExpand,n=e.showPlayer,a=e.campaign,o=e.answer,r=e.videoAnswerData,i=e.meta,c=e.videoRef,l=e.alwaysShowVolumeButton,s=!e.hideCoCreationFeature&&Object(Te.isCoCreateRelation)(null==r?void 0:r.creationRelationship);return Object(b.c)(b.a,{children:[n&&Object(b.b)(So.a,Object.assign({itemId:o.id,itemType:o.type,videoRef:c,alwaysShowVolumeButton:l,shouldExpandState:t},r)),i,t&&Object(b.c)(m.Flex,{mt:"14px",children:[s&&Object(b.b)(Te.CoCreationLabel,{mr:"12px"}),Object(b.b)(Ao.a,{my:"0px"})]}),t&&a&&Object(b.b)(Pa.a,{item:Object.assign(Object.assign({},o),{},{campaign:a,collapseReason:null,type:"zvideo"})})]})},To=n(1704),Io=n(1738),Eo=n(1409),No=n(1183),Bo=n(1489),zo=n(1397),Lo=function(){return Object(b.c)("div",{className:"SelfVisibleLable-wrap",children:[Object(b.b)(zo.a,{className:"SelfVisibleLable-lockIcon",width:16,center:!0}),"仅自己可见"]})},Po=function(e){var t=e.answer,n=e.canCollapse,a=e.showReviewingLabel,o=t.collapsedBy,r=t.reviewInfo,i=(r=void 0===r?{}:r).isReviewing,c=r.tips,l=t.isVisible,s=t.relationship,u=(s=void 0===s?{}:s).isAuthor,d=t.visibleOnlyToAuthor;return u&&d?Object(b.b)(Lo,{}):i&&l?Object(b.b)("div",{className:"AnswerItem-status",children:c},"negativeLabels"):a&&!1===l&&u?Object(b.b)("div",{children:Object(b.b)(Bo.a,{})},"negativeLabelsReviewing"):"org"!==o||n?null:Object(b.c)("div",{className:"AnswerItem-status",children:["回答被提问机构移至隐藏区（",Object(b.b)("a",{href:"/org-intro#org-question",target:"_blank",children:"为什么？"}),"）"]},"negativeLabels")},Mo=function(e){var t=e.isNormal,n=void 0===t||t,a=e.collapsedBy,o=e.suggestEdit,r=e.collapseReason,i=e.isCollapsed,c=e.question,l=(c=void 0===c?{}:c).brand,s=(l=void 0===l?{}:l).isPuQuestion;return!n&&null!=o&&o.unnormalDetails?{abnormalDetailProps:{abnormalDetail:o.unnormalDetails}}:("community"===a||s)&&i?{collapseReasonProps:{collapseReason:r}}:null},Do=function(e){var t=e.answer,n=e.canCollapse,a=e.hideCommercialInviteLabel,o=t.collapsedBy,r=t.relevantInfo,i=(r=void 0===r?{}:r).relevantType,c=r.brandSpecialExtra;if(Object(le.m)(t)||Object(le.n)(t)||"org"===o&&!n){if("brand_special"===i&&!a)return{type:"answer",data:c};if("brand_best"===i)return{data:{name:"品牌精选",subText:"本回答由品牌设为精选"}}}return null},_o=function(e){var t=e.annotationDetail,n=e.reviewInfo,a=(n=void 0===n?{}:n).isReviewing,o=e.isNormal,r=void 0===o||o,i=e.collapsedBy;return!a&&r&&"community"!==i&&t?{annotationDetail:t}:null},Vo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,a=t.unescapable,o=e.labelInfo,r=e.hermesLabel;return Object(b.b)(f.Fragment,{children:!n&&!a&&Object(b.b)(La.a,{labelInfo:o||r})})};n(1650);function Uo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Fo=function(e){return"plain"===e||"special-plain"===e},qo=Fo,Ho=function(e){return"special-plain"===e},Go={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Ko=function(e){var t;if(e.videoAnswerData)return e;if(null!==(t=e.attachment)&&void 0!==t&&t.video){var n=e.attachment.video,a=n.title,o=n.subVideoId,r=n.parentVideoId,i=n.zvideoId,c={videoId:o,zvideoId:i,title:a,playCount:n.playCount,voteupCount:n.voteupCount,isComplete:!i||r===o,startTime:n.startTime,creationReferences:n.creationReferences};return Object.assign(Object.assign({},e),{},{videoAnswerData:c})}return e};function Wo(e){var t=Object(Eo.a)(e);return t?e.videoAnswerData&&"object"==typeof e.videoAnswerData?Object.assign(Object.assign({},e),{},{creationRelationship:t,videoAnswerData:Object.assign(Object.assign({},e.videoAnswerData),{},{creationRelationship:t})}):Object.assign(Object.assign({},e),{},{creationRelationship:t}):e}var Zo=["zhi-hu-ri-bao-51-41"],Qo=Object(C.createSelector)((function(e,t){return Object.assign(Object.assign({},t.answerFromProps?t.answer:e.entities.answers[t.answer.id]||t.answer),{},{videoAnswerData:t.answer.videoAnswerData})}),(function(e,t){return e.entities.questions[t.answer.question.id]}),(function(e,t){return t?Object.assign(Object.assign({},e),{},{question:Object.assign(Object.assign({},e.question),t)}):e})),Yo=function(e){Object(l.a)(n,e);var t=Uo(n);function n(){var e,a,i,l,s,u;Object(r.a)(this,n);for(var d=arguments.length,p=new Array(d),h=0;h<d;h++)p[h]=arguments[h];return(e=t.call.apply(t,[this].concat(p))).state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:e.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:e.props.expanded,hasFetchedLabels:!1,showWechatExpand:!1,skipModalShow:!1,autoExpand:!1,shownLoadingBar:!1,wxIsReady:!1},e.answerFormRef=Object(f.createRef)(),e.rewardContainerRef=Object(f.createRef)(),e.richContentRef=Object(f.createRef)(),e.zaRef=Object(f.createRef)(),e.loadEntityWords=k()((function(){var t=e.props,n=t.answer,a=(n=void 0===n?{}:n).id;(0,t.loadAnswerEntityWords)(a)})),e.handleLoadedNext=function(){e.setState({wxIsReady:!0}),e.state.shownLoadingBar&&e.createOpenInAppHandler(e.state.autoExpand?"expand_answer2":"expand_answer1")(),e.setState({shownLoadingBar:!1})},e.showOiaModal=function(){var t=e.props,n=t.blockReading,a=t.itemProp,o=t.isBaidu,r=t.shouldAllAutoExpand;("mainEntityOfPage"===a||"acceptedAnswer"===a)&&(document.referrer.includes("zhihu.com")&&r||!o&&!document.referrer.includes("sm.cn")&&n)&&e.setState({showWechatExpand:!0,autoExpand:!0})},e.onCloseReward=function(){var t=e.props.answer.id;D.a.set("isRewardable",!1),e.props.updateAnswerReward(t,"")},e.openModal=function(t,n){e.setState(Object.assign({},n))},e.openDeleteModal=function(){setTimeout((function(){e.setState({deleteModalShown:!0})}))},e.closeModal=function(){e.setState({commentsShown:!1});var t=e.props.onCloseComment;"function"==typeof t&&t()},e.closeDeleteModal=function(){e.setState({deleteModalShown:!1})},e.disableAuth=(a=e.props,i=a.router,l=(i=void 0===i?{}:i).location,s=(l=void 0===l?{}:l).pathname,u=a.isBaidu,a.isMobile&&!e.context.currentUser&&!u&&!s.startsWith("/topic")),e.loadAnswerConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,a=t.answer,o=t.loadAnswerConcernedVoters;!n&&e.context.currentUser&&o(a.id)},e.handleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.trackUserAction,o=void 0===a||a,r=e.props,i=r.onToggleExpand,c=r.trackPromotionClick;i&&i(t),t&&e.loadAnswerConcernedVoters(),o&&(e.zaRef.current.trackEvent({eventType:"Click",action:t?"Expand":"Collapse",elementLocation:{type:"Card",text:t?null:"收起"}}),t&&c&&c()),e.setState({contentExpanded:t})},e.handleReshipmentSettings=function(t){var n=e.props,a=n.answer.id,o=n.updateAnswerReshipmentSettings,r=n.fillCurrentUserIfNeeded;"need_payment"===t?Promise.resolve(r(["caEnabled"])).then((function(){e.props.currentUser.caEnabled?o(a,t):window.open("/copyright/invite")})):o(a,t)},e.handleLoadAnswerForSettings=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerForSettings)(n)},e.handleDeleteAnswer=function(){var t=e.props,n=t.answer.id;(0,t.deleteAnswer)(n)},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleCollapseModalShow=function(){e.setState({collapseModalShown:!0})},e.handleCollapseModalHide=function(){e.setState({collapseModalShown:!1})},e.handleUpdateAnswerCollapsed=function(){var t=e.props,n=t.answer,a=n.id,o=n.collapsedBy,r=t.updateAnswerCollapsed,i=t.showNotification;return"community"===o?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):r(a)},e.handleUpdateAnswerStick=function(){var t=e.props,n=t.answer.id;return(0,t.updateAnswerStick)(n)},e.handleRestoreAnswer=function(){var t=e.props,n=t.answer,a=n.id,o=n.question;(0,t.restoreAnswer)(o.id,a)},e.setEditingState=function(t,n){"function"==typeof e.props.onEditingStateChange&&e.props.onEditingStateChange(t),e.setState({editing:t},n)},e.handleStartEditAnswer=function(){var t=e.props,n=t.draftStatus,a=t.hasPublishingDraft,o=t.isMobile,r=t.useNewPageFullScreenEditor,i=t.useMediumEditor,c=t.isAnswerPage,l=t.answer,s=l.id,u=l.question.id;n&&n.loading?P.a.alert("草稿正在加载中……"):a?P.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。"):o?e.context.startAddAnswer(e.props.answer.id):r&&!i||!c||i&&Object(No.b)()?Object(No.f)(u,s):e.setEditingState(!0,(function(){var t,n;null===(t=e.answerFormRef.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t)}))},e.handleCancelEditAnswer=function(){e.setEditingState(!1);var t=e.props,n=t.onCloseEditing,a=t.onCloseComment;"function"==typeof a&&a(),"function"==typeof n&&n()},e.handleSubmitAnswer=function(t){var n=e.props,a=n.answer.id,o=n.updateAnswer;return e.handleCancelEditAnswer(),o(a,t).then((function(t){return E.a.trackEvent(e.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),t}))},e.handleReportOpen=function(){var t=e.props.zaInfos.report;E.a.trackEvent(e.contentItem,Object.assign({action:"Report",element:"Button",is_intent:!0},t&&{id:t})),e.context.authRequired((function(){return e.setState({reportModalShown:!0})}),ae.X.report)()},e.handleReportHide=function(){e.setState({reportModalShown:!1})},e.handleFavlistsShown=function(t){var n=e.props,a=n.shouldOia,o=n.zaInfos.favlists;E.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},o&&{id:o})),a?e.createOpenInAppHandler("collect_answer")(t):e.disableAuth?e.handleToggleGuide():e.context.authRequired((function(){return e.setState({favlistsShown:!0})}),ae.X.favlists)()},e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;E.a.trackEvent(e.contentItem,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.handleShowAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!0})},e.handleCloseAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!1})},e.handleShowCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!0})},e.handleCloseCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.handleClickVideoMoreButton=function(){e.setState({shouldShowVideoDetails:!1})},e.startEditing=function(){var t=e.props,n=t.isAuthor,a=t.editable;e.context.currentUser&&n&&a&&e.handleStartEditAnswer()},e.addRewardTagline=function(t){var n=e.props.answer.id;Object(ve.a)(t,n)},e.createOpenInAppHandler=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.props,o=a.answer,r=o.type,i=o.id,l=a.blockReading,s=a.isSpecialQuestionOrAnswer;return function(a,o){if(a&&a.preventDefault(),l&&E.a.trackEvent(Object(c.a)(e),{id:5550,action:"Click"},{button:{text:"openapp"}}),s)location.href="zhihu://".concat(r,"/").concat(i,"?utm_app_name=zhihu_check");else{var u=Nn.a[o]||Nn.a[t],d=Object.assign(Object.assign({},l&&{yyb_ckey:"CK1430255776739"}),{},{preventToOIA:n});Nn.b[u]&&(d.launch_button=Nn.b[u]),Object(ee.e)(Object(we.a)({type:r,id:i}),d)}}},e.renderLabels=function(){var t=e.props.answer,n=t.isNormal;if((void 0===n||n)&&e.isPaidAnswer)return{labels:[],editingLabels:[]};var a=e.props,o=a.useNewLabels,r=a.canCollapse,i=a.relatedTo,c=a.showReviewingLabel,l=a.hideCommercialInviteLabel,s=e.state,u=s.contentExpanded,d=s.editing,f=Po({answer:t,canCollapse:r,showReviewingLabel:c}),p=Mo(t),h=Do({answer:t,canCollapse:r,hideCommercialInviteLabel:l}),m=_o(t);if(!o){var v=Object(b.b)(Pa.a,Object.assign(Object.assign({useOldLabels:!0,item:{isLabeled:!0}},p),{},{commercialProps:h,annotationProps:m,showLegacyPositiveLabel:Object(le.n)(t),editing:d}));return{labels:[f,v],editingLabels:[v]}}if(f||p)return{labels:[f,Object(b.b)(Pa.a,Object.assign({item:{isLabeled:!0}},p),"labels")],editingLabels:[]};var g=[Object(b.b)(Pa.a,{item:t,commercialProps:h,annotationProps:m,editing:d},"labels")];return{labels:u||i?g:[],editingLabels:g}},e.renderPrefix=function(){var t=e.props,n=t.answer,a=t.relatedTo,o={contentExpanded:e.state.contentExpanded,unescapable:Boolean(a)};return e.isVideoAnswer&&!e.contentDisplayed&&e.coCreate?Object(b.b)(Te.CoCreationLabel,{mb:"4px"}):Vo(n,o)},e.renderVoteButton=function(){var t=e.props,n=t.answer,a=t.shouldOia,o=t.zaInfos,r=o.voteUp,i=o.voteDown,c=t.isMuteSpecial,l=t.isMuteFreeze,s=t.isAuthor,u=e.context.currentUser,d=e.state.positionStatus,f=n.question,p=f.questionType,h=f.isMuted,m=n.relationship,v=(m=void 0===m?{}:m).isRecognized,g=m.voting,O=n.attachment,j=n.voteupCount,y="commercial"===p&&h||c||l;return e.isLegacyVideoAnswer?Object(b.b)(ua,{answer:n,id:O.attachmentId,voteupCount:j,voting:g,isOwner:s,disabled:y,currentUser:u}):Object(b.b)(ia.a,Object.assign(Object.assign({answer:n,disabled:y},a&&{onClick:e.createOpenInAppHandler("vote_answer")}),{},{disableAuth:e.disableAuth,isRecognized:v,handleToggleGuide:e.handleToggleGuide,positionStatus:d,zaIds:{voteUp:r,voteDown:i}}),"vote")},e.renderAuthorInfo=function(){var t=e.props,n=t.preset,a=t.relatedTo,o=t.answer,r=o.id,i=o.author,c=o.creationRelationship;if(e.coCreate){var l=!Ho(n);return Object(Te.renderDualAuthor)(n,i,c,l)}return!Ho(n)&&Object(b.b)(ra.a,{className:j()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":a}),preset:qo(n)?"plain":"default",author:i,relatedTo:a,id:r,userLinkV2:!0},"authorInfo")},e.renderMetaAndBeforeContent=function(){var t,n,a=e.props,r=a.preset,i=a.answer.creationRelationship,c=e.renderAuthorInfo(),l=e.renderAnswerExtraInfo(),s=e.renderLabels().labels,u=null==i||null===(t=i.coCreation)||void 0===t?void 0:t.refBy,d=null==i||null===(n=i.reference)||void 0===n?void 0:n.refBy,f=e.contentDisplayed&&(u||d)&&Object(b.b)(m.Box,{my:"16px",children:Object(b.b)(Te.CoCreationLinkCard,{type:"answer",coCreationRefBy:u,referenceRefBy:d})});return Fo(r)?[[c].concat(Object(o.a)(s),[f]),l]:[[c].concat(Object(o.a)(s),[f,l]),null]},e}return Object(i.a)(n,[{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}},{key:"isVideoAnswer",get:function(){var e=this.props.answer.attachment;return 2===(null==e?void 0:e.type)||"zvideo"===(null==e?void 0:e.type)||"video"===(null==e?void 0:e.type)}},{key:"isLegacyVideoAnswer",get:function(){var e=this.props.answer.attachment;return"zvideo"===(null==e?void 0:e.type)}},{key:"isAuthorInGeneral",get:function(){var e=this.props,t=e.isAuthor,n=e.isSubAuthor,a=e.hideCoCreationFeature;return t||n&&!a}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,a=t.byComment,o=t.editing,r=t.loadVideoDetails,i=t.isSearchSpecialSource,c=t.isMobile,l=t.isWechat,s=this.state.shareVideoQuery;if(s&&r(s).then((function(){e.setState({shouldShowVideoDetails:!0})})),n&&(this.loadAnswerConcernedVoters(),this.loadEntityWords()),a&&setTimeout((function(){return e.setState({commentsShown:Boolean(a)})})),o&&this.startEditing(),c&&!i&&this.showOiaModal(),c&&l)if(document.addEventListener("WeixinJSBridgeReady",(function(){e.handleLoadedNext()})),"complete"===document.readyState)this.handleLoadedNext();else{window.addEventListener("load",(function t(){window.removeEventListener("load",t),e.handleLoadedNext()}))}}},{key:"componentDidUpdate",value:function(e,t){!t.contentExpanded&&this.state.contentExpanded&&this.loadEntityWords(),!this.props.editing||e.editing||this.state.editing||this.startEditing()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,a=n.reshipmentSettings,o=n.commentPermission,r=e.answer,i=r.reshipmentSettings,c=r.commentPermission;!a&&i&&!o&&c&&setTimeout((function(){return t.settingsTogglerEl.click()}))}},{key:"getShareVideoId",value:function(){var e=this.props,t=e.location;return e.isMobile?t.query.preview_video_id:null}},{key:"renderReshipmentSettings",value:function(e){var t=this,n=this.context.currentUser;return Object.keys(Go).map((function(a){return"need_payment"===a&&null!=n&&n.isOrg?null:Object(b.b)(ke.a,{onClick:function(){return t.handleReshipmentSettings(a)},checked:a===e,children:Go[a]},a)}))}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=e.actor,a=e.action,o=e.concernedUpvoters,r=e.isHuman,i=e.useNewLabels,c=e.isMobile,l=t.id,s=t.voteupCount,u=t.markInfos,d=t.isNormal;if(!((!r||!c)&&(void 0===d||d)))return null;var f=(null==u?void 0:u.length)>0&&!i;return f||s?Object(b.b)(ko,{id:l,voteupCount:s,markInfos:f&&u,actorToken:null==n?void 0:n.urlToken,action:a,concernedUpvoters:o},"AnswerItemExtraInfo"):null}},{key:"renderSettings",value:function(){var e=this,t=this.context.currentUser,n=this.props,a=n.answer,o=a.id,r=a.collapsedBy,i=a.reshipmentSettings,c=a.commentPermission,l=a.question.questionType,s=a.rewardInfo,u=(s=void 0===s?{}:s).isRewardable,d=void 0!==u&&u,f=a.relevantInfo,p=a.creationRelationship,h=n.answer,m=n.canCollapse,v=n.isMobile;if(!t||!this.isAuthorInGeneral)return null;var g=Object(b.c)(b.a,{children:[this.renderReshipmentSettings(i),Object(b.b)(L.a,{}),Object(b.b)(xe.c,{target:h,onChange:this.props.updateAnswerCommentPermission,current:c}),Object(b.b)(L.a,{}),d&&Object(b.b)(L.b,{onClick:this.onCloseReward,children:"关闭赞赏"}),Object(b.b)(L.b,{onClick:this.openDeleteModal,children:"删除"}),"commercial"===l&&m&&"nobody"===r&&(!f||"brand_special"!==f.relevantType)&&[Object(b.b)(L.a,{},"MenuDivider"),Object(b.b)(L.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"},"MenuItem")]]});if(i&&c){var O,j,y=null==p||null===(O=p.coCreation)||void 0===O||null===(j=O.bizInfo)||void 0===j?void 0:j.canCancelPermission;return Object(b.b)(L.c,{toggler:Object(b.b)(B.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:S.a,label:!v&&"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:y?Object(b.b)(L.b,{children:Object(b.b)(Te.CancelCoCreation,{contentType:"answer",contentId:o})}):g},"settings")}return Object(b.b)(B.c,{preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:S.a,label:!v&&"设置"},"settings")}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?Object(b.b)(L.b,{onClick:function(){E.a.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer=".concat(e),target:"_blank",children:"申请授权"}):"disallowed"===t?Object(b.b)(L.b,{tag:"a",target:"_blank",href:"/term/zhihu-terms#sec-licence-6",children:"禁止转载"}):null}},{key:"renderOptions",value:function(){var e=this;if(!this.context.currentUser||this.isAuthorInGeneral)return null;var t=this.props,n=t.answer,a=t.canCollapse,o=t.renderExtraOptions,r=t.permission.canBrandAdminEdit,i=t.isMobile,c=t.isAuthor,l=n.id,s=n.reshipmentSettings,u=n.collapsedBy,f=n.question,p=f.questionType,h=f.brand,m=(h=void 0===h?{}:h).isPuQuestion,v=n.annotationAction,g=void 0===v?[]:v,O=n.annotationDetail,j={toggler:Object(b.b)(B.c,{preset:"plain",className:"OptionsButton",icon:A.a,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},y="commercial"===p,C="nobody"!==u;return c?null:Object(d.e)(L.c,Object.assign(Object.assign({},j),{},{key:"options"}),i&&Object(b.b)(mo.a,{answer:n}),a&&!y&&Object(b.b)(L.b,{onClick:C?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow,children:C?"取消隐藏":"隐藏"}),r&&y&&!C&&!m&&Object(b.b)(L.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"}),g&&g.some((function(e){return ae.d.add===e}))&&!O&&Object(b.b)(L.b,{onClick:this.handleShowAddAnnotationModal,children:"标记内容"}),g&&g.some((function(e){return ae.d.cancel===e}))&&O&&Object(b.b)(L.b,{onClick:this.handleShowCancelAnnotationModal,children:"撤销标记"}),Object(b.b)(L.b,{onClick:this.handleReportOpen,children:"举报"}),this.renderReshipment(l,s),o&&o({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=function(e){var t=e.thumbnail,n=e.voteupCount,a=e.question.id,o=e.id,r=e.createdTime,i=e.updatedTime,c=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/".concat(a,"/answer/").concat(o),dateCreated:new Date(1e3*r).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:c}}(this.props.answer);return Object.keys(e).map((function(t){return Object(b.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,a=(n=void 0===n?{}:n).winnersAnswerTokens,o=n.prizes;if(!n.status)return null;var r=["一","二","三"],i=null;return o&&a&&a.forEach((function(e,n){e.includes(t)&&null===i&&(i=o&&o[1]&&o[1].name?"得".concat(r[n],"等奖"):"奖")})),i&&Object(b.c)("div",{className:"AnswerItem-brandQuestionPrizeTip",children:["该回答在有奖问答中获",i]})}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,a=t.expanded,o=t.isBrandAnswer,r=n.question;return(a||e)&&(r&&"commercial"===r.questionType||o)?Object(b.b)(Qn.a,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e,t,n,a=this.props,o=a.shouldOia,r=a.answer,i=r.id,c=r.createdTime,l=r.updatedTime,s=r.question.id,u=r.playCount,d=r.attachment,f=u||(null==d||null===(e=d.zvideo)||void 0===e?void 0:e.playCount)||(null==d||null===(t=d.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.playCount)||0,p="".concat(ae.F,"/question/").concat(s,"/answer/").concat(i);return Object(b.b)(da.a,Object.assign(Object.assign({created:c,updated:l,href:p},this.isVideoAnswer&&f>0&&{videoPlayCount:Number(f)}),o&&{onClick:this.createOpenInAppHandler("click_answer")}))}},{key:"contentDisplayed",get:function(){var e=this.props.relatedTo,t=this.state.contentExpanded;return Boolean(e||t)}},{key:"coCreate",get:function(){var e=this.props,t=e.answer.creationRelationship,n=e.hideCoCreationFeature;return Boolean(!n&&Object(Te.isCoCreateRelation)(t))}},{key:"render",value:function(){var e,t,n,o=this,r=this.props,i=r.answer,c=r.reward,l=r.answer,s=l.id,u=l.isNormal,d=void 0===u||u,f=l.isDelete,p=l.question,h=l.rewardInfo,v=void 0===h?{}:h,g=l.question,O=g.title,y=g.id,C=g.questionType,w=g.commercial,x=g.brand,k=(x=void 0===x?{}:x).isPuQuestion,S=l.author,A=l.excerpt,E=l.content,L=l.enableConvert,M=l.editableContent,D=l.commentCount,_=l.adminClosedComment,V=l.collapsedBy,U=l.isSticky,F=l.thumbnail,q=l.thumbnailExtraInfo,H=l.reviewInfo,G=(H=void 0===H?{}:H).isReviewing,K=H.editType,Z=l.relevantInfo,Q=(Z=void 0===Z?{}:Z).relevantType,Y=l.annotationDetail,J=l.paidInfo,X=void 0===J?{}:J,ee=l.creatorRightsNotification,te=l.attachment,ne=l.vessayInfo,ie=l.videoAnswerData,ce=r.relatedTo,le=r.editable,se=r.byComment,ue=r.draft,de=r.expanded,be=r.lastreadTouchable,fe=r.canCollapse,pe=r.canStick,he=r.itemProp,me=void 0===he?"answer":he,ve=r.addAnnotation,ge=r.cancelAnnotation,Oe=r.showNotification,je=r.dataZaIndex,ye=r.blockReading,xe=r.isWechat,ke=r.isHuaweiBrowser,Te=r.isHonor,Ie=r.lessExcerpt,Ee=r.isHuman,Ne=r.ua,Be=r.shouldSpecialOia,ze=r.shareVideoDetail,Le=r.trackPromotionClick,Pe=r.formatContent,Me=r.zaInfos,De=Me.expand,_e=Me.title,Ve=Me.thank,Ue=Me.toggleComment,Fe=Me.share,qe=Me.getCommentAction,He=r.handleToggleSticky,Ge=r.renderActionButtons,Ke=r.permission.canBrandAdminEdit,We=r.readContentRightsNotification,Ze=r.ecommerce,Qe=r.isMobile,Ye=r.canAbstract,Je=r.isBaidu,Xe=r.isMuteSpecial,$e=r.isMuteFreeze,et=r.isAuthor,tt=r.shouldUseArticleCard,nt=r.isTopic,at=r.xiaomi,ot=r.showCommentForOia,rt=r.pathname,it=r.richContentKey,ct=r.useVessayV2,lt=r.shouldAlwaysShowPlayer,st=r.isShenma,ut=r.isRecommend,dt=r.videoRef,bt=r.alwaysShowVolumeButton,ft=r.showHeightLight,pt=void 0!==ft&&ft,ht=r.truncateDisabled,mt=void 0!==ht&&ht,vt=r.forceCommentOia,gt=void 0!==vt&&vt,Ot=r.hideCoCreationFeature,jt=r.entityWords,yt=r.isAnswerPage,Ct=r.useMediumEditor,wt="function"==typeof He,xt=this.context.currentUser,kt="".concat(ae.F,"/question/").concat(y,"/answer/").concat(s),St=this.state,At=St.reportModalShown,Rt=St.deleteModalShown,Tt=St.collapseModalShown,It=St.favlistsShown,Et=St.editing,Nt=St.commentsShown,Bt=St.commentsAutoFocus,zt=St.commentPattern,Lt=St.addAnnotationModalShown,Pt=St.cancelAnnotationModalShown,Mt=St.positionStatus,Dt=St.shareVideoQuery,_t=St.shouldShowVideoDetails,Vt=St.contentExpanded,Ut=St.showWechatExpand,Ft=St.skipModalShow,qt=St.autoExpand,Ht=St.shownLoadingBar,Gt=St.wxIsReady,Kt=null==te||null===(e=te.video)||void 0===e?void 0:e.campaign,Wt=Dt&&_t?{title:ze.title,thumbnail:ze.coverUrl,isLens:!0,id:Dt,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(Dt)}:null;if(f)return Object(b.c)("div",{className:"AnswerItem-deleted",children:["你已经删除了该问题的回答，如果需要修改，请先  ",Object(b.b)("a",{role:"button",tabIndex:0,onClick:this.handleRestoreAnswer,children:"撤销删除"})]});var Zt=!(G&&"create"===K),Qt="commercial"===C,Yt="nobody"!==V,Jt=F||(null==te||null===(t=te.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.thumbnail);if(Et){var Xt,$t=Ct?oa.a:aa.a,en=Object(b.c)("div",{children:[Object(b.c)(m.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return[{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}},Ct&&{background:e.colors.GBK99A}]},children:[Object(b.b)("div",{css:function(e){return[{fontWeight:"bold",fontSize:15,color:e.colors.GBK03A,borderBottom:"1px solid ".concat(e.colors.GBK10A)},Ct&&{borderBottom:"none",paddingLeft:20}]},children:this.isVideoAnswer?"本回答为视频回答":"本回答为图文回答"}),Object(b.b)(na.a,{handleClick:null===(Xt=this.answerFormRef.current)||void 0===Xt?void 0:Xt.toggleFullscreen,useMediumEditor:Ct})]}),Object(b.b)($t,{css:!(Ct&&yt)&&{margin:"0 -20px -20px"},className:"AnswerItem-form",isReediting:!0,imperativeRef:this.answerFormRef,question:p,answer:i,defaultValue:M,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:v.isRewardable,addRewardTagline:this.addRewardTagline,useMediumEditor:Ct})]});return Ct&&yt?Object(b.b)(oe.a,{children:Object(b.b)(z.d,{css:{overflow:"visible"},children:Object(b.c)("div",{css:function(e){return{background:e.colorMod(e.colors.GBK10C).alpha(.45)}},children:[Object(b.b)(re.a,{}),en]})})}):en}var tn=this.renderMetaAndBeforeContent(),nn=Object(a.a)(tn,2),an=nn[0],on=nn[1],rn="mainEntityOfPage"===me||"acceptedAnswer"===me,cn=Be&&!rn,ln=!Wt&&this.renderEditTime(),sn=X.type,un=X.content,dn=this.isPaidAnswer,bn=dn?un:E,fn=!ce&&Object(b.b)(go,{questionId:y,title:O,href:kt,zaTitleId:_e,showStickyMark:wt&&this.props.isSticky,showHeightLight:pt,onClick:Le}),pn=d||et,hn=at&&rt.match(/\/question\/\d+$/g),mn=Pe?Pe(bn||A,i):bn||A||"",vn=Boolean(L||(null==ne?void 0:ne.enableVideoTranslate)),gn=ie&&(lt||this.contentDisplayed),On=ut&&this.isVideoAnswer;return Object(b.c)(Jn.e,{onRef:function(e){return o.contentItem=e},className:"AnswerItem","data-za-index":je,"data-zop":JSON.stringify({authorName:S.name,itemId:s,title:O,type:"answer"}),data:i,link:kt,meta:On?null:an,title:fn,lastreadTouchable:be,name:s,itemProp:me,itemType:"http://schema.org/Answer",itemScope:!0,children:[Object(b.b)(N.d,{ref:this.zaRef}),d&&(!nt||Vt)&&Object(b.b)(To.b,{answer:i}),this.renderMeta(),Qt&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),pn?Object(b.c)(b.a,{children:[this.isVideoAnswer&&Object(b.b)(Ro,Object.assign(Object.assign({shouldExpand:this.contentDisplayed,showPlayer:gn,campaign:Kt,answer:i,videoAnswerData:ie,videoRef:dt,alwaysShowVolumeButton:bt},On?{meta:an}:{}),{},{hideCoCreationFeature:Ot})),Object(b.c)(da.b,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({entityWords:jt,richContentKey:it,className:j()({"RichContent-mobileBaidu":Je,"RichContent-hasCatalog":Object(Re.a)(i,"answer"),"AnswerItem-highlight":pt}),truncateDisabled:mt,imperativeRef:this.richContentRef,canAbstract:Ye,onToggleExpend:this.handleExpand},cn&&{expandText:"App 内查看"}),ye&&rn&&{expandText:"展开阅读全文"}),Qe&&Ee&&!rn&&{collapsedHeight:180}),{},{cover:lt?null:Jt,hasVideo:!lt&&Boolean(q&&"video"===q.type)||this.isVideoAnswer,videoData:Wt,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(ce),expanded:de,onPositionStatusChange:this.handlePositionStatusChange,before:on,excerpt:Pe?Pe(A,i):A,html:mn,prefix:this.renderPrefix(),isNovel:"interactive_novel"===sn,ecommerce:Ze,after:Object(b.c)("div",{children:[Object(b.b)(To.a,{answer:i,ua:Ne}),Object(b.b)(za,{className:"AnswerItem-CommercialQuestionTail",commercial:w}),!Qe&&Vt&&Object(b.b)(oo,{contentType:"answer",contentToken:s,author:S}),ln,xt&&et&&le&&Object(b.b)(Se.a,{children:Object(b.c)("a",{className:"AnswerItem-editButton",role:"button",tabIndex:0,onClick:this.handleStartEditAnswer,children:[Object(b.b)(R.a,{text:!0,center:!0})," ",Object(b.c)("span",{className:"AnswerItem-editButtonText",children:["修改",ue&&ue.editableContent&&"（有未发布的编辑草稿）"]})]})}),!Qe&&xt&&Object(b.b)(Ta,{imperativeRef:this.rewardContainerRef,reward:c,currentUser:xt,rewardInfo:v,isAuthor:et,id:s,author:S,ua:Ne,balanceEnable:!1})]}),data:i,onClick:ye&&rn?function(){(hn||xe||st)&&Qe?(o.setState({autoExpand:!1}),o.richContentRef.current.handleExpand()):Qe?o.setState({skipModalShow:!0,autoExpand:!1}):o.setState({showWechatExpand:!0,autoExpand:!1})}:cn?o.createOpenInAppHandler("expand_answer"):o.disableAuth&&ye&&o.handleToggleGuide},Ie?{limit:74}:{}),this.coCreate?{limitWithImage:74}:{}),{},{zaIds:{expand:De},shouldUseArticleCard:tt,children:[Zt&&Ke&&Qt&&Yt&&!k&&Object(b.b)(B.c,{className:j()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===V}),onClick:this.handleUpdateAnswerCollapsed,children:"公开回答"}),Zt&&pe&&!Yt&&"brand_special"!==Q&&Object(b.b)(B.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick,children:U?"取消精选":"设为精选"}),!this.props.isBaidu&&Ge({componentList:[{name:"vote",component:Zt&&this.renderVoteButton()},{name:"comment",component:Zt&&Object(b.b)($n.a,Object.assign(Object.assign({onInstance:function(e){return o.commentButton=e},onClick:this.openModal},(Qe&&Ee&&Be||gt)&&{onClick:this.createOpenInAppHandler("comment_answer")}),{},{commentsShown:Nt,commentClosed:_,count:D,positionStatus:Mt,zaInfos:{toggleComment:Ue,getCommentAction:qe}}),"comment")},{name:"share",component:Zt&&!Qe&&Object(b.b)(Xn.a,{disabled:Xe||$e,id:s,type:"answer",title:O,authorName:S&&S.name,href:kt,positionStatus:Mt,zaShareId:Fe},"share")},{name:"favlist",component:Zt&&!Qe&&(!xt||!xt.isOrg)&&Object(b.b)(Zn.a,{onRef:function(e){return o.favButtonRef=e},onClick:this.handleFavlistsShown,label:Qe?"":"收藏",disabled:Xe||$e},"favlist")},!Qe&&{name:"thank",component:Zt&&!et&&Object(b.b)(mo.a,Object.assign({zaInfo:Ve,answer:i,disabled:Xe||$e},this.isLegacyVideoAnswer&&{zVideoId:te.attachmentId}),"thank")},{name:"sticky",component:!Qe&&wt&&et&&Object(Ce.a)(xt)&&Object(b.b)(B.c,{preset:"plain",onClick:He,icon:this.props.isSticky?T.a:I.a,label:this.props.isSticky?"取消置顶":"置顶"},"sticky")},{name:"vessay",component:!Qe&&et&&vn&&Object(b.b)(Io.a,{type:"answer",id:s,useVessayV2:ct,isAuthor:et},"vessay")},{name:"options",component:Qe&&Ee||Zt&&this.renderOptions()},{name:"settings",component:Qe&&Ee||this.renderSettings()},{name:"annotation",component:!Vt&&Object(b.b)(Yn.a,{annotationDetail:Y},"annotation")}]})]}))]}):ln,pn&&!dn&&Object(b.b)(ro.a,{content:bn,type:"answer",urlToken:String(s)}),ot&&rt.startsWith("/question")&&Object(b.b)("div",{children:Object(b.b)(Bn,{parent:i})}),Object(b.b)(ea.a,{shown:Nt,parent:i,byComment:se,commentPattern:zt,autoFocus:Bt,onClose:this.closeModal}),Object(b.b)(ta.a,{type:"answer",urlToken:s,shown:At,onClose:this.handleReportHide,zaEnabled:!0}),Object(b.b)(W,{addAnnotation:ve,onClose:this.handleCloseAddAnnotationModal,shown:Lt,type:ae.e,urlToken:s,showNotification:Oe}),Object(b.b)($,{cancelAnnotation:ge,onClose:this.handleCloseCancelAnnotationModal,shown:Pt,type:ae.e,urlToken:s,showNotification:Oe}),xt&&et&&Object(b.b)(Ia.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:Rt,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),fe&&Object(b.b)(Ia.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:Tt,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),Object(b.b)(Ln.a,{id:s,type:"answer",shown:It,onClose:this.handleFavlistHide,zaEnabled:!0}),Qe&&this.state.guideShown&&Object(b.b)(Ae.a,{redirectUrl:kt,buttons:[xe?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],urlScheme:Object(we.a)({type:"answer",id:s}),onClose:this.handleToggleGuide}),Object(b.b)(Wn,{notification:ee,onRead:function(e){We("answer",s,e)},onUseAdmire:function(){o.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var e=o.props.postToolsRecommend;P.a.confirm(Object(b.b)("div",{style:{textAlign:"center"},children:"该推荐将使用本月的 1 次推荐次数。"}),{title:"确定是否推荐？"}).then((function(){return e("answer",String(s))}),(function(){}))}}),Object(b.b)(uo,{show:Ut&&!hn&&Qe&&!xe,id:i.id,type:i.type,onCancel:function(){o.setState({showWechatExpand:!1},(function(){qt||o.richContentRef.current.handleExpand()}))},onSubmit:function(){o.setState({showWechatExpand:!1}),xe?Gt?o.createOpenInAppHandler(qt?"expand_answer2":"expand_answer1")():o.setState({shownLoadingBar:!0}):o.createOpenInAppHandler(qt?"expand_answer2":"expand_answer1")()}}),Object(b.b)(bo,{show:Ft,id:i.id,type:i.type,onCancel:function(){o.setState({skipModalShow:!1},(function(){o.richContentRef.current.handleExpand()}))},onSubmit:function(){o.createOpenInAppHandler("expand_answer",ke||Te)()}}),Object(b.b)(ho,{show:Ht&&Qe})]})}}]),n}(f.PureComponent);Yo.contextTypes={currentUser:g.a.object,authRequired:g.a.func,startAddAnswer:g.a.func},Yo.propTypes={relatedTo:g.a.oneOf(["question","answer"]),editable:g.a.bool,preset:g.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:g.a.bool,shareVideoDetail:g.a.object,formatContent:g.a.func,renderExtraOptions:g.a.func,zaInfos:g.a.object,onToggleExpand:g.a.func,useNewLabels:g.a.bool,renderActionButtons:g.a.func,canAbstract:g.a.bool,trackPromotionClick:g.a.func,isSearchSpecialSource:g.a.bool,hideCommercialInviteLabel:g.a.bool,hideCoCreationFeature:g.a.bool},Yo.defaultProps={editable:!1,canAbstract:!1,isSearchSpecialSource:!1,preset:"primary",zaInfos:{},renderActionButtons:mo.b,shouldAlwaysShowPlayer:!1,hideCoCreationFeature:!1};var Jo,Xo,$o=Object(h.compose)((Xo=function(e){var t=e.answer;return{content:{type:"Answer",token:String(t.id)}}},function(e){return ce()((function(t){return Object(b.b)(N.b,Object.assign(Object.assign({},"function"==typeof Xo?Xo(t):Xo),{},{children:Object(b.b)(e,Object.assign({},t))}))}),e)}),(Jo=function(e){var t=e.zaInfos,n=void 0===t?{}:t;return Object.assign({zaType:"Card"},void 0!==n.index&&{view:{elementLocation:{card:{index:Number(n.index)}}}})},function(e){return ce()((function(t){return Object(b.b)(N.e,Object.assign(Object.assign({},"function"==typeof Jo?Jo(t):Jo),{},{children:Object(b.b)(e,Object.assign({},t))}))}),e)}),Object(ne.b)((function(e){var t=e.answer,n=e.trackCardShow,a=void 0===n||n,o=e.zaInfos,r=void 0===o?{}:o;return Object.assign(Object.assign(Object.assign({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},r.index&&{index:r.index}),r.cardShow&&{view:{id:r.cardShow}}),{},{trackCardShow:a})})),w.withRouter,Object(y.connect)((function(e,t){var n,a,o=e.entities.drafts,r=void 0===o?{}:o,i=e.question,c=(i=void 0===i?{}:i).draftStatus,l=e.answers,s=(l=void 0===l?{}:l).paidContent,u=void 0===s?{}:s,d=l.entityWords,b=void 0===d?{}:d,f=e.reward,p=e.switches,m=e.video,v=(m=void 0===m?{}:m).shareVideoDetail,g=e.env,O=g.edition,j=g.userAgent,y=t.answer,C=t.relatedTo,w=t.location.pathname,x=w.split("/"),k=!1,S=!0;!x[1]||"org"!==x[1]&&"people"!==x[1]||(k=x[2]&&-1!==Zo.indexOf(x[2]),S=!1);var A=Object(h.compose)(Wo,Ko)(Qo(e,t)),R=Object(je.b)(e),T=["question","answer"].includes(C),I=Object(ge.isHumanSelector)(e)&&T,E=Object(ge.shouldSpecialOiaSelector)(e),N=j.Mobile,B=j.Qzone,z=N&&E&&!B,L=Object(Ie.c)(A.creationRelationship),P=Object(je.i)(e,L),M=(null!==(n=null===(a=y.relationship)||void 0===a?void 0:a.isAuthor)&&void 0!==n?n:Object(je.i)(e,y.author))&&!P;return{entityWords:b[y.id],draft:y&&r["question_".concat(y.question.id)],draftStatus:null==c?void 0:c[y.question.id],answer:A,ua:Object(ge.uaSelector)(e),pathname:w,xiaomi:O.xiaomi,isShenma:O.shenma||/quark/gi.test(e.env.userAgent.origin)||j.UC,reward:f,switches:p,isHuman:I,shouldOia:Object(ge.shouldOiaSelector)(e)&&!k,shouldSpecialOia:Object(ge.shouldSpecialOiaSelector)(e)&&!k,isSpecialQuestionOrAnswer:Object(ge.specialQuestionOrAnswerSelector)(e,{type:T&&C,id:T?"answer"===C?y.id:y.question.id:""}),shouldAllAutoExpand:"1"===Object(ge.abParamSelector)(e,"web_mweb_launch"),useVessayV2:Object(ge.abParamSelector)(e,zn.b)===zn.a,isMobile:Object(ge.isMobileSelector)(e),isWechat:e.env.userAgent.Wechat,isHuaweiBrowser:/huaweibrowser/gi.test(e.env.userAgent.origin)||/huawei/gi.test(e.env.userAgent.origin)&&!e.env.userAgent.UC&&!e.env.userAgent.Wechat&&!e.env.userAgent.MQQBrowser&&!/quark/gi.test(e.env.userAgent.origin)&&!/baidu/gi.test(e.env.userAgent.origin),isHonor:/honor/gi.test(e.env.userAgent.origin)&&/MQQBrowser/gi.test(e.env.userAgent.origin),concernedUpvoters:Object(le.g)(e,{id:y.id}),currentUser:R,shareVideoDetail:v,isBrandAnswer:Object(le.l)(y),permission:Object(se.cb)(e),ecommerce:Object(te.c)(e,{type:"answer",urlToken:String(y.id)}),isBaidu:Object(ge.shouldOiaSelector)(e)&&O.baidu,showCommentForOia:Object(ge.shouldOiaSelector)(e),blockReading:z,paidContent:u,isMuteSpecial:Object(se.E)(A.question),isMuteFreeze:Object(se.D)(A.question),isAuthor:M,isSubAuthor:P,shouldUseArticleCard:"1"===Object(ge.abParamSelector)(e,"gue_visit_n_artcard"),abTestShowMobileSignInModal:"1"===Object(ge.abParamSelector)(e,"h5_signin"),isQuestionPage:S,useNewPageFullScreenEditor:-1!==["3","4"].indexOf(Object(ge.abParamSelector)(e,"pc_fullsize")),useMediumEditor:-1!==["1","2"].indexOf(Object(ge.abParamSelector)(e,"pc_fullsize"))}}),{updateAnswerReshipmentSettings:le.H,updateAnswerCommentPermission:le.G,updateAnswerCollapsed:le.F,updateAnswerStick:le.J,deleteAnswer:le.i,restoreAnswer:le.B,updateAnswer:le.E,loadAnswerForSettings:le.u,showNotification:me.h,addAnnotation:function(e,t,n,a){return{API:{types:pe.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(be.a)(Object(de.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:a}))},UPDATE:{success:function(n){var a=he(e);return a?Object(ue.a)({},a,Object(ue.a)({},t,n)):null}}}},cancelAnnotation:function(e,t,n,a){return{API:{types:pe.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(be.a)(Object(de.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:a}))},UPDATE:{success:function(n){var a=he(e);return a?Object(ue.a)({},a,Object(ue.a)({},t,Object.assign(Object.assign({},n),{},{annotationDetail:null}))):null}}}},addRewardTagline:ve.a,updateAnswerReward:le.I,getVoteDownReason:le.k,selectVoteDownReason:le.D,loadAnswerConcernedVoters:le.q,fillCurrentUserIfNeeded:je.e,loadVideoDetails:Oe.d,readContentRightsNotification:ye.uc,postToolsRecommend:ye.tc,showMobileSignInModal:se.ib,loadAnswerEntityWords:le.s}),La.c)(Yo)},990:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(22),o=n.n(a),r=n(3),i=n.n(r),c=n(0),l=n.n(c),s=n(13),u=n.n(s),d=n(7),b=function(){return Object(d.g)(l.a.Fragment,null)},f={SkeletonH01:function(e){var t=e.lineClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}))},SkeletonP01:function(e){var t=e.lineClass,n=e.blockClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:n}),Object(d.g)("div",null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t})))},SkeletonT01:function(e){var t=e.lineClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}))},SkeletonT02:function(e){var t=e.lineClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}))},SkeletonC01:function(e){var t=e.lineClass,n=e.blockClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:n}),Object(d.g)("div",null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t})))},SkeletonC02:function(e){var t=e.lineClass,n=e.blockClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t})),Object(d.g)("div",{className:n}))},SkeletonI01:function(e){var t=e.blockClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:t}))},SkeletonSpacing:b,SkeletonFill:b},p=l.a.memo((function(e){var t,n=e.variant,a=void 0===n?"H01":n,r=e.height,i=e.width,c=void 0===i?"auto":i,l=e.animation,s=void 0===l?"ease-in":l,b="skeleton__line--".concat(a.toLowerCase()),p="skeleton--".concat(a.toLowerCase()),h=u()(o()({skeleton__block:!0},"skeleton__block--".concat(a.toLowerCase()),!0)),m=u()(o()({skeleton__line:!0},b,!0)),v=u()((t={skeleton:!0},o()(t,p,!0),o()(t,"skeleton--ease-in","ease-in"===s),t)),g={width:c};r&&["Spacing","Fill"].includes(a)&&(g.height="number"==typeof r?"".concat(r,"px"):r);var O=f["Skeleton".concat(a)];return Object(d.g)("section",{className:v,style:g},Object(d.g)(O,{variant:a,lineClass:m,blockClass:h}))}));p.propTypes={variant:i.a.string,height:i.a.oneOfType([i.a.string,i.a.number]),width:i.a.oneOfType([i.a.string,i.a.number]),animation:i.a.oneOfType([i.a.bool,i.a.string])};var h=p,m=n(28),v=n.n(m);var g=l.a.memo((function(e){var t=e.content,n=function(e){return("string"==typeof e?e.split(","):e).map((function(e){var t=e.split("-"),n=v()(t,2),a=n[0],o=n[1];return["Spacing","Fill"].includes(a)?{type:a,height:+o}:{type:a,count:+o||1}}))}(void 0===t?"T01":t);return Object(d.g)(l.a.Fragment,null,n.map((function(e,t){var n=e.type,a=e.count,o=e.height;return a?Array.from({length:a}).map((function(e,a){return Object(d.g)(h,{variant:n,key:"".concat(t,"-").concat(a)})})):Object(d.g)(h,{variant:n,height:o,key:"".concat(t,"-").concat(o)})})))}));g.prototype={content:Object(r.oneOfType)([Object(r.arrayOf)(r.string),r.string])}},993:function(e,t,n){"use strict";var a=n(21),o=n.n(a),r=n(25),i=n.n(r),c=n(23),l=n.n(c),s=n(27),u=n.n(s),d=n(14),b=n.n(d),f=n(31),p=n.n(f),h=n(39),m=n.n(h),v=n(3),g=n.n(v),O=n(0),j=n(13),y=n.n(j),C=n(178),w=n(36),x=n(7),k=["className","tag","name","value"],S=["className","divider","children","items"];function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return u()(this,n)}}function R(e){var t=e.className,n=e.tag,a=e.name,o=e.value,r=p()(e,k),i="div";return n?i=n:r.href?i="a":r.onClick&&(i=w.c),Object(x.g)(i,m()({className:y()("NumberBoard-item",t)},r),Object(x.g)("div",{className:"NumberBoard-itemInner"},Object(x.g)("div",{className:"NumberBoard-itemName"},a),Object(x.g)("strong",{className:"NumberBoard-itemValue",title:o},Object(C.formatNumber)(o))))}var T=function(e){l()(n,e);var t=A(n);function n(){return o()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.divider,a=e.children,o=e.items,r=p()(e,S);return Object(x.g)("div",m()({className:y()("NumberBoard",t,{"NumberBoard--divider":n})},r),a||o.map((function(e){return Object(x.g)(R,m()({key:e.name},e))})))}}]),n}(O.Component);T.propTypes={divider:g.a.bool},T.defaultProps={divider:!1},T.Item=R;var I=T;t.a=I},994:function(e,t,n){"use strict";var a=n(49),o=n(33),r=n(1),i=n(0),c=n.n(i),l=n(55),s=n(927),u=n(163),d=n(111),b=n.n(d),f=n(852),p=n(86),h=Object.assign;var m=function(e){return c.a.createElement(p.a,h({width:"49",height:"48",viewBox:"0 0 49 48"},e),c.a.createElement("path",{fill:"currentColor",d:"M24 36a4 4 0 110 8 4 4 0 010-8zm3-32c1.105 0 1.91.9 1.801 1.993l-2.593 26.009c-.055.551-.55.998-1.099.998h-2.218a1.127 1.127 0 01-1.1-.998L19.2 5.993c-.11-1.1.688-1.993 1.8-1.993H27z"}))},v=n(454),g=["text","icon","onClose","delay"],O={success:Object(r.b)(f.a,{size:24}),fail:Object(r.b)(m,{size:24})},j=function(e){var t=e.text,n=e.icon,c=e.onClose,u=e.delay,d=Object(o.default)(e,g),b=Object(i.useState)(!0),f=Object(a.a)(b,2),p=f[0],h=f[1],m=Object(s.e)(p,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}});return n="string"==typeof n?O[n]:n,Object(i.useEffect)((function(){setTimeout((function(){h(!1),c&&c()}),u||1500)}),[u,c]),m.map((function(e){var a=e.item,o=e.props,i=e.key;return a?Object(r.b)(s.a.div,{style:o,children:Object(r.c)(l.Flex,Object.assign(Object.assign({},d),{},{p:"18px",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"GBK04A",css:function(e){return{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"14px",maxWidth:200,background:e.colorMod(e.colors.GBK99A).alpha(.85),pointerEvents:"none",textAlign:"center"}},children:[n,Object(r.b)(l.Text,{fontWeight:"bold",css:[{lineHeight:"20px"},n&&{marginTop:"8px"}],children:t})]}))},i):null}))};t.a=function(){var e=Object(v.b)(),t=e.addInstance,n=e.removeInstance;return Object(i.useCallback)((function(e){var a,o=e.icon,i=e.text,c=e.delay;return new Promise((function(e){a=Object(r.b)(u.a,{children:Object(r.b)(j,{icon:o,text:i,onClose:e,delay:c})},b()("toast")),t(a)})).finally((function(){return function(e){return setTimeout((function(){return n(e)}),300)}(a)}))}),[t,n])}},995:function(e,t,n){"use strict";var a=n(21),o=n.n(a),r=n(25),i=n.n(r),c=n(23),l=n.n(c),s=n(27),u=n.n(s),d=n(14),b=n.n(d),f=n(0),p=n(7);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=h(n);function n(){return o()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){return Object(p.g)("svg",{width:"30",height:"30",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",className:"CircleLoadingBar","aria-hidden":"true"},Object(p.g)("g",null,Object(p.g)("circle",{className:"path",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})))}}]),n}(f.Component);t.a=m},999:function(e,t,n){e.exports=n(209),e.exports.CJKSpace=n(1169).CJKSpace}}]);
//# sourceMappingURL=main.shared_f30f7459f944e851b885959dfde412e92f3a8d2e.96f35addf342dc76d7a3.js.map